--Stealed clientside server code by exechack.cc
--Hostname: !ðŸ’ â‡›SuperiorServers.co - CWRP - UPDATED MAP & CONTENT! - Part 12/12 - 06/04/2025


--PATH addons/gpakr_out/lua/gpakr/battalion3-data.lua:
AddCSLuaFile()
return {File='sup/gpakr/cw/battalion3-2179741202.bsp',FileName='battalion3',CRC='2179741202',Len=82969564,ShouldLoad=true}
--addons/gpakr_out/lua/gpakr/drones-data.lua:
AddCSLuaFile()
return {File='sup/gpakr/cw/drones-3820376583.bsp',FileName='drones',CRC='1483919649',Len=1455689,ShouldLoad=true}
--addons/gpakr_out/lua/gpakr/jedi2-data.lua:
AddCSLuaFile()
return {File='sup/gpakr/cw/jedi2-3915265709.bsp',FileName='jedi2',CRC='3915265709',Len=87272094,ShouldLoad=true}
--addons/!lpakr_out/lua/dash/extensions/chat.lua:
return lpakr()()
--addons/!lpakr_out/lua/dash/extensions/client/draw.lua:
local a=surface.SetDrawColor;local b=surface.SetMaterial;local c=surface.DrawRect;local d=surface.DrawTexturedRect;local e=render.UpdateScreenEffectTexture;local f=render.SetScissorRect;local ScrW=ScrW;local ScrH=ScrH;local SysTime=SysTime;local FrameTime=FrameTime;local Vector=Vector;local Matrix=Matrix;local function g(h,i,j,k,l)if!l then l=1 end;c(h,i,j,l)c(h,i+k-l,j,l)c(h,i,l,k)c(h+j-l,i,l,k)end;function draw.Box(h,i,j,k,m)a(m)c(h,i,j,k)end;function draw.Outline(h,i,j,k,m,n)a(m)g(h,i,j,k,n)end;function draw.OutlinedBox(h,i,j,k,m,o,n)a(m)c(h+1,i+1,j-2,k-2)a(o)g(h,i,j,k,n)end;local p={}local q=Material'pp/blurscreen'function draw.BlurResample(r)a(255,255,255)b(q)for s=1,3 do q:SetFloat('$blur',s/3*(r||8))q:Recompute()e()for t,u in ipairs(p)do f(u.x,u.y,u.x+u.w,u.y+u.h,true)d(0,0,ScrW(),ScrH())f(0,0,0,0,false)p[t]=nil end end end;function draw.BlurBox(h,i,j,k)local v=#p;if v>100 then return end;p[v+1]={x=h,y=i,w=j,h=k}end;function draw.BlurPanel(w)local h,i=w:LocalToScreen(0,0)local j,k=w:GetSize()draw.BlurBox(h,i,j,k)end;draw.Blur=draw.BlurPanel;function draw.TextRotated(x,h,i,y,z,A)surface.SetFont(z)surface.SetTextColor(y)local B,C=surface.GetTextSize(x)local D=-math.rad(A)local E=math.pi/2;local F=Matrix()F:SetAngles(Angle(0,A,0))F:SetTranslation(Vector(h,i,0))cam.PushModelMatrix(F)surface.SetTextPos(0,0)surface.DrawText(x)cam.PopModelMatrix()end;function draw.Circle(h,i,G,H)local I={}table.insert(I,{x=h,y=i,u=0.5,v=0.5})for s=0,H do local J=math.rad(s/H*-360)table.insert(I,{x=h+math.sin(J)*G,y=i+math.cos(J)*G,u=math.sin(J)/2+0.5,v=math.cos(J)/2+0.5})end;local J=math.rad(0)table.insert(I,{x=h+math.sin(J)*G,y=i+math.cos(J)*G,u=math.sin(J)/2+0.5,v=math.cos(J)/2+0.5})surface.DrawPoly(I)end;local K=Material'pp/colour'K:SetTexture('$fbtexture',render.GetScreenEffectTexture())local L={['$pp_colour_addr']=0,['$pp_colour_addg']=0,['$pp_colour_addb']=0,['$pp_colour_brightness']=0,['$pp_colour_contrast']=1,['$pp_colour_colour']=1,['$pp_colour_mulr']=0,['$pp_colour_mulg']=0,['$pp_colour_mulb']=0,['$pp_colour_inv']=0}function draw.ColorModify(M)render.CopyRenderTargetToTexture(render.GetScreenEffectTexture())for t,u in pairs(L)do K:SetFloat(t,M[t]||u)end;render.SetMaterial(K)render.DrawScreenQuad()end
--addons/!lpakr_out/lua/dash/extensions/client/surface.lua:
return lpakr()()
--addons/!lpakr_out/lua/dash/libraries/nw.lua:
return lpakr()()
--addons/!lpakr_out/lua/dash/libraries/nw.lua:
nw=nw||{Data={[0]={}},Vars={},Mappings={},Callbacks={}}local a=nw.Vars;local b=nw.Mappings;local c=nw.Data;local d=c[0]local e=nw.Callbacks;local f={}f.__index=f;RegisterMetaTable('Netvar',f)local g={[3]=3,[7]=4,[15]=5,[31]=6,[63]=7,[127]=8,[255]=9,[511]=10}local h=2;local i=FindMetaTable'Entity'local pairs=pairs;local Entity=Entity;local j=net.WriteUInt;local k=net.ReadUInt;local l=net.Start;local m=SERVER&&net.Send||net.SendToServer;local n=net.Broadcast;local o=SortedPairsByMemberValue;function nw.Register(p)local q={Name=p,NetworkString='nw_'..p,WriteFunc=net.WriteType,ReadFunc=net.ReadType,SendFunc=function(self,r,s,t)if t!=nil then m(t)else n()end end}setmetatable(q,f)a[p]=q;if SERVER then else net.Receive(q.NetworkString,function()local u,s=q:_Read()if!c[u]then c[u]={}end;local v=c[u][p]c[u][p]=s;q:_CallHook(u,s,v)end)end;return q:_Construct()end;function f:Write(w,x)self.WriteFunc=function(s)w(s,x)end;return self:_Construct()end;function f:Read(w,x)self.ReadFunc=function()return w(x)end;return self:_Construct()end;function f:Filter(w)self.SendFunc=function(self,r,s,t)m(t||w(r,s))end;return self:_Construct()end;function f:SetPlayer()self.PlayerVar=true;return self:_Construct()end;function f:SetLocalPlayer()self.LocalPlayerVar=true;return self:_Construct()end;function f:SetGlobal()self.GlobalVar=true;return self:_Construct()end;function f:SetNoSync()self.NoSync=true;return self:_Construct()end;function f:Accessor(y)y=y||self.Name;i["Get"..y]=function(r)return r:GetNetVar(self.Name)end;return self end;function f:SetHook(y)self.Hook=y;return self end;function f:_Send(r,s,t)l(self.NetworkString)self:_Write(r,s)self:SendFunc(r,s,t)end;function f:_CallHook(u,s,v)if self.Hook then if u!=0 then hook.Call(self.Hook,GAMEMODE,Entity(u),s,v)else hook.Call(self.Hook,GAMEMODE,s,v)end end end;function f:_Construct()local z=self.WriteFunc;local A=self.ReadFunc;if self.PlayerVar then self._Write=function(self,r,s)j(r:EntIndex(),8)z(s)end;self._Read=function(self)return k(8),A()end elseif self.LocalPlayerVar then self._Write=function(self,r,s)z(s)end;self._Read=function(self)return LocalPlayer():EntIndex(),A()end;self.SendFunc=function(self,r,s,t)m(r)end elseif self.GlobalVar then self._Write=function(self,r,s)z(s)end;self._Read=function(self)return 0,A()end else self._Write=function(self,r,s)j(r:EntIndex(),13)z(s)end;self._Read=function(self)return k(13),A()end end;nw.Mappings={}b=nw.Mappings;for B,C in o(a,'Name',false)do local D=#b+1;a[B].ID=D;b[D]=C;if g[D]then h=g[D]end end;return self end;function nw.GetGlobal(p)return d[p]end;function i:GetNetVar(p)local u=self:EntIndex()return c[u]&&c[u][p]end;if SERVER then else hook.Add('InitPostEntity','nw.InitPostEntity',function()l('nw.PlayerSync')m()end)local function E(u,F)if c[u]&&b[F]then local v=c[u][b[F].Name]c[u][b[F].Name]=nil;b[F]:_CallHook(u,nil,v)end end;net.Receive('nw.NilEntityVar',function()E(k(13),k(h))end)net.Receive('nw.NilPlayerVar',function()E(k(8),k(h))end)net.Receive('nw.EntityRemoved',function()c[k(13)]=nil end)net.Receive('nw.PlayerRemoved',function()c[k(8)]=nil end)end
--addons/!lpakr_out/lua/dash/libraries/netstream.lua:
return lpakr()()
--addons/!lpakr_out/lua/dash/thirdparty/aes.lua:
require'hash'local a=dash.IncludeSH'dash/submodules/lua_aes/AES.lua'aes={Encrypt=function(b,c)return a.ECB_256(a.encrypt,tonumber(hash.SHA256('0x'..b)),c)end,Decrypt=function(b,c)return a.ECB_256(a.decrypt,tonumber(hash.SHA256('0x'..b)),c)end}
--addons/!lpakr_out/lua/dash/submodules/lua_aes/aes.lua:
local a={[0]=0x00,0x02,0x04,0x06,0x08,0x0a,0x0c,0x0e,0x10,0x12,0x14,0x16,0x18,0x1a,0x1c,0x1e,0x20,0x22,0x24,0x26,0x28,0x2a,0x2c,0x2e,0x30,0x32,0x34,0x36,0x38,0x3a,0x3c,0x3e,0x40,0x42,0x44,0x46,0x48,0x4a,0x4c,0x4e,0x50,0x52,0x54,0x56,0x58,0x5a,0x5c,0x5e,0x60,0x62,0x64,0x66,0x68,0x6a,0x6c,0x6e,0x70,0x72,0x74,0x76,0x78,0x7a,0x7c,0x7e,0x80,0x82,0x84,0x86,0x88,0x8a,0x8c,0x8e,0x90,0x92,0x94,0x96,0x98,0x9a,0x9c,0x9e,0xa0,0xa2,0xa4,0xa6,0xa8,0xaa,0xac,0xae,0xb0,0xb2,0xb4,0xb6,0xb8,0xba,0xbc,0xbe,0xc0,0xc2,0xc4,0xc6,0xc8,0xca,0xcc,0xce,0xd0,0xd2,0xd4,0xd6,0xd8,0xda,0xdc,0xde,0xe0,0xe2,0xe4,0xe6,0xe8,0xea,0xec,0xee,0xf0,0xf2,0xf4,0xf6,0xf8,0xfa,0xfc,0xfe,0x1b,0x19,0x1f,0x1d,0x13,0x11,0x17,0x15,0x0b,0x09,0x0f,0x0d,0x03,0x01,0x07,0x05,0x3b,0x39,0x3f,0x3d,0x33,0x31,0x37,0x35,0x2b,0x29,0x2f,0x2d,0x23,0x21,0x27,0x25,0x5b,0x59,0x5f,0x5d,0x53,0x51,0x57,0x55,0x4b,0x49,0x4f,0x4d,0x43,0x41,0x47,0x45,0x7b,0x79,0x7f,0x7d,0x73,0x71,0x77,0x75,0x6b,0x69,0x6f,0x6d,0x63,0x61,0x67,0x65,0x9b,0x99,0x9f,0x9d,0x93,0x91,0x97,0x95,0x8b,0x89,0x8f,0x8d,0x83,0x81,0x87,0x85,0xbb,0xb9,0xbf,0xbd,0xb3,0xb1,0xb7,0xb5,0xab,0xa9,0xaf,0xad,0xa3,0xa1,0xa7,0xa5,0xdb,0xd9,0xdf,0xdd,0xd3,0xd1,0xd7,0xd5,0xcb,0xc9,0xcf,0xcd,0xc3,0xc1,0xc7,0xc5,0xfb,0xf9,0xff,0xfd,0xf3,0xf1,0xf7,0xf5,0xeb,0xe9,0xef,0xed,0xe3,0xe1,0xe7,0xe5}local b={[0]=0x00,0x03,0x06,0x05,0x0c,0x0f,0x0a,0x09,0x18,0x1b,0x1e,0x1d,0x14,0x17,0x12,0x11,0x30,0x33,0x36,0x35,0x3c,0x3f,0x3a,0x39,0x28,0x2b,0x2e,0x2d,0x24,0x27,0x22,0x21,0x60,0x63,0x66,0x65,0x6c,0x6f,0x6a,0x69,0x78,0x7b,0x7e,0x7d,0x74,0x77,0x72,0x71,0x50,0x53,0x56,0x55,0x5c,0x5f,0x5a,0x59,0x48,0x4b,0x4e,0x4d,0x44,0x47,0x42,0x41,0xc0,0xc3,0xc6,0xc5,0xcc,0xcf,0xca,0xc9,0xd8,0xdb,0xde,0xdd,0xd4,0xd7,0xd2,0xd1,0xf0,0xf3,0xf6,0xf5,0xfc,0xff,0xfa,0xf9,0xe8,0xeb,0xee,0xed,0xe4,0xe7,0xe2,0xe1,0xa0,0xa3,0xa6,0xa5,0xac,0xaf,0xaa,0xa9,0xb8,0xbb,0xbe,0xbd,0xb4,0xb7,0xb2,0xb1,0x90,0x93,0x96,0x95,0x9c,0x9f,0x9a,0x99,0x88,0x8b,0x8e,0x8d,0x84,0x87,0x82,0x81,0x9b,0x98,0x9d,0x9e,0x97,0x94,0x91,0x92,0x83,0x80,0x85,0x86,0x8f,0x8c,0x89,0x8a,0xab,0xa8,0xad,0xae,0xa7,0xa4,0xa1,0xa2,0xb3,0xb0,0xb5,0xb6,0xbf,0xbc,0xb9,0xba,0xfb,0xf8,0xfd,0xfe,0xf7,0xf4,0xf1,0xf2,0xe3,0xe0,0xe5,0xe6,0xef,0xec,0xe9,0xea,0xcb,0xc8,0xcd,0xce,0xc7,0xc4,0xc1,0xc2,0xd3,0xd0,0xd5,0xd6,0xdf,0xdc,0xd9,0xda,0x5b,0x58,0x5d,0x5e,0x57,0x54,0x51,0x52,0x43,0x40,0x45,0x46,0x4f,0x4c,0x49,0x4a,0x6b,0x68,0x6d,0x6e,0x67,0x64,0x61,0x62,0x73,0x70,0x75,0x76,0x7f,0x7c,0x79,0x7a,0x3b,0x38,0x3d,0x3e,0x37,0x34,0x31,0x32,0x23,0x20,0x25,0x26,0x2f,0x2c,0x29,0x2a,0x0b,0x08,0x0d,0x0e,0x07,0x04,0x01,0x02,0x13,0x10,0x15,0x16,0x1f,0x1c,0x19,0x1a}local c={[0]=0x00,0x09,0x12,0x1b,0x24,0x2d,0x36,0x3f,0x48,0x41,0x5a,0x53,0x6c,0x65,0x7e,0x77,0x90,0x99,0x82,0x8b,0xb4,0xbd,0xa6,0xaf,0xd8,0xd1,0xca,0xc3,0xfc,0xf5,0xee,0xe7,0x3b,0x32,0x29,0x20,0x1f,0x16,0x0d,0x04,0x73,0x7a,0x61,0x68,0x57,0x5e,0x45,0x4c,0xab,0xa2,0xb9,0xb0,0x8f,0x86,0x9d,0x94,0xe3,0xea,0xf1,0xf8,0xc7,0xce,0xd5,0xdc,0x76,0x7f,0x64,0x6d,0x52,0x5b,0x40,0x49,0x3e,0x37,0x2c,0x25,0x1a,0x13,0x08,0x01,0xe6,0xef,0xf4,0xfd,0xc2,0xcb,0xd0,0xd9,0xae,0xa7,0xbc,0xb5,0x8a,0x83,0x98,0x91,0x4d,0x44,0x5f,0x56,0x69,0x60,0x7b,0x72,0x05,0x0c,0x17,0x1e,0x21,0x28,0x33,0x3a,0xdd,0xd4,0xcf,0xc6,0xf9,0xf0,0xeb,0xe2,0x95,0x9c,0x87,0x8e,0xb1,0xb8,0xa3,0xaa,0xec,0xe5,0xfe,0xf7,0xc8,0xc1,0xda,0xd3,0xa4,0xad,0xb6,0xbf,0x80,0x89,0x92,0x9b,0x7c,0x75,0x6e,0x67,0x58,0x51,0x4a,0x43,0x34,0x3d,0x26,0x2f,0x10,0x19,0x02,0x0b,0xd7,0xde,0xc5,0xcc,0xf3,0xfa,0xe1,0xe8,0x9f,0x96,0x8d,0x84,0xbb,0xb2,0xa9,0xa0,0x47,0x4e,0x55,0x5c,0x63,0x6a,0x71,0x78,0x0f,0x06,0x1d,0x14,0x2b,0x22,0x39,0x30,0x9a,0x93,0x88,0x81,0xbe,0xb7,0xac,0xa5,0xd2,0xdb,0xc0,0xc9,0xf6,0xff,0xe4,0xed,0x0a,0x03,0x18,0x11,0x2e,0x27,0x3c,0x35,0x42,0x4b,0x50,0x59,0x66,0x6f,0x74,0x7d,0xa1,0xa8,0xb3,0xba,0x85,0x8c,0x97,0x9e,0xe9,0xe0,0xfb,0xf2,0xcd,0xc4,0xdf,0xd6,0x31,0x38,0x23,0x2a,0x15,0x1c,0x07,0x0e,0x79,0x70,0x6b,0x62,0x5d,0x54,0x4f,0x46}local d={[0]=0x00,0x0b,0x16,0x1d,0x2c,0x27,0x3a,0x31,0x58,0x53,0x4e,0x45,0x74,0x7f,0x62,0x69,0xb0,0xbb,0xa6,0xad,0x9c,0x97,0x8a,0x81,0xe8,0xe3,0xfe,0xf5,0xc4,0xcf,0xd2,0xd9,0x7b,0x70,0x6d,0x66,0x57,0x5c,0x41,0x4a,0x23,0x28,0x35,0x3e,0x0f,0x04,0x19,0x12,0xcb,0xc0,0xdd,0xd6,0xe7,0xec,0xf1,0xfa,0x93,0x98,0x85,0x8e,0xbf,0xb4,0xa9,0xa2,0xf6,0xfd,0xe0,0xeb,0xda,0xd1,0xcc,0xc7,0xae,0xa5,0xb8,0xb3,0x82,0x89,0x94,0x9f,0x46,0x4d,0x50,0x5b,0x6a,0x61,0x7c,0x77,0x1e,0x15,0x08,0x03,0x32,0x39,0x24,0x2f,0x8d,0x86,0x9b,0x90,0xa1,0xaa,0xb7,0xbc,0xd5,0xde,0xc3,0xc8,0xf9,0xf2,0xef,0xe4,0x3d,0x36,0x2b,0x20,0x11,0x1a,0x07,0x0c,0x65,0x6e,0x73,0x78,0x49,0x42,0x5f,0x54,0xf7,0xfc,0xe1,0xea,0xdb,0xd0,0xcd,0xc6,0xaf,0xa4,0xb9,0xb2,0x83,0x88,0x95,0x9e,0x47,0x4c,0x51,0x5a,0x6b,0x60,0x7d,0x76,0x1f,0x14,0x09,0x02,0x33,0x38,0x25,0x2e,0x8c,0x87,0x9a,0x91,0xa0,0xab,0xb6,0xbd,0xd4,0xdf,0xc2,0xc9,0xf8,0xf3,0xee,0xe5,0x3c,0x37,0x2a,0x21,0x10,0x1b,0x06,0x0d,0x64,0x6f,0x72,0x79,0x48,0x43,0x5e,0x55,0x01,0x0a,0x17,0x1c,0x2d,0x26,0x3b,0x30,0x59,0x52,0x4f,0x44,0x75,0x7e,0x63,0x68,0xb1,0xba,0xa7,0xac,0x9d,0x96,0x8b,0x80,0xe9,0xe2,0xff,0xf4,0xc5,0xce,0xd3,0xd8,0x7a,0x71,0x6c,0x67,0x56,0x5d,0x40,0x4b,0x22,0x29,0x34,0x3f,0x0e,0x05,0x18,0x13,0xca,0xc1,0xdc,0xd7,0xe6,0xed,0xf0,0xfb,0x92,0x99,0x84,0x8f,0xbe,0xb5,0xa8,0xa3}local e={[0]=0x00,0x0d,0x1a,0x17,0x34,0x39,0x2e,0x23,0x68,0x65,0x72,0x7f,0x5c,0x51,0x46,0x4b,0xd0,0xdd,0xca,0xc7,0xe4,0xe9,0xfe,0xf3,0xb8,0xb5,0xa2,0xaf,0x8c,0x81,0x96,0x9b,0xbb,0xb6,0xa1,0xac,0x8f,0x82,0x95,0x98,0xd3,0xde,0xc9,0xc4,0xe7,0xea,0xfd,0xf0,0x6b,0x66,0x71,0x7c,0x5f,0x52,0x45,0x48,0x03,0x0e,0x19,0x14,0x37,0x3a,0x2d,0x20,0x6d,0x60,0x77,0x7a,0x59,0x54,0x43,0x4e,0x05,0x08,0x1f,0x12,0x31,0x3c,0x2b,0x26,0xbd,0xb0,0xa7,0xaa,0x89,0x84,0x93,0x9e,0xd5,0xd8,0xcf,0xc2,0xe1,0xec,0xfb,0xf6,0xd6,0xdb,0xcc,0xc1,0xe2,0xef,0xf8,0xf5,0xbe,0xb3,0xa4,0xa9,0x8a,0x87,0x90,0x9d,0x06,0x0b,0x1c,0x11,0x32,0x3f,0x28,0x25,0x6e,0x63,0x74,0x79,0x5a,0x57,0x40,0x4d,0xda,0xd7,0xc0,0xcd,0xee,0xe3,0xf4,0xf9,0xb2,0xbf,0xa8,0xa5,0x86,0x8b,0x9c,0x91,0x0a,0x07,0x10,0x1d,0x3e,0x33,0x24,0x29,0x62,0x6f,0x78,0x75,0x56,0x5b,0x4c,0x41,0x61,0x6c,0x7b,0x76,0x55,0x58,0x4f,0x42,0x09,0x04,0x13,0x1e,0x3d,0x30,0x27,0x2a,0xb1,0xbc,0xab,0xa6,0x85,0x88,0x9f,0x92,0xd9,0xd4,0xc3,0xce,0xed,0xe0,0xf7,0xfa,0xb7,0xba,0xad,0xa0,0x83,0x8e,0x99,0x94,0xdf,0xd2,0xc5,0xc8,0xeb,0xe6,0xf1,0xfc,0x67,0x6a,0x7d,0x70,0x53,0x5e,0x49,0x44,0x0f,0x02,0x15,0x18,0x3b,0x36,0x21,0x2c,0x0c,0x01,0x16,0x1b,0x38,0x35,0x22,0x2f,0x64,0x69,0x7e,0x73,0x50,0x5d,0x4a,0x47,0xdc,0xd1,0xc6,0xcb,0xe8,0xe5,0xf2,0xff,0xb4,0xb9,0xae,0xa3,0x80,0x8d,0x9a,0x97}local f={[0]=0x00,0x0e,0x1c,0x12,0x38,0x36,0x24,0x2a,0x70,0x7e,0x6c,0x62,0x48,0x46,0x54,0x5a,0xe0,0xee,0xfc,0xf2,0xd8,0xd6,0xc4,0xca,0x90,0x9e,0x8c,0x82,0xa8,0xa6,0xb4,0xba,0xdb,0xd5,0xc7,0xc9,0xe3,0xed,0xff,0xf1,0xab,0xa5,0xb7,0xb9,0x93,0x9d,0x8f,0x81,0x3b,0x35,0x27,0x29,0x03,0x0d,0x1f,0x11,0x4b,0x45,0x57,0x59,0x73,0x7d,0x6f,0x61,0xad,0xa3,0xb1,0xbf,0x95,0x9b,0x89,0x87,0xdd,0xd3,0xc1,0xcf,0xe5,0xeb,0xf9,0xf7,0x4d,0x43,0x51,0x5f,0x75,0x7b,0x69,0x67,0x3d,0x33,0x21,0x2f,0x05,0x0b,0x19,0x17,0x76,0x78,0x6a,0x64,0x4e,0x40,0x52,0x5c,0x06,0x08,0x1a,0x14,0x3e,0x30,0x22,0x2c,0x96,0x98,0x8a,0x84,0xae,0xa0,0xb2,0xbc,0xe6,0xe8,0xfa,0xf4,0xde,0xd0,0xc2,0xcc,0x41,0x4f,0x5d,0x53,0x79,0x77,0x65,0x6b,0x31,0x3f,0x2d,0x23,0x09,0x07,0x15,0x1b,0xa1,0xaf,0xbd,0xb3,0x99,0x97,0x85,0x8b,0xd1,0xdf,0xcd,0xc3,0xe9,0xe7,0xf5,0xfb,0x9a,0x94,0x86,0x88,0xa2,0xac,0xbe,0xb0,0xea,0xe4,0xf6,0xf8,0xd2,0xdc,0xce,0xc0,0x7a,0x74,0x66,0x68,0x42,0x4c,0x5e,0x50,0x0a,0x04,0x16,0x18,0x32,0x3c,0x2e,0x20,0xec,0xe2,0xf0,0xfe,0xd4,0xda,0xc8,0xc6,0x9c,0x92,0x80,0x8e,0xa4,0xaa,0xb8,0xb6,0x0c,0x02,0x10,0x1e,0x34,0x3a,0x28,0x26,0x7c,0x72,0x60,0x6e,0x44,0x4a,0x58,0x56,0x37,0x39,0x2b,0x25,0x0f,0x01,0x13,0x1d,0x47,0x49,0x5b,0x55,0x7f,0x71,0x63,0x6d,0xd7,0xd9,0xcb,0xc5,0xef,0xe1,0xf3,0xfd,0xa7,0xa9,0xbb,0xb5,0x9f,0x91,0x83,0x8d}local g={[0]=0x63,0x7C,0x77,0x7B,0xF2,0x6B,0x6F,0xC5,0x30,0x01,0x67,0x2B,0xFE,0xD7,0xAB,0x76,0xCA,0x82,0xC9,0x7D,0xFA,0x59,0x47,0xF0,0xAD,0xD4,0xA2,0xAF,0x9C,0xA4,0x72,0xC0,0xB7,0xFD,0x93,0x26,0x36,0x3F,0xF7,0xCC,0x34,0xA5,0xE5,0xF1,0x71,0xD8,0x31,0x15,0x04,0xC7,0x23,0xC3,0x18,0x96,0x05,0x9A,0x07,0x12,0x80,0xE2,0xEB,0x27,0xB2,0x75,0x09,0x83,0x2C,0x1A,0x1B,0x6E,0x5A,0xA0,0x52,0x3B,0xD6,0xB3,0x29,0xE3,0x2F,0x84,0x53,0xD1,0x00,0xED,0x20,0xFC,0xB1,0x5B,0x6A,0xCB,0xBE,0x39,0x4A,0x4C,0x58,0xCF,0xD0,0xEF,0xAA,0xFB,0x43,0x4D,0x33,0x85,0x45,0xF9,0x02,0x7F,0x50,0x3C,0x9F,0xA8,0x51,0xA3,0x40,0x8F,0x92,0x9D,0x38,0xF5,0xBC,0xB6,0xDA,0x21,0x10,0xFF,0xF3,0xD2,0xCD,0x0C,0x13,0xEC,0x5F,0x97,0x44,0x17,0xC4,0xA7,0x7E,0x3D,0x64,0x5D,0x19,0x73,0x60,0x81,0x4F,0xDC,0x22,0x2A,0x90,0x88,0x46,0xEE,0xB8,0x14,0xDE,0x5E,0x0B,0xDB,0xE0,0x32,0x3A,0x0A,0x49,0x06,0x24,0x5C,0xC2,0xD3,0xAC,0x62,0x91,0x95,0xE4,0x79,0xE7,0xC8,0x37,0x6D,0x8D,0xD5,0x4E,0xA9,0x6C,0x56,0xF4,0xEA,0x65,0x7A,0xAE,0x08,0xBA,0x78,0x25,0x2E,0x1C,0xA6,0xB4,0xC6,0xE8,0xDD,0x74,0x1F,0x4B,0xBD,0x8B,0x8A,0x70,0x3E,0xB5,0x66,0x48,0x03,0xF6,0x0E,0x61,0x35,0x57,0xB9,0x86,0xC1,0x1D,0x9E,0xE1,0xF8,0x98,0x11,0x69,0xD9,0x8E,0x94,0x9B,0x1E,0x87,0xE9,0xCE,0x55,0x28,0xDF,0x8C,0xA1,0x89,0x0D,0xBF,0xE6,0x42,0x68,0x41,0x99,0x2D,0x0F,0xB0,0x54,0xBB,0x16}local h={[0]=0x52,0x09,0x6A,0xD5,0x30,0x36,0xA5,0x38,0xBF,0x40,0xA3,0x9E,0x81,0xF3,0xD7,0xFB,0x7C,0xE3,0x39,0x82,0x9B,0x2F,0xFF,0x87,0x34,0x8E,0x43,0x44,0xC4,0xDE,0xE9,0xCB,0x54,0x7B,0x94,0x32,0xA6,0xC2,0x23,0x3D,0xEE,0x4C,0x95,0x0B,0x42,0xFA,0xC3,0x4E,0x08,0x2E,0xA1,0x66,0x28,0xD9,0x24,0xB2,0x76,0x5B,0xA2,0x49,0x6D,0x8B,0xD1,0x25,0x72,0xF8,0xF6,0x64,0x86,0x68,0x98,0x16,0xD4,0xA4,0x5C,0xCC,0x5D,0x65,0xB6,0x92,0x6C,0x70,0x48,0x50,0xFD,0xED,0xB9,0xDA,0x5E,0x15,0x46,0x57,0xA7,0x8D,0x9D,0x84,0x90,0xD8,0xAB,0x00,0x8C,0xBC,0xD3,0x0A,0xF7,0xE4,0x58,0x05,0xB8,0xB3,0x45,0x06,0xD0,0x2C,0x1E,0x8F,0xCA,0x3F,0x0F,0x02,0xC1,0xAF,0xBD,0x03,0x01,0x13,0x8A,0x6B,0x3A,0x91,0x11,0x41,0x4F,0x67,0xDC,0xEA,0x97,0xF2,0xCF,0xCE,0xF0,0xB4,0xE6,0x73,0x96,0xAC,0x74,0x22,0xE7,0xAD,0x35,0x85,0xE2,0xF9,0x37,0xE8,0x1C,0x75,0xDF,0x6E,0x47,0xF1,0x1A,0x71,0x1D,0x29,0xC5,0x89,0x6F,0xB7,0x62,0x0E,0xAA,0x18,0xBE,0x1B,0xFC,0x56,0x3E,0x4B,0xC6,0xD2,0x79,0x20,0x9A,0xDB,0xC0,0xFE,0x78,0xCD,0x5A,0xF4,0x1F,0xDD,0xA8,0x33,0x88,0x07,0xC7,0x31,0xB1,0x12,0x10,0x59,0x27,0x80,0xEC,0x5F,0x60,0x51,0x7F,0xA9,0x19,0xB5,0x4A,0x0D,0x2D,0xE5,0x7A,0x9F,0x93,0xC9,0x9C,0xEF,0xA0,0xE0,0x3B,0x4D,0xAE,0x2A,0xF5,0xB0,0xC8,0xEB,0xBB,0x3C,0x83,0x53,0x99,0x61,0x17,0x2B,0x04,0x7E,0xBA,0x77,0xD6,0x26,0xE1,0x69,0x14,0x63,0x55,0x21,0x0C,0x7D}local i={0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d}local j={[0]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,0,3,2,5,4,7,6,9,8,11,10,13,12,15,14,2,3,0,1,6,7,4,5,10,11,8,9,14,15,12,13,3,2,1,0,7,6,5,4,11,10,9,8,15,14,13,12,4,5,6,7,0,1,2,3,12,13,14,15,8,9,10,11,5,4,7,6,1,0,3,2,13,12,15,14,9,8,11,10,6,7,4,5,2,3,0,1,14,15,12,13,10,11,8,9,7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,9,8,11,10,13,12,15,14,1,0,3,2,5,4,7,6,10,11,8,9,14,15,12,13,2,3,0,1,6,7,4,5,11,10,9,8,15,14,13,12,3,2,1,0,7,6,5,4,12,13,14,15,8,9,10,11,4,5,6,7,0,1,2,3,13,12,15,14,9,8,11,10,5,4,7,6,1,0,3,2,14,15,12,13,10,11,8,9,6,7,4,5,2,3,0,1,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0}local function k(l,m)local n=l%16;local o=m%16;return 16*j[l-n+(m-o)/16]+j[16*n+o]end;local function p(q,r)for s,t in next,q do q[s]=k(t,r[s])end end;local function u(q,v)for s,t in next,q do q[s]=v[t]end end;local function w(q)q[5],q[6],q[7],q[8]=q[6],q[7],q[8],q[5]q[9],q[10],q[11],q[12]=q[11],q[12],q[9],q[10]q[13],q[14],q[15],q[16]=q[16],q[13],q[14],q[15]end;local function x(q)q[6],q[7],q[8],q[5]=q[5],q[6],q[7],q[8]q[11],q[12],q[9],q[10]=q[9],q[10],q[11],q[12]q[16],q[13],q[14],q[15]=q[13],q[14],q[15],q[16]end;local function y(q)for z=1,4 do local l,m,A,B=q[z],q[z+4],q[z+8],q[z+12]q[z+0]=k(k(k(a[l],b[m]),A),B)q[z+4]=k(k(k(l,a[m]),b[A]),B)q[z+8]=k(k(k(l,m),a[A]),b[B])q[z+12]=k(k(k(b[l],m),A),a[B])end end;local function C(q)for z=1,4 do local l,m,A,B=q[z],q[z+4],q[z+8],q[z+12]q[z+0]=k(k(k(f[l],d[m]),e[A]),c[B])q[z+4]=k(k(k(c[l],f[m]),d[A]),e[B])q[z+8]=k(k(k(e[l],c[m]),f[A]),d[B])q[z+12]=k(k(k(d[l],e[m]),c[A]),f[B])end end;local D=32;local m=240;local function E(r)local F={}for A=0,D do local t=r%256;F[A]=t;r=(r-t)/256 end;local s=1;local A=D;local G=F[1]local H=F[2]local I=F[3]local J=F[4]while A<m do G,H,I,J=k(i[s],g[H]),g[I],g[J],g[G]s=s+1;for K=1,4 do A=A+1;G=k(G,F[A-D])F[A]=G;A=A+1;H=k(H,F[A-D])F[A]=H;A=A+1;I=k(I,F[A-D])F[A]=I;A=A+1;J=k(J,F[A-D])F[A]=J end;G=g[G]H=g[H]I=g[I]J=g[J]for K=1,4 do A=A+1;G=k(G,F[A-D])F[A]=G;A=A+1;H=k(H,F[A-D])F[A]=H;A=A+1;I=k(I,F[A-D])F[A]=I;A=A+1;J=k(J,F[A-D])F[A]=J end end;local L={}for M=0,14 do local N={}for t=1,16 do N[t]=F[M*16+t]end;L[M]=N end;return L end;local function O(P,s)local Q=s*16+1;if Q>#P then return end;s=s+1;local R={P:byte(Q,Q+15)}for S=#R+1,16 do R[S]=0 end;return s,R end;local function T(q,L)p(q,L[0])for M=1,13 do u(q,g)w(q)y(q)p(q,L[M])end;u(q,g)w(q)p(q,L[14])end;local function U(q,L)p(q,L[14])x(q)u(q,h)for M=13,1,-1 do p(q,L[M])C(q)x(q)u(q,h)end;p(q,L[0])end;local function V(W,r,X)local P={}local L=E(r)for R,q in O,X,0 do W(q,L)P[R]=string.char(unpack(q))end;return table.concat(P)end;return{encrypt=T,decrypt=U,ECB_256=V}
--addons/!lpakr_out/lua/ui/theme.lua:
return lpakr()()
--addons/!lpakr_out/lua/ui/controls/button.lua:
return lpakr()()
--addons/!lpakr_out/lua/ui/controls/collapsible_section.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/core/util/notifications/notify_cl.lua:
local a={[0]=ui.col.SUP,[1]=ui.col.Red}net.Receive('ba.NotifyString',function(b)if!IsValid(LocalPlayer())then return end;chat.AddText(a[net.ReadBit()],'| ',unpack(ba.ReadMsg()))end)net.Receive('ba.NotifyTerm',function(b)if!IsValid(LocalPlayer())then return end;chat.AddText(a[net.ReadBit()],'| ',unpack(ba.ReadTerm()))end)
--addons/!lpakr_out/lua/badmin/core/util/player/player_sh.lua:
function ba.IsSteamID(a)return isstring(a)&&a:match('^STEAM_%d:%d:%d+$')end;function ba.InfoTo64(a)return isplayer(a)&&a:SteamID64()||util.SteamIDTo64(a)end;function ba.InfoTo32(a)return isplayer(a)&&a:SteamID()||(ba.IsSteamID(a)&&a||util.SteamIDFrom64(a))end;function PLAYER:NameID()return self:Name()..'('..self:SteamID()..')'end;function PLAYER:SetBVar(b,c)if self._ba==nil then self._ba={}end;self._ba[b]=c end;function PLAYER:GetBVar(b)if self._ba==nil then self._ba={}end;return self._ba[b]end
--addons/!lpakr_out/lua/badmin/core/gamemaster/gamemaster_sh.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/core/ui/main_cl.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/core/logging/logs_cl.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/modules/sitrequests/_module.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/modules/sync/_module.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/plugins/anticrash_sh.lua:
if SERVER then elseif CLIENT then surface.CreateFont('AntiCrash.Font',{font='coolvetica',size=50,weight=300})local a=false;local b=false;local c=0;local d=0;local e;local function f()local g=CurTime()c=CurTime()+30+math.random(0,30)if IsValid(e)then e:Remove()end;e=ui.Create('DFrame')e:SetSize(475,125)e:SetPos(ScrW(),0)e:MoveTo(ScrW()-475,0,0.3,0,1)e:SetTitle('')e:ShowCloseButton(false)e.btnMinim:SetVisible(false)e.btnMaxim:SetVisible(false)function e:Paint(h,i)local j=math.Clamp(c-CurTime(),1,40)draw.OutlinedBox(0,0,h,i,ui.col.Black,j%1<0.2&&ui.col.Red||ui.col.Outline)draw.SimpleText('Uh Oh, reconnecting in:','AntiCrash.Font',h/2,10,ui.col.White,TEXT_ALIGN_CENTER)draw.SimpleText(math.ceil(j),'AntiCrash.Font',h*0.5,75,j%1<0.2&&ui.col.Red||ui.col.White,TEXT_ALIGN_CENTER)end end;local function k()LocalPlayer():ChatPrint('RECONNECT ERROR: FAILED TO CHECK SERVER STATUS. YOU WILL BE RECONNECTED AS SOON AS WE CAN VERIFY THE SERVER IS ONLINE!')end;local function l(m)if!b then return end;LocalPlayer():ConCommand('retry')end;local function n()c=CurTime()+60;ba.http.Fetch('anticrash/?ip='..info.ServerIP..'&altip='..info.AltServerIP,function(o)o=string.Trim(o):lower()print(o)if o:len()>30 then k()return end;if o!=info.ServerIP:lower()then c=CurTime()+60;d=d+1;function e:Paint(h,i)local j=math.Clamp(c-CurTime(),1,45)draw.OutlinedBox(0,0,h,i,ui.col.Black,j%1<0.2&&ui.col.Red||ui.col.Outline)draw.SimpleText('Connection attempt:','AntiCrash.Font',h/2,10,ui.col.White,TEXT_ALIGN_CENTER)draw.SimpleText('#'..d,'AntiCrash.Font',h*0.5,75,j%1<0.2&&ui.col.Red||ui.col.White,TEXT_ALIGN_CENTER)end else l(info.ServerIP)end end,k,true)end;hook.Add('Think','AntiCrash.Think',function()if a&&!b&&a<CurTime()then b=true;f()elseif b&&c<=CurTime()then if info&&info.ServerIP&&info.AltServerIP&&d<10 then n()elseif info&&info.ServerIP&&info.AltServerIP&&d>=10 then l(info.AltServerIP)else l(info.ServerIP)end end end)local function p()d=0;a=CurTime()+10;b=false;if IsValid(e)then e:Remove()end end;net.Receive('_AntiCrash',p)hook.Add('IncomingNetMessage',p)hook.Add('OnEntityCreated','ba.anticrash.OnEntityCreated',p)hook.Add('InitPostEntity','AntiCrash.InitPostEntity',function()RunConsoleCommand('cl_timeout','9999999999999')end)end
--addons/!lpakr_out/lua/badmin/plugins/keychains_sh.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/plugins/motd_sh.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/plugins/tellall_sh.lua:
return lpakr()()
--addons/!lpakr_out/lua/drgbase/modules/debugoverlay.lua:
return lpakr()()
--addons/!lpakr_out/lua/drgbase/modules/timer.lua:
function timer.DrG_Simple(a,b,...)local c,d=table.DrG_Pack(...)timer.Simple(a,function()b(table.DrG_Unpack(c,d))end)end;function timer.DrG_Loop(a,b,...)local c,d=table.DrG_Pack(...)timer.Simple(a,function()local e=b(table.DrG_Unpack(c,d))if e==false then return end;if isnumber(e)then timer.DrG_Loop(math.Clamp(e,0,math.huge),b,table.DrG_Unpack(c,d))else timer.DrG_Loop(a,b,table.DrG_Unpack(c,d))end end)end
--addons/!lpakr_out/lua/dronesrewrite/client/controls.lua:
local a={}for b=0,113 do a[b]=false end;hook.Add("Think","dronesrewrite_cl_keys",function()for b=0,113 do local c=a[b]a[b]=b>=107&&input.IsMouseDown(b)||input.IsKeyDown(b)if c!=a[b]then hook.Run("DronesRewriteKey",b,a[b])end end end)hook.Add("DronesRewriteKey","dronesrewrite_controlkeys",function(d,e)local f=e;if vgui.CursorVisible()&&e then f=false end;local g=LocalPlayer()local h=g:GetNWEntity("DronesRewriteDrone")if IsValid(h)then net.Start("dronesrewrite_keyvalue")net.WriteUInt(d,7)net.WriteBit(f)net.SendToServer()DRONES_REWRITE.LogDebug(string.format("Pressing key %i %s",d,tostring(f)))end end)local function i(j)local k=vgui.Create("DListView")k:SetSize(150,400)k:AddColumn("Bind")k:AddColumn("Key")for l,m in pairs(DRONES_REWRITE.SortedKeys)do k:AddLine(m,string.upper(input.GetKeyName(DRONES_REWRITE.ClientCVars.Keys[m]:GetString())))end;k.OnClickLine=function(n,o,p)local q=o:GetValue(1)timer.Create("dronesrewritekey",0.1,1,function()o:SetValue(2,"PRESS ANY BUTTON")hook.Add("DronesRewriteKey","dronesrewrite_controlkeysset",function(d,e)RunConsoleCommand("dronesrewrite_key_"..q,d)o:SetValue(2,string.upper(input.GetKeyName(d)))hook.Remove("DronesRewriteKey","dronesrewrite_controlkeysset")end)end)end;j:AddItem(k)local r=DRONES_REWRITE.CreateButton("Set to default",0,0,150,30,j,function()k:Clear()for q,d in pairs(DRONES_REWRITE.Keys)do RunConsoleCommand("dronesrewrite_key_"..q,d)k:AddLine(q,string.upper(input.GetKeyName(d)))end end)j:AddItem(r)end;hook.Add("PopulateToolMenu","dronesrewrite_addmenukeys",function()spawnmenu.AddToolMenuOption("Options","Drones Settings","dronesrewrite_keys","Controls / Keys","","",i)end)
--addons/!lpakr_out/lua/dronesrewrite/client/help_menu.lua:
return lpakr()()
--addons/!lpakr_out/lua/dronesrewrite/client/overlay/drones1.lua:
return lpakr()()
--addons/!lpakr_out/lua/dronesrewrite/client/overlay/red.lua:
DRONES_REWRITE.Overlay["Red"]=function(a)local b={["$pp_colour_addr"]=0.5,["$pp_colour_addg"]=0,["$pp_colour_addb"]=0,["$pp_colour_brightness"]=-0.5,["$pp_colour_contrast"]=1,["$pp_colour_colour"]=0.7,["$pp_colour_mulr"]=0,["$pp_colour_mulg"]=0,["$pp_colour_mulb"]=0}DrawSharpen(0.65,4)DrawColorModify(b)end
--addons/!lpakr_out/lua/dronesrewrite/client/overlay/scifi.lua:
return lpakr()()
--addons/!lpakr_out/lua/vgui/stackerpreseteditor.lua:
local a={}local vgui=vgui;local pairs=pairs;local AccessorFunc=AccessorFunc;local GetConVarString=GetConVarString;AccessorFunc(a,"m_ConCommands","ConCommands")function a:Add()if!self.m_ConVars then return end;local b=self.txtName:GetValue()if!b||b==""then return end;local c={}for d,e in pairs(self.m_ConVars)do c[e.CCmd]=GetConVarString(e.CVar)end;presets.Add(self.m_strType,b,c)self:Update()self.PresetList:SelectByName(b)self.txtName:SetText("")if self.m_PresetControl then self.m_PresetControl:Update()end end;vgui.Register("StackerPresetEditor",a,"PresetEditor")
--addons/!lpakr_out/lua/autorun/netstream.lua:
AddCSLuaFile()net.Stream={}net.Stream.ReadStreamQueues={}net.Stream.WriteStreams={}net.Stream.SendSize=20000;net.Stream.Timeout=30;net.Stream.MaxServerReadStreams=128;net.Stream.MaxServerChunks=3200;net.Stream.MaxTries=3;net.Stream.MaxKeepalive=15;net.Stream.ReadStream={}function net.Stream.ReadStream:Request()if self.downloads==net.Stream.MaxTries*self.numchunks then self:Remove()return end;self.downloads=self.downloads+1;net.Start("NetStreamRequest")net.WriteUInt(self.identifier,32)net.WriteBit(false)net.WriteBit(false)net.WriteUInt(#self.chunks,32)if CLIENT then net.SendToServer()else net.Send(self.player)end;timer.Create("NetStreamReadTimeout"..self.identifier,net.Stream.Timeout/2,1,function()self:Request()end)end;function net.Stream.ReadStream:Read(a)timer.Remove("NetStreamReadTimeout"..self.identifier)local b=net.ReadUInt(32)if self.chunks[b]then return end;local c=net.ReadString()local d=net.ReadData(a)if c==util.CRC(d)then self.chunks[b]=d else pac.Message("net.Stream.ReadStream:Read(): hash received and hash of chunk do not match match")end;if#self.chunks==self.numchunks then self.returndata=table.concat(self.chunks)if self.compressed then self.returndata=util.Decompress(self.returndata)if!self.returndata then pac.Message("net.Stream.ReadStream:Read(): Failed to decompress data")end end;self:Remove()else self:Request()end end;function net.Stream.ReadStream:GetProgress()return#self.chunks/self.numchunks end;function net.Stream.ReadStream:Remove()local e,f=xpcall(self.callback,debug.traceback,self.returndata)if!e then ErrorNoHalt(f)end;net.Start("NetStreamRequest")net.WriteUInt(self.identifier,32)net.WriteBit(false)net.WriteBit(true)if CLIENT then net.SendToServer()else net.Send(self.player)end;timer.Remove("NetStreamReadTimeout"..self.identifier)timer.Remove("NetStreamKeepAlive"..self.identifier)if self==self.queue[1]then table.remove(self.queue,1)local g=self.queue[1]if g then timer.Remove("NetStreamKeepAlive"..g.identifier)g:Request()else net.Stream.ReadStreamQueues[self.player]=nil end else for h,i in ipairs(self.queue)do if i==self then table.remove(self.queue,h)break end end end end;net.Stream.ReadStream.__index=net.Stream.ReadStream;net.Stream.WriteStream={}function net.Stream.WriteStream:Write(j)local b=net.ReadUInt(32)+1;local k=self.chunks[b]if k then self.clients[j].progress=b;net.Start("NetStreamDownload")net.WriteUInt(#k.data,32)net.WriteUInt(b,32)net.WriteString(k.crc)net.WriteData(k.data,#k.data)if CLIENT then net.SendToServer()else net.Send(j)end end end;function net.Stream.WriteStream:Finished(j)self.clients[j].finished=true;if self.callback then local e,f=xpcall(self.callback,debug.traceback,j)if!e then ErrorNoHalt(f)end end end;function net.Stream.WriteStream:GetProgress(j)return self.clients[j].progress/#self.chunks end;function net.Stream.WriteStream:Remove()local l={}for j,m in pairs(self.clients)do if!m.finished then m.finished=true;if j:IsValid()then l[#l+1]=j end end end;net.Start("NetStreamDownload")net.WriteUInt(0,32)net.WriteUInt(self.identifier,32)if SERVER then else net.SendToServer()end;net.Stream.WriteStreams[self.identifier]=nil end;net.Stream.WriteStream.__index=net.Stream.WriteStream;local n=1;function net.WriteStream(d,o,p)if!isstring(d)then error("bad argument #1 to 'WriteStream' (string expected, got "..type(d)..")",2)end;if o!=nil&&!isfunction(o)then error("bad argument #2 to 'WriteStream' (function expected, got "..type(o)..")",2)end;local q=!p;if q then d=util.Compress(d)||""end;if#d==0 then net.WriteUInt(0,32)return end;local r=math.ceil(#d/net.Stream.SendSize)if CLIENT&&r>net.Stream.MaxServerChunks then ErrorNoHalt("net.WriteStream request is too large! ",#d/1048576,"MiB")net.WriteUInt(0,32)return end;local s={}for t=1,r do local u=string.sub(d,(t-1)*net.Stream.SendSize+1,t*net.Stream.SendSize)s[t]={data=u,crc=util.CRC(u)}end;local v=n;while net.Stream.WriteStreams[n]do n=n%1024+1;if n==v then ErrorNoHalt("Netstream is full of WriteStreams!\n"..debug.traceback().."\n")net.WriteUInt(0,32)return end end;local w={identifier=n,chunks=s,compressed=q,numchunks=r,callback=o,clients=setmetatable({},{__index=function(x,h)local y={finished=false,downloads=0,keepalives=0,progress=0}x[h]=y;return y end})}setmetatable(w,net.Stream.WriteStream)net.Stream.WriteStreams[n]=w;timer.Create("NetStreamWriteTimeout"..n,net.Stream.Timeout,1,function()w:Remove()end)net.WriteUInt(r,32)net.WriteUInt(n,32)net.WriteBool(q)return w end;function net.ReadStream(j,o)if CLIENT then j=NULL else if type(j)!="Player"then error("bad argument #1 to 'ReadStream' (Player expected, got "..type(j)..")",2)elseif!j:IsValid()then error("bad argument #1 to 'ReadStream' (Tried to use a NULL entity!)",2)end end;if!isfunction(o)then error("bad argument #2 to 'ReadStream' (function expected, got "..type(o)..")",2)end;local z=net.Stream.ReadStreamQueues[j]if z then if SERVER&&#z==net.Stream.MaxServerReadStreams then ErrorNoHalt("Receiving too many ReadStream requests from ",j)return end else z={}net.Stream.ReadStreamQueues[j]=z end;local r=net.ReadUInt(32)if r==nil then return elseif r==0 then local e,f=xpcall(o,debug.traceback,"")if!e then ErrorNoHalt(f)end;return end;if SERVER&&r>net.Stream.MaxServerChunks then ErrorNoHalt("ReadStream requests from ",j," is too large! ",r*net.Stream.SendSize/1048576,"MiB")return end;local n=net.ReadUInt(32)local q=net.ReadBool()for A,i in ipairs(z)do if i.identifier==n then ErrorNoHalt("Tried to start a new ReadStream for an already existing stream!\n"..debug.traceback().."\n")return end end;local w={identifier=n,chunks={},compressed=q,numchunks=r,callback=o,queue=z,player=j,downloads=0}setmetatable(w,net.Stream.ReadStream)z[#z+1]=w;if#z>1 then timer.Create("NetStreamKeepAlive"..n,net.Stream.Timeout/2,0,function()net.Start("NetStreamRequest")net.WriteUInt(n,32)net.WriteBit(true)if CLIENT then net.SendToServer()else net.Send(j)end end)else w:Request()end;return w end;net.Receive("NetStreamRequest",function(B,j)local n=net.ReadUInt(32)local w=net.Stream.WriteStreams[n]if w then j=j||NULL;local m=w.clients[j]if!m.finished then local C=net.ReadBit()==1;if C then if m.keepalives<net.Stream.MaxKeepalive then m.keepalives=m.keepalives+1;timer.Adjust("NetStreamWriteTimeout"..n,net.Stream.Timeout,1)end else local D=net.ReadBit()==1;if D then w:Finished(j)else if m.downloads<net.Stream.MaxTries*#w.chunks then m.downloads=m.downloads+1;w:Write(j)timer.Adjust("NetStreamWriteTimeout"..n,net.Stream.Timeout,1)else m.finished=true end end end end end end)net.Receive("NetStreamDownload",function(B,j)j=j||NULL;local z=net.Stream.ReadStreamQueues[j]if z then local a=net.ReadUInt(32)if a>0 then z[1]:Read(a)else local E=net.ReadUInt(32)for h,i in ipairs(z)do if i.identifier==E then i:Remove()break end end end end end)
--addons/!lpakr_out/lua/pac3/core/client/init.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/libraries/expression.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/core/shared/footsteps_fix.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/core/shared/http.lua:
local a,b,c;if CLIENT then a=CreateConVar("pac_webcontent_limit","-1",{FCVAR_ARCHIVE},"webcontent limit in kb, -1 = unlimited")c=CreateConVar("pac_webcontent_allow_no_content_length","0",{FCVAR_ARCHIVE},"allow downloads with no content length")b=CreateConVar("pac_webcontent_limit_force","0",{FCVAR_ARCHIVE},"Override serverside setting")end;local d=CreateConVar("sv_pac_webcontent_limit","-1",CLIENT&&{FCVAR_REPLICATED}||{FCVAR_ARCHIVE,FCVAR_REPLICATED},"webcontent limit in kb, -1 = unlimited")local e=CreateConVar("sv_pac_webcontent_allow_no_content_length","-1",CLIENT&&{FCVAR_REPLICATED}||{FCVAR_ARCHIVE,FCVAR_REPLICATED},"allow downloads with no content length")function pac.FixGMODUrl(f)return f:Replace("10.","%31%30%2e"):Replace("127.","%31%32%37%2e")end;local function g(h,f,i,j,k)f=pac.FixGMODUrl(f)return HTTP({method=h,url=f,headers=i,success=function(l,m,i)if l<400 then j(m,#m,i)else local n={}for o,p in pairs(i)do table.insert(n,tostring(o)..": "..tostring(p))end;local q="server returned code "..l..":\n\n"q=q.."url: "..f.."\n"q=q.."================\n"q=q.."HEADER:\n"q=q..table.concat(n,"\n").."\n"q=q.."================\n"q=q.."BODY:\n"q=q..m.."\n"q=q.."================\n"k(q,l>=400,l)end end,failed=function(q)if k then k("_G.HTTP error: "..q)else pac.Message("_G.HTTP error: "..q)end end})end;function pac.FixUrl(f)f=f:Trim()f=f:gsub("[\"'<>\n\\]+","")if f:find("dropbox",1,true)then f=f:gsub([[^http%://dl%.dropboxusercontent%.com/]],[[https://dl.dropboxusercontent.com/]])f=f:gsub([[^https?://dl.dropbox.com/]],[[https://www.dropbox.com/]])f=f:gsub([[^https?://www.dropbox.com/s/(.+)%?dl%=[01]$]],[[https://dl.dropboxusercontent.com/s/%1]])f=f:gsub([[^https?://www.dropbox.com/s/(.+)$]],[[https://dl.dropboxusercontent.com/s/%1]])f=f:gsub([[^https?://www.dropbox.com/scl/(.+)$]],[[https://dl.dropboxusercontent.com/scl/%1]])return f end;if f:find("drive.google.com",1,true)&&!f:find("export=download",1,true)then local r=f:match("https://drive.google.com/file/d/(.-)/")||f:match("https://drive.google.com/file/d/(.-)$")||f:match("https://drive.google.com/open%?id=(.-)$")if r then return"https://drive.google.com/uc?export=download&id="..r end;return f end;if f:find("gitlab.com",1,true)then return f:gsub("^(https?://.-/.-/.-/)blob","%1raw")end;f=f:gsub([[^http%://onedrive%.live%.com/redir?]],[[https://onedrive.live.com/download?]])f=f:gsub("pastebin.com/([a-zA-Z0-9]*)$","pastebin.com/raw.php?i=%1")f=f:gsub("github.com/([a-zA-Z0-9_]+)/([a-zA-Z0-9_]+)/blob/","github.com/%1/%2/raw/")return f end;function pac.getContentLength(f,j,k)return g("HEAD",f,{["Accept-Encoding"]="none"},function(s,s,i)local t;for u,v in pairs(i)do if string.lower(u)=="content-length"then t=tonumber(v)if!t||math.floor(t)!=t then return k(string.format("malformed server reply with header content-length (got %q, expected valid integer number)",v),true)end;break end end;if t then return j(t)end;return pac.contentLengthFallback(f,j,k)end,function(q,w,l)if l==405 then return pac.contentLengthFallback(f,j,k)end;return k(q,w)end)end;function pac.contentLengthFallback(f,j,k)local function x()return k("unable to determine content length",true)end;return g("GET",f,{["Range"]="bytes=0-0"},function(m,y,i)local z=i["Content-Range"]if!z then return x()end;local A=string.Split(z,"/")local B=A[2]if B then return j(tonumber(B))end;return x()end)end;function pac.HTTPGet(f,j,k)if!f||f:len()<4 then k("url length is less than 4 ("..tostring(f)..")",true)return end;f=pac.FixUrl(f)local C=d:GetInt()if CLIENT&&(b:GetBool()||C==-1)then C=a:GetInt()end;if C==-1 then return g("GET",f,nil,j,k)end;return pac.getContentLength(f,function(t)if t then if t<=C*1024 then g("GET",f,nil,j,k)else k("download is too big ("..string.NiceSize(t)..")",true)end else local D=e:GetInt()if CLIENT&&(b:GetBool()||D<0)then D=c:GetInt()end;if D>0 then g("GET",f,nil,j,k)else k("unknown file size when allow_no_contentlength is "..D,true)end end end,k)end
--addons/!lpakr_out/lua/pac3/libraries/string_stream.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/core/client/parts.lua:
local pac=pac;local a=0;local pairs=pairs;pac.registered_parts={}local function b(c)ErrorNoHalt(debug.traceback(c))end;local function d(e,f)if e.PreInitialize then e:PreInitialize()end;pac.AddPart(e)if f then e:SetPlayerOwner(f)end;e:Initialize()end;function pac.CreatePart(g,f,h,i,j)j=j||0;g=g||"base"f=f||pac.LocalPlayer;local k=pac.registered_parts[g]if!k then pac.Message("Tried to create unknown part: "..g..'!')k=pac.registered_parts.base;if!k then return NULL end end;local e=setmetatable({},k)e.Id=a;a=a+1;if!h||!h.self.UniqueID then e:SetUniqueID(pac.Hash())end;e.DefaultVars={}for l in pairs(e.StorableVars)do if l=="UniqueID"then e.DefaultVars[l]=""else e.DefaultVars[l]=pac.CopyValue(e[l])end end;local m,n=xpcall(d,b,e,f)if!m then e:Remove()if e.ClassName!="base"then return pac.CreatePart("base",f,h)end end;if h then e:SetTable(h,i,j)end;if!k.GloballyEnabled then e:SetEnabled(false)end;pac.dprint("creating %s part owned by %s",e.ClassName,tostring(f))return e end;local o=false;function pac.RegisterPart(k)assert(isstring(k.ClassName),"Part has no classname")assert(istable(k.StorableVars),"Part "..k.ClassName.." has no StorableVars")do local p="pac_enable_"..string.Replace(k.ClassName," ","_"):lower()local q=CreateClientConVar(p,"1",true)cvars.AddChangeCallback(p,function(g,r,s)local t=tobool(s)k.GloballyEnabled=t;if t then pac.Message("enabling parts by class "..k.ClassName)else pac.Message("disabling parts by class "..k.ClassName)end;pac.EnablePartsByClass(k.ClassName,t)end)k.GloballyEnabled=q:GetBool()end;k.__index=k;pac.registered_parts[k.ClassName]=k;if pac.UpdatePartsWithMetatable&&_G.pac_ReloadParts then if PAC_RESTART then return end;if!Entity(1):IsPlayer()then return end;if pac.in_initialize then return end;if!o then o=true;_G.pac_ReloadParts()o=false end;timer.Create("pac_reload",0,1,function()for u,v in pairs(pac.registered_parts)do pac.UpdatePartsWithMetatable(v)end end)end end;function pac.LoadParts()print("loading all parts")include("base_part.lua")include("base_movable.lua")include("base_drawable.lua")local w=file.Find("pac3/core/client/parts/*.lua","LUA")for u,g in pairs(w)do include("pac3/core/client/parts/"..g)end;local w=file.Find("pac3/core/client/parts/legacy/*.lua","LUA")for u,g in pairs(w)do include("pac3/core/client/parts/legacy/"..g)end end;function pac.GetRegisteredParts()return pac.registered_parts end
--addons/!lpakr_out/lua/pac3/core/client/bones.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/core/client/integration_tools.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/core/client/parts/animation.lua:
local FrameTime=FrameTime;local a,b=pac.PartTemplate("base")local c;c={__index={push=function(self,d)local e=self.stack;if#e==0 then table.insert(e,d)else local f=self:getTop()if f!=d then if f then f:OnStackStop()end;table.RemoveByValue(e,d)table.insert(e,d)end end;d:OnStackStart()end,pop=function(self,d)d:OnStackStop()local e=self.stack;if table.RemoveByValue(e,d)==#e+1 then local f=self:getTop()if f then f:OnStackStart()end end end,getTop=function(self)local e=self.stack;local f=e[#e]while f&&!f:IsValid()do table.remove(e)f=e[#e]end;return f end},__call=function(g)return setmetatable({stack={}},g)end,get=function(h)local i=h.pac_animation_stack;if!i then i=c()h.pac_animation_stack=i end;return i end}setmetatable(c,c)b.ClassName="animation"b.ThinkTime=0;b.Groups={'entity','model','modifiers'}b.Icon='icon16/eye.png'b.frame=0;a:StartStorableVars():GetSet("Loop",true):GetSet("PingPongLoop",false):GetSet("SequenceName","",{enums=function(d)local j={}for k,l in pairs(d:GetSequenceList())do j[l]=l end;return j end}):GetSet("Rate",1,{editor_sensitivity=0.1}):GetSet("Offset",0):GetSet("Min",0):GetSet("Max",1):GetSet("WeaponHoldType","none",{enums=function(d)return d.ValidHoldTypes end}):GetSet("OwnerCycle",false):GetSet("InvertFrames",false):GetSet("ResetOnHide",true):EndStorableVars()local tonumber=tonumber;b.ValidHoldTypes={pistol=ACT_HL2MP_IDLE_PISTOL,smg=ACT_HL2MP_IDLE_SMG1,grenade=ACT_HL2MP_IDLE_GRENADE,ar2=ACT_HL2MP_IDLE_AR2,shotgun=ACT_HL2MP_IDLE_SHOTGUN,rpg=ACT_HL2MP_IDLE_RPG,physgun=ACT_HL2MP_IDLE_PHYSGUN,crossbow=ACT_HL2MP_IDLE_CROSSBOW,melee=ACT_HL2MP_IDLE_MELEE,slam=ACT_HL2MP_IDLE_SLAM,normal=ACT_HL2MP_IDLE,fist=ACT_HL2MP_IDLE_FIST,melee2=ACT_HL2MP_IDLE_MELEE2,passive=ACT_HL2MP_IDLE_PASSIVE,knife=ACT_HL2MP_IDLE_KNIFE,duel=ACT_HL2MP_IDLE_DUEL,camera=ACT_HL2MP_IDLE_CAMERA,revolver=ACT_HL2MP_IDLE_REVOLVER,zombie=ACT_HL2MP_IDLE_ZOMBIE,magic=ACT_HL2MP_IDLE_MAGIC,meleeangry=ACT_HL2MP_IDLE_MELEE_ANGRY,angry=ACT_HL2MP_IDLE_ANGRY,suitcase=ACT_HL2MP_IDLE_SUITCASE,scared=ACT_HL2MP_IDLE_SCARED}function b:GetNiceName()local m=self:GetSequenceName()if m==""&&self:GetWeaponHoldType()!="none"then m=self:GetWeaponHoldType()end;return pac.PrettifyName(m)end;function b:GetSequenceList()local h=self:GetOwner()if h:IsValid()then return h:GetSequenceList()end;return{"none"}end;b.GetSequenceNameList=b.GetSequenceList;function b:OnStackStop()local h=self:GetOwner()if h:IsValid()then if!self:GetResetOnHide()then self.SequenceCycle=h:GetCycle()self.storeFrame=self.frame else self.SequenceCycle=nil;self.frame=0 end;if h.pac_animation_sequences then h.pac_animation_sequences[self]=nil end;if h.pac_animation_holdtypes then h.pac_animation_holdtypes[self]=nil end;if!h:IsPlayer()&&self.prevSequence then h:ResetSequence(self.prevSequence)self.prevSequence=nil end end end;function b:OnHide()local h=self:GetOwner()if!h:IsValid()then return end;c.get(h):pop(self)end;b.random_seqname=""function b:SetSequenceName(n)self.SequenceName=n;self.random_seqname=table.Random(n:Split(";"))if!self:IsHidden()then self:OnShow()end end;function b:OnStackStart()self.PlayingSequenceFrom=RealTime()local h=self:GetOwner()if h:IsValid()then self.prevSequence=h:GetSequence()self.random_seqname=table.Random(self.SequenceName:Split(";"))if self.random_seqname!=""then local o=h:LookupSequence(self.random_seqname)||0;local p=h:GetSequenceCount()||0;if o<0||o>p||p<0 then return end;h.pac_animation_sequences=h.pac_animation_sequences||{}h.pac_animation_sequences[self]=h.pac_animation_sequences[self]||{}local j=h.pac_animation_sequences[self]j.part=self;if o!=-1 then j.seq=o else o=tonumber(self.random_seqname)||-1;if o!=-1 then j.seq=o else h.pac_animation_sequences[self]=nil end end;if o!=-1 then h:ResetSequence(o)h:SetSequence(o)if!self:GetResetOnHide()then h:ResetSequenceInfo()for q=1,10 do h:FrameAdvance(1)end;h:ResetSequenceInfo()end end elseif h:IsPlayer()then local r=self.WeaponHoldType;r=r:lower()local s=self.ValidHoldTypes[r]h.pac_animation_holdtypes=h.pac_animation_holdtypes||{}if s==nil then h.pac_animation_holdtypes[self]=nil else local t={}t[ACT_MP_STAND_IDLE]=s+0;t[ACT_MP_WALK]=s+1;t[ACT_MP_RUN]=s+2;t[ACT_MP_CROUCH_IDLE]=s+3;t[ACT_MP_CROUCHWALK]=s+4;t[ACT_MP_ATTACK_STAND_PRIMARYFIRE]=s+5;t[ACT_MP_ATTACK_CROUCH_PRIMARYFIRE]=s+5;t[ACT_MP_RELOAD_STAND]=s+6;t[ACT_MP_RELOAD_CROUCH]=s+7;t[ACT_MP_JUMP]=s+8;t[ACT_RANGE_ATTACK1]=s+9;t[ACT_MP_SWIM_IDLE]=s+10;t[ACT_MP_SWIM]=s+11;if r=="normal"then t[ACT_MP_JUMP]=ACT_HL2MP_JUMP_SLAM end;if r=="knife"||r=="melee2"then t[ACT_MP_CROUCH_IDLE]=nil end;t.part=self;h.pac_animation_holdtypes[self]=t end end;if!self:GetResetOnHide()&&self.SequenceCycle then h:SetCycle(self.SequenceCycle)self.SequenceCycle=nil;if self.storeFrame then self.frame=self.storeFrame;self.storeFrame=nil end end end end;function b:OnShow()local h=self:GetOwner()if!h:IsValid()then return end;c.get(h):push(self)end;function b:OnThink()local h=self:GetOwner()if!h:IsPlayer()then self:OnUpdateAnimation(nil)end end;function b:OnUpdateAnimation(u)if self:IsHiddenCached()then return end;local h=self:GetOwner()if!h:IsValid()||!h.pac_animation_stack||h.pac_animation_stack.stack[#h.pac_animation_stack.stack]!=self then return end;if u&&h!=u then return end;if!self.random_seqname then return end;local o,v=h:LookupSequence(self.random_seqname)local p=h:GetSequenceCount()||0;if o<0||o>=p then return end;if self.OwnerCycle then local w=self:GetRootPart():GetOwner()if IsValid(w)then h:SetCycle(w:GetCycle())end;return end;local x=self.Min;local y=self.Max;local z=y-x;if x==y then local A=x;if pac.IsNumberValid(A)then h:SetCycle(self.InvertFrames&&1-A||A)end;return end;local B=v==0&&0||self.Rate/v/math.abs(z)*FrameTime()if self.PingPongLoop then if self.Loop then self.frame=(self.frame+B)%2 else self.frame=math.max(math.min(self.frame+B,2),0)end;local A=x+math.abs(1-(self.frame+1+self.Offset)%2)*z;if pac.IsNumberValid(A)then h:SetCycle(self.InvertFrames&&1-A||A)end else if self.Loop then self.frame=(self.frame+B)%2 else self.frame=math.max(math.min(self.frame+B,1),0)end;local A=x+(self.frame+self.Offset)%1*z;if pac.IsNumberValid(A)then h:SetCycle(self.InvertFrames&&1-A||A)end end end;a:Register()
--addons/!lpakr_out/lua/pac3/core/client/parts/info.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/core/client/parts/projectile.lua:
language.Add("pac_projectile","Projectile")local a,b=pac.PartTemplate("base_movable")b.ClassName="projectile"b.Group='advanced'b.Icon='icon16/bomb.png'a:StartStorableVars()a:GetSet("Speed",1)a:GetSet("AddOwnerSpeed",false)a:GetSet("Damping",0)a:GetSet("Gravity",true)a:GetSet("Collisions",true)a:GetSet("Sphere",false)a:GetSet("Radius",1)a:GetSet("DamageRadius",50)a:GetSet("LifeTime",5)a:GetSet("AimDir",false)a:GetSet("Sticky",false)a:GetSet("Bounce",0)a:GetSet("BulletImpact",false)a:GetSet("Damage",0)a:GetSet("DamageType","generic",{enums={generic=0,crush=1,bullet=2,slash=4,burn=8,vehicle=16,fall=32,blast=64,club=128,shock=256,sonic=512,energybeam=1024,nevergib=4096,alwaysgib=8192,drown=16384,paralyze=32768,nervegas=65536,poison=131072,acid=1048576,airboat=33554432,blast_surface=134217728,buckshot=536870912,direct=268435456,dissolve=67108864,drownrecover=524288,physgun=8388608,plasma=16777216,prevent_physics_force=2048,radiation=262144,removenoragdoll=4194304,slowburn=2097152,explosion=-1,fire=-1,dissolve_energy=0,dissolve_heavy_electrical=1,dissolve_light_electrical=2,dissolve_core_effect=3,heal=-1,armor=-1}})a:GetSet("Spread",0)a:GetSet("Delay",0)a:GetSet("Maximum",0)a:GetSet("Mass",100)a:GetSet("Attract",0)a:GetSet("AttractMode","projectile_nearest",{enums={hitpos="hitpos",hitpos_radius="hitpos_radius",closest_to_projectile="closest_to_projectile",closest_to_hitpos="closest_to_hitpos"}})a:GetSet("AttractRadius",200)a:GetSetPart("OutfitPart")a:GetSet("Physical",false)a:GetSet("CollideWithOwner",false)a:GetSet("CollideWithSelf",false)a:GetSet("RemoveOnCollide",false)a:EndStorableVars()b.Translucent=false;function b:OnShow(c)if!c then local d=self:GetParentList()for e=#d,1,-1 do local f=d[e]if f.Draw then f:Draw("opaque")end end;self:Shoot(self:GetDrawPosition())end end;function b:AttachToEntity(g)if!self.OutfitPart:IsValid()then return false end;g.pac_draw_distance=0;local h=self.OutfitPart:ToTable()local i=pac.CreatePart("group",self:GetPlayerOwner())i:SetShowInEditor(false)local f=pac.CreatePart(h.self.ClassName,self:GetPlayerOwner(),h,tostring(h))i:AddChild(f)i:SetOwner(g)i.SetOwner=function(j)j.Owner=g end;f:SetHide(false)local k=i.Id;local l=self:GetPlayerOwnerId()if l then k=k..l end;g:CallOnRemove("pac_projectile_"..k,function()i:Remove()end)i:CallRecursive("Think")g.RenderOverride=g.RenderOverride||function()if self.AimDir then g:SetRenderAngles(g:GetVelocity():Angle())end end;g.pac_projectile_part=i;g.pac_projectile=self;return true end;local m=CreateClientConVar("pac_sv_projectiles",0,true)function b:Shoot(n,o)local p=self.Physical;if p then if pac.LocalPlayer!=self:GetPlayerOwner()then return end;local h={}for q in pairs(self:GetStorableVars())do h[q]=self[q]end;net.Start("pac_projectile")net.WriteVector(n)net.WriteAngle(o)net.WriteTable(h)net.SendToServer()else self.projectiles=self.projectiles||{}local r=0;for q,g in pairs(self.projectiles)do if!g:IsValid()then self.projectiles[q]=nil else r=r+1 end end;local s=math.min(self.Maximum,100)if s==0 then s=100 end;if r>s then return end;local function t()if!self:IsValid()then return end;local g=pac.CreateEntity("models/props_junk/popcan01a.mdl")if!g:IsValid()then return end;local u=table.insert(self.projectiles,g)g:AddCallback("PhysicsCollide",function(g,v)local w=g:GetPhysicsObject()if self.Bounce>0 then timer.Simple(0,function()if w:IsValid()then w:SetVelocity(v.OurOldVelocity-2*v.HitNormal:Dot(v.OurOldVelocity)*v.HitNormal*self.Bounce)end end)elseif self.Sticky then w:SetVelocity(Vector(0,0,0))w:EnableMotion(false)g.pac_stuck=v.OurOldVelocity end;if self.BulletImpact then g:FireBullets{Attacker=g:GetOwner(),Damage=0,Force=0,Num=1,Src=v.HitPos-v.HitNormal,Dir=v.HitNormal,Distance=10}end;if self.RemoveOnCollide then timer.Simple(0.01,function()SafeRemoveEntity(g)end)end end)g:SetOwner(self:GetPlayerOwner(true))g:SetPos(n)g:SetAngles(o)g:SetCollisionGroup(COLLISION_GROUP_PROJECTILE)if self.Sphere then g:PhysicsInitSphere(math.Clamp(self.Radius,1,30))else g:PhysicsInitBox(Vector(1,1,1)*-math.Clamp(self.Radius,1,30),Vector(1,1,1)*math.Clamp(self.Radius,1,30))end;g.RenderOverride=function()if!self:IsValid()then return end;if!self:GetRootPart():GetOwner():IsValid()then timer.Simple(0,function()SafeRemoveEntity(g)end)end;if self.AimDir then if g.pac_stuck then g:SetRenderAngles(g.pac_stuck:Angle())else local x=g:GetVelocity():Angle()g:SetRenderAngles(x)g.last_angle=x end end end;local w=g:GetPhysicsObject()w:EnableGravity(self.Gravity)w:AddVelocity((o:Forward()+VectorRand():Angle():Forward()*self.Spread)*self.Speed*1000)if self.AddOwnerSpeed&&g:GetOwner():IsValid()then w:AddVelocity(g:GetOwner():GetVelocity())end;w:EnableCollisions(self.Collisions)w:SetDamping(self.Damping,0)g:SetCollisionGroup(COLLISION_GROUP_PROJECTILE)if self:AttachToEntity(g)then timer.Simple(math.Clamp(self.LifeTime,0,10),function()if g:IsValid()then if g.pac_projectile_part&&g.pac_projectile_part:IsValid()then g.pac_projectile_part:Remove()end;timer.Simple(0.5,function()SafeRemoveEntity(g)end)end end)end end;if self.Delay==0 then t()else timer.Simple(self.Delay,t)end end end;function b:OnRemove()if!self.Physical&&self.projectiles then for q,g in pairs(self.projectiles)do SafeRemoveEntity(g)end;self.projectiles={}end end;do local Entity=Entity;local y={}pac.AddHook("Think","pac_projectile",function()for q,v in pairs(y)do if!v.ply:IsValid()then y[q]=nil;goto z end;local g=Entity(v.ent_id)if g:IsValid()&&g:GetClass()=="pac_projectile"then local f=pac.GetPartFromUniqueID(pac.Hash(v.ply),v.partuid)if f:IsValid()&&f:GetPlayerOwner()==v.ply then f:AttachToEntity(g)end;y[q]=nil end::z::end end)net.Receive("pac_projectile_attach",function()local A=net.ReadEntity()local B=net.ReadInt(16)local C=net.ReadString()if A:IsValid()then table.insert(y,{ply=A,ent_id=B,partuid=C})end end)end;a:Register()
--addons/!lpakr_out/lua/pac3/libraries/webaudio/urlogg.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/libraries/webaudio/stream.lua:
pac.webaudio=pac.webaudio||{}local a=pac.webaudio;a.Streams=a.Streams||{}a.FilterType={None=0,LowPass=1,HighPass=2}local b,c,d=Vector(),Angle(),Vector()local e,f;pac.AddHook("RenderScene","webaudio_3d",function(g,h)b=g;c=h;e=e||b;f=f||CurTime()-FrameTime()d=(b-e)/(CurTime()-f)e=b;f=CurTime()end)a.Streams.STREAM={}local i=a.Streams.STREAM;i.__index=i;i.Id=nil;i.Url=""i.Loaded=false;i.SampleCount=0;i.Paused=true;i.SamplePosition=0;i.MaxLoopCount=nil;i.PlaybackSpeed=1;i.AdditivePitchModifier=0;i.Panning=0;i.Volume=1;i.AdditiveVolumeFraction=0;i.Use3d=nil;i.UseDoppler=true;i.SourceEntity=NULL;i.SourcePosition=nil;i.LastSourcePosition=nil;i.LastSourcePositionTime=nil;i.SourceVelocity=nil;i.SourceRadius=1000;i.ListenerOutOfRadius=false;local function j(k,l,m,n)i[k]=m;i["Set"..k]=function(self,o)if n then o=n(o,self)end;self[k]=o;self:Call(l,o)end;i["Get"..k]=function(self,...)return self[k]end end;function i:GetId()return self.Id end;function i:SetId(p)self.Id=p;return self end;function i:GetUrl()return self.Url end;function i:SetUrl(q)self.Url=q;return self end;function i:IsLoaded()return self.Loaded end;function i:IsValid()return true end;function i:Remove()self.IsValid=function()return false end end;function i:Call(r,...)if!self.Loaded then return end;local s=string.format("try { streams[%d]%s } catch(e) { lua.print(e.toString()) }",self:GetId(),string.format(r,...))a.Browser.QueueJavascript(s)end;function i:CallNow(r,...)if!self.Loaded then return end;local s=string.format("try { streams[%d]%s } catch(e) { lua.print(e.toString()) }",self:GetId(),string.format(r,...))a.Browser.RunJavascript(s)end;function i:HandleBrowserMessage(u,...)if u=="call"then self:HandleCallBrowserMessage(...)elseif u=="fft"then self:HandleFFTBrowserMessage(...)elseif u=="stop"then self.Paused=true elseif u=="return"then self.ReturnedValues={...}elseif u=="loaded"then self:HandleLoadedBrowserMessage(...)elseif t=="position"then self:HandlePositionBrowserMessage(...)end end;function i:GetMaxLoopCount()return self.MaxLoopCount end;function i:SetMaxLoopCount(v)self:Call(".max_loop = %i",v==true&&-1||v==false&&1||tonumber(v)||1)self.MaxLoopCount=v end;i.SetLooping=i.SetMaxLoopCount;function i:GetSampleCount()return self.SampleCount end;function i:Pause()self.Paused=true;self:CallNow(".play(false)")end;function i:Resume()self.Paused=false;self:UpdatePlaybackSpeed()self:UpdateVolume()self:CallNow(".play(true)")end;function i:Start()self.Paused=false;self:UpdatePlaybackSpeed()self:UpdateVolume()self:CallNow(".play(true, 0)")end;i.Play=i.Start;function i:Stop()self.Paused=true;self:CallNow(".play(false, 0)")end;function i:Restart()self:SetSamplePosition(0)end;function i:SetPosition(w)self:SetSamplePosition(w%1*self:GetSampleCount())end;j("SamplePosition",".position = %f",0)function i:GetPlaybackSpeed()return self.PlaybackSpeed end;function i:GetAdditivePitchModifier()return self.AdditivePitchModifier end;function i:SetPlaybackSpeed(x)if self.PlaybackSpeed==x then return self end;self.PlaybackSpeed=x;self:UpdatePlaybackSpeed()return self end;function i:SetAdditivePitchModifier(y)if self.AdditivePitchModifier==y then return self end;self.AdditivePitchModifier=y;self:UpdatePlaybackSpeed()return self end;function i:UpdatePlaybackSpeed()self:Call(".speed = %f",self.PlaybackSpeed+self.AdditivePitchModifier)end;function i:GetPanning()return self.Panning end;function i:GetVolume()return self.Volume end;function i:GetAdditiveVolumeModifier()return self.AdditiveVolumeModifier end;function i:SetPanning(z)if self.Panning==z then return self end;self.Panning=z;self:UpdateVolume()return self end;function i:SetVolume(A)if self.Volume==A then return self end;self.Volume=A;self:UpdateVolume()return self end;function i:SetAdditiveVolumeModifier(B)if self.AdditiveVolumeFraction==B then return self end;self.AdditiveVolumeFraction=B;self:UpdateVolume()return self end;function i:UpdateSourcePosition()if!self.SourceEntity:IsValid()then return end;self.SourcePosition=self.SourceEntity:GetPos()end;function i:UpdateVolume()if self.Use3d then self:UpdateVolume3d()else self:UpdateVolumeFlat()end end;function i:UpdateVolumeFlat()self:Call(".vol_right = %f",math.Clamp(1+self.Panning,0,1)*self.Volume+self.AdditiveVolumeFraction)self:Call(".vol_left  = %f",math.Clamp(1-self.Panning,0,1)*self.Volume+self.AdditiveVolumeFraction)end;function i:UpdateVolume3d()self:UpdateSourcePosition()self.SourcePosition=self.SourcePosition||Vector()self.LastSourcePosition=self.LastSourcePosition||self.SourcePosition;self.LastSourcePositionTime=self.LastSourcePositionTime||CurTime()-FrameTime()self.SourceVelocity=(self.SourcePosition-self.LastSourcePosition)/(CurTime()-self.LastSourcePositionTime)self.LastSourcePosition=self.SourcePosition;self.LastSourcePositionTime=CurTime()local C=self.SourcePosition-b;local D=C:Length()if D<self.SourceRadius then local E=C:GetNormalized():Dot(c:Right())local A=math.Clamp(1-D/self.SourceRadius,0,1)^1.5;A=A*0.75*self.Volume;self:Call(".vol_right = %f",math.Clamp(1+E,0,1)*A+self.AdditiveVolumeFraction)self:Call(".vol_left  = %f",math.Clamp(1-E,0,1)*A+self.AdditiveVolumeFraction)if self.UseDoppler then local C=self.SourcePosition-b;local F=self.SourceVelocity-d;local G=C:GetNormalized():Dot(-F)*0.0254;self:Call(".speed = %f",self.PlaybackSpeed+G/a.SpeedOfSound+self.AdditivePitchModifier)end;self.ListenerOutOfRadius=false else if!self.ListenerOutOfRadius then self:Call(".vol_right = 0")self:Call(".vol_left  = 0")self.ListenerOutOfRadius=true end end end;j("FilterType",".filter_type = %i")j("FilterFraction",".filter_fraction = %f",0,function(H)return math.Clamp(H,0,1)end)j("Echo",".useEcho(%s)",false)j("EchoDelay",".setEchoDelay(Math.ceil(audio.sampleRate * %f))",1,function(H)return math.max(H,0)end)j("EchoFeedback",".echo_feedback = %f",0.75)function i:Enable3D(I)self.Use3d=I end;function i:EnableDoppler(I)self.UseDoppler=I end;function i:GetSourceEntity()return self.SourceEntity end;function i:SetSourceEntity(J,K)self.SourceEntity=J;if!K then J:CallOnRemove("webaudio_remove_stream_"..tostring(self),function()if self:IsValid()then self:Remove()end end)end end;function i:GetSourcePosition()return self.SourcePosition end;function i:SetSourcePosition(L)self.SourcePosition=L end;function i:GetSourceVelocity()return self.SourceVelocity end;function i:SetSourceVelocity(L)self.SourceVelocity=L end;function i:GetSourceRadius()return self.SourceRadius end;function i:SetSourceRadius(M)self.SourceRadius=M end;function i:Think()if self.Paused then return end;if self.Use3d then self:UpdateVolume3d()else self:UpdateSourcePosition()end end;function i:__newindex(N,O)if N=="OnFFT"then if isfunction(O)then self:Call(".usefft(true)")else self:Call(".usefft(false)")end end;rawset(self,N,O)end;function i:__tostring()return string.format("stream[%p][%d][%s]",self,self:GetId(),self:GetUrl())end;function i:HandleCallBrowserMessage(P,...)if!self[P]then return end;self[P](self,...)end;function i:HandleFFTBrowserMessage(Q)local R=CompileString(Q,"stream_fft_data")()self.OnFFT(R)end;function i:HandleLoadedBrowserMessage(S)self.Loaded=true;self.SampleCount=S;self:SetFilterType(0)if!self.Paused then end;self:SetMaxLoopCount(self:GetMaxLoopCount())self:SetEcho(self:GetEcho())self:SetEchoFeedback(self:GetEchoFeedback())self:SetEchoDelay(self:GetEchoDelay())if self.OnLoad then self:OnLoad()end end;function i:HandlePositionBrowserMessage(T)self.SamplePosition=T end
--addons/!lpakr_out/lua/pac3/libraries/luadata.lua:
local a;do local b;local jit=jit||require("jit")local c=jit&&jit.version_num||0;if c>=20000&&c<=20009 then b="ISLT  ISGE  ISLE  ISGT  ISEQV ISNEV ISEQS ISNES ISEQN ISNEN ISEQP ISNEP ISTC  ISFC  IST   ISF   MOV   NOT   UNM   LEN   ADDVN SUBVN MULVN DIVVN MODVN ADDNV SUBNV MULNV DIVNV MODNV ADDVV SUBVV MULVV DIVVV MODVV POW   CAT   KSTR  KCDATAKSHORTKNUM  KPRI  KNIL  UGET  USETV USETS USETN USETP UCLO  FNEW  TNEW  TDUP  GGET  GSET  TGETV TGETS TGETB TSETV TSETS TSETB TSETM CALLM CALL  CALLMTCALLT ITERC ITERN VARG  ISNEXTRETM  RET   RET0  RET1  FORI  JFORI FORL  IFORL JFORL ITERL IITERLJITERLLOOP  ILOOP JLOOP JMP   FUNCF IFUNCFJFUNCFFUNCV IFUNCVJFUNCVFUNCC FUNCCW"elseif c==20100 then b="ISLT  ISGE  ISLE  ISGT  ISEQV ISNEV ISEQS ISNES ISEQN ISNEN ISEQP ISNEP ISTC  ISFC  IST   ISF   ISTYPEISNUM MOV   NOT   UNM   LEN   ADDVN SUBVN MULVN DIVVN MODVN ADDNV SUBNV MULNV DIVNV MODNV ADDVV SUBVV MULVV DIVVV MODVV POW   CAT   KSTR  KCDATAKSHORTKNUM  KPRI  KNIL  UGET  USETV USETS USETN USETP UCLO  FNEW  TNEW  TDUP  GGET  GSET  TGETV TGETS TGETB TGETR TSETV TSETS TSETB TSETM TSETR CALLM CALL  CALLMTCALLT ITERC ITERN VARG  ISNEXTRETM  RET   RET0  RET1  FORI  JFORI FORL  IFORL JFORL ITERL IITERLJITERLLOOP  ILOOP JLOOP JMP   FUNCF IFUNCFJFUNCFFUNCV IFUNCVJFUNCVFUNCC FUNCCW"end;local d=jit.util;if!d then local e,f=pcall(require,'jit.util')if!e then b=nil else d=f end end;if!b then if!d then print("[luadata] Verifier could not be loaded. luadata may cause infinite loops.")else ErrorNoHalt"LUADATA SECURITY WARNING: Unable to load verifier, update me!\n"end;a=function()return function()return true end end else local g=bit.band;local h={}for i in b:gmatch"......"do i=i:gsub("%s","")table.insert(h,i)end;local function j(k)for l,m in next,h do if m==k then return l end end;error("not found: "..k)end;local function n(o,p)local q=d.funcbc(o,p)return q&&g(q,0xff)+1 end;a=function(r)local s={}for t=0,#h do table.insert(s,false)end;local function u(v)local w=s[v]if w==nil then error("opcode not found "..v)end;return w end;local function x(y)if s[y]==nil then error"invalid opcode num"end;s[y]=true end;for z in r:gmatch'[^\r\n]+'do local A=z:match'[%w]+'if A&&A:len()>0 then local B=j(A)x(B)assert(u(B))end end;local function C(o,D)D=D||math.huge;for t=1,D do local w=n(o,t)if!w then return true end;if!u(w)then return false,"non-whitelisted: "..h[w]end end;return false,"checked max_opcodes"end;return C end end end;local E=[[TNEW
TDUP

TSETV
TSETS
TSETB
TSETM

KSTR
KCDATA
KSHORT
KNUM
KPRI
KNIL

UNM

GGET
CALL
RET1]]local F=a(E)local G={}local H=G;G.is_func_ok=F;G.EscapeSequences={[("\a"):byte()]=[[\a]],[("\b"):byte()]=[[\b]],[("\f"):byte()]=[[\f]],[("\t"):byte()]=[[\t]],[("\r"):byte()]=[[\r]],[("\v"):byte()]=[[\v]]}local I=0;G.Types={["number"]=function(J)return("%s"):format(J)end,["string"]=function(J)return("%q"):format(J)end,["boolean"]=function(J)return("%s"):format(J&&"true"||"false")end,["Vector"]=function(J)return("Vector(%s, %s, %s)"):format(J.x,J.y,J.z)end,["Angle"]=function(J)return("Angle(%s, %s, %s)"):format(J.p,J.y,J.r)end,["table"]=function(J)if isnumber(J.r)&&isnumber(J.g)&&isnumber(J.b)&&isnumber(J.a)then return("Color(%s, %s, %s, %s)"):format(J.r,J.g,J.b,J.a)end;I=I+1;local i=G.Encode(J,true)I=I-1;return i end}function G.SetModifier(type,K)G.Types[type]=K end;function G.Type(J)local L;if IsEntity(J)then if J:IsValid()then L="Entity"else L="NULL"end else L=type(J)end;if L=="table"then if J.LuaDataType then L=J.LuaDataType end end;return L end;function G.ToString(J)local o=H.Types[H.Type(J)]return o&&o(J)end;function G.Encode(M,N)if G.Hushed then return end;local i=N&&"{\n"||""for O,P in pairs(M)do P=H.ToString(P)O=H.ToString(O)if O&&P&&O!="__index"then i=i..("\t"):rep(I)..("[%s] = %s,\n"):format(O,P)end end;i=i..("\t"):rep(I-1)..(N&&"}"||"")return i end;local Q={Vector=Vector,Angle=Angle,Color=Color}function G.Decode(i,R)local o=CompileString(string.format("return { %s }",i),"luadata_decode",false)if isstring(o)then return nil,o end;if!R then setfenv(o,Q)elseif istable(R)then setfenv(o,R)elseif isfunction(R)then R(o)end;local e,S=F(o)if!e||S then S=S||"invalid opcodes detected"return nil,S end;local e,S=xpcall(o,debug.traceback)if!e then return nil,S end;if isfunction(R)then R(o,S)end;return S end;do function G.WriteFile(T,M)if M==nil||false then if file.Exists(T,'DATA')then file.Delete(T,'DATA')return true end;return false,"file does not exist"end;local U=G.Encode(M)file.Write(T,U)return U end;function G.ReadFile(T,V,W)local file=file.Read(T,V||'DATA')if!file then if W then return end;return false,"invalid file"end;return G.Decode(file)end end;return G
--addons/!lpakr_out/lua/pac3/editor/client/icons.lua:
pace.MiscIcons={about="icon16/star.png",appearance="icon16/paintcan.png",autoload="icon16/transmit_go.png",chat="icon16/comment.png",clear="icon16/cross.png",clone="icon16/page_copy.png",copy="icon16/page_white_text.png",edit="icon16/table_edit.png",error="icon16/exclamation.png",exit="icon16/cancel.png",font="icon16/text_smallcaps.png",help="icon16/help.png",info="icon16/information.png",language="icon16/user_comment.png",load="icon16/folder.png",new="icon16/add.png",orientation="icon16/shape_handles.png",outfit="icon16/group.png",paste="icon16/paste_plain.png",replace="icon16/arrow_refresh.png",revert="icon16/table_delete.png",save="icon16/disk.png",uniqueid="icon16/vcard.png",url="icon16/server_go.png",warning="icon16/error.png",wear="icon16/transmit.png"}pace.GroupsIcons={effects='icon16/wand.png',model='icon16/shape_square.png',entity='icon16/brick.png',modifiers='icon16/disconnect.png',advanced='icon16/page_white_gear.png',experimental='icon16/bug.png',legacy='icon16/hourglass.png'}
--addons/!lpakr_out/lua/pac3/editor/client/wear.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/editor/client/parts.lua:
local a=pace.LanguageString;local function b(c,d)local e=c.OnCursorEntered;c.OnCursorEntered=function(...)d()c.OnCursorEntered=e;return e(...)end end;function pace.WearParts(f)local g,h=pac.CallHook("CanWearParts",pac.LocalPlayer)if g==false then pac.Message(h||"the server doesn't want you to wear parts for some reason")return end;return pace.WearOnServer(f)end;function pace.OnCreatePart(i,j,k,l)local m;local n=NULL;if l then if i!="group"then local o;local p=pac.GetLocalParts()if table.Count(p)==1 then local q=select(2,next(p))if q.ClassName=="group"then o=q end else o=pac.CreatePart("group")end;m=pac.CreatePart(i)m:SetParent(o)n=o else m=pac.CreatePart(i)end else if i!="group"&&!next(pac.GetLocalParts())then pace.Call("CreatePart","group")end;m=pac.CreatePart(i)n=pace.current_part;if n:IsValid()then m:SetParent(n)elseif i!="group"then for r,s in pairs(pac.GetLocalParts())do if s.ClassName=="group"then m:SetParent(s)n=s;break end end end end;if j then m:SetName(j)end;if m.SetModel then if k then m:SetModel(k)elseif i=="model"||i=="model2"then m:SetModel("models/pac/default.mdl")end end;local t=pac.LocalPlayer;if m:GetPlayerOwner()==t then pace.SetViewPart(m)end;if!input.IsControlDown()then pace.Call("PartSelected",m)end;m.newly_created=true;if n.GetDrawPosition&&n:IsValid()&&!n:HasParent()&&n.OwnerName=="world"&&m:GetPlayerOwner()==t then local u=t:GetEyeTrace()if u.HitPos:Distance(t:GetPos())<1000 then m:SetPosition(u.HitPos)else m:SetPosition(t:GetPos())end end;pace.RefreshTree()return m end;function pace.OnPartSelected(m,v)local n=m:GetRootPart()if n:IsValid()&&(n.OwnerName=="viewmodel"||n.OwnerName=="hands")then pace.editing_viewmodel=n.OwnerName=="viewmodel"pace.editing_hands=n.OwnerName=="hands"elseif pace.editing_viewmodel||pace.editing_hands then pace.editing_viewmodel=false;pace.editing_hands=false end;pace.current_part=m;pace.PopulateProperties(m)pace.mctrl.SetTarget(m)pace.SetViewPart(m)if pace.Editor:IsValid()then pace.Editor:InvalidateLayout()end;pace.SafeRemoveSpecialPanel()if pace.tree:IsValid()then pace.tree:SelectPart(m)end;pace.current_part_uid=m.UniqueID;if!v then pace.StopSelect()end end;function pace.OnVariableChanged(obj,w,x,y)local z=type(x)if z=='Vector'then x=Vector(x)elseif z=='Angle'then x=Angle(x)end;if!y then timer.Create("pace_backup",1,1,pace.Backup)if!pace.undo_release_varchange then pace.RecordUndoHistory()pace.undo_release_varchange=true end;timer.Create("pace_undo",0.25,1,function()pace.undo_release_varchange=false;pace.RecordUndoHistory()end)end;if w=="OwnerName"then local A=obj:GetProperty(w)if x=="viewmodel"then pace.editing_viewmodel=true elseif x=="hands"then pace.editing_hands=true elseif A=="hands"then pace.editing_hands=false elseif A=="viewmodel"then pace.editing_viewmodel=false end end;obj:SetProperty(w,x)local B=obj.pace_tree_node;if IsValid(B)then if w=="Event"then pace.PopulateProperties(obj)elseif w=="Name"then if!obj:HasParent()then pace.RemovePartOnServer(obj:GetUniqueID(),true,true)end;B:SetText(x)elseif w=="Model"&&x&&x!=""&&isstring(x)then B:SetModel(x)elseif w=="Parent"then local C=obj.pace_tree_node;if IsValid(C)then B:Remove()C=C:GetRoot()if C:IsValid()then C:SetSelectedItem(nil)pace.RefreshTree(true)end end end;if obj.Name==""then B:SetText(pace.pac_show_uniqueid:GetBool()&&string.format("%s (%s)",obj:GetName(),obj:GetPrintUniqueID())||obj:GetName())end end;if obj.ClassName:StartWith("sound",nil,true)then timer.Create("pace_preview_sound",0.25,1,function()obj:OnShow()end)end;timer.Simple(0,function()if!IsValid(obj)then return end;local D=obj.pace_properties&&obj.pace_properties[w]if IsValid(D)then local e=D.OnValueChanged;D.OnValueChanged=function()end;D:SetValue(x)D.OnValueChanged=e end end)end;pac.AddHook("pac_OnPartParent","pace_parent",function(n,E)pace.Call("VariableChanged",n,"Parent",E,true)end)function pace.GetRegisteredParts()local F={}for i,G in pairs(pac.GetRegisteredParts())do local H=!G.ClassName:StartWith("base")&&G.show_in_editor!=false&&G.is_deprecated!=false;if H then table.insert(F,G)end end;return F end;do local I;function pace.AddRegisteredPartsToMenu(J,n)local K={}local L=false;hook.Add('Think',J,function()local M=input.IsControlDown()if L&&!M then J:SetDeleteSelf(true)RegisterDermaMenuForClose(J)CloseDermaMenus()return end;J:SetDeleteSelf(!M)end)hook.Add('CloseDermaMenus',J,function()L=true;if input.IsControlDown()then J:SetVisible(true)RegisterDermaMenuForClose(J)end end)local function N(J,m)local O=J:AddOption(a(m.FriendlyName||m.ClassName:Replace('_',' ')),function()pace.RecordUndoHistory()pace.Call("CreatePart",m.ClassName,nil,nil,n)pace.RecordUndoHistory()I=true end)if m.Icon then O:SetImage(m.Icon)if m.Group=="legacy"then local P=Material(pace.GroupsIcons.experimental)O.m_Image.PaintOver=function(r,Q,R)surface.SetMaterial(P)surface.DrawTexturedRect(2,6,13,13)end end end end;local S={}for r,m in pairs(pace.GetRegisteredParts())do local o=m.Group||m.Groups||"other"if isstring(o)then o={o}end;for T,j in ipairs(o)do if!S[j]then S[j]={}S[j].parts={}S[j].icon=pace.GroupsIcons[j]S[j].name=a(j)end;K[m.ClassName]=nil;if j==m.ClassName||j==m.FriendlyName then S[j].group_class_name=m.ClassName else table.insert(S[j].parts,m)end end end;local U=S.other;S.other=nil;for o,V in pairs(S)do local W,c=J:AddSubMenu(V.name,function()if V.group_class_name then pace.RecordUndoHistory()pace.Call("CreatePart",V.group_class_name,nil,nil,n)pace.RecordUndoHistory()end end)W.GetDeleteSelf=function()return false end;if V.icon then c:SetImage(V.icon)end;I=false;table.sort(V.parts,function(X,Y)return X.ClassName<Y.ClassName end)for T,m in ipairs(V.parts)do N(W,m)end;hook.Add('Think',W,function()local M=input.IsControlDown()if L&&!M then W:SetDeleteSelf(true)RegisterDermaMenuForClose(W)CloseDermaMenus()return end;W:SetDeleteSelf(!M)end)hook.Add('CloseDermaMenus',W,function()if input.IsControlDown()&&I then I=false;W:SetVisible(true)end;RegisterDermaMenuForClose(W)end)end;for T,s in ipairs(U.parts)do N(J,s)end;for i,m in pairs(K)do local O=J:AddOption(a((m.FriendlyName||m.ClassName):Replace('_',' ')),function()pace.RecordUndoHistory()pace.Call("CreatePart",i,nil,nil,n)pace.RecordUndoHistory()end)if m.Icon then O:SetImage(m.Icon)end end end;function pace.OnAddPartMenu(obj)local Z=vgui.Create("EditablePanel")Z:SetPos(input.GetCursorPos())Z:SetSize(200,300)Z:MakePopup()function Z:OnRemove()pac.RemoveHook("VGUIMousePressed","search_part_menu")end;local _=Z:Add("DTextEntry")_:SetTall(20)_:Dock(TOP)_:RequestFocus()_:SetUpdateOnType(true)local a0=Z:Add("DPanel")a0:Dock(FILL)function _:OnEnter()if a0.found[1]then pace.RecordUndoHistory()pace.Call("CreatePart",a0.found[1].ClassName)pace.RecordUndoHistory()end;Z:Remove()end;_.OnValueChange=function(r,a1)a0:Clear()a0.found={}for r,m in ipairs(pace.GetRegisteredParts())do if(m.FriendlyName||m.ClassName):find(a1,nil,true)then table.insert(a0.found,m)end end;table.sort(a0.found,function(X,Y)return#X.ClassName<#Y.ClassName end)for r,m in ipairs(a0.found)do local a2=a0:Add("DButton")a2:SetText("")a2:SetTall(20)a2.DoClick=function()pace.RecordUndoHistory()pace.Call("CreatePart",m.ClassName)Z:Remove()pace.RecordUndoHistory()end;local a3=a2:Add("DImageButton")a3:SetSize(16,16)a3:SetPos(4,0)a3:CenterVertical()a3:SetMouseInputEnabled(false)if m.Icon then a3:SetImage(m.Icon)if m.Group=="legacy"then local P=Material(pace.GroupsIcons.experimental)a3.m_Image.PaintOver=function(r,Q,R)surface.SetMaterial(P)surface.DrawTexturedRect(2,6,13,13)end end end;local a4=a2:Add("DLabel")a4:SetTextColor(a4:GetSkin().Colours.Category.Line.Text)a4:SetText(a((m.FriendlyName||m.ClassName):Replace('_',' ')))a4:SizeToContents()a4:MoveRightOf(a3,4)a4:SetMouseInputEnabled(false)a4:CenterVertical()a2:Dock(TOP)end;Z:SetHeight(20*#a0.found+_:GetTall())end;_:OnValueChange("")pac.AddHook("VGUIMousePressed","search_part_menu",function(c,a5)if a5==MOUSE_LEFT||a5==MOUSE_RIGHT then if!Z:IsOurChild(c)then Z:Remove()end end end)end;function pace.Copy(obj)pace.Clipboard=obj:ToTable()end;function pace.Cut(obj)pace.RecordUndoHistory()pace.Copy(obj)obj:Remove()pace.RecordUndoHistory()end;function pace.Paste(obj)if!pace.Clipboard then return end;pace.RecordUndoHistory()local a6=pac.CreatePart(pace.Clipboard.self.ClassName)a6:SetTable(pace.Clipboard,true)a6:SetParent(obj)pace.RecordUndoHistory()end;function pace.PasteProperties(obj)if!pace.Clipboard then return end;pace.RecordUndoHistory()local a7=pace.Clipboard;a7.self.Name=nil;a7.self.ParentUID=nil;a7.self.UniqueID=nil;a7.children={}obj:SetTable(a7)pace.RecordUndoHistory()end;function pace.Clone(obj)pace.RecordUndoHistory()obj:Clone()pace.RecordUndoHistory()end;function pace.RemovePart(obj)pace.RecordUndoHistory()obj:Remove()pace.RecordUndoHistory()pace.RefreshTree()if!obj:HasParent()&&obj.ClassName=="group"then pace.RemovePartOnServer(obj:GetUniqueID(),false,true)end end;function pace.OnPartMenu(obj)local J=DermaMenu()J:SetPos(input.GetCursorPos())if obj then if!obj:HasParent()then J:AddOption(a"wear",function()pace.SendPartToServer(obj)end):SetImage(pace.MiscIcons.wear)end;J:AddOption(a"copy",function()pace.Copy(obj)end):SetImage(pace.MiscIcons.copy)J:AddOption(a"paste",function()pace.Paste(obj)end):SetImage(pace.MiscIcons.paste)J:AddOption(a"cut",function()pace.Cut(obj)end):SetImage('icon16/cut.png')J:AddOption(a"paste properties",function()pace.PasteProperties(obj)end):SetImage(pace.MiscIcons.replace)J:AddOption(a"clone",function()pace.Clone(obj)end):SetImage(pace.MiscIcons.clone)J:AddSpacer()end;pace.AddRegisteredPartsToMenu(J,!obj)J:AddSpacer()if obj then local a8,c=J:AddSubMenu(a"save",function()pace.SaveParts()end)c:SetImage(pace.MiscIcons.save)b(c,function()pace.AddSaveMenuToMenu(a8,obj)end)end;local a9,c=J:AddSubMenu(a"load",function()pace.LoadParts()end)b(c,function()pace.AddSavedPartsToMenu(a9,false,obj)end)c:SetImage(pace.MiscIcons.load)if obj then J:AddSpacer()J:AddOption(a"remove",function()pace.RemovePart(obj)end):SetImage(pace.MiscIcons.clear)end;J:Open()J:MakePopup()end;function pace.OnNewPartMenu()pace.current_part=NULL;local J=DermaMenu()J:MakePopup()J:SetPos(input.GetCursorPos())pace.AddRegisteredPartsToMenu(J)J:AddSpacer()local a9,c=J:AddSubMenu(a"load",function()pace.LoadParts()end)c:SetImage(pace.MiscIcons.load)b(c,function()pace.AddSavedPartsToMenu(a9,false,obj)end)J:AddOption(a"clear",function()pace.ClearParts()end):SetImage(pace.MiscIcons.clear)end end;do pac.haloex=include("pac3/libraries/haloex.lua")function pace.OnHoverPart(self)local a7={}local aa=self:GetOwner()if aa:IsValid()then table.insert(a7,aa)end;for r,E in ipairs(self:GetChildrenList())do local aa=self:GetOwner()if aa:IsValid()then table.insert(a7,aa)end end;if#a7>0 then local ab=math.sin(pac.RealTime*20)*0.5+0.5;ab=ab*255;pac.haloex.Add(a7,Color(ab,ab,ab,255),1,1,1,true,true,5,1,1)end end end
--addons/!lpakr_out/lua/pac3/editor/client/asset_browser.lua:
CreateClientConVar("pac_asset_browser_close_on_select","1")CreateClientConVar("pac_asset_browser_remember_layout","1")local function a(b,c)local list={}for d,e in pairs(b)do table.insert(list,{key=d,val=e})end;return list end;local function f(b,c)local list=a(b)table.sort(list,c)local g=0;return function()g=g+1;if list[g]then return list[g].key,list[g].val end end end;local h;do local i={}h=function(j,k)local d=j..k;if i[d]==nil then i[d]=file.Exists(j,k)end;return i[d]end end;local l;do local i={}l=function(j)if i[j]==nil then i[j]=Material(j):GetKeyValues()end;return i[j]end end;local m=pace.LanguageString;local function n(o,j,p,q,r)local s=o.OnMouseReleased;o.OnMouseReleased=function(t,u)if u==MOUSE_LEFT then pace.model_browser_callback(j,r)elseif u==MOUSE_RIGHT then local v=DermaMenu()v:AddOption(m"copy path",function()if p then for t,p in ipairs(isstring(p)&&{p}||p)do local w=j:match(p)if w then j=w;break end end end;SetClipboardText(j)end)if q then q(v)end;v:Open()end;return s(t,u)end end;local function x(j)if j:find("%.png$")then return Material(j:match("materials/(.+)"))elseif j:find("%.vmt$")then local y=Material(j:match("materials/(.+)%.vmt")):GetTexture("$basetexture")if y then local z=CreateMaterial(j.."_pac_asset_browser","UnlitGeneric")z:SetTexture("$basetexture",y)return z end end;return CreateMaterial(j.."_pac_asset_browser","UnlitGeneric",{["$basetexture"]=j:match("materials/(.+)%.vtf")})end;local A=0;local B=5;local function C(D,E,F)local s=D.Paint;D.Paint=function(self,G,H)if!self.ready_to_draw then return end;if!self.setup_material then E(self)self.setup_material=true end;F(self,G,H)end;local s=D.OnRemove;D.OnRemove=function(...)A=math.max(A-1,0)if s then s(...)end end end;local function I(j,r)local o=vgui.Create("DButton")o:SetTooltip(j)o:SetSize(128,128)o:SetWrap(true)o:SetText("")n(o,j,{"^materials/(.+)%.vtf$","^materials/(.+%.png)$"},nil,r)C(o,function(self)self.mat=x(j)self.realwidth=self.mat:Width()self.realheight=self.mat:Height()end,function(self,J,K)if self.mat then local G=math.min(J,self.realwidth)local H=math.min(K,self.realheight)surface.SetDrawColor(255,255,255,255)surface.SetMaterial(self.mat)surface.DrawTexturedRect(J/2-G/2,K/2-H/2,G,H)end end)return o end;surface.CreateFont("pace_asset_browser_fixed_width",{font="dejavu sans mono"})local L={}local function M(j,N)if#pace.model_browser_browse_types_tbl==1 then if L[j]!=nil then local O=file.Read(j,"GAME")if O then local P=O:match("^(.-){"):Trim():gsub("%p",""):lower()if!(P=="vertexlitgeneric"||P=="unlitgeneric"||P=="eyerefract"||P=="refract")then L[j]=true else L[j]=false end end end;if L[j]then return end end;local Q=j:match("materials/(.+)%.vmt")local o=vgui.Create("DButton")o:SetTooltip(j)o:SetSize(128,128)o:SetWrap(true)o:SetText("")C(o,function(self)self:SetupMaterial()end,function(self,G,H)surface.SetDrawColor(0,0,0,240)surface.DrawRect(0,0,G,H)end)function o:SetupMaterial()local z=Material(Q)local P=z:GetShader():lower()if P=="vertexlitgeneric"then local R=vgui.Create("DModelPanel",o)R:SetMouseInputEnabled(false)R:Dock(FILL)R:SetLookAt(Vector(0,0,0))R:SetFOV(1)R:SetModel("models/hunter/plates/plate1x1.mdl")R:SetCamPos(Vector(1,0,1)*1825)R.mouseover=false;local S=Matrix()S:Scale(Vector(1.37,0.99,0.01))R.Entity:EnableMatrix("RenderMultiply",S)local T=x(j)function R:Paint(G,H)local U,V=self:ScreenToLocal(gui.MouseX(),gui.MouseY())if U>G*8||V>H*8||(U<-G*4||V<-H*4)then surface.SetDrawColor(255,255,255,255)surface.SetMaterial(T)surface.DrawTexturedRect(0,0,G,H)return end;U=U/G;V=V/H;U=U*50;V=V*50;U=U-25;V=V-55;local W=Vector(V,U,30)local X,Y=self:LocalToScreen(0,0)cam.Start3D(self.vCamPos,Angle(45,180,0),self.fFOV,X,Y,G,H,5,self.FarZ)render.SuppressEngineLighting(true)render.SetColorModulation(1,1,1)render.SetBlend(1)render.SetLocalModelLights({{color=Vector(1,1,1),pos=self.Entity:GetPos()+W}})self:DrawModel()render.SuppressEngineLighting(false)cam.End3D()end;R.PreDrawModel=function()render.ModelMaterialOverride(z)end;R.PostDrawModel=function()render.ModelMaterialOverride()end elseif P=="lightmappedgeneric"||P=="spritecard"then local R=vgui.Create("DPanel",o)R:SetMouseInputEnabled(false)R:Dock(FILL)local z=x(j)R.Paint=function(self,G,H)surface.SetDrawColor(255,255,255,255)surface.SetMaterial(z)surface.DrawTexturedRect(0,0,G,H)end else local R=vgui.Create("DImage",o)R:SetMouseInputEnabled(false)R:Dock(FILL)R:SetImage(Q)end end;n(o,j,"^materials/(.+)%.vmt$",function(v)local function Z(O)local _=vgui.Create("DFrame")_:SetTitle(j)_:SetSize(500,500)_:Center()_:SetSizable(true)local a0=vgui.Create("DScrollPanel",_)a0:Dock(FILL)a0:DockMargin(0,5,5,5)local a1=vgui.Create("DTextEntry",a0)a1:SetMultiline(true)a1:SetFont("pace_asset_browser_fixed_width")a1:SetText(O)surface.SetFont(a1:GetFont())local t,H=surface.GetTextSize(O)a1:SetTall(H+50)a1:SetWide(_:GetWide())_:MakePopup()end;v:AddOption("view .vmt",function()Z(file.Read(j,"GAME"):gsub("\t","    "))end)v:AddOption("view keyvalues",function()local b={}for a2,a3 in pairs(l(Q))do table.insert(b,{k=a2,v=a3})end;table.sort(b,function(a4,a5)return a4.k<a5.k end)local O=""for t,a3 in ipairs(b)do O=O..a3.k:sub(2)..":\n"..tostring(a3.v).."\n\n"end;Z(O)end)end)N:Add(o)return o end;local function a6(j,r)local o=vgui.Create("SpawnIcon")o:SetSize(64,64)o:SetModel(j)o:SetTooltip(j)if j:StartWith("addons/")then j=j:match("^addons/.-/(.+)")||j end;n(o,j,nil,nil,r)return o end;local function a7(a8)if a8 then a8=" - "..a8;pace.model_browser:SetTitle(pace.model_browser.title..a8)else pace.model_browser:SetTitle(pace.model_browser.title)end end;do local a9={}local aa=baseclass.Get("DPanel")function a9:Init()self.zoom=pace.model_browser:GetCookieNumber("zoom",100)self.ContentContainers={}self:SetWide(102)self:SetPaintBackground(false)self.ZoomOut=vgui.Create("DButton",self)self.ZoomOut:Dock(RIGHT)self.ZoomOut:DockMargin(2,2,2,2)self.ZoomOut:SetText("-")self.ZoomOut:SetWide(20)self.ZoomOut.DoClick=function()self:SetZoom(self.zoom-10)end;self.ZoomText=vgui.Create("DTextEntry",self)self.ZoomText:Dock(RIGHT)self.ZoomText:DockMargin(2,2,2,2)self.ZoomText:SetWide(50)self:SetZoomText(self.zoom)self.ZoomText.OnValueChange=function(ab)local ac=tonumber(ab:GetText())if ac then self:SetZoom(ac)else self:SetZoomText(self.zoom)end end;self.ZoomIn=vgui.Create("DButton",self)self.ZoomIn:Dock(RIGHT)self.ZoomIn:DockMargin(2,2,2,2)self.ZoomIn:SetText("+")self.ZoomIn:SetWide(20)self.ZoomIn.DoClick=function()self:SetZoom(self.zoom+10)end end;function a9:AddContentContainer(R)if!table.HasValue(self.ContentContainers,R)then table.insert(self.ContentContainers,R)end end;function a9:VisibilityCheck()local ad=false;for g,a3 in ipairs(self.ContentContainers)do if a3&&a3:IsVisible()then ad=true;break end end;self:SetVisible(ad)end;function a9:SetZoom(ae)self.zoom=math.Clamp(ae,16,512)pace.model_browser:SetCookie("zoom",self.zoom)self:SetZoomText(self.zoom)local af={}for g,a3 in ipairs(self.ContentContainers)do if!(a3&&a3:IsValid())then table.insert(af,g)elseif a3:IsVisible()then a3:CalcZoom()end end;for g,a3 in ipairs(af)do table.remove(self.ContentContainers,a3)end end;function a9:SetZoomText(ae)self.ZoomText:SetText(math.Round(ae,1).."%")end;vgui.Register("pac_AssetBrowser_ZoomControls",a9,"DPanel")end;do local a9={}local aa=baseclass.Get("DScrollPanel")function a9:Init()self:SetPaintBackground(false)self.IconList=vgui.Create("DPanel",self:GetCanvas())self.IconList:Dock(TOP)function self.IconList:PerformLayout()if!self.invalidate then return end;self.invalidate=nil;local U,V=0,0;local ag=self:GetWide()local ah=0;local ai;for t,aj in ipairs(self:GetChildren())do ah=math.max(ah,aj:GetTall())if U+aj:GetWide()>ag then ai=U-ag;U=0;V=V+ah;ah=0 end;aj:SetPos(U,V)U=U+aj:GetWide()end;if ai then for t,aj in ipairs(self:GetChildren())do local U,V=aj:GetPos()aj:SetPos(U-ai/2,V)end end;self:SetTall(V+ah)end end;function a9:Add(R)R.ready_to_draw=true;R.original_size={w=R:GetWide(),h=R:GetTall()}if self.ZoomControls then R:SetSize(R.original_size.w*self.ZoomControls.zoom*0.01,R.original_size.h*self.ZoomControls.zoom*0.01)end;self.IconList:Add(R)self.IconList.invalidate=true end;function a9:SetZoomControls(R)self.ZoomControls=R;R:AddContentContainer(self)end;function a9:CalcZoom()if self.ZoomControls then for g,a3 in ipairs(self.IconList:GetChildren())do a3:SetSize(a3.original_size.w*self.ZoomControls.zoom*0.01,a3.original_size.h*self.ZoomControls.zoom*0.01)end;self.IconList.invalidate=true end end;function a9:OnMouseWheeled(ak)if input.IsControlDown()&&self.ZoomControls then self.ZoomControls:SetZoom(self.ZoomControls.zoom+ak*4)return end;return aa.OnMouseWheeled(self,ak)end;function a9:Clear()for a2,a3 in ipairs(self.IconList:GetChildren())do a3:Remove()end end;vgui.Register("pac_AssetBrowser_ContentContainer",a9,"DScrollPanel")end;function pace.AssetBrowser(al,am,an)am=am||"models;materials;textures;sound"local ao=am:Split(";")if!pac.asset_browser_cache then if file.Exists("pac3_cache/pac_asset_browser_index.txt","DATA")then pac.asset_browser_cache=util.JSONToTable(file.Read("pac3_cache/pac_asset_browser_index.txt","DATA"))||{}else pac.asset_browser_cache={}end end;local ap=false;local aq=table.HasValue(ao,"materials")local ar=table.HasValue(ao,"sound")if table.RemoveByValue(ao,"textures")then ap=true;if!aq then table.insert(ao,"materials")end end;if pace.model_browser_browse_types!=am&&pace.model_browser&&pace.model_browser:IsValid()then pace.model_browser:Remove()end;local as;pace.model_browser_callback=function(...)al=al||print;if al(...)==false then return end;if GetConVar("pac_asset_browser_close_on_select"):GetBool()then pace.model_browser:SetVisible(false)end end;pace.model_browser_browse_types=am;pace.model_browser_browse_types_tbl=ao;pace.model_browser_part_key=an;if pace.model_browser&&pace.model_browser:IsValid()then pace.model_browser:SetVisible(true)pace.model_browser:MakePopup()return end;local at;local _=vgui.Create("DFrame")_.title=m"asset browser".." - "..am:gsub(";"," ")if GetConVar("pac_asset_browser_remember_layout"):GetBool()then _:SetCookieName("pac_asset_browser")end;local U=_:GetCookieNumber("x",ScrW()-ScrW()/2.75)local V=_:GetCookieNumber("y",0)local G=_:GetCookieNumber("w",ScrW()/2.75)local H=_:GetCookieNumber("h",ScrH())U=math.Clamp(U,0,ScrW())V=math.Clamp(V,0,ScrH())G=math.Clamp(G,50,ScrW())H=math.Clamp(H,50,ScrH())_:SetPos(U,V)_:SetSize(G,H)_:SetDeleteOnClose(false)_:SetSizable(true)local au;local av;local aw;local ax;local ay;local az;local aA=_.Think;_.Think=function(...)local U,V=_:GetPos()local G,H=_:GetSize()ay=at:GetLeftWidth()if U!=au then _:SetCookie("x",U)au=U end;if V!=av then _:SetCookie("y",V)av=V end;if G!=aw then _:SetCookie("w",G)aw=G end;if H!=ax then _:SetCookie("h",H)ax=H end;if ay!=az then _:SetCookie("div",ay)az=ay end;return aA(...)end;pace.model_browser=_;a7()function _:OnClose()self:SetVisible(false)end;local aB=vgui.Create("DMenuBar",_)aB:Dock(TOP)local aC=aB:AddMenu(m"file")aC:AddOption(m"clear search cache",function()Derma_Query(m"Are you sure you want to clear? A good time to clear is when there is a big TF2 update or you've decided to permanently unmount some games to avoid them showing up in the search results.",m"clear search cache",m"clear",function()file.Delete("pac3_cache/pac_asset_browser_index.txt")pac.asset_browser_cache={}end,m"cancel",function()end)end):SetImage(pace.MiscIcons.clear)local aD=aB:AddMenu(m"options")aD:SetDeleteSelf(false)aD:AddCVar(m"close browser on select","pac_asset_browser_close_on_select","1","0")aD:AddCVar(m"remember layout","pac_asset_browser_remember_layout","1","0")local aE=vgui.Create("pac_AssetBrowser_ZoomControls",aB)aE:Dock(RIGHT)local aF=vgui.Create("DPanel",_)aF:Dock(LEFT)aF:SetSize(190,10)aF:DockMargin(0,0,4,0)aF.Paint=function()end;local aG=vgui.Create("DTree",aF)aG:Dock(FILL)aG:DockMargin(0,0,0,0)aG:SetBackgroundColor(Color(240,240,240))_.tree=aG;aG.OnNodeSelected=function(self,aH)if!IsValid(aH.propPanel)then return end;if IsValid(_.PropPanel.selected)then _.PropPanel.selected:SetVisible(false)_.PropPanel.selected=nil end;_.PropPanel.selected=aH.propPanel;_.dir=aH.dir;_.pathid=aH.pathid||aH.GetPathID&&aH:GetPathID()||"GAME"_.PropPanel.selected:Dock(FILL)_.PropPanel.selected:SetVisible(true)aE:VisibilityCheck()at:SetRight(_.PropPanel.selected)if aH.dir then local r=_.pathid||"GAME"if r=="GAME"then r="all"end;a7("browsing "..r.."/"..aH.dir.."/*")else a7()end end;local aI=aG;_.PropPanel=vgui.Create("DPanel",_)_.PropPanel:Dock(FILL)function _.PropPanel:Paint(G,H)draw.RoundedBox(0,0,0,G,H,Color(240,240,240))end;at=vgui.Create("DHorizontalDivider",_)at:Dock(FILL)at:SetLeftWidth(_:GetCookieNumber("div",140))at:SetLeftMin(0)at:SetRightMin(0)at:SetLeft(aF)at:SetRight(_.PropPanel)local aJ=vgui.Create("DListView",_.PropPanel)aJ:AddColumn(m"name")aJ:Dock(FILL)aJ:SetMultiSelect(false)aJ:SetVisible(false)local aK=vgui.Create("DListView",_.PropPanel)aK:AddColumn(m"path")aK:AddColumn(m"byte size")aK:Dock(FILL)aK:SetMultiSelect(false)aK:SetVisible(false)local function aL(self,sound,...)local aM=self:AddLine(sound,...)local aN=vgui.Create("DImageButton",aM)aN:SetImage("icon16/control_play.png")aN:SizeToContents()aN:Dock(LEFT)function aN.Start()for t,a3 in pairs(self:GetLines())do a3.play:Stop()end;aN:SetImage("icon16/control_stop.png")local aO=CreateSound(pac.LocalPlayer,sound)aO:Play()pace.asset_browser_snd=aO;timer.Create("pac_asset_browser_play",SoundDuration(sound),1,function()if aN:IsValid()then aN:Stop()end end)end;function aN.Stop()aN:SetImage("icon16/control_play.png")if pace.asset_browser_snd then pace.asset_browser_snd:Stop()timer.Remove("pac_asset_browser_play")end end;aM.OnMousePressed=function(t,u)self:ClearSelection()self:SelectItem(aM)if u==MOUSE_RIGHT then aN:Start()else pace.model_browser_callback(sound,"GAME")end end;local aP=aM.Columns[1]aP:SetTextInset(aN:GetWide()+5,0)aN.DoClick=function()if timer.Exists("pac_asset_browser_play")&&self:GetLines()[self:GetSelectedLine()]==aM then aN:Stop()return end;self:ClearSelection()self:SelectItem(aM)aN:Start()end;aM.play=aN end;function aJ:AddSound(aQ)aL(self,aQ)end;function aK:AddSound(j,r)local aR=j:match("sound/(.+)")aL(self,aR,file.Size(j,r))end;local aS;if ap||aq then local aH=aI:AddNode("materials","icon16/folder_database.png")aH.dir="materials"local aT=vgui.Create("pac_AssetBrowser_ContentContainer",_.PropPanel)aT:DockMargin(5,0,0,0)aT:SetVisible(false)aT:SetZoomControls(aE)aH.propPanel=aT;for aU,aV in pairs(pace.Materials)do local list=aH:AddNode(aU)list.dir="materials"list.propPanel=aT;list.OnNodeSelected=function()if aT&&aT.currentNode&&aT.currentNode==list then return end;aT:Clear(true)aT.currentNode=list;if aq then for t,aW in ipairs(aV)do local j="materials/"..aW..".vmt"if h(j,"GAME")then M(j,aT)end end end;if ap then local aX={}local aY={}for t,aW in ipairs(aV)do for a2,a3 in pairs(l(aW))do if type(a3)=="ITexture"then local aQ=a3:GetName()if!aX[aQ]then aX[aQ]=true;table.insert(aY,"materials/"..aQ..".vtf")end end end end;for t,j in ipairs(aY)do aT:Add(I(j))end end;aG:OnNodeSelected(list)aT.currentNode=list end;if#ao==1&&aU=="materials"&&(ap||aq)then aS=list end end end;if table.HasValue(ao,"models")then local aZ=aI:AddNode("spawnlists")aZ.info={}aZ.info.id=0;aZ.dir="models"local a_={}a_[""]=true;for a2,a3 in pairs(engine.GetGames())do if a3.mounted then a_[a3.folder]=true end end;local function b0(b1,b2)for a2,a3 in f(b1,function(a4,a5)return a4.key<a5.key end)do if a3.parentid==b2.info.id&&a_[a3.needsapp]then local aH=b2:AddNode(a3.name,a3.icon)aH:SetExpanded(true)aH.info=a3;aH.dir="models"aH.propPanel=vgui.Create(vgui.GetControlTable("ContentContainer")&&"ContentContainer"||"pac_AssetBrowser_ContentContainer",_.PropPanel)aH.propPanel:DockMargin(5,0,0,0)aH.propPanel:SetVisible(false)b2.propPanel=aH.propPanel;aH.OnNodeSelected=function()if!aH.setup then aH.setup=true;for g,b3 in f(a3.contents,function(a4,a5)return a4.key<a5.key end)do if b3.type=="model"then aH.propPanel:Add(a6(b3.model))elseif b3.type=="header"then if!b3.text||!isstring(b3.text)then return end;local aP=vgui.Create("ContentHeader",aH.propPanel)aP:SetText(b3.text)aH.propPanel:Add(aP)end end end;aG:OnNodeSelected(aH)end;if#ao==1&&a3.name=="Construction Props"then aS=aH end;b0(b1,aH)end end end;b0(spawnmenu.GetPropTable(),aZ)end;if ar then local aH=aI:AddNode("game sounds","icon16/sound.png")aH.dir="sound names"aH.propPanel=aJ;aH.OnNodeSelected=function()local b4={}for t,b5 in ipairs(sound.GetTable())do local b6=b5:match("^(.-)%.")||b5:match("^(.-)_")||b5:match("^(.-)%u")if!b6||b6==nil then b6="misc"end;b4[b6]=b4[b6]||{}table.insert(b4[b6],b5)end;local b7={}for aQ,b8 in pairs(b4)do table.sort(b8,function(a4,a5)return a4<a5 end)table.insert(b7,{name=aQ,sounds=b8})end;table.sort(b7,function(a4,a5)return a4.name<a5.name end)for t,b9 in ipairs(b7)do local ba,b8=b9.name,b9.sounds;local aH=aH:AddNode(ba,"icon16/sound.png")aH.dir="sound names"aH.propPanel=aJ;aH.OnNodeSelected=function()aJ:Clear()for t,b5 in ipairs(b8)do aJ:AddSound(b5)end;aG:OnNodeSelected(aH)end end end end;do local function bb(aT,aH,aQ,o,j,r)local function bc(self,aH)if aT&&aT.currentNode&&aT.currentNode==aH then return end;aH.dir=self.dir;aK:Clear()aT:Clear(true)aT.currentNode=aH;local bd=aH:GetFolder()if bd==""&&#ao==1 then local be=0;local function bf(j,r)if be>=500 then return end;local bg,bh=file.Find(j.."/*",r)if bg then for g,a3 in ipairs(bg)do be=be+1;local j=j.."/"..a3;j=j:gsub("^.-("..ao[1].."/.+)$","%1")if ao[1]=="models"then if!IsUselessModel(j)then aT:Add(a6(j,r))end elseif ao[1]=="materials"then if j:find("%.vmt$")then if aq then M(j,aT)end elseif ap then aT:Add(I(j,r))end elseif ao[1]=="sound"then aK:AddSound(j,r)end end;for g,a3 in ipairs(bh)do bf(j.."/"..a3,r)end end end;bf(j..ao[1],aH:GetPathID())else local bi,bj=file.Find(bd.."/*",aH:GetPathID())if bi then if self.dir=="models"then for a2,a3 in pairs(bi)do local j=aH:GetFolder().."/"..a3;if!j:StartWith("models/pac3_cache/")then if!IsUselessModel(j)then aT:Add(a6(j,r))end end end elseif self.dir=="materials"then for a2,a3 in pairs(bi)do local j=aH:GetFolder().."/"..a3;if a3:find("%.vmt$")then if aq then M(j,aT)end elseif ap then aT:Add(I(j,r))end end elseif self.dir=="sound"then for a2,a3 in pairs(bi)do local j=aH:GetFolder().."/"..a3;aK:AddSound(j,r)end end end end;if self.dir=="sound"then aH.propPanel=aK else aH.propPanel=aT end;aG:OnNodeSelected(aH)aT.currentNode=aH end;aH=aH:AddNode(aQ,o)aH:SetFolder("")aH:SetPathID(r)aH.viewPanel=aT;for t,bk in ipairs(ao)do local bi,bj=file.Find(j..bk.."/*",r)if bi&&(bi[1]||bj[1])then local bl=aH;local aH=aH:AddFolder(bk,j..bk,r,false)aH.dir=bk;aH.OnNodeSelected=bc;if!aS&&#ao==1&&aQ=="all"&&ao[1]==bk&&bk!="models"then aS=aH end;if!aS&&#ao==3&&aQ=="all"&&bk=="materials"then aS=aH end end end;aH.OnNodeSelected=bc end;local aT=vgui.Create("pac_AssetBrowser_ContentContainer",_.PropPanel)aT:DockMargin(5,0,0,0)aT:SetVisible(false)aT:SetZoomControls(aE)do local bm={{title="all",folder="GAME",icon="games/16/all.png"},{title="downloaded",folder="DOWNLOAD",icon="materials/icon16/server_go.png"},{title="workshop",folder="WORKSHOP",icon="materials/icon16/plugin.png"},{title="thirdparty",folder="THIRDPARTY",icon="materials/icon16/folder_brick.png"},{title="mod",folder="MOD",icon="materials/icon16/folder_brick.png"}}for t,a8 in ipairs(bm)do bb(aT,aI,a8.title,a8.icon,"",a8.folder)end end;do local bn=engine.GetGames()table.insert(bn,{title="Garry's Mod",folder="garrysmod",mounted=true})for t,bo in f(bn,function(a4,a5)return a4.val.title<a5.val.title end)do if bo.mounted then bb(aT,aI,bo.title,"games/16/"..(bo.icon||bo.folder)..".png","",bo.folder)end end end;local aH=aI:AddNode("addons")for t,bp in f(engine.GetAddons(),function(a4,a5)return a4.val.title<a5.val.title end)do if bp.file:StartWith("addons/")then local t,bq=file.Find("*",bp.title)if table.HasValue(bq,"materials")||table.HasValue(bq,"models")||table.HasValue(bq,"sound")then bb(aT,aH,bp.title,"icon16/bricks.png","",bp.title)end end end;local t,bj=file.Find("addons/*","MOD")for t,j in ipairs(bj)do if file.IsDir("addons/"..j.."/materials","MOD")||file.IsDir("addons/"..j.."/sound","MOD")||file.IsDir("addons/"..j.."/models","MOD")then bb(aT,aH,j,"icon16/folder.png","addons/"..j.."/","MOD")end end end;local br=vgui.Create("pac_AssetBrowser_ContentContainer",_.PropPanel)br:DockMargin(5,0,0,0)br:SetVisible(false)br:SetZoomControls(aE)local bs=vgui.Create("DTextEntry",aF)bs:Dock(TOP)bs:SetTooltip("Press enter to search")bs.propPanel=br;bs.model_view=br;bs.delay_functions={}aC:AddOption(m"build search cache",function()bs:StartSearch("","models/",{},"GAME",function(j,r)end)bs:StartSearch("","sound/",{},"GAME",function(j,r)end)bs:StartSearch("","materials/",{},"GAME",function(j,r)end)end)local bt=vgui.Create("DImageButton",bs)bt:SetImage(pace.MiscIcons.clear)bt:SetSize(16,16)bt.DoClick=function()bs:Cancel()end;bt:SetVisible(false)do local s=bs.OnGetFocus;function bs:OnGetFocus()if self:GetValue()==self.default_text then self:SetValue("")end;s(self)end end;do local s=bs.OnLoseFocus;function bs:OnLoseFocus()if self:GetValue()==""then self:SetValue(self.default_text)end;s(self)end end;local function bu(j,r)local d=j..r;if pac.asset_browser_cache[d]then return unpack(pac.asset_browser_cache[d])end;local bi,bj=file.Find(j,r)pac.asset_browser_cache[d]={bi,bj}return bi,bj end;function bs:PerformLayout()bt:SetPos(self:GetWide()-16-2,2)end;function bs:StartSearch(bv,bw,bx,r,by)bt:SetVisible(true)local bi,bj=bu(bw.."*",r)self.searched=true;if bi then a7(table.Count(self.delay_functions).." directories left - "..bw.."*")for a2,a3 in ipairs(bi)do local file=bw..a3;for t,bz in ipairs(bx)do if a3:EndsWith(bz)&&file:find(bv,nil,true)then local bA=function()return by(file,r)end;self.delay_functions[bA]=bA;break end end end;for a2,a3 in ipairs(bj)do if a3!="pac3_cache"then local bA=function()self:StartSearch(bv,bw..a3 .."/",bx,r,by)end;self.delay_functions[bA]=bA end end end end;function bs:Stop()bt:SetVisible(false)self.delay_functions={}self.searched=false end;function bs:Cancel(bB)self:Stop()if bB then a7("search canceled: "..bB)else a7("search canceled")end end;function bs:Think()if input.IsKeyDown(KEY_ESCAPE)then self:Cancel()return end;if input.IsControlDown()&&input.IsKeyDown(KEY_F)then self:RequestFocus()end;local g=0;for d,bA in pairs(self.delay_functions)do g=g+1;local bC,bD=bA()if bC==false then self:Cancel(bD)return end;self.delay_functions[bA]=nil;if g>50 then break end end;if g==0&&self.searched then self:Stop()a7()file.Write("pac3_cache/pac_asset_browser_index.txt",util.TableToJSON(pac.asset_browser_cache))end;if _.dir then if!self:IsEnabled()then self:SetEnabled(true)end;local bE=false;if self:GetValue()==""||self:GetValue()==self.default_text then bE=true end;local r=_.pathid||"GAME"if r=="GAME"then r="all"end;self.default_text=m("search "..r.."/".._.dir.."/*")if bE then self:SetValue(self.default_text)end else self:SetValue("")if self:IsEnabled()then self:SetEnabled(false)end end end;function bs:OnEnter()if self:GetValue()==""then return end;local be=0;local r=_.pathid||"GAME"local bk=_.dir;if bk=="models"then self.propPanel=self.model_view;self.propPanel:Clear()self:StartSearch(self:GetValue(),"models/",{".mdl"},r,function(j,r)if be>=500 then return false,"too many results ("..be..")"end;be=be+1;if!IsUselessModel(j)then self.propPanel:Add(a6(j,r))end end)elseif bk=="sound"then self.propPanel=aK;self.propPanel:Clear()self:StartSearch(self:GetValue(),"sound/",{".wav",".mp3",".ogg"},r,function(j,r)if be>=1500 then return false,"too many results ("..be..")"end;be=be+1;aK:AddSound(j,r)end)elseif bk=="materials"then self.propPanel=self.model_view;self.propPanel:Clear()self:StartSearch(self:GetValue(),"materials/",{".vmt",".vtf",".png"},r,function(j,r)if be>=750 then return false,"too many results ("..be..")"end;if j:EndsWith(".vmt")then if aq then be=be+1;M(j,self.propPanel)end elseif ap then self.propPanel:Add(I(j,r))be=be+1 end end)elseif bk=="sound names"then self.propPanel=aJ;self.propPanel:Clear()local bv=self:GetValue()for t,aQ in ipairs(sound.GetTable())do if be>=1500 then a7("too many results ("..be..")")return end;if aQ:find(bv,nil,true)then be=be+1;aJ:AddSound(aQ)end end end;self.dir=bk;self.pathid=r;aG:OnNodeSelected(self)end;aC:AddSpacer()aC:AddOption(m"exit",function()_:Remove()end):SetImage(pace.MiscIcons.exit)if aS then aS:GetParentNode():SetExpanded(true)aS:SetExpanded(true)aG:SetSelectedItem(aS)end;_:MakePopup()end;if pace.model_browser&&pace.model_browser:IsValid()then local bF=pace.model_browser:IsVisible()pace.model_browser:Remove()if bF then pace.AssetBrowser(function(...)print(...)return false end)end end;concommand.Add("pac_asset_browser",function(t,t,bG)pace.AssetBrowser(function(j)SetClipboardText(j)a7("copied "..j.." to clipboard!")return false end,bG[1]&&table.concat(bG,";"))pace.model_browser:SetSize(ScrW()/1.25,ScrH()/1.25)pace.model_browser:Center()end)list.Set("DesktopWindows","PACAssetBrowser",{title="Asset Browser",icon="icon16/images.png",width=960,height=700,onewindow=true,init=function(bH,R)R:Remove()RunConsoleCommand("pac_asset_browser")end})
--addons/!lpakr_out/lua/pac3/editor/client/panels.lua:
return lpakr()()
--addons/!lpakr_out/lua/pac3/editor/client/wear_filter.lua:
local a=include("panels/list.lua")local b=pace.LanguageString;local c={}local function d(e,f)file.CreateDir("pac/config")file.Write("pac/config/"..e..".json",util.TableToJSON(f))c[e]=f end;local function g(e)local f=util.JSONToTable(file.Read("pac/config/"..e..".json","DATA")||"{}")||{}c[e]=f;return f end;local function h(e,i)return c[e]&&c[e][i]end;local function j(k)return"_"..pac.Hash(k)end;local function l()for m,k in ipairs(player.GetHumans())do pac.ToggleIgnoreEntity(k,pace.ShouldIgnorePlayer(k),"wear_filter")end end;hook.Add("PlayerSpawn","pace_outfit_ignore_update",function()l()end)net.Receive("pac.TogglePartDrawing",function()local n=net.ReadEntity()if n:IsValid()then local o=net.ReadBit()==1;pac.TogglePartDrawing(n,o)end end)do function pac.ToggleIgnoreEntity(n,p,q)if p then return pac.IgnoreEntity(n,q)else return pac.UnIgnoreEntity(n,q)end end;function pac.IsEntityIgnored(n)if pace.ShouldIgnorePlayer(n)then return true end;return n.pac_ignored||false end;function pac.IsEntityIgnoredBy(n,q)return n.pac_ignored_data&&n.pac_ignored_data[q]||false end;function pac.IsEntityIgnoredOnlyBy(n,q)return n.pac_ignored_data&&n.pac_ignored_data[q]&&table.Count(n.pac_ignored_data)==1||false end;function pac.EntityIgnoreBound(n,r,s)assert(isfunction(r),"isfunction(callback)")if!pac.IsEntityIgnored(n)then return r(n)end;n.pac_ignored_callbacks=n.pac_ignored_callbacks||{}if s then for t,u in ipairs(n.pac_ignored_callbacks)do if u.index==s then table.remove(n.pac_ignored_callbacks,t)break end end end;table.insert(n.pac_ignored_callbacks,{callback=r,index=s})end;function pac.CleanupEntityIgnoreBound(n)n.pac_ignored_callbacks=nil end;function pac.IgnoreEntity(n,q)if n==pac.LocalPlayer then return false end;q=q||"generic"if n.pac_ignored_data&&n.pac_ignored_data[q]then return end;n.pac_ignored=n.pac_ignored||false;n.pac_ignored_data=n.pac_ignored_data||{}n.pac_ignored_data[q]=true;local v=true;if v!=n.pac_ignored then n.pac_ignored=v;pac.TogglePartDrawing(n,!v)end;return true end;function pac.UnIgnoreEntity(n,q)if n==pac.LocalPlayer then return false end;q=q||"generic"if n.pac_ignored_data&&n.pac_ignored_data[q]==nil then return end;n.pac_ignored=n.pac_ignored||false;n.pac_ignored_data=n.pac_ignored_data||{}n.pac_ignored_data[q]=nil;local v=false;for m,w in pairs(n.pac_ignored_data)do if w then v=true;break end end;if v!=n.pac_ignored then n.pac_ignored=v;if!v&&n.pac_ignored_callbacks then for t,u in ipairs(n.pac_ignored_callbacks)do ProtectedCall(function()u.callback(n)end)end;n.pac_ignored_callbacks=nil end;pac.TogglePartDrawing(n,!v)end;return v end end;CreateClientConVar("pace_wear_filter_mode","disabled")CreateClientConVar("pace_outfit_filter_mode","disabled")function pace.ShouldIgnorePlayer(k)local x=GetConVar("pace_outfit_filter_mode"):GetString()if x=="steam_friends"then return k:GetFriendStatus()!="friend"elseif x=="whitelist"then return h("outfit_whitelist",j(k))==nil elseif x=="blacklist"then return h("outfit_blacklist",j(k))!=nil end;return false end;function pace.CreateWearFilter()local x=GetConVar("pace_wear_filter_mode"):GetString()local f={}for m,k in ipairs(player.GetHumans())do if k==pac.LocalPlayer then continue end;if x=="steam_friends"then if k:GetFriendStatus()=="friend"then table.insert(f,pac.Hash(k))end elseif x=="whitelist"then if h("wear_whitelist",j(k))!=nil then table.insert(f,pac.Hash(k))end elseif x=="blacklist"then if h("wear_blacklist",j(k))==nil then table.insert(f,pac.Hash(k))end else table.insert(f,pac.Hash(k))end end;table.insert(f,pac.Hash(pac.LocalPlayer))return f end;local function y(z)local A=vgui.Create("DListLayout")local B=A:Add("DLabel")B:DockMargin(0,5,0,5)B:SetWrap(true)B:SetDark(true)B:SetAutoStretchVertical(true)B:SetText(z)return A end;local function C(D,e,z)local A=vgui.Create("DListLayout")local B=A:Add("DLabel")B:DockMargin(0,5,0,5)B:SetWrap(true)B:SetDark(true)B:SetAutoStretchVertical(true)B:SetText(z)a(A,D,{empty_message=b"No players online.",name_left="players",populate_left=function()local E=g(e)local f={}for m,k in ipairs(player.GetHumans())do if k==pac.LocalPlayer then continue end;if!E[j(k)]then table.insert(f,{name=k:Nick(),value=k})end end;return f end,store_left=function(F)local f=g(e)f[j(F.value)]=F.name;d(e,f)if e:StartWith("outfit")then l()end end,name_right=D,populate_right=function()local f={}for e,G in pairs(g(e))do local k=pac.ReverseHash(e:sub(2),"Player")if k==pac.LocalPlayer then continue end;if IsValid(k)then table.insert(f,{name=k:Nick(),value=e})else table.insert(f,{name=G.." (offline)",value=e})end end;return f end,store_right=function(F)local f=g(e)f[F.value]=nil;d(e,f)if e:StartWith("outfit")then l()end end})return A end;do net.Receive("pac_update_playerfilter",function()local H=pace.CreateWearFilter()net.Start("pac_update_playerfilter")net.WriteUInt(#H,8)for m,I in ipairs(H)do net.WriteString(I)end;net.SendToServer()end)function pace.PopulateWearMenu(J)for m,k in ipairs(player.GetHumans())do if k==pac.LocalPlayer then continue end;local K=J:AddOption(b"wear only for "..k:Nick(),function()pace.WearParts(k)end)K:SetImage(pace.MiscIcons.wear)end end end;function pace.FillWearSettings(A)local L=vgui.Create("DCategoryList",A)L:Dock(FILL)do local M=L:Add(b"wear filter")M.Header:SetSize(40,40)M.Header:SetFont("DermaLarge")local L=vgui.Create("DListLayout")L:DockPadding(20,20,20,20)M:SetContents(L)local x=vgui.Create("DComboBox",L)x:SetSortItems(false)x:AddChoice("disabled")x:AddChoice("steam friends")x:AddChoice("whitelist")x:AddChoice("blacklist")x.OnSelect=function(m,m,N)if IsValid(x.form)then x.form:Remove()end;if N=="steam friends"then x.form=y(b"Only your steam friends can see your worn outfit.")elseif N=="whitelist"then x.form=C(b"whitelist","wear_whitelist",b"Only the players in the whitelist can see your worn outfit.")elseif N=="blacklist"then x.form=C(b"blacklist","wear_blacklist",b"The players in the blacklist cannot see your worn outfit.")elseif N=="disabled"then x.form=y(b"Everyone can see your worn outfit.")end;GetConVar("pace_wear_filter_mode"):SetString(N:gsub(" ","_"))x.form:SetParent(L)end;local O=GetConVar("pace_wear_filter_mode"):GetString():gsub("_"," ")x:ChooseOption(O)x:OnSelect(nil,O)end;do local M=L:Add(b"outfit filter")M.Header:SetSize(40,40)M.Header:SetFont("DermaLarge")local L=vgui.Create("DListLayout")L:DockPadding(20,20,20,20)M:SetContents(L)local x=vgui.Create("DComboBox",L)x:SetSortItems(false)x:AddChoice("disabled")x:AddChoice("steam friends")x:AddChoice("whitelist")x:AddChoice("blacklist")x.OnSelect=function(m,m,N)if IsValid(x.form)then x.form:Remove()end;if N=="steam friends"then x.form=y(b"You will only see outfits from your steam friends.")elseif N=="whitelist"then x.form=C(b"whitelist","outfit_whitelist",b"You will only see outfits from the players in the whitelist.")elseif N=="blacklist"then x.form=C(b"blacklist","outfit_blacklist",b"You will see outfits from everyone except the players in the blacklist.")elseif N=="disabled"then x.form=y(b"You will see everyone's outfits.")end;GetConVar("pace_outfit_filter_mode"):SetString(N:gsub(" ","_"))x.form:SetParent(L)l()end;local O=GetConVar("pace_outfit_filter_mode"):GetString():gsub("_"," ")x:ChooseOption(O)x:OnSelect(nil,O)end;return L end
--addons/!lpakr_out/lua/pac3/extra/shared/projectiles.lua:
local a=CreateConVar("pac_sv_projectiles",0,CLIENT&&{FCVAR_REPLICATED}||{FCVAR_ARCHIVE,FCVAR_REPLICATED})local b=CreateConVar("pac_sv_projectile_max_attract_radius",300,CLIENT&&{FCVAR_REPLICATED}||{FCVAR_ARCHIVE,FCVAR_REPLICATED})local c=CreateConVar("pac_sv_projectile_max_damage_radius",100,CLIENT&&{FCVAR_REPLICATED}||{FCVAR_ARCHIVE,FCVAR_REPLICATED})do local d={}d.Type="anim"d.Base="base_anim"d.ClassName="pac_projectile"function d:SetupDataTables()self:NetworkVar("Bool",0,"AimDir")self:NetworkVar("Vector",0,"OldVelocity")end;if CLIENT then function d:Draw()if self:GetAimDir()then if self:GetOldVelocity()!=vector_origin then self:SetRenderAngles(self:GetOldVelocity():Angle())elseif self:GetVelocity()!=vector_origin then self:SetRenderAngles(self:GetVelocity():Angle())end end;if self:GetParent():IsValid()&&!self.done then self:SetPredictable(true)self.done=true end end;net.Receive("pac_projectile_collide_event",function()local self=net.ReadEntity()local e=net.ReadTable()self.pac_event_collision_data=e end)end;scripted_ents.Register(d,d.ClassName)end
--addons/!lpakr_out/lua/pac3/extra/client/pac2_compat.lua:
return lpakr()()
--addons/!lpakr_out/lua/casino/ui/casinopanel_ui.lua:
local a={}function a:AddPanel(b,c)return ui.Create(b,c,self)end;function a:SetBackgroundColor(d)self.BackgroundColor=d end;function a:Paint(e,f)if self.BackgroundColor then draw.RoundedBox(5,0,0,e,f,self.BackgroundColor)end end;vgui.Register('casino_panel',a,'Panel')
--addons/!lpakr_out/lua/casino/deck_sh.lua:
casino.deck={}casino.CardBits=0;local a={'Clubs','Spades','Hearts','Diamonds'}local b={1,3,4,2}local c='models/cards/card1.mdl'local d='models/cards/card'local e={{name='Ace',value=11,specialValue=1},{name='2',value=2},{name='3',value=3},{name='4',value=4},{name='5',value=5},{name='6',value=6},{name='7',value=7},{name='8',value=8},{name='9',value=9},{name='10',value=10},{name='Jack',value=10},{name='Queen',value=10},{name='King',value=10}}do for f=1,#a do local g=a[f]local h=b[f]for i=1,#e do local j=i==1&&h||f;local k=j+#a*(i-1)local l=d..k;local m=e[i]local n=Material('materials/galactic/ui/casino/deck/'..string.lower(g)..'_'..string.lower(m.name)..'.png')local o=table.insert(casino.deck,{id=m.name,name=m.name..' of '..g,value=m.value,specialValue=m.specialValue,model=c,skin=l,icon=n})casino.deck[o].internal=o end end;casino.CardBits=net.GetBits(#casino.deck)end;local p={}p.__index=p;function p:Init(q)self.CleanDeck=table.Copy(casino.deck)self.DeckCount=q||1;self.Deck={}self.DeckTrack={}self.DeckTrackStats={}for f=1,q do self:AddDeck()end end;function p:SetID(o)self.id=o end;function p:AddDeck(r)table.Add(self.Deck,r||self.CleanDeck)end;function p:Shuffle(s)math.randomseed(os.time())for f=1,s||math.floor(#self.Deck*75)do local t,u=math.random(1,#self.Deck),math.random(1,#self.Deck)local v,w=self.Deck[t],self.Deck[u]self.Deck[u]=v;self.Deck[t]=w end;return self.Deck end;function p:Track(m,x)trackId=x||m.name;local y=m.name;self.DeckTrack[x]=self.DeckTrack[x]||{}self.DeckTrack[x][#self.DeckTrack[x]+1]=m;self.DeckTrackStats[trackId]=self.DeckTrackStats[trackId]||{}self.DeckTrackStats[trackId][y]=(self.DeckTrackStats[trackId][y]||0)+1;return m end;function p:TakeCard(x)local m=table.remove(self.Deck,math.random(1,#self.Deck))return self:Track(m,x)end;function p:TakeCardFromBottom(x)local m=table.remove(self.Deck,#self.Deck)return self:Track(m,x)end;function p:TakeCardFromTop(x)local m=table.remove(self.Deck,1)return self:Track(m,x)end;function p:CollectAllCards()self.Deck={}self.DeckTrack={}self.DeckTrackStats={}for f=1,self.DeckCount do self:AddDeck()end;self:Shuffle()end;function p:CollectCards(x)if!self.DeckTrack[x]then return end;self:AddDeck(self.DeckTrack[x])self.DeckTrack[x]=nil;self.DeckTrackStats[trackId]=nil end;function casino.DeckStack(o,z)local A={id=o}setmetatable(A,p)A:Init(z)return A end
--addons/!lpakr_out/lua/chess/cl_chess.lua:
CreateConVar('chess_gridletters',1,FCVAR_ARCHIVE,'Show grid letters.')net.Receive('Chess.PromotionSelection',function()ui.Create('ui_chesspromotion',function(a)a:Populate(net.ReadUInt(5))end)end)net.Receive('Chess.Update',function()local b=net.ReadEntity()local c=net.ReadTable()local d=net.ReadTable()local e=net.ReadTable()if IsValid(b)&&c then b.Pieces=c;if d.To then if d.From then b.Pieces[d.To[1]][d.To[2]].Moving=true;b.Pieces[d.To[1]][d.To[2]].MoveStart=RealTime()b.Pieces[d.To[1]][d.To[2]].MoveFrom=b:GetSquarePos(d.From[1],d.From[2])else sound.Play(b.MoveSound,b:GetSquarePos(d.To[1],d.To[2])||b:GetPos())end end;if e.To then if e.From then b.Pieces[e.To[1]][e.To[2]].Moving=true;b.Pieces[e.To[1]][e.To[2]].MoveStart=RealTime()b.Pieces[e.To[1]][e.To[2]].MoveFrom=b:GetSquarePos(e.From[1],e.From[2])else sound.Play(b.MoveSound,b:GetSquarePos(e.To[1],e.To[2])||b:GetPos())end end;if d.To&&b.Pieces&&b.Pieces[d.To[1]]&&b.Pieces[d.To[1]][d.To[2]]then b.IsInCheck=b:CheckForCheck(b.Pieces,d.To&&b.Pieces[d.To[1]][d.To[2]].Team!='White')else b.IsInCheck=false end end end)hook.Add('CreateMove','Chess.CancelMovement',function(f)local g=LocalPlayer()if IsValid(g)&&IsValid(g.Chess_Spectating)then f:ClearMovement()end end)hook.Add('OnChessBoardActive','Chess.BoardActive.DisableThridperson',function(g,h,i)if info.CWRP then EnableThirdPerson(!IsValid(h))else rp.thirdPerson.Allowed=!IsValid(h)end end)
--addons/!lpakr_out/lua/chess/ui/cl_dermachesscontrol.lua:
local a={}local b,c=520,160;local d=Color(255,255,255,150)local e=Material'materials/icon16/arrow_rotate_clockwise.png'local f=Material'icon16/font.png'local g={{name='Black',func='GetBlackPlayer',timefunc='GetBlackTime',icon=Material('materials/galactic/ui/hud/player.png'),color=color_black,bg=Color(255,248,220,200),charChess='â™š',charCheckers='â›‚'},{name='White',func='GetWhitePlayer',timefunc='GetWhiteTime',icon=Material('materials/galactic/ui/hud/player.png'),color=color_white,bg=Color(210,180,140,200),charChess='â™”',charCheckers='â›€'}}function a:Init()self:SetTitle'Board Controls'self:SetSize(b,c)self:SetPos((ScrW()-b)*.5,ScrH()-c-55)self:SetMouseInputEnabled(true)self:DockPadding(0,30,0,0)self.State=0;self.StateName='Waiting...'ui.Create('ui_panel',function(h)h:Dock(LEFT)h:DockPadding(5,5,5,5)h:DockMargin(0,0,0,0)h:SetWide(150)h.Paint=function()end;self.LeftContainer=h end,self)ui.Create('ui_imagebutton',function(h)h:SetMaterial(e)h:SetTooltip'Rotate View'h:SetSize(18,18)h:SetPos(b-80,6)h.DoClick=function(i)self.Board.FlipView=!self.Board.FlipView end;self.RotateView=h end,self)ui.Create('ui_imagebutton',function(h)h:SetMaterial(f)h:SetTooltip'Toggle Coordinates'h:SetSize(18,18)h:SetPos(b-55,6)h:SetAlpha(GetConVarNumber('chess_gridletters')==1&&255||150)h.DoClick=function(i)local j=GetConVarNumber('chess_gridletters')RunConsoleCommand('chess_gridletters',j==0&&'1'||'0')i:SetAlpha(j==1&&255||150)end;self.GridLetters=h end,self)ui.Create('ui_panel',function(h)h:Dock(FILL)h:DockPadding(5,5,5,5)h:DockMargin(0,0,0,0)ui.Create('ui_panel',function(h)h:Dock(TOP)h.Paint=function(i,b,c)draw.SimpleText('Status: '..self.StateName,'ui.14',10,c/2,color_white,TEXT_ALIGN_LEFT,TEXT_ALIGN_CENTER)end end,h)for k,l in ipairs(g)do ui.Create('ui_panel',function(h)h:Dock(LEFT)h:SetWide(360/2)h.Paint=function(i,b,c)if!IsValid(self.Board)then return end;if self.StateName==l.name then draw.RoundedBox(4,0,0,b,c,l.bg)end;draw.RoundedBox(4,4,4,b-8,c-8,l.bg)local m=self.Board[l.func](self.Board)local n=LocalPlayer()==m;local o=self.Board[l.timefunc](self.Board)||300;draw.SimpleText(l.name..(n&&'(You)'||''),'ui.14',b/2,10,l.color,TEXT_ALIGN_CENTER,TEXT_ALIGN_TOP)draw.SimpleText(self.IsChess&&l.charChess||l.charCheckers,'ui.60',b/2,c/2,l.color,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)draw.SimpleText(string.FormattedTime(math.Round(o,1),'%02i:%02i'),'ui.16',b/2,c*.82,l.color,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)end end,h)end end,self)self.btnClose.DoClick=function(p)surface.PlaySound'sup/ui/beep.ogg'if self.Spectating then self:EndSpec()else self:Resign()end end end;function a:Think()if IsValid(self.Board)then self.State=self.Board:GetChessState()||0;self.StateName=Chess.StateNames[self.State]||'Waiting...'end;if!LocalPlayer():InChess()&&!IsValid(LocalPlayer().Chess_Spectating)then gui.EnableScreenClicker(false)self:Remove()end end;function a:SetPlayingControls()self.LeftContainer:Clear()ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'2D Board'h:DockMargin(1,1,1,1)h.DoClick=function(i)if IsValid(Chess.TwoDDermaPanel)then Chess.TwoDDermaPanel:Remove()else Chess.Open2DBoard(self.Board)end end end,self.LeftContainer)ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'Resign'h:DockMargin(1,1,1,1)h.DoClick=function(i)self:Resign()end end,self.LeftContainer)ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'Offer Draw'h:DockMargin(1,1,1,1)h.DoClick=function(i)self:OfferDraw()end;h.Think=function(i)if!IsValid(self.Board)then return end;local q=self.Board:GetDrawOffer()if IsValid(self.Board)&&self.Board:GetDrawOffer()!=Chess.PLAYER_NONE then if i.TextChanged then return end;i.TextChanged=true;if LocalPlayer()==self.Board:GetWhitePlayer()then if q==Chess.PLAYER_WHITE then i:SetText'Draw Offered'elseif q==Chess.PLAYER_BLACK then i:SetText'Accept Draw Offer'end elseif LocalPlayer()==self.Board:GetBlackPlayer()then if q==Chess.PLAYER_WHITE then i:SetText'Accept Draw Offer'elseif q==Chess.PLAYER_BLACK then i:SetText'Draw Offered'end end elseif i.TextChanged then i.TextChanged=false;i:SetText'Offer Draw'end end end,self.LeftContainer)if self.IsChess then ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'Draw (50 Moves)'h:SetEnabled(false)h:DockMargin(1,1,1,1)h.DoClick=function(i)self:Draw50Moves()end;h.Think=function(i)i:SetEnabled(IsValid(self.Board)&&self.Board:GetMoveCount()>=50)end end,self.LeftContainer)ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'Draw (Repetition)'h:SetEnabled(false)h:DockMargin(1,1,1,1)h.DoClick=function(i)self:DrawRep()end;h.Think=function(i)i:SetEnabled(IsValid(self.Board)&&self.Board:GetRepetition())end end,self.LeftContainer)end end;function a:SetSpectatingControls()self.LeftContainer:Clear()ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'2D Board'h:DockMargin(1,1,1,1)h.DoClick=function(i)if IsValid(Chess.TwoDDermaPanel)then Chess.TwoDDermaPanel:Remove()else Chess.Open2DBoard(self.Board)end end end,self.LeftContainer)ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'Pick White'h:DockMargin(1,1,1,1)h.DoClick=function(i)self:PlayWhite()end end,self.LeftContainer)ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'Pick Black'h:DockMargin(1,1,1,1)h.DoClick=function(i)self:PlayBlack()end end,self.LeftContainer)ui.Create('ui_button',function(h)h:Dock(TOP)h:SetText'Stop Spectate'h:DockMargin(1,1,1,1)h.DoClick=function(i)self:EndSpec()end end,self.LeftContainer)end;function a:OfferDraw()if!IsValid(self.Board)then return end;if!self.Board:GetPlaying()then chat.AddText(Color(150,255,150),'You can\'t offer a draw before the game starts!')else net.Start'Chess.DrawOffer'net.SendToServer()end end;function a:Resign()net.Start'Chess.ClientResign'net.SendToServer()end;function a:Draw50Moves()net.Start'Chess.ClientCallDraw'net.WriteUInt(Chess.CHESS_DRAW_50,2)net.SendToServer()end;function a:DrawRep()net.Start'Chess.ClientCallDraw'net.WriteUInt(Chess.CHESS_DRAW_3,2)net.SendToServer()end;function a:EndSpec()self.Board:EndSpectating()self:Remove()end;function a:PlayWhite()net.Start'Chess.RequestSeat'net.WriteEntity(self.Board)net.WriteBool(true)net.SendToServer()end;function a:PlayBlack()net.Start'Chess.RequestSeat'net.WriteEntity(self.Board)net.WriteBool(false)net.SendToServer()end;function a:Populate(r,s,t)self.IsChess=s;self.Board=r;self.Spectating=t;if t then self:SetSpectatingControls()else self:SetPlayingControls(s)end;if s then self:SetTitle'Chess Board'else self:SetTitle'Checkers Board'end end;vgui.Register('ui_chesscontrol',a,'ui_frame')
--addons/!lpakr_out/lua/wos/anim_extension/extensions/wos_base.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/gates/logic.lua:
GateActions("Logic")GateActions["not"]={name="Not (Invert)",description="Outputs 0 for inputs greater than 0, otherwise outputs 1.",inputs={"A"},output=function(a,b)if b>0 then return 0 end;return 1 end,label=function(c,b)return"not "..b.." = "..c end}GateActions["and"]={name="And (All)",description="Outputs 1 if all inputs are greater than 0.",inputs={"A","B","C","D","E","F","G","H"},compact_inputs=2,output=function(a,...)for d,e in ipairs({...})do if e&&e<=0 then return 0 end end;return 1 end,label=function(c,...)local f=""for d,e in ipairs({...})do if e then f=f..e.." and "end end;return string.sub(f,1,-6).." = "..c end}GateActions["or"]={name="Or (Any)",inputs={"A","B","C","D","E","F","G","H"},compact_inputs=2,output=function(a,...)for d,e in ipairs({...})do if e&&e>0 then return 1 end end;return 0 end,label=function(c,...)local f=""for d,e in ipairs({...})do if e then f=f..e.." or "end end;return string.sub(f,1,-5).." = "..c end}GateActions["xor"]={name="Exclusive Or (Odd)",description="Outputs 1 if there is an odd amount of nonzero inputs.",inputs={"A","B","C","D","E","F","G","H"},compact_inputs=2,output=function(a,...)local g=0;for d,e in ipairs({...})do if e&&e>0 then g=1-g end end;return g end,label=function(c,...)local f=""for d,e in ipairs({...})do if e then f=f..e.." xor "end end;return string.sub(f,1,-6).." = "..c end}GateActions["nand"]={name="Not And (Not All)",description="Outputs 1 if there is 1 or 0 nonzero inputs.",inputs={"A","B","C","D","E","F","G","H"},compact_inputs=2,output=function(a,...)for d,e in ipairs({...})do if e&&e<=0 then return 1 end end;return 0 end,label=function(c,...)local f=""for d,e in ipairs({...})do if e then f=f..e.." nand "end end;return string.sub(f,1,-7).." = "..c end}GateActions["nor"]={name="Not Or (None)",description="Outputs 1 if there are no inputs greater than 0.",inputs={"A","B","C","D","E","F","G","H"},compact_inputs=2,output=function(a,...)for d,e in ipairs({...})do if e&&e>0 then return 0 end end;return 1 end,label=function(c,...)local f=""for d,e in ipairs({...})do if e then f=f..e.." nor "end end;return string.sub(f,1,-6).." = "..c end}GateActions["xnor"]={name="Exclusive Not Or (Even)",description="Outputs 1 if there are an even amount of nonzero inputs.",inputs={"A","B","C","D","E","F","G","H"},compact_inputs=2,output=function(a,...)local g=1;for d,e in ipairs({...})do if e&&e>0 then g=1-g end end;return g end,label=function(c,...)local f=""for d,e in ipairs({...})do if e then f=f..e.." xnor "end end;return string.sub(f,1,-7).." = "..c end}GateActions()
--addons/!lpakr_out/lua/wire/gates/selection.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/gates/vector.lua:
GateActions("Vector")GateActions["vector_add"]={name="Addition",inputs={"A","B","C","D","E","F","G","H"},inputtypes={"VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR"},compact_inputs=2,outputtypes={"VECTOR"},output=function(a,...)local b=Vector(0,0,0)for c,d in pairs({...})do if d&&isvector(d)then b=b+d end end;return b end,label=function(e,...)local f=""for c,d in ipairs({...})do if d then f=f.." + "..d end end;return string.format("%s = (%d,%d,%d)",string.sub(f,3),e.x,e.y,e.z)end}GateActions["vector_sub"]={name="Subtraction",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"VECTOR"},output=function(a,g,B)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;return g-B end,label=function(e,g,B)return string.format("%s - %s = (%d,%d,%d)",g,B,e.x,e.y,e.z)end}GateActions["vector_neg"]={name="Negate",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return Vector(-g.x,-g.y,-g.z)end,label=function(e,g)return string.format("-%s = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_mul"]={name="Multiplication",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"VECTOR"},output=function(a,g,B)if!g then g=Vector(0,0,0)end;if!B then B=Vector(0,0,0)end;return Vector(g.x*B.x,g.y*B.y,g.z*B.z)end,label=function(e,g,B)return string.format("%s * %s = (%d,%d,%d)",g,B,e.x,e.y,e.z)end}GateActions["vector_divide"]={name="Division",inputs={"A","B"},inputtypes={"VECTOR","NORMAL"},outputtypes={"VECTOR"},output=function(a,g,B)if!isvector(g)then g=Vector(0,0,0)end;if B then return g/B end;return Vector(0,0,0)end,label=function(e,g,B)return string.format("%s / %s = (%d,%d,%d)",g,B,e.x,e.y,e.z)end}GateActions["vector_dot"]={name="Dot Product",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"NORMAL"},output=function(a,g,B)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;return g:Dot(B)end,label=function(e,g,B)return string.format("dot(%s, %s) = %d",g,B,e)end}GateActions["vector_cross"]={name="Cross Product",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"VECTOR"},output=function(a,g,B)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;return g:Cross(B)end,label=function(e,g,B)return string.format("cross(%s, %s) = (%d,%d,%d)",g,B,e.x,e.y,e.z)end}GateActions["vector_ang"]={name="Angles (Degree)",inputs={"A"},inputtypes={"VECTOR"},outputs={"Yaw","Pitch"},outputtypes={"NORMAL","NORMAL"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;local h=g:Angle()return h.y,h.p end,label=function(e,g)return string.format("ang(%s) = %d, %d",g,e.Yaw,e.Pitch)end}GateActions["vector_angrad"]={name="Angles (Radian)",inputs={"A"},inputtypes={"VECTOR"},outputs={"Yaw","Pitch"},outputtypes={"NORMAL","NORMAL"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;local h=g:Angle()return h.y*math.pi/180,h.p*math.pi/180 end,label=function(e,g)return string.format("angr(%s) = %d, %d",g,e.Yaw,e.Pitch)end}GateActions["vector_mag"]={name="Magnitude",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"NORMAL"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return g:Length()end,label=function(e,g)return string.format("|%s| = %d",g,e)end}GateActions["vector_convto"]={name="Compose",description="Combines three numbers into a vector.",inputs={"X","Y","Z"},inputtypes={"NORMAL","NORMAL","NORMAL"},outputtypes={"VECTOR"},output=function(a,i,j,k)return Vector(i,j,k)end,label=function(e,i,j,k)return string.format("vector(%s,%s,%s) = (%d,%d,%d)",i,j,k,e.x,e.y,e.z)end}GateActions["vector_convfrom"]={name="Decompose",inputs={"A"},description="Splits an vector into three numbers.",inputtypes={"VECTOR"},outputs={"X","Y","Z"},outputtypes={"NORMAL","NORMAL","NORMAL"},output=function(a,g)if g&&isvector(g)then return g.x,g.y,g.z end;return 0,0,0 end,label=function(e,g)return string.format("%s -> X:%d Y:%d Z:%d",g,e.X,e.Y,e.Z)end}GateActions["vector_norm"]={name="Normalise",description="Outputs the vector adjusted to have a magnitude of 1.",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return g:GetNormal()end,label=function(e,g)return string.format("norm(%s) = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_ident"]={name="Identity",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return g end,label=function(e,g)return string.format("%s = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_rand"]={name="Random",inputs={},inputtypes={},outputtypes={"VECTOR"},timed=true,output=function(a)local l=Vector(math.random(),math.random(),math.random())l:Normalize()return l end,label=function(e)return"Random Vector"end}GateActions["vector_derive"]={name="Delta",description="Outputs the rate of change of the vector.",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},timed=true,output=function(a,g)local m=CurTime()if!isvector(g)then g=Vector(0,0,0)end;local n,o=m-a.LastT,g-a.LastA;a.LastT,a.LastA=m,g;if n then return Vector(o.x/n,o.y/n,o.z/n)else return Vector(0,0,0)end end,reset=function(a)a.LastT,a.LastA=CurTime(),Vector(0,0,0)end,label=function(e,g)return string.format("diff(%s) = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_cint"]={name="Component Integral",description="Integrates the vector.",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},timed=true,output=function(a,g)local m=CurTime()if!isvector(g)then g=Vector(0,0,0)end;local n=m-(a.LastT||m)a.LastT,a.Integral=m,(a.Integral||Vector(0,0,0))+g*n;local p=a.Integral:Length()if p>100000 then a.Integral=a.Integral:GetNormalized()*100000 end;if p<-100000 then a.Integral=a.Integral:GetNormalized()*-100000 end;return a.Integral end,reset=function(a)a.Integral,a.LastT=Vector(0,0,0),CurTime()end,label=function(e,g)return string.format("int(%s) = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_mux"]={name="Multiplexer",description="Selects between 8 different vectors based on a number.",inputs={"Sel","A","B","C","D","E","F","G","H"},inputtypes={"NORMAL","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR"},compact_inputs=3,outputtypes={"VECTOR"},output=function(a,q,...)if isnumber(q)then q=math.floor(q)if q>0&&q<=8 then return({...})[q]end end;return Vector(0,0,0)end,label=function(e,q,...)return string.format("Select: %s  Out: (%d,%d,%d)",q,e.x,e.y,e.z)end}GateActions["vector_dmx"]={name="Demultiplexer",description="Outputs a vector to one of 8 outputs based on a number.",inputs={"Sel","In"},inputtypes={"NORMAL","VECTOR"},outputs={"A","B","C","D","E","F","G","H"},outputtypes={"VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR"},output=function(a,q,r)local e={Vector(0,0,0),Vector(0,0,0),Vector(0,0,0),Vector(0,0,0),Vector(0,0,0),Vector(0,0,0),Vector(0,0,0),Vector(0,0,0)}q=math.floor(q)if q>0&&q<=8 then e[q]=r end;return unpack(e)end,label=function(e,q,r)if!isvector(r)then r=Vector(0,0,0)end;if!q then q=0 end;return string.format("Select: %s, In: (%d,%d,%d)",q,r.x,r.y,r.z)end}GateActions["vector_latch"]={name="Latch",description="Stores a vector when Clk is nonzero.",inputs={"In","Clk"},inputtypes={"VECTOR","NORMAL"},outputtypes={"VECTOR"},output=function(a,r,s)s=s>0;if a.PrevClk!=s then a.PrevClk=s;if s then if!isvector(r)then r=Vector(0,0,0)end;a.LatchStore=r end end;return a.LatchStore||Vector(0,0,0)end,reset=function(a)a.LatchStore=Vector(0,0,0)a.PrevValue=0 end,label=function(e,r,s)return string.format("Latch Data: %s  Clock: %s  Out: (%d,%d,%d)",r,s,e.x,e.y,e.z)end}GateActions["vector_dlatch"]={name="D-Latch",description="Stores a vector when Clk changes and is nonzero.",inputs={"In","Clk"},inputtypes={"VECTOR","NORMAL"},outputtypes={"VECTOR"},output=function(a,r,s)if s>0 then if!isvector(r)then r=Vector(0,0,0)end;a.LatchStore=r end;return a.LatchStore||Vector(0,0,0)end,reset=function(a)a.LatchStore=Vector(0,0,0)end,label=function(e,r,s)return string.format("Latch Data: %s  Clock: %s  Out: (%d,%d,%d)",r,s,e.x,e.y,e.z)end}GateActions["vector_compeq"]={name="Equal",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"NORMAL"},output=function(a,g,B)if g==B then return 1 end;return 0 end,label=function(e,g,B)return string.format("(%s == %s) = %d",g,B,e)end}GateActions["vector_compineq"]={name="Not Equal",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"NORMAL"},output=function(a,g,B)if g==B then return 0 end;return 1 end,label=function(e,g,B)return string.format("(%s != %s) = %d",g,B,e)end}GateActions["vector_complt"]={name="Less Than",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"NORMAL"},output=function(a,g,B)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;if g:Length()<B:Length()then return 1 end end,label=function(e,g,B)return string.format("(|%s| < |%s|) = %d",g,B,e)end}GateActions["vector_complteq"]={name="Less Than or Equal To",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"NORMAL"},output=function(a,g,B)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;if g:Length()<=B:Length()then return 1 end;return 0 end,label=function(e,g,B)return string.format("(|%s| <= |%s|) = %d",g,B,e)end}GateActions["vector_compgt"]={name="Greater Than",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},output=function(a,g,B)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;if g:Length()>B:Length()then return 1 end;return 0 end,label=function(e,g,B)return string.format("(|%s| > |%s|) = %d",g,B,e)end}GateActions["vector_compgteq"]={name="Greater Than or Equal To",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},output=function(a,g,B)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;if g:Length()>=B:Length()then return 1 end;return 0 end,label=function(e,g,B)return string.format("(|%s| >= |%s|) = %d",g,B,e)end}GateActions["vector_positive"]={name="Positive",description="Outputs a vector with its components converted to positive numbers.",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return Vector(math.abs(g.x),math.abs(g.y),math.abs(g.z))end,label=function(e,g)return string.format("abs(%s) = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_round"]={name="Round",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return Vector(math.Round(g.x),math.Round(g.y),math.Round(g.z))end,label=function(e,g)return string.format("round(%s) = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_max"]={name="Largest",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;if g:Length()>B:Length()then return g else return B end end,label=function(e,g,B)return string.format("max(%s , %s) = (%d,%d,%d)",g,B,e.x,e.y,e.z)end}GateActions["vector_min"]={name="Smallest",inputs={"A","B"},inputtypes={"VECTOR","VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;if!isvector(B)then B=Vector(0,0,0)end;if g:Length()<B:Length()then return g else return B end end,label=function(e,g,B)return string.format("min(%s , %s) = (%d,%d,%d)",g,B,e.x,e.y,e.z)end}GateActions["vector_shiftl"]={name="Shift Components Left",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return Vector(g.y,g.z,g.x)end,label=function(e,g)return string.format("shiftL(%s) = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_shiftr"]={name="Shift Components Right",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return Vector(g.z,g.x,g.y)end,label=function(e,g)return string.format("shiftR(%s) = (%d,%d,%d)",g,e.x,e.y,e.z)end}GateActions["vector_isinworld"]={name="Is In World",description="Outputs 1 if a vector is within the world bounds.",inputs={"A"},inputtypes={"VECTOR"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;if util.IsInWorld(g)then return 1 else return 0 end end,label=function(e,g)return string.format("isInWorld(%s) = %d",g,e)end}GateActions["vector_tostr"]={name="To String",inputs={"A"},inputtypes={"VECTOR"},outputtypes={"STRING"},output=function(a,g)if!isvector(g)then g=Vector(0,0,0)end;return"["..tostring(g.x)..","..tostring(g.y)..","..tostring(g.z).."]"end,label=function(e,g)return string.format("toString(%s) = \""..e.."\"",g)end}GateActions["vector_select"]={name="Select",inputs={"Choice","A","B","C","D","E","F","G","H"},inputtypes={"NORMAL","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR","VECTOR"},outputtypes={"VECTOR"},output=function(a,t,...)t=math.Clamp(t,1,8)return({...})[t]end,label=function(e,t)return string.format("select(%s) = %s",t,e)end}GateActions["vector_rotate"]={name="Rotate",description="Rotates a vector by the given angle.",inputs={"A","B"},inputtypes={"VECTOR","ANGLE"},outputtypes={"VECTOR"},output=function(a,g,B)if!g then g=Vector(0,0,0)end;if!B then B=Angle(0,0,0)end;g=Vector(g[1],g[2],g[3])g:Rotate(B)return g end,label=function(e,g,B)return string.format("rotate(%s, %s) = "..tostring(e),g,B)end}GateActions["vector_mulcomp"]={name="Multiplication (component)",description="Multiplies a vector by a number.",inputs={"A","B"},inputtypes={"VECTOR","NORMAL"},outputtypes={"VECTOR"},output=function(a,g,B)if!g then g=Vector(0,0,0)end;if!B then B=0 end;return Vector(g.x*B,g.y*B,g.z*B)end,label=function(e,g,B)return string.format("%s * %s = (%d,%d,%d)",g,B,e.x,e.y,e.z)end}GateActions["vector_clampn"]={name="Clamp (numbers)",description="Clamps the vector's components between numbers Min and Max.",inputs={"A","Min","Max"},inputtypes={"VECTOR","NORMAL","NORMAL"},outputtypes={"VECTOR"},output=function(a,g,u,v)if u>v then u,v=v,u end;return Vector(math.Clamp(g.x,u,v),math.Clamp(g.y,u,v),math.Clamp(g.z,u,v))end,label=function(e,g,u,v)return"Clamp("..g..","..u..","..v..") = "..tostring(e)end}GateActions["vector_clampv"]={name="Clamp (vectors)",description="Clamps the vector between vectors Min and Max.",inputs={"A","Min","Max"},inputtypes={"VECTOR","VECTOR","VECTOR"},outputtypes={"VECTOR"},output=function(a,g,u,v)for w=1,3 do if u[w]>v[w]then u[w],v[w]=v[w],u[w]end end;return Vector(math.Clamp(g.x,u.x,v.x),math.Clamp(g.y,u.y,v.y),math.Clamp(g.z,u.z,v.z))end,label=function(e,g,u,v)return"Clamp("..g..","..u..","..v..") = "..tostring(e)end}GateActions()
--addons/!lpakr_out/lua/wire/gpulib.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/client/cl_wirelib.lua:
local a=0.5;local b=2;local c=0;WIRE_CLIENT_INSTALLED=1;BeamMat=Material("tripmine_laser")BeamMatHR=Material("Models/effects/comball_tape")local d,e,f=0,0,false;local CurTime=CurTime;local g=render.SetMaterial;local h=render.StartBeam;local i=render.AddBeam;local j=render.EndBeam;local k=FindMetaTable("Entity")local l=k.IsValid;local m=k.LocalToWorld;hook.Add("Think","Wire.WireScroll",function()e=CurTime()*a end)timer.Create("Wire.WireBlink",1/b,0,function()f=!f end)local n=WireLib.GetComputeIfEntityTransformDirty(function(o)return setmetatable({},{__index=function(p,q)local r=m(o,q)p[q]=r;return r end})end)hook.Add("EntityRemoved","WireLib_Node_Cache_Cleanup",function(o)n[o]=nil end)local s={}local function t(u)if!s[u]then s[u]=Material(u)end;return s[u]end;function Wire_Render(o)if c!=0 then return end;if!l(o)then return end;local v=o.WirePaths;if!v then o.WirePaths={}net.Start("WireLib.Paths.RequestPaths")net.WriteEntity(o)net.SendToServer()return end;if!next(v)then return end;local w=f&&o:GetNWString("BlinkWire")local x,y,z,A,B,C,D,E,F;for G,H in pairs(v)do width=H.Width;if width>0&&w!=G then E=o;F=n(o)x=F[H.StartPos]y=H.Color;z=H.Path;d=e;A=#z;if A>0 then g(t(H.Material))h(A*2+1)i(x,width,d,y)for I=1,A do C=z[I]D=C.Entity;if l(D)then if D!=E then E=D;F=n(D)end;B=F[C.Pos]d=d+B:Distance(x)/10;i(B,width,d,y)i(B,width,d,y)x=B end end;j()end end end end;local function J(o)if!l(o)then return end;local K,L=o:OBBMins(),o:OBBMaxs()if o.WirePaths then local z,A,D,M;for G,H in pairs(o.WirePaths)do z=H.Path;A=#z;for I=1,A do D=z[I].Entity;M=z[I].Pos;if D:IsValid()then M=o:WorldToLocal(D:LocalToWorld(M))if M.x<K.x then K.x=M.x end;if M.y<K.y then K.y=M.y end;if M.z<K.z then K.z=M.z end;if M.x>L.x then L.x=M.x end;if M.y>L.y then L.y=M.y end;if M.z>L.z then L.z=M.z end end end end end;if o.ExtraRBoxPoints then for N,O in pairs(o.ExtraRBoxPoints)do if O.x<K.x then K.x=O.x end;if O.y<K.y then K.y=O.y end;if O.z<K.z then K.z=O.z end;if O.x>L.x then L.x=O.x end;if O.y>L.y then L.y=O.y end;if O.z>L.z then L.z=O.z end end end;return K,L end;function Wire_UpdateRenderBounds(o)local K,L=J(o)o:SetRenderBounds(K,L)end;local function P(Q,R,S)if S[1]then c=tonumber(S[1])end;Msg("\nWire DisableWireRender/WireRenderMode = "..tostring(c).."\n")end;concommand.Add("cl_Wire_DisableWireRender",P)concommand.Add("cl_Wire_SetWireRenderMode",P)function Wire_DrawTracerBeam(o,T,U,V)local V=V||o:GetBeamLength(T)if V==0 then return end;local W=o:GetPos()local X={}if o.GetTarget&&(o:GetTarget().X!=0||o:GetTarget().Y!=0||o:GetTarget().Z!=0)then X.endpos=W+(o:GetTarget()-W):GetNormalized()*V;if X.endpos[1]!=X.endpos[1]then X.endpos=W+Vector(o:GetBeamLength(),0,0)end elseif o.GetSkewX&&o.GetSkewY then local Y,Z=o:GetSkewX(T),o:GetSkewY(T)if Y!=0||Z!=0 then local _=Vector(Y,Z,1)_=_*V/_:Length()local a0=o:GetRight()*_.x;local a1=o:GetForward()*_.y;local a2=o:GetUp()*_.z;X.endpos=W+a0+a1+a2 else X.endpos=W+o:GetUp()*V end else X.endpos=W+o:GetUp()*V end;X.start=W;X.filter={o}if o:GetNWBool("TraceWater")then X.mask=MASK_ALL end;X=util.TraceLine(X)o.ExtraRBoxPoints=o.ExtraRBoxPoints||{}o.ExtraRBoxPoints[T]=o:WorldToLocal(X.HitPos)render.SetMaterial(BeamMat)render.DrawBeam(W,X.HitPos,6,0,10,o:GetColor())if U then render.SetMaterial(BeamMatHR)render.DrawBeam(W,X.HitPos,6,0,10,Color(255,255,255,255))end end;hook.Add("InitPostEntity","language_strings",function()for a3,a4 in pairs(scripted_ents.GetList())do if a4.t.PrintName&&a4.t.PrintName!=""then language.Add(a3,a4.t.PrintName)end end end)if!CanRunConsoleCommand then function CanRunConsoleCommand()return false end;hook.Add("Initialize","CanRunConsoleCommand",function()function CanRunConsoleCommand()return true end end)end;function Derma_StringRequestNoBlur(...)local a5=Derma_StringRequest(...)a5:SetBackgroundBlur(false)return a5 end;function Derma_QueryNoBlur(...)local a5=Derma_Query(...)a5:SetBackgroundBlur(false)return a5 end;function WireLib.hud_debug(a6,a7)hook.Add("HUDPaint","wire_hud_debug",function()if a7 then hook.Remove("HUDPaint","wire_hud_debug")end;draw.DrawText(a6,"Trebuchet24",10,200,Color(255,255,255,255),0)end)end;local a8=WireLib.__old_renderhalos||hook.GetTable().PostDrawEffects.RenderHalos;WireLib.__old_renderhalos=a8;if a8!=nil then hook.Add("PostDrawEffects","RenderHalos",function()if hook.Run("ShouldDrawHalos")==false then return end;a8()end)else ErrorNoHalt("Wiremod RenderHalos detour failed (RenderHalos hook not found)!")end;local a9={[2]="warning",[3]="error"}local aa=0;local function ab(ac,ad,ae,af,y)if!ae then ae=1 end;if af==nil then af=ae<2 end;if af then chat.AddText(unpack(WireLib.NotifyBuilder(ad,ae,y)))chat.PlaySound()else MsgC(unpack(WireLib.NotifyBuilder(ad,ae,y)))local ag=CurTime()if ae>1&&aa<ag then aa=ag+1;notification.AddLegacy(string.format("Wiremod %s! Check your console for details",a9[ae]),NOTIFY_ERROR,5)surface.PlaySound(ae==3&&"vo/k_lab/kl_fiddlesticks.wav"||"buttons/button22.wav")end end end;WireLib.Notify=ab;WireLib.Net.Trivial.Receive("notify",function()local ae=net.ReadUInt(4)local y=net.ReadBool()&&net.ReadColor(false)||nil;local ad=util.Decompress(net.ReadData(net.ReadUInt(11)))ab(nil,ad,ae,net.ReadBool(),y)end)
--addons/!lpakr_out/lua/wire/client/cl_wire_map_interface.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/client/wire_filebrowser.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/client/sound_browser.lua:
return lpakr()()
--addons/!lpakr_out/lua/autorun/wos_advswl_loader.lua:
return lpakr()()
--addons/!lpakr_out/lua/wos/advswl/combat/cl_saberbase_hook.lua:
local a=0;hook.Add("CalcView","wOS.CameraModeHooks",function(b,c,d)if isThirdPerson()then return end;if!IsValid(b)||!b:Alive()||b:InVehicle()||b:GetViewEntity()!=b then return end;if!LocalPlayer().GetActiveWeapon||!IsValid(LocalPlayer():GetActiveWeapon())||!LocalPlayer():GetActiveWeapon().IsLightsaber then return end;if LocalPlayer():GetNWFloat("wOS.DevestatorTime",0)>=CurTime()then local e=LocalPlayer():GetNWFloat("wOS.DevestatorTime",0)if!LocalPlayer().LastDevestator||LocalPlayer().LastDevestator<CurTime()then LocalPlayer().LastDevestator=e+0.2;DCalledtime=CurTime()end;local f=LocalPlayer():EyePos()+Vector(math.cos(4.7*(DCalledtime-CurTime())),math.sin(4.7*(DCalledtime-CurTime())),0)*150;local g=util.TraceHull({start=c,endpos=f,filter={b:GetActiveWeapon(),b},mins=Vector(-4,-4,-4),maxs=Vector(4,4,4)})if g.Hit then c=g.HitPos else c=f end;d=(LocalPlayer():EyePos()-c):Angle()return{origin=c,angles=d,drawviewer=true}else local g=util.TraceHull({start=c,endpos=c-d:Forward()*100,filter={b:GetActiveWeapon(),b},mins=Vector(-4,-4,-4),maxs=Vector(4,4,4)})if g.Hit then c=g.HitPos else c=c-d:Forward()*100 end;return{origin=c,angles=d,drawviewer=true}end end)hook.Add("PlayerBindPress","rb655_sabers_force_wos",function(b,h,i)if LocalPlayer():InVehicle()||b!=LocalPlayer()||!LocalPlayer():Alive()||!IsValid(LocalPlayer():GetActiveWeapon())||!LocalPlayer():GetActiveWeapon().IsLightsaber then ForceSelectEnabled=false;return end;local j=LocalPlayer():GetActiveWeapon()if h=="impulse 100"&&i then if b:KeyDown(IN_USE)then return end;j.ForceSelectEnabled=!j.ForceSelectEnabled;return true end;if!i||wOS.ForceSelectMenu||!j.ForceSelectEnabled then return end;local k=h=='invnext'&&1||h=='invprev'&&-1||0;if k!=0 then local l=j:GetForceType()local m=#j.ForcePowers;local n=l+k;n=n<1&&m||n>m&&1||n;RunConsoleCommand('rb655_select_force_wos',n)return false end;if h:StartWith("slot")then RunConsoleCommand("rb655_select_force_wos",h:sub(5))return true end end)local o={}local p={['models/weapons/starwars/w_maul_saber_staff_hilt.mdl']={backward=5},['models/weapons/starwars/w_kr_hilt.mdl']={forward=5}}hook.Add('OnSaberHiltChanged',function(b,j,q,r)b.LightsaberHilt=IsValid(j)&&j||nil end)hook.Add("PostPlayerDraw","wOS.Lightsaber.HolsterDrawing",function(b)if!o[b]then return end;if!IsValid(b.LightsaberHilt)then if IsValid(b.LightsaberMDL)then b.LightsaberMDL:Remove()b.LightsaberMDL=nil end;return end;local j=b.LightsaberHilt;if!IsValid(j)||j==b:GetActiveWeapon()||!j.WorldModel then return end;if b.lightsaber_lastmodel&&b.lightsaber_lastmodel!=j.WorldModel&&IsValid(b.LightsaberMDL)then b.LightsaberMDL:Remove()b.LightsaberMDL=nil end;if!b.LightsaberMDL then b.LightsaberMDL=ClientsideModel(j.WorldModel,RENDERGROUP_BOTH)if!IsValid(b.LightsaberMDL)then return end;b.LightsaberMDL:SetModel(j.WorldModel)b.LightsaberMDL:PhysicsDestroy()b.LightsaberMDL:SetParent(b)b.LightsaberMDL:SetMoveType(MOVETYPE_NONE)b.LightsaberMDL:SetNoDraw(true)b.lightsaber_lastmodel=j.WorldModel else local s;if j.HolsterBone then s=b:LookupBone(j.HolsterBone)end;local c,d=b:GetBonePosition(s||0)if!j.HolsterTranslate then d:RotateAroundAxis(d:Up(),80)c=c-d:Right()*8-d:Forward()*8 else c,d=j:HolsterTranslate(b.LightsaberMDL,c,d)end;b.LightsaberMDL:SetPos(c)b.LightsaberMDL:SetAngles(d)b.LightsaberMDL:DrawModel()end end)local function t()local u=LocalPlayer()if!IsValid(u)||!srp.hud.Players then return end;o={u}local c=LocalPlayer():GetPos()for v,b in ipairs(srp.hud.Players)do if!IsValid(b)then continue end;if b:GetNoDraw()then continue end;if c:Distance(b:GetPos())>500 then continue end;for v,j in pairs(b:GetWeapons())do if j.IsLightsaber then o[b]=j:GetClass()break end end end end;timer.Create('wOS.Players.GetClose',.5,0,t)
--addons/!lpakr_out/lua/wos/advswl/devestators/sh_devestators.lua:
wOS=wOS||{}wOS.AvailableDevestators={["Kyber Slam"]={name="Kyber Slam",icon="KS",description="Set free your crystal's chains",ActionServer=function(self)if self.UltimateCooldown&&self.UltimateCooldown>=CurTime()then return end;self:SetForce(0)self:SetNextAttack(10)local a=self:GetOwner()a:SetVelocity(Vector(0,0,300))self:PlayWeaponSound("lightsaber/force_leap.wav")a:SetSequenceOverride("ryoku_a_s1_charge",0)a:SetNWFloat("wOS.DevestatorTime",CurTime()+5)a.KyberSlam=true end},["Lightning Coil"]={name="Lightning Coil",icon="LC",description="Pulses of electricity fry all those around you",ActionServer=function(self)if self.UltimateCooldown&&self.UltimateCooldown>=CurTime()then return end;local a=self:GetOwner()self:SetForce(0)self:SetNextAttack(10)a:SetVelocity(Vector(0,0,500))self:PlayWeaponSound('lightsaber/force_leap.wav')a:SetSequenceOverride('vanguard_a_s1_t1',0)a:SetNWFloat('wOS.DevestatorTime',CurTime()+5)timer.Simple(0.5,function()if!IsValid(self)then return end;if!a then return end;if!a:Alive()then return end;local b=ents.Create('wos_lightning_coil')b:SetPos(a:GetPos())b:Spawn()b:SetOwner(a)a:SetSequenceOverride('judge_a_right_charge',0)self:SetNextAttack(5)self.UltimateCooldown=CurTime()+5;return end)end},["Sonic Discharge"]={name="Sonic Discharge",icon="SD",description="Attack while their eyes are weak",ActionServer=function(self)if self.UltimateCooldown&&self.UltimateCooldown>=CurTime()then return end;local a=self:GetOwner()self:SetForce(0)self:SetNextAttack(10)a:SetVelocity(Vector(0,0,300))self:PlayWeaponSound("lightsaber/force_leap.wav")a:SetSequenceOverride("vanguard_a_s1_t1",0)a:SetNWFloat("wOS.DevestatorTime",CurTime()+5)timer.Simple(0.3,function()if!IsValid(self)then return end;if!a then return end;if!a:Alive()then return end;local b=ents.Create("wos_sonic_discharge")b:SetPos(a:GetPos())b:Spawn()b:SetOwner(a)a:SetSequenceOverride("judge_a_right_charge",0)self:SetNextAttack(5)self.UltimateCooldown=CurTime()+5;return end)end}}
--addons/!lpakr_out/lua/advdupe2/cl_ghost.lua:
return lpakr()()
--addons/!lpakr_out/lua/vgui/stackerpreseteditor.lua:
local a={}local vgui=vgui;local pairs=pairs;local AccessorFunc=AccessorFunc;local GetConVarString=GetConVarString;AccessorFunc(a,"m_ConCommands","ConCommands")function a:Add()if!self.m_ConVars then return end;local b=self.txtName:GetValue()if!b||b==""then return end;local c={}for d,e in pairs(self.m_ConVars)do c[e.CCmd]=GetConVarString(e.CVar)end;presets.Add(self.m_strType,b,c)self:Update()self.PresetList:SelectByName(b)self.txtName:SetText("")if self.m_PresetControl then self.m_PresetControl:Update()end end;vgui.Register("StackerPresetEditor",a,"PresetEditor")
--addons/!lpakr_out/gamemodes/srp_base/gamemode/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/loader.lua:
loader=loader||{}local a=Color(100,100,255)local b=Color(241,196,15)local c=Color(39,174,96)local d=Color(255,0,0)local e=false;local f={}local g=false;local function h(i,j)if!g then return i,j end;local k,l={},{}for m=#i,1,-1 do table.insert(k,i[m])end;for m=#j,1,-1 do table.insert(l,j[m])end;return k,l end;function loader.PrepareRecursive(n,o,p)if string.find(n,'_ignore')||string.find(n,'_dev')&&!info.Dev||string.find(n,'_nodev')&&info.Dev then return end;n=n[#n]=='/'&&n||n..'/'p=p||0;local k,l=file.Find(n..'*','LUA','namedesc')k,l=h(k,l)for q,r in ipairs(k||{})do loader.PrepareFile(n,r)end;if o&&p==o then return end;for q,s in ipairs(l||{})do loader.PrepareRecursive(n..s,o,p+1)end end;function loader.PrepareFile(n,r)if!n||!r then return end;local t=r:sub(-7,-5)if t=='_sh'then include(n..r)elseif t=='_ui'||t=='_cl'then if SERVER then else include(n..r)end elseif SERVER&&t=='_sv'then include(n..r)end end;function loader.AddWorkshopItems(u)for q,v in ipairs(u)do resource.AddWorkshop(v)end end;local function w(n,x,y,z)n=n[#n]=='/'&&n||n..'/'local k,A=file.Find(n..'*',z||'LUA')if!(k&&A)||#k==0&&#A==0 then return end;if y&&A then for B=1,#A do w(Format("%s%s/",n,A[B]),x,y,z)end end;for B=1,#k do x(n..k[B])end end;function loader.LoadConfig(n,C,o)cfg=cfg||{}n=n[#n]=='/'&&n||n..'/'local D,E=file.Find(n..C..'/*','LUA')if#D>0||#E>0 then MsgC(c,'Loading Config /'..C..'\n')loader.PrepareRecursive(n..C,o||0)end;local F=n..C..'_*.lua'local k=file.Find(F,'LUA')if k&&#k>0 then MsgC(c,'Loading Config '..C..'\n')for m=1,#k do loader.PrepareFile(n,k[m])end end;local G=n..C..'/'..info.Map..'.lua'if file.Exists(G,'LUA')then include(G)MsgC(d,'Loaded Server Map Config\n')end end;local function H(I)local I=string.Explode('',I)local J=360/#I;for m=1,#I do local K=HSVToColor(m*J%360,1,1)MsgC(K,I[m])end;Msg('\n')end;local function L(M)print('\n\n\n\n')MsgC(a,[[
---------------------------------------------------------
]]..os.date()..' '..CurTime()..' '..game.GetIPAddress())H([[

   _____ _    _ _____  ______ _____  _____ ____  _____
  / ____| |  | |  __ \|  ____|  __ \|_   _/ __ \|  __ \
 | (___ | |  | | |__) | |__  | |__) | | || |  | | |__) |
  \___ \| |  | |  ___/|  __| |  _  /  | || |  | |  _  /
  ____) | |__| | |    | |____| | \ \ _| || |__| | | \ \
 |_____/ \____/|_|____|______|_|__\_\_____\____/|_|  \_\
  / ____|  ____|  __ \ \    / /  ____|  __ \ / ____|
 | (___ | |__  | |__) \ \  / /| |__  | |__) | (___
  \___ \|  __| |  _  / \ \/ / |  __| |  _  / \___ \
  ____) | |____| | \ \  \  /  | |____| | \ \ ____) |
 |_____/|______|_|  \_\  \/   |______|_|  \_\_____/
]])MsgC(a,[[https://superiorservers.co (discord.gg/superiorservers)
Gamemode code belongs to Superior Servers.
Report exploits and make suggestions on our forums. Have fun!
]]..(M||'')..[[
---------------------------------------------------------
]])end;local function N(O)return os.date("*t",os.time(O))end;local function P()local Q=os.time()local R=os.date("*t",Q)local S=os.date("!*t",Q)R.isdst=false;return os.difftime(os.time(R),os.time(S))end;local function T(C)if!string.find(C,'_timed')then return true end;local q,q,U,V,W,X,Y=string.find(C,"(%w+)_timed_(%d+).(%d+)+(%d+).(%d+)")if!V then return false end;X=tonumber(X)V=tonumber(V)Y=tonumber(Y)W=tonumber(W)if!X||!V||!Y||!W then return end;local Z=N(os.date'!*t')local _=P()local a0=os.time()-CurTime()Z.sec=Z.sec+1+_;Z.minute=0;Z.hour=0;Z.day=V;Z.month=W;local a1=os.time(Z)Z.sec=Z.sec+1+_;Z.minute=0;Z.hour=0;Z.day=X;Z.month=Y;local a2=os.time(Z)if a0<a1||a0>a2 then return false end;H([[--------------------------------]])H('Loaded Timed Module '..U)H(Format('From:\t%02i/%02i/%04i',V,W,Z.year))H(Format('  To:\t%02i/%02i/%04i',X,Y,Z.year))H([[--------------------------------]])return true end;local a3={}function loader.BlacklistModules(a4)for m=1,#a4 do a3[a4[m]]=true end end;function loader.IsBlacklisted(a5)return a3[a5]end;function loader.Load(a6,U,M,a7)local a8={}local a9=a6 ..'/gamemode/modules/'local aa=a6 ..'/gamemode/config/'local k,ab=file.Find(a9 ..'*','LUA','namedesc')g=table.Count(ab)>1&&ab[1]>ab[2]k,ab=h(k,ab)if!a7 then GM.Name=U;L(M)a8=loader.Load('srp_base',nil,nil,true)end;if a7 then loader.PrepareRecursive(a6 ..'/gamemode/extensions/',2)loader.PrepareRecursive(a6 ..'/gamemode/sandbox/',999)end;for q,C in ipairs(ab)do if loader.IsBlacklisted(C)||string.find(C,'_ignore')then continue end;if T(C)then a8[C]=true;loader.PrepareRecursive(a9 ..C,4)MsgC(a7&&a||d,'Loaded Module '..a6 ..' '..C..'\n')end end;if!a7 then print'---------------------------------------------------------'local ac=table.GetKeys(a8)table.sort(ac)for m,C in ipairs(ac)do loader.LoadConfig(aa,C,5)end end;print'---------------------------------------------------------'if!a7 then hook.Run('OnLoaderCompleted',a8)end;a8['loader']=true;return a8 end;local function ad(ae)local af=ents.Create(ae.class)if!IsValid(af)then return end;af:SetPos(ae.pos)if ae.ang then af:SetAngles(ae.ang)end;if ae.model then af:SetModel(ae.model)end;if ae.scale then af:SetModelScale(ae.scale)end;if ae.premeta then for a5,ag in pairs(ae.premeta)do if af[a5]then if istable(ag)then af[a5](af,unpack(ag))else af[a5](af,ag)end end end end;af:Spawn()if ae.meta then for a5,ag in pairs(ae.meta)do if af[a5]then if istable(ag)then af[a5](af,unpack(ag))else af[a5](af,ag)end end end end;if!ae.ignorephys then timer.Simple(0,function()af:PhysicsInitStatic(SOLID_VPHYSICS)end)end;if ae.OnSpawned then ae:OnSpawned(af)end;if af.OnSpawnedByLoader then af:OnSpawnedByLoader(ae)end;return af end;local function ah()if CLIENT then hook.Run('OnMapEntitiesLoaded')return end;for ai,u in pairs(f)do for q,aj in ipairs(ents.FindByClass(ai))do if IsValid(aj)then aj:Remove()end end;for m=1,#u do ad(u[m])end end;hook.Run('OnMapEntitiesLoaded')e=true end;function loader.AddEntity(G,ai,a4)if game.GetMap()!=G then return end;local ak={}f[ai]={}local al=a4[1]&&a4||{a4}for q,ae in ipairs(al)do ae.class=ai;table.insert(f[ai],ae)if e then table.insert(ak,ad(ae))end end;return ak end;function loader.GetPermEnts()return f end;hook('InitPostEntity','loader.PostLoadEntities',ah)
--addons/!lpakr_out/lua/dash/libraries/client/outline.lua:
outline={}outline.MODE_BOTH=0;outline.MODE_NOTVISIBLE=1;outline.MODE_VISIBLE=2;outline.RENDERTYPE_BEFORE_VM=0;outline.RENDERTYPE_BEFORE_EF=1;outline.RENDERTYPE_AFTER_EF=2;local istable=istable;local render=render;local Material=Material;local CreateMaterial=CreateMaterial;local hook=hook;local cam=cam;local ScrW=ScrW;local ScrH=ScrH;local IsValid=IsValid;local surface=surface;local a,b={},0;local c=NULL;local d=outline.RENDERTYPE_AFTER_EF;local e=1;local f=render.GetScreenEffectTexture(0)local g=render.GetScreenEffectTexture(1)local h={["$basetexture"]=g:GetName(),["$ignorez"]=1,["$alphatest"]=1}local i=Material("pp/copy")local j=CreateMaterial("outline","UnlitGeneric",h)local k,l,m=1,2,3;function outline.Add(n,o,p)if b>=255 then return end;if!istable(n)then n={n}end;if n[1]==nil then return end;if p!=outline.MODE_BOTH&&p!=outline.MODE_NOTVISIBLE&&p!=outline.MODE_VISIBLE then p=outline.MODE_BOTH end;local q={[k]=n,[l]=o,[m]=p}b=b+1;a[b]=q end;function outline.RenderedEntity()return c end;function outline.SetRenderType(r)if r!=outline.RENDERTYPE_BEFORE_VM&&r!=outline.RENDERTYPE_BEFORE_EF&&r!=outline.RENDERTYPE_AFTER_EF then return end;local s=d;d=r;return s end;function outline.GetRenderType()return d end;function outline.SetDoubleThickness(t)local u=e==2;e=t&&2||1;return u end;function outline.IsDoubleThickness()return e==2 end;local function v()local w=render.GetRenderTarget()render.CopyRenderTargetToTexture(f)local x,y=ScrW(),ScrH()render.ClearStencil()render.SetStencilEnable(true)render.SuppressEngineLighting(true)render.SetStencilWriteMask(0xFF)render.SetStencilTestMask(0xFF)render.SetStencilCompareFunction(STENCIL_GREATER)render.SetStencilFailOperation(STENCIL_KEEP)cam.Start3D()render.SetBlend(1)for z=1,b do local A=0xFF-(z-1)local q=a[z]local p=q[m]local n=q[k]render.SetStencilReferenceValue(A)if p==outline.MODE_BOTH||p==outline.MODE_VISIBLE then render.SetStencilZFailOperation(p==outline.MODE_BOTH&&STENCIL_REPLACE||STENCIL_KEEP)render.SetStencilPassOperation(STENCIL_REPLACE)for B=1,#n do local C=n[B]if IsValid(C)then c=C;C:DrawModel()end end elseif p==outline.MODE_NOTVISIBLE then render.SetStencilZFailOperation(STENCIL_REPLACE)render.SetStencilPassOperation(STENCIL_KEEP)for B=1,#n do local C=n[B]if IsValid(C)then c=C;C:DrawModel()end end;render.SetStencilCompareFunction(STENCIL_EQUAL)render.SetStencilZFailOperation(STENCIL_KEEP)render.SetStencilPassOperation(STENCIL_ZERO)for B=1,#n do local C=n[B]if IsValid(C)then c=C;C:DrawModel()end end;render.SetStencilCompareFunction(STENCIL_GREATER)end end;c=NULL;render.SetBlend(1)cam.End3D()render.SetStencilCompareFunction(STENCIL_EQUAL)render.SetStencilZFailOperation(STENCIL_KEEP)render.SetStencilPassOperation(STENCIL_KEEP)render.Clear(0,0,0,0,false,false)cam.Start2D()for z=1,b do local A=0xFF-(z-1)render.SetStencilReferenceValue(A)surface.SetDrawColor(a[z][l])surface.DrawRect(0,0,x,y)end;cam.End2D()render.SuppressEngineLighting(false)render.SetStencilEnable(false)render.CopyRenderTargetToTexture(g)render.SetRenderTarget(w)i:SetTexture("$basetexture",f)render.SetMaterial(i)render.DrawScreenQuad()render.SetStencilEnable(true)render.SetStencilReferenceValue(0)render.SetStencilCompareFunction(STENCIL_EQUAL)j:SetTexture("$basetexture",g)render.SetMaterial(j)render.DrawScreenQuadEx(-e,-e,x,y)render.DrawScreenQuadEx(-e,0,x,y)render.DrawScreenQuadEx(-e,e,x,y)render.DrawScreenQuadEx(0,-e,x,y)render.DrawScreenQuadEx(0,e,x,y)render.DrawScreenQuadEx(e,-e,x,y)render.DrawScreenQuadEx(e,0,x,y)render.DrawScreenQuadEx(e,e,x,y)render.SetStencilEnable(false)render.ClearDepth()end;local function D()hook.Run("SetupOutlines",Add)if b==0 then return end;v()a,b={},0 end;hook.Add("PreDrawViewModels","RenderOutlines",function()if d==outline.RENDERTYPE_BEFORE_VM then D()end end)hook.Add("PreDrawEffects","RenderOutlines",function()if d==outline.RENDERTYPE_BEFORE_EF then D()end end)hook.Add("PostDrawEffects","RenderOutlines",function()if d==outline.RENDERTYPE_AFTER_EF then D()end end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/sandbox/spawnmenu/toolmenu_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/sandbox/spawnmenu/toolquickswitch_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/sandbox/spawnmenu/controls/ctrllistbox_cl.lua:
local a={}function a:Init()self.ConVars={}self.Options={}end;function a:AddOption(b,c)self:AddChoice(b,c)for d,e in pairs(c)do self.ConVars[d]=1 end end;function a:OnSelect(f,g,h)for d,e in pairs(h)do RunConsoleCommand(d,tostring(e))end end;function a:Think(i)self:CheckConVarChanges()end;function a:ConVarsChanged()for d,e in pairs(self.ConVars)do if self[d]==nil then return true end;if self[d]!=GetConVarString(d)then return true end end;return false end;function a:CheckForMatch(j)if table.Count(j)==0 then return false end;for d,e in pairs(j)do if tostring(e)!=GetConVarString(d)then return false end end;return true end;function a:CheckConVarChanges()if!self:ConVarsChanged()then return end;for d,e in pairs(self.ConVars)do self[d]=GetConVarString(d)end;for d,e in pairs(self.Data)do if self:CheckForMatch(e)then self:SetText(self:GetOptionText(d))return end end end;vgui.Register("CtrlListBox",a,"DComboBox")
--addons/!lpakr_out/gamemodes/srp_base/gamemode/sandbox/spawnmenu/controls/ctrlnumpad_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/sandbox/spawnmenu/controls/preset_editor_cl.lua:
local a={}AccessorFunc(a,"m_strType","Type")AccessorFunc(a,"m_ConVars","ConVars")AccessorFunc(a,"m_PresetControl","PresetControl")function a:Init()self:SetDrawOnTop(true)self:SetSize(450,350)self:SetTitle("Preset Editor")self.PresetList=vgui.Create("DListBox",self)self.pnlEditor=vgui.Create("DPanel",self)self.pnlDetails=vgui.Create("DPanel",self.pnlEditor)self.pnlModify=vgui.Create("DPanel",self.pnlEditor)self.btnDelete=vgui.Create("DButton",self.pnlModify)self.btnDelete.DoClick=function()self:Delete()end;self.btnDelete:SetText("#Delete")self.txtRename=vgui.Create("DTextEntry",self.pnlModify)self.btnRename=vgui.Create("DButton",self.pnlModify)self.btnRename:SetText("#Rename")self.btnRename.DoClick=function()self:Rename()end;self.pnlAdd=vgui.Create("DPanel",self)self.txtName=vgui.Create("DTextEntry",self.pnlAdd)self.btnAdd=vgui.Create("DButton",self.pnlAdd)self.btnAdd:SetText("#Add Preset")self.btnAdd.DoClick=function()self:Add()end;self.pnlClose=vgui.Create("DPanel",self)self.btnCloseIt=vgui.Create("DButton",self.pnlClose)self.btnCloseIt:SetText("#Close")self.btnCloseIt.DoClick=function()self:Remove()end end;function a:SetType(b)self.m_strType=b;self:Update()end;function a:Update()self.PresetList:Clear()local c=presets.GetTable(self.m_strType)local d,e={},1;for f in pairs(c)do d[e]=f;e=e+1 end;table.sort(d)for g,f in ipairs(d)do local h=self.PresetList:AddItem(f)h.Data=c[f]end end;function a:PerformLayout()DFrame.PerformLayout(self)self.pnlClose:SetSize(100,30)self.pnlClose:AlignRight(10)self.pnlClose:AlignBottom(10)self.btnCloseIt:StretchToParent(5,5,5,5)self.pnlAdd:StretchToParent(10,10,10,10)self.pnlAdd:CopyHeight(self.pnlClose)self.pnlAdd:AlignBottom(10)self.pnlAdd:StretchRightTo(self.pnlClose,10)self.btnAdd:SetSize(80,20)self.btnAdd:AlignRight(5)self.btnAdd:CenterVertical()self.txtName:SetPos(5,5)self.txtName:StretchRightTo(self.btnAdd,5)self.txtName:CenterVertical()self.PresetList:StretchToParent(10,30,5,5)self.PresetList:StretchBottomTo(self.pnlAdd,10)self.PresetList:SetWide(130)self.pnlEditor:CopyBounds(self.PresetList)self.pnlEditor:MoveRightOf(self.PresetList,5)self.pnlEditor:StretchToParent(nil,nil,10,nil)self.pnlModify:StretchToParent(5,5,5,5)self.pnlModify:SetTall(30)self.pnlModify:AlignBottom(5)self.btnDelete:SetSize(40,20)self.btnDelete:AlignRight(5)self.btnDelete:CenterVertical()self.btnRename:SetSize(50,20)self.btnRename:MoveLeftOf(self.btnDelete,5)self.btnRename:CenterVertical()self.txtRename:StretchToParent(5,5,5,5)self.txtRename:StretchRightTo(self.btnRename,5)self.pnlDetails:CopyBounds(self.pnlModify)self.pnlDetails:AlignTop(5)self.pnlDetails:StretchBottomTo(self.pnlModify,5)end;function a:Delete()local i=self.PresetList:GetSelectedValues()if!i then return end;presets.Remove(self.m_strType,i)self:Update()if self.m_PresetControl then self.m_PresetControl:Update()end end;function a:Rename()local i=self.PresetList:GetSelectedValues()if!i then return end;local j=self.txtRename:GetValue()if!j||j==""then return end;presets.Rename(self.m_strType,i,j)self:Update()self.PresetList:SelectByName(j)self.txtRename:SetText("")if self.m_PresetControl then self.m_PresetControl:Update()end end;function a:Add()if!self.m_ConVars then return end;local j=self.txtName:GetValue()if!j||j==""then return end;local k={}for l,m in pairs(self.m_ConVars)do k[m]=GetConVarString(m)end;presets.Add(self.m_strType,j,k)self:Update()self.PresetList:SelectByName(j)self.txtName:SetText("")if self.m_PresetControl then self.m_PresetControl:Update()end end;vgui.Register("PresetEditor",a,"DFrame")
--addons/!lpakr_out/gamemodes/srp_base/gamemode/sandbox/spawnmenu/creationmenu/content/contenttypes/entities_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/sandbox/spawnmenu/creationmenu/content/contenttypes/gameprops_cl.lua:
local function a(b,c,d)local e=false;local f,g=file.Find(b.."/*",c)for h,file in pairs(f||{})do if file:EndsWith(".mdl")then if!e then table.insert(d,{type="header",text=b})e=true end;table.insert(d,{type="model",model=b.."/"..file})end end;for h,i in pairs(g||{})do a(b.."/"..i,c,d)end end;function GenerateSpawnlistFromPath(b,j,k,l,m)local n={}a(b,j,n)AddPropsOfParent(g_SpawnMenu.CustomizableSpawnlistNode.SMContentPanel,g_SpawnMenu.CustomizableSpawnlistNode,0,{[b]={icon=l||"icon16/page.png",id=math.random(0,999999),name=k||b,parentid=0,needsapp=m,contents=n}})hook.Run("SpawnlistContentChanged")end;local function o(self)local p=DermaMenu()p:AddOption("#spawnmenu.createautospawnlist",function()local q=self;local l=q:GetIcon()while!l:StartWith("games")do q=q:GetParentNode()if!IsValid(q)then break end;l=q:GetIcon()end;local k=q:GetText()if self:GetFolder()!="models"then k=k.." - "..self:GetFolder():sub(8)end;GenerateSpawnlistFromPath(self:GetFolder(),self:GetPathID(),k,l,q.GameAppID)end):SetIcon("icon16/page_add.png")p:Open()end;local function r(self,s)s.DoRightClick=o;s.OnNodeAdded=r end;local function t(u,v,k,l,j,c,w,m)local x=v:AddFolder(k,j.."models",c,false)x:SetIcon(l)x.BrowseContentType="models"x.BrowseExtension="*.mdl"x.ContentType="model"x.ViewPanel=u;x.GameAppID=m;x.OnNodeSelected=function(y,v)if u&&u.CurrentNode&&u.CurrentNode==v then if w.SelectedPanel!=u then w:SwitchPanel(u)end;return end;u:Clear(true)u.CurrentNode=v;local z=v:GetFolder()local A=z.."/*.mdl"local B=file.Find(A,v:GetPathID())if B then for C,D in pairs(B)do local E=spawnmenu.GetContentType("model")if E then E(u,{model=z.."/"..D})end end else MsgN("Warning! Not opening '"..z.."' because we cannot search in it!")end;w:SwitchPanel(u)u.CurrentNode=v end;r(v,x)end;local function F(G)local H=engine.GetGames()table.insert(H,{title="All",folder="GAME",icon="all",mounted=true})table.insert(H,{title="Garry's Mod",folder="garrysmod",mounted=true})for I,J in SortedPairsByMemberValue(H,"title")do if!J.mounted then continue end;t(G.ViewPanel,G,J.title,"games/16/"..(J.icon||J.folder)..".png","",J.folder,G.pnlContent,J.depot)end end;local K;hook.Add("PopulateContent","GameProps",function(w,L,v)K=v:AddNode("#spawnmenu.category.games","icon16/folder_database.png")K.pnlContent=w;local u=vgui.Create("ContentContainer",w)u:SetVisible(false)u.IconList:SetReadOnly(true)K.ViewPanel=u;F(K)end)hook.Add("GameContentChanged","RefreshSpawnmenuGames",function()if!IsValid(K)then return end;K:Clear()K.ViewPanel:Clear(true)F(K)end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/baseui/basepanel_ui.lua:
local a={}function a:Init()self.ribbon=false;self:DockPadding(5,5,5,5)end;function a:CreateHeader(b,c)return srp.ui.Create('srp_panel_rounded',function(d)d:Dock(TOP)d:SetTall(120)d:DockMargin(5,5,5,5)d:DockPadding(5,15,5,5)d:SetBackgroundColor(col.midnight_dark)d:AddPanel('srp_label',function(e)e:Dock(TOP)e:SetFont'ui_header.r'e:SetText(b)end)d:AddPanel('srp_label',function(e)e:Dock(FILL)e:SetText(c)end)end)end;function a:AddHeader(b,c)local f=self:CreateHeader(b,c)f:SetParent(self)f:Dock(TOP)return f end;function a:AddPanel(g,h,i)local j=srp.ui.Create(g,nil,i)if!IsValid(j)then return self end;j:SetParent(self)if self.stacked then j:Dock(TOP)end;if isfunction(h)then return h(j,self)||j else return h&&self||j end end;function a:AddItem(d)d:SetParent(self)return d end;function a:SetBorderColor(k)self.outline=true;self.m_bdrColor=k;return self end;function a:SetStacked()self.stacked=true;return self end;function a:SetHeaderColor(k)self.m_bgHeaderColor=k;return self end;function a:GetHeaderColor()return self.m_bgHeaderColor end;function a:SetBackgroundColor(k)self.m_bgColor=k;self.m_doNoDraw=k==col.transparent;return self end;function a:SetColor(col)self.m_bgColor=col end;function a:GetColor()return self.m_bgColor end;function a:GetBackgroundColor()return self.m_bgColor end;function a:SetColor(k)self.m_bgColor=k;return self end;function a:GetColor()return self.m_bgColor end;function a:SetHoverColor(k,l)self.m_bghColor=k;self.m_bghWidthChildren=l;return self end;function a:SetDisabledColor(k)self.m_bgdColor=k;return self end;function a:SetLoading(h,m,n,o,p,q,r)self.loading=h;self.loadingtext=n;self.color_loadingbg=o;self.mat_loading=p;self.font_loading=q;self.color_loading=r;if m then self:SetLoadingTimer(m)end;self:SetCursor(h&&'hourglass'||'none')return self end;function a:IsLoading()return self.loading end;function a:SetLoadingTimer(s)self.loadendtime=s+CurTime()self.loadtimeout=s;timer.Create('srp.loading.item',s,1,function()if IsValid(self)then self:SetLoading(false)end end)end;function a:StartDragAndDrop()srp.ui.StartDrag(self)end;function a:StopDragAndDrop()srp.ui.StopDrag(self)end;function a:IsDragging()return srp.ui.IsDragging(self)end;function a:OnStartDragging()self.DragAndDropping=true;return true end;function a:OnStopDragging()self.DragAndDropping=false;self:OnDragCompleted()end;function a:IsDragAndDropping()return self.DragAndDropping end;function a:OnDragCompleted()local t=vgui.GetHoveredPanel()if t==self||!t then return end;if t.ReceivedDragger then return t:ReceivedDragger(self)end end;function a:AddSpacer()self:AddPanel('DPanel',function(u)u:Dock(TOP)u:SetTall(1)u:DockMargin(5,10,5,10)u.Paint=function(v,w,x)derma.SkinHook('Paint','Spacer',self,w,x)end end)return self end;function a:PaintOver(w,x)derma.SkinHook('Paint','FrameLoading',self,w,x)end;function a:Paint(w,x)if!self.m_doNoDraw then derma.SkinHook('Paint','Panel',self,w,x)end end;vgui.Register('srp_base',a,'EditablePanel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/baseui/image_ui.lua:
local a={}function a:Init()self:DockPadding(35,35,35,35)self:SetBackgroundColor(col.tranparent)self.MaterialColor=col.white;self.KeepRatio=true end;function a:SetMaterial(b,c)self.Material=b;self.KeepRatio=KeepRatio==nil&&self.KeepRatio||c;self:UpdateInfo(b)end;function a:UpdateInfo(b)if!b then return end;self.MatWidth=b:Width()self.MatHeight=b:Height()self.MatRatio=self.MatHeight/self.MatWidth end;function a:GetMaterial(b)return self.Material end;function a:SetMaterialColor(d)self.MaterialColor=d end;function a:GetMaterialColor(b)return self.MaterialColor end;function a:SetImageColor(col)self.MaterialColor=col end;function a:GetImageColor(col)return self.MaterialColor end;function a:_LeftClick()end;function a:LeftClick(e)self._LeftClick=e end;function a:OnMousePressed(f)if f==MOUSE_LEFT then self:_LeftClick()end end;function a:PerformLayout(g,h)self:UpdateInfo(self.Material)end;function a:Paint(g,h)derma.SkinHook('Paint','ImagePanel',self,g,h)end;vgui.Register('srp_image',a,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/baseui/pagination_ui.lua:
local a={}function a:Init()self.page=1;self.pages=1;self:DockPadding(0,0,0,0)self:DockMargin(0,0,0,0)self:AddPanel('srp_panel',function(b)b:DockPadding(0,0,0,0)b:DockMargin(0,0,0,0)b:Dock(TOP)b:SetTall(35)b:SetBackgroundColor(col.grey_dark)b:AddPanel('srp_label',function(c)c:Dock(FILL)c:SetText'Logs'c:SetFont'ui_header.s'end)self.controls=b end)self:AddPanel('ui_scrollpanel',function(b)b:Dock(FILL)b:DockPadding(0,0,0,0)b:DockMargin(0,0,0,0)self.container=b end)end;function a:BuildPageButtons(d)self.controls:Clear()self.controls:AddPanel('srp_label',function(c)c:Dock(FILL)c:SetText'Logs'c:SetFont'ui_header.s'end)d=d||1;if d<2 then return end;for e=d,1,-1 do self.controls:AddPanel('srp_button_rounded',function(f)f.page=e;f:SetText(e)f:SetWide(25)f:Dock(RIGHT)f:DockMargin(1,4,0,4)f:SetBackgroundColor(col.midnight_dark)f:LeftClick(function(g)if self.nextclick&&self.nextclick>CurTime()then return end;self:GetPageFromAPI(g.page)self.nextclick=CurTime()+1 end)end)end end;function a:SetPage(e)for h,b in ipairs(self.controls:GetChildren())do if!b.page then continue end;if b.page==e then b:SetBackgroundColor(col.black)else b:SetBackgroundColor(col.midnight_dark)end end end;function a:SetURL(i)self.url=i;self:GetPageFromAPI(1)end;function a:GetPageFromAPI(j)j=j||1;self.container:Reset()ba.http.FetchJson(Format(self.url,j),function(k)if!IsValid(self)then return end;self.pages=tonumber(k.pages)self.page=math.Clamp(j,1,self.pages)self.data=k.data;self:BuildPageButtons(k.pages)self:SetPage(self.page)self:_DisplayData(self.container,self.page,k.data)end)end;function a:DisplayData(l)self._DisplayData=l end;function a:_DisplayData(m)self.container:Reset()for e=1,#m do local n=m[e]srp.ui.Create('srp_panel',function(b)b:Dock(TOP)b:SetTall(100)b:SetBackgroundColor(col.grey)b:SetBorderColor(col.white)self.container:AddItem(b)end)end end;function a:Paint()end;vgui.Register('srp_pagination',a,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/battlepass/ui/battlepass_item_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cards/ui/cardmail_ui.lua:
local a={}local b=Color(244,244,244,255)function a:Init()self:SetSize(800,400)self:Center()self:MakePopup()self:SetDraggable(false)self:SetTitle'Mail'self:SetBackgroundColor(col.midnight_dark)self:AddPanel('ui_scrollpanel',function(c)c:Dock(FILL)self.scroll=c end)self.cards={}end;function a:Populate(d)if!d||#d==0 then self.scroll:Remove()self:AddPanel('srp_panel_rounded',function(e)e:Dock(FILL)e:DockMargin(100,120,100,200)e.Paint=function()end;e:AddPanel('srp_label',function(f)f:Dock(FILL)f:SetContentAlignment(5)f:SetText'Your mailbox is empty'f:SetFont'ui_header.r'f:SetTextColor(col.white)end)end)return end;for g=1,#d do local h=d[g]srp.ui.Create('srp_panel_rounded',function(e)e:SetTall(35)e:SetBackgroundColor(col.midnight_light)e:DockPadding(2,2,2,2)e.card=h;e:AddPanel('srp_label',function(f)f:SetText(h.sender_name)f:Dock(LEFT)f:SetWide(200)f:SetTextColor(col.white)end)e:AddPanel('srp_label',function(f)f:SetText(h.sender_steamid)f:SetWide(150)f:Dock(LEFT)f:SetTextColor(col.white)end)e:AddPanel('srp_button_rounded',function(i)i:SetFont'SSRPForkAwesome'i:SetText(0xf1f8,true)i:DockMargin(0,0,0,0)i:DockPadding(0,0,0,0)i:SetBackgroundColor(col.red)i:SetHoverColor(col.red_dark)i:Dock(RIGHT)i:SetWide(25)i:LeftClick(function()srp.cards.Remove(e.card.id)e:Remove()end)end)e:AddPanel('srp_button_rounded',function(i)i:SetFont'SSRPForkAwesome'i:SetText(0xf02d,true)i:SetBackgroundColor(col.blue)i:SetHoverColor(col.blue_dark)i:DockMargin(0,0,2,0)i:DockPadding(0,0,0,0)i:Dock(RIGHT)i:SetWide(25)i:LeftClick(function()srp.ui.Create('srp_cards',function(j)j:Setup(h.themeid,h.receiver_name,h.body,h.sender_name,d)end)self:Remove()end)end)e:AddPanel('srp_label',function(f)f:SetText(h.created)f:SetContentAlignment(6)f:Dock(FILL)f:SetTextColor(col.white)end)self.cards[h.id]=e;self.scroll:AddItem(e)end)end end;vgui.Register('srp_cardmail',a,'srp_window')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cards/ui/cardmodelview_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cards/ui/cards_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/characters/allegiance_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/characters/ui/characters_ui.lua:
DEFINE_BASECLASS'srp_window'local a={}local b='sound/galactic/ui/background.mp3'function a:Init()self.pages={}self.switching=LocalPlayer().character!=nil;self:SetTitle'SuperiorServers.co | Character Creation'self:SetPos(0,0)self:SetZPos(32767)self:SetSize(ScrW(),ScrH())self:DockPadding(0,30,0,0)self:DockMargin(0,0,0,0)self:SetPopupStayAtBack(true)self:SetDraggable(false)self:SetAlpha(0)self.close:LeftClick(function()if self.switching then self:Remove()else LocalPlayer():ConCommand("disconnect")end end)self:AddPage(srp.ui.Create('srp_characterselection'),true)self:AddPage(srp.ui.Create('srp_charactercreation'),false)if self.switching||table.Count(srp.character.me)>0 then self:Select(1)else self:Select(2)end;sound.PlayFile(b,'noplay noblock',function(c)if IsValid(c)then c:EnableLooping(true)c:SetVolume(.3)c:Play()self.bgsound=c end end)hook('OnCharactersReceived',self,function(d,e)d:Select(1)end)hook('OnCharacterReceived',self,function(d,e)d:Select(1)end)end;function a:Populate(f)self:MakePopup()self:SetVisible(true)self:AlphaTo(255,1,0)self:MoveToFront()if IsValid(f)then self.LoadingPanel=f end end;function a:Select(g)if self.lastselected&&self.lastselected==g then return end;for h,i in pairs(self.pages)do if IsValid(i)&&i.Display then if h==g then i:Display(true)else i:Display(false)end end end;self.lastselected=g end;function a:AddPage(i,j)local g=table.insert(self.pages,i)i:SetParent(self)i:SetSize(ScrW(),ScrH()-30)return g end;function a:OnRemove()hook.Remove('OnCharacterReceived',self)hook.Remove('OnCharactersReceived',self)if self.bgsound&&IsValid(self.bgsound)then self.bgsound:Stop()self.bgsound=nil end;if IsValid(self.LoadingPanel)then if!LocalPlayer():IsTrained()then self.LoadingPanel:Remove()else self.LoadingPanel:SizeTo()end end end;function a:EventMode(k)self.event_mode=k;return self end;function a:Paint(l,m)derma.SkinHook('Paint','CharacterMenu',self,l,m)end;vgui.Register('srp_charactermenu',table.Copy(a),'srp_window')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/chat/chathandlers_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/construction/construction_cl.lua:
srp.construction=srp.construction||{}srp.construction.UI=srp.construction.UI;srp.construction.ControlUI=srp.construction.ControlUI;local a=false;function srp.construction.SetMode(b)if b then srp.ui.Create('srp_construction',function(c)srp.construction.ControlUI=c end)elseif IsValid(srp.construction.ControlUI)then srp.construction.ControlUI:Remove()end;a=b;hook.Run('OnConstructionModeChanged',b)end;function srp.construction.ToggleMode()srp.construction.SetMode(!a)end;function srp.construction.IsConstructing()return a end;local d=Vector(0,0,-1)local e=Vector(0,0,1)function srp.construction.GetPlacement(f,g)local h=LocalPlayer():GetEyeTraceNoCursor()h=util.TraceLine({start=h.HitPos,endpos=h.HitPos+(g.Roof&&e||d)*500,filter={f,LocalPlayer()}})local i=h.HitPos;i.z=i.z+(g.Roof&&-f:OBBMaxs().z||-f:OBBMins().z)local j=LocalPlayer():GetLocation()if!j||!j.min then return false,i end;if!i:WithinAABox(j.min,j.max)then return false,i end;if g.CheckBounds then local k,l=f:LocalToWorld(f:OBBMins()),f:LocalToWorld(f:OBBMaxs())if!k:WithinAABox(j.min,j.max)||!l:WithinAABox(j.min,j.max)then return false,i end end;if!g.Stackable then return h.HitWorld,i else return g:CanPlaceOnTop(h.Entity),i end end;hook('OnLocationChanged','srp.construction.LocationChanged',function(m,n,o)if m!=LocalPlayer()then return end;local p=m:GetProperty()if!p then return end;local q=n.PropertyConstruction&&p.Name==n.name;if q&&!IsValid(srp.construction.UI)then srp.ui.Create('srp_constructionbtn',function(c)srp.construction.UI=c end)end;if!q then srp.construction.SetMode(false)if IsValid(srp.construction.UI)then srp.construction.UI:Remove()end end end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/construction/ui/constructionbtn_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/construction/ui/store_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cosmetics/cosmetics_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cosmetics/ui/cosmetic_displaycallingcard_ui.lua:
local a={}function a:SetupPreview()self:AddPanel('srp_cosmetic_callingcard',function(b)b:SetVisible(false)self.Display=b end)self.Controls:AddPanel('srp_panel_rounded',function(b)b:Dock(BOTTOM)b:DockMargin(4,4,24,4)b:DockPadding(2,2,2,2)b:SetBackgroundColor(col.midnight_light)b:SetTall(60)b:AddPanel('srp_label',function(b)b:Dock(TOP)b:SetText'Set Tagline'b:SetTall(20)end)b:AddPanel('srp_textinput_rounded',function(c)c:Dock(FILL)c:AddPanel('srp_button_rounded',function(d)d:SetText'send'd:Dock(RIGHT)d:SetWide(36)d:DockMargin(5,0,0,0)d:SetFont'SSRPForkAwesome'd:SetText(0xf0c7,true)d:SetBackgroundColor(col.green_dark)d:SetHoverColor(col.green)d:LeftClick(function(e)e:SetDisabled(true,1)srp.callingcard.SetTag(self.Tag:GetValue())end)end)self.Tag=c end)end)hook('OnCallingCardUpdated',self,self.OnCallingCardUpdated)hook('OnCallingCardCleared',self,self.OnCallingCardCleared)srp.callingcard.RequestCallingCard()end;function a:OnRemove()hook.Remove('OnCallingCardUpdated',self)hook.Remove('OnCallingCardCleared',self)end;function a:OnCallingCardUpdated(f)self.Tag:SetText(f||'')self.Display.Tag=f||''end;function a:OnCallingCardCleared()self.Tag:SetText''self.Display.Tag=''end;function a:DisplayPreviewEntity()end;function a:AddCosmetic(g)if IsValid(self.Display)then self.Display:SetVisible(true)self.Display:Populate(LocalPlayer(),g,'Test Description',0.75)self.Display:CenterVertical()end end;function a:RemoveCosmetic(g)if IsValid(self.Display)then self.Display:Clear()self.Display:SetVisible(false)end end;vgui.Register('srp_cosmetic_displaycallingcard',a,'srp_cosmetic_displayitem')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cosmetics/ui/cosmetic_displaymodel_ui.lua:
local a={}local b=Color(255,25,222,255)function a:SetupPreview()self:AddPanel('srp_modelpanel',function(c)c:Dock(FILL)c:MoveToBack()c:SetCanControl(true)self.PreviewPanel=c end)self.Controls:AddPanel('srp_panel_rounded',function(c)c:Dock(BOTTOM)c:DockMargin(4,4,24,4)c:DockPadding(2,30,2,2)c:SetBackgroundColor(col.midnight_light)c:SetVisible(false)self.Bodygroups=c end)self:DisplayPreviewEntity()end;function a:DisplayPreviewEntity()if!IsValid(self.PreviewEntity)then self.PreviewEntity=self.PreviewPanel:AddModel(LocalPlayer():GetModel())self.PreviewEntity.cents={}end;self.PreviewEntity:SetAngles(Angle(0,-90,0))self.PreviewEntity:SetSkin(LocalPlayer():GetSkin())for d=0,self.PreviewEntity:GetNumBodyGroups()-1 do self.PreviewEntity:SetBodygroup(d,LocalPlayer():GetBodygroup(d)||0)end;self.PreviewPanel:TryCenter(self.PreviewEntity,nil,.65)self.PreviewPanel:SetCamPos(self.PreviewPanel:GetCamPos()+Vector(0,-20,-20))self.PreviewPanel:SetFOV(60)self:PopulateBodyGroups()end;function a:PopulateBodyGroups()self.Bodygroups:Clear()local e=0;local f=LocalPlayer():GetBodyGroups()local g=LocalPlayer():SkinCount()local h=LocalPlayer():GetSkin()local i=cosmetics.GetMetaPreset(self.Class)||{}i.groups=i.groups||{}h=i.skinid||h;if g>1||#f>1 then self.Bodygroups:AddPanel('srp_button_tagtext_rounded',function(c)c:SetSize(200,28)c:SetPos(262,1)c:SetTagWidth(30)c:SetTagFont('SSRPForkAwesome')c:SetTagText(0xf004,true)c:SetTagBackground(col.transparent)c:SetBackgroundColor(col.midnight_dark)c:SetHoverColor(col.midnight)c:SetBorderColor(col.transparent)c:SetTagTextColor(b)c:SetText'Save bodygroup to preset'c:LeftClick(function()self:SaveBodyGroups()end)end)end;if g>1 then self.PreviewEntity:SetSkin(h)self.Bodygroups:AddPanel('srp_panel',function(c)c:Dock(TOP)c:SetTall(30)c:DockMargin(0,0,0,0)c:SetBackgroundColor(col.midnight)c:AddPanel('srp_select',function(c)c:Dock(FILL)c:SetText('Skin')c.title:SetWide(40)c:AddRange(1,g)c:Select(h+1)c:OnSelected(function(j,k)net.Start'cosmetics.SetSkin'net.WriteUInt(k-1,5)net.SendToServer()self.PreviewEntity:SetSkin(k-1)end)end)end)e=e+1 end;for l,m in pairs(f)do if m.num<=1 then continue end;local k=m.id;local n=m.name:Capitalize():Replace('_',' '):gsub("([A-Z])"," %1"):Trim()local o=m.submodels;local h=i.groups[k]||LocalPlayer():GetBodygroup(k)self.PreviewEntity:SetBodygroup(m.id,h)self.Bodygroups:AddPanel('srp_panel',function(c)c:Dock(TOP)c:SetTall(30)c:DockMargin(0,0,0,2)c:SetBackgroundColor(col.midnight)c.bodygroup=k;c:AddPanel('srp_select',function(c)c.data=m;c:SetText(n)c:DockMargin(0,0,0,0)c:Dock(FILL)c:AddRange(0,m.num-1,m)c:Select(h+1)c:OnSelected(function(j,k)net.Start'cosmetics.SetBodyGroup'net.WriteUInt(j.data.id,5)net.WriteUInt(k-1,5)net.SendToServer()self.PreviewEntity:SetBodygroup(j.data.id,k-1)end)end)end)e=e+1 end;self.Bodygroups:SetTall(36+e*32)self.Bodygroups:SetVisible(e>0)end;function a:SaveBodyGroups()local p=self.PreviewEntity:GetSkin()local f=self.PreviewEntity:GetBodyGroups()local q={}for d,m in pairs(f)do q[m.id]=LocalPlayer():GetBodygroup(m.id)end;cosmetics.AddMetaToPreset('player',{skinid=p,groups=q})srp.notif.Success(3,'Saved bodygroups!')end;function a:AddCosmetic(r)if r:GetModel()then self.PreviewEntity:SetModel(r:GetModel())self:PopulateBodyGroups()end end;function a:RemoveCosmetic(r)self.PreviewEntity:SetModel(LocalPlayer():GetModel())end;vgui.Register('srp_cosmetic_displaymodels',a,'srp_cosmetic_displayitem')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cosmetics/ui/cosmetic_displaysaber_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cosmetics/ui/cosmetic_displayvehicle_ui.lua:
local a={}local b=Vector(0,0,0)local c=Angle(35,0,0)function a:SetupPreview()self:AddPanel('srp_modelpanel',function(d)d:Dock(FILL)d:MoveToBack()d:SetCanControl(true)self.PreviewPanel=d end)self:DisplayPreviewEntity()end;function a:DisplayPreviewEntity()local e=scripted_ents.Get(self.Class)if!e then return end;local f=e.Model||e.WorldModel||e.MDL;if!f then return end;local g=e.UIPosition||b;local h=e.UIAngle||c;if!IsValid(self.PreviewEntity)then self.PreviewEntity=self.PreviewPanel:AddModel(f,b,h)self.PreviewEntity.cents={}end;self:RemoveCosmetic()self.PreviewPanel:SetCamPos(Vector(0,-100,0))self.PreviewPanel:SetFOV(75)self.PreviewEntity:SetPos(g)self.PreviewEntity:SetAngles(h)end;function a:AddCosmetic(i)local j=i:GetMaterial()if j then self.PreviewEntity:SetMaterial(j)end;self.PreviewEntity:SetSubMaterial()self.PreviewEntity:SetBodygroup(1,1)local k=i:GetSubMaterials()if k then self.submaterials=k;for l,j in pairs(k)do self.PreviewEntity:SetSubMaterial(l-1,j)end end;local m=i:GetSkin()if m then self.PreviewEntity:SetSkin(m)end end;function a:RemoveCosmetic(i)self.PreviewEntity:SetSubMaterial()self.PreviewEntity:SetMaterial''self.PreviewEntity:SetSkin(0)end;vgui.Register('srp_cosmetic_displayvehicle',a,'srp_cosmetic_displayitem')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cosmetics/ui/cosmetic_slotpreview_ui.lua:
local a={}local b=Color(255,25,222,255)local c=Color(120,120,120,255)function a:Init()self:SetFont'ui_label.r'self.lbl:Dock(BOTTOM)self.lbl:DockMargin(0,0,0,5)hook('OnCosmeticPresetItemAdded',self,self.OnPresetChanged)hook('OnCosmeticPresetItemRemoved',self,self.OnPresetChanged)hook('OnCosmeticPresetCleared',self,self.OnPresetChanged)hook('OnCosmeticEquipped',self,self.OnEquipmentChanged)hook('OnCosmeticRemoved',self,self.OnEquipmentChanged)hook('OnCosmeticPresetLoaded',self,function(d,e)d:OnPresetChanged()d:OnEquipmentChanged()end)end;function a:OnRemove()hook.Remove('OnCosmeticPresetItemAdded',self)hook.Remove('OnCosmeticPresetItemRemoved',self)hook.Remove('OnCosmeticPresetCleared',self)hook.Remove('OnCosmeticEquipped',self)hook.Remove('OnCosmeticRemoved',self)hook.Remove('OnCosmeticPresetLoaded',self)end;function a:Populate(f,g)local h=istable(f.selector.slot)&&f.selector.slot||{{name=f.name,id=f.selector.slot}}self.Control=f;self.Global=f.global;self.Class=f.selector.class||g;self.ItemType=f.selector.type;self.Slots=h;self:SetText(f.name)self:SetBackgroundColor(f.background||col.transparent)self:SetTextColor(f.color||col.white)self:OnPresetChanged()self:OnEquipmentChanged()end;function a:GetEquippedInSlot()for i,j in ipairs(self.Slots)do local k=self.Class&&self.Class!='player'&&cosmetics.GetClassTable(self.Class,self.ItemType,j.id)||cosmetics.GetSlotTable(self.ItemType,j.id)if!k||table.Count(k)==0 then continue end;for i,l in pairs(k)do if l:IsEquipped()then return l end end end end;function a:GetEquippedInPreset(m)local l=cosmetics.HasPreset(self.Class,m)self.PresetSelected=l;return l end;function a:DisplayVideo(n)local o=cosmetics.VideoEndPoint..n..'.webm'local p=cosmetics.VideoPreview:Replace('URL',o)p=p:Replace('controls','')local q,r=600,150;local s=r/q;q=80;self:AddPanel('DHTML',function(t)t:SetSize(q,r*s)t:SetPos(2,25)t:SetMouseInputEnabled(false)t:SetKeyBoardInputEnabled(false)t:SetHTML(p)t:MoveToBack()t:SetVisible(false)self.HTML=t;self.Icon=t end)timer.Simple(1,function()if IsValid(self)&&IsValid(self.HTML)then self.HTML:SetVisible(true)end end)end;function a:UpdatePreview()local u=self:GetEquippedInPreset(self.Slots[1].id)local v=self:GetEquippedInSlot()local w=u||v;if IsValid(self.Icon)then self.Icon:Remove()end;if w then self:SetText(w.prettyname)else self:SetText(self.Control.name)return end;if w:IsVideo()then self:DisplayVideo(w.prettyname:lower():Replace(' ','_'))elseif!w:DrawModel()||!w:GetModel()then self:AddPanel('DImage',function(x)x:SetSize(48,48)x:SetMouseInputEnabled(false)x:SetMaterial(w.icon)self.Icon=x end)elseif w:DrawModelMdl()then local y=w:GetDrawModelOffset()||20;self:DockPadding(2,2,2,2)self:AddPanel('srp_modelpanel',function(z)z:SetSize(48,48)z:SetMouseInputEnabled(false)z:SetFOV(60)local A=z:AddModel(w:GetModel(),Vector(),Angle())z:SetCamPos(A:GetBonePosition(0)+A:GetForward()*y)z:SetLookAt(A:GetBonePosition(0))self.Icon=z end)else self:AddPanel('SpawnIcon',function(z)z:SetMouseInputEnabled(false)z:SetSize(48,48)z:SetModel(w:GetModel())self.Icon=z end)end;return v end;function a:OnPresetChanged()self:UpdatePreview()end;function a:OnEquipmentChanged()if self:UpdatePreview()then self:SetBorderColor(col.blue_light)else self:SetBorderColor(col.transparent)end end;function a:PerformLayout(B,C)if IsValid(self.Icon)then self.Icon:CenterHorizontal()self.Icon:CenterVertical(.42)end end;local D=17;function a:PaintOver(B,C)DisableClipping(true)if self.Global then draw.RoundedBox(12,(B-D)/2,-D/2+2,D,D,col.midnight)draw.SimpleText(cosmetics.global,'SSRPForkAwesome',B/2,2,col.yellow,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)end;draw.SimpleText(cosmetics.heart,'SSRPForkAwesome',B/2,C-1,self.PresetSelected&&b||c,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)DisableClipping(false)end;vgui.Register('srp_cosmetic_slotpreview',a,'srp_button_rounded')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/cosmetics/ui/cosmeticweapon_ui.lua:
local a={}local b=Vector(0,0,0)local c=Angle(0,60,0)local d={LinkedClasses={'charm'},Controls={{name='Skins',pos={x=.5,y=.85,offsetx=45},size={w=85,h=85},color=col.white,background=col.midnight_light,selector={type=cosmetics.WEAPON,slot=cosmetics.SLOT.WEAPON.SKIN}},{name='Charms',pos={x=.5,y=.85,offsetx=-45},size={w=85,h=85},global=true,color=col.white,background=col.midnight_light,selector={noclass=true,type=cosmetics.WEAPON,slot=cosmetics.SLOT.WEAPON.CHARM}}}}function a:Init()self:SetupClasses()self:SetControls(d,'srp_cosmetic_displayweapon',false)self:AddPanel('srp_modelpanel',function(e)e:Dock(FILL)e:MoveToBack()e:SetCanControl(true)self.PreviewPanel=e end)self:AddPanel('srp_button_tagtext_rounded',function(e)e:SetSize(200,28)e:SetPos(5,45)e:SetTagWidth(30)e:SetTagFont('SSRPForkAwesome')e:SetTagText(0xf1fc,true)e:SetTagBackground(col.transparent)e:SetBackgroundColor(col.midnight_light)e:SetHoverColor(col.midnight)e:SetBorderColor(col.transparent)e:SetTagTextColor(col.white)e:SetText'Colour'e:LeftClick(function(f)if IsValid(f.Colourizer)then f.Colourizer:FadeOut()return end;self:AddPanel('srp_cosmetic_colourize',function(e)e:Populate(f,350,400,'cosmetics.ChangeWeaponColor','GetWeaponColor')f.Colourizer=e end)end)end)end;function a:OnControlSelected()if IsValid(self.PreviewPanel)then self.PreviewPanel:SetVisible(false)end end;function a:OnControlDeselected()if IsValid(self.PreviewPanel)then self.PreviewPanel:SetVisible(true)end end;function a:PopulateClassList()local g=table.GetKeys(cosmetics.GetClassTables())local d={}for g,h in pairs(cosmetics.GetClassTables())do local i=weapons.Get(g)if!i then continue end;local j=i.PrintName||i.PrettyName||i.Name||g;table.insert(d,{name=j,class=g})end;for k,l in SortedPairsByMemberValue(d,'name')do self.ClassSelector:AddOption(l.name,l,nil,false)end end;function a:OnClassChanged(g)self:DisplayPreviewEntity(g)self:OnDisplayModeChanged()end;function a:DisplayPreviewEntity(g)local m=weapons.Get(g)if!m then return end;local n=m.Model||m.WorldModel||m.MDL;if!n then return end;if IsValid(self.PreviewEntity)then self.PreviewEntity:SetModel(n)else self.PreviewEntity=self.PreviewPanel:AddModel(n)end;self.PreviewPanel:SetFOV(75)if!m.UIPosition then self.PreviewPanel:TryCenter(self.PreviewEntity)else self.PreviewEntity:SetPos(m.UIPosition)self.PreviewEntity:SetAngles(m.UIAngle)self.PreviewPanel:SetCamPos(Vector(0,-100,0))self.PreviewPanel:SetLookAt(Vector(0,0,0))end end;function a:AddCosmetic(o)if o:GetSlot()==cosmetics.SLOT.WEAPON.CHARM then self.Charm=cosmetics.GetManager(cosmetics.APPAREL).OnEquip(o,self.PreviewEntity)self.PreviewPanel:AddEntity(self.Charm)return end;local p=o:GetEquipped(self.PreviewEntity)if p then p:RemovePlayer(self.PreviewEntity)end;local q=o:GetSkin()if q then self.PreviewEntity:SetSkin(q)end;local r=o:GetMaterial()if r then self.PreviewEntity:SetSubMaterial(0,r:GetName())else local s=o:GetSubMaterials()if s then for t,r in pairs(s)do self.PreviewEntity:SetSubMaterial(t,r)end end end;o:AddPlayer(self.PreviewEntity)end;function a:RemoveCosmetic(o)if!IsValid(self.PreviewEntity)then return end;self.PreviewEntity:SetSubMaterial()self.PreviewEntity:SetMaterial''self.PreviewEntity:SetSkin(0)if o&&o:GetSlot()==cosmetics.SLOT.WEAPON.CHARM then cosmetics.GetManager(cosmetics.APPAREL).OnRemoved(o,self.PreviewEntity)return end;if!o&&IsValid(self.Charm)then self.Charm:Remove()end end;function a:ClearItems()self:RemoveCosmetic()end;vgui.Register('srp_cosmeticweapons',a,'srp_cosmeticpanel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/credits/crowdfunders_cl.lua:
Groupon={}hook('OnCrowdfunderChanged','srp.crowdfunder.SyncGroupon',function(a)Groupon=a end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/credits/crowdfunders_sh.lua:
srp.crowdfunder=srp.crowdfunder||{}nw.Register'srp.Groupon':Write(function(a)if!a.Active then net.WriteBool(false)net.WriteFloat(a.CreditBoost||0)net.WriteUInt(a.CreditBoostDuration,32)return end;net.WriteBool(true)net.WriteString(a.RewardName||'')net.WriteUInt(a.Goal,16)net.WriteUInt(a.MaxPops,16)net.WriteUInt(a.PopCount,16)net.WriteFloat(a.Progress)net.WriteFloat(a.CreditBoost||0)net.WriteUInt(a.CreditBoostDuration,32)end):Read(function()local b=net.ReadBool()if!b then return{Active=b,CreditBoost=net.ReadFloat(),CreditBoostDuration=net.ReadUInt(32)}else return{Active=b,RewardName=net.ReadString(),Goal=net.ReadUInt(16),MaxPops=net.ReadUInt(16),PopCount=net.ReadUInt(16),Progress=net.ReadFloat(),CreditBoost=net.ReadFloat(),CreditBoostDuration=net.ReadUInt(32)}end end):SetGlobal():SetHook'OnCrowdfunderChanged'timer.Simple(4,function()local c=nw.GetGlobal'srp.Groupon'if c then hook.Run('OnCrowdfunderChanged',c)end end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/credits/ui/menu_ui.lua:
local a=Color(54,57,62)local b=col.midnight_dark:Copy()local c=Material('materials/galactic/ui/menu/usd.png','smooth noclamp nomips')local d={}local e;function d:Init()e=self;self.IsLoaded=false;self:DockPadding(0,0,0,0)self:AddPanel('srp_panel',function(f)f:Dock(TOP)f:DockPadding(0,0,0,0)f:SetTall(30)f:SetBackgroundColor(col.midnight_light)f:AddPanel('srp_button',function(f)f:SetSize(158,40)f:SetBackgroundColor(b)f:DockPadding(4,2,4,2)f:SetText''f:DockMargin(2,2,2,2)f:Dock(RIGHT)f:LeftClick(function(g)ba.ui.OpenAuthLink('/'..info.WebID..'/credits/')end)f.Paint=function(g,h,i)if self.Sale&&math.ceil(CurTime())%2==0 then draw.RoundedBox(6,0,0,h,i,col.grey_dark)draw.RoundedBox(6,1,1,h-2,i-2,g.m_bgColor)else draw.RoundedBox(6,0,0,h,i,col.gold)draw.RoundedBox(6,1,1,h-2,i-2,g.m_bgColor)end end;f:AddPanel('srp_button_tag',function(j)j:Dock(LEFT)j:SetBackgroundColor(col.transparent)j:SetBorderColor(col.transparent)j:SetHoverColor(col.transparent)j:SetTextColor(col.white)j:DockMargin(0,0,0,0)j:SetText'0'j:SetFont'ui_header.r'j:SetContentAlignment(5)j:SetWide(150)j:SetMaterial(c)j:SetMouseInputEnabled(false)self.Credits=j end)f:AddPanel('srp_button_tag',function(j)j:Dock(FILL)j:SetBackgroundColor(col.transparent)j:SetBorderColor(col.transparent)j:SetHoverColor(col.transparent)j:SetTextColor(col.white)j:DockMargin(0,0,0,0)j:SetText'0'j:SetFont'ui_header.r'j:SetContentAlignment(5)j:SetWide(150)j:SetMaterial(c)j:SetMouseInputEnabled(false)j:DockMaterial(RIGHT)j:SetVisible(false)self.SaleInformation=j end)self.Information=f end)self.Navigation=f end)self:AddPanel('ui_scrollpanel',function(f)f:Dock(FILL)f:DockMargin(4,4,4,4)self.List=f end)self:AddPanel('srp_panel_rounded',function(f)f:SetSize(200,55)f:DockPadding(2,2,2,2)f:SetBackgroundColor(col.midnight)f:AddPanel('srp_panel_rounded',function(f)f:Dock(FILL)f:SetBackgroundColor(col.transparent)f:SetBackgroundColor(col.midnight_light)f:AddPanel('srp_label',function(k)k:Dock(TOP)k:SetText'Sale Tokens'k:SetContentAlignment(1)end)f:AddPanel('srp_label',function(k)k:Dock(BOTTOM)k:SetText'Apply a discount!'k:SetContentAlignment(7)end)end)f:AddPanel('srp_inventoryitem',function(f)f:Dock(RIGHT)f:SetText'Token'f:SetFont'ui.10'f:SetTextColor(col.white_dark)f:OnSelected(function(f,l,m,n)local o=0;if l then o=l:HasExpired(m.meta)&&0.05||l.sale;f:SetText(o*100 ..'%')end;self:OnTokenSelected(l,m,o)self.UpgradePanel:SetBackgroundColor(l&&col.green||col.midnight)end)f:OnFilterItem(function(f,l)if l&&l.base=='SALETOKEN'then return true end end)self.InventorySelector=f end)self.UpgradePanel=f end)self.Items={}self.SelectedTokenSale=0;hook('OnStoreItemsSynced',self,self.Refresh)hook('OnStoreItemPurchased',self,self.RefreshItem)hook('OnCreditsChanged',self,self.OnCreditsChanged)end;function d:OnTokenSelected(l,m,o)self.SelectedToken=l;self.SelectedTokenSale=1-(o||0)for p,f in pairs(self.Items)do if!l then f.TokenCell=nil;f.SalePrice=nil else f.TokenCell=m.index;f.SalePrice=math.ceil(f.Price*self.SelectedTokenSale)end;f:UpdateStatus()end end;function d:OnSaleInfo(q,r)self.Sale=q;if r then local s=r.CreditConversion||100;local t=(-1+s/100)*100;self.SaleInformation:SetText('+'..t..'% SALE')end;self.SaleInformation:SetVisible(q)self.Information:SetWide(q&&316||158)end;function d:OnRemove()hook.Remove('OnCreditsChanged',self)hook.Remove('OnStoreItemsSynced',self)hook.Remove('OnStoreItemPurchased',self)end;function d:OnCreditsChanged(u,v,w,x)self.Credits:SetText(string.Comma(v||0))if!x&&w&&v>w then local y={}for p,f in pairs(self.Items)do if IsValid(f)&&!f.CanPurchase then table.insert(y,f.ItemID)end end;self:RequestBulkRefreush(y)end end;function d:OnTabShow(f,z)if!self.NextShow||self.NextShow<CurTime()then net.Ping'srp.shop.Menu'self:OnCreditsChanged(nil,LocalPlayer():GetCredits(),nil,true)self.NextShow=CurTime()+5 end end;function d:Refresh(A)if A then self:AddUpgrades(A)elseif self.Upgrades then self:AddUpgrades(self.Upgrades)end;srp.shop.GetSaleInfo(function(q,r)if IsValid(self)then self:OnSaleInfo(q,r)end end)self.IsLoaded=true end;function d:RefreshItem(r)local f=self.Items[r.Upgrade.UID]self:OnTokenSelected(nil)self.InventorySelector:Clear()if IsValid(f)then f.ItemID=r.ID;f.Price=r.Price;f.CanBuy=r.CanBuy;f.CanBuyReason=r.CanBuyReason;f.HasPurchased=r.HasPurchased;f.Cooldown=r.Cooldown;f.CooldownTime=r.Upgrade:GetCooldown()f.CooldownEnd=r.Cooldown&&(CurTime()+r.Upgrade:GetCooldown()||0)||nil;f:UpdateStatus()if f.Cooldown then timer.Create('srp.shop.Cooldown_'..r.ID,f.CooldownTime+1,1,function()if IsValid(self)then self:RequestRefresh(r.ID)end end)end end end;function d:RequestRefresh(B)net.Start'srp.shop.SyncSingle'net.WriteUInt(B,9)net.SendToServer()end;function d:RequestBulkRefreush(y)net.Start'srp.shop.BulkSync'net.WriteUInt(#y,9)for p,B in ipairs(y)do net.WriteUInt(B,9)end;net.SendToServer()end;function d:AddUpgrades(A)local C=self.List.Offset||0;self.Items={}self.List:Reset()self.Upgrades=A;local D=srp.shop.GetCategoryOrder()local E={}for F,G in ipairs(D)do E[G]={}end;local H=table.Copy(E)for F,G in ipairs(A)do if!G.Upgrade then continue end;local I=G.Upgrade:GetCat()if!srp.shop.GetCategory(I)then continue end;if!E[I]then continue end;table.insert(E[I],G)end;for B,I in pairs(D)do local A=E[I]||{}if#A>0 then self:DisplayCategory(I,srp.shop.GetCategory(I),A)end end;self.List:ScrollTo(C)end;function d:AddNavButton(J,K)if self.Navigation[J]then return end;self.Navigation:AddPanel('srp_button_rounded',function(j)j.cat=J;j:Dock(LEFT)j:SetText(J)j:DockMargin(1,2,1,2)j:SetWide(70)j:SetBackgroundColor(col.midnight)j:SetHoverColor(col.midnight)j:SetSelectedBackgroundColor(col.black)j:LeftClick(function(g)if g:IsSelected()then self:FilterSelection('All')else self:FilterSelection(g)end end)if K then j:Select(true)end;self.Navigation[J]=j end)end;function d:FilterSelection(j)local J=isstring(j)&&j||j.cat;local L=J=='All'for p,j in ipairs(self.Navigation:GetChildren())do j:Select(j.cat==J)end;for p,M in pairs(self.List:GetCanvas():GetChildren())do local N=L||M.cat==J;M:SetVisible(N)if!N then M:SetTall(0)else M:SetTall(M.TallTo||50)end end;self.List:ScrollTo(0)self.List:PerformLayout(true)end;function d:DisplayCategory(J,O,A)self:AddNavButton(J)srp.ui.Create('srp_panel',function(f)f:DockPadding(0,0,0,0)f:DockMargin(0,0,0,0)f:SetTall(38)f.cat=J;f.Paint=function()end;if!O.HideName then f:AddPanel('srp_label',function(k)k:SetTall(35)k:Dock(TOP)k:SetFont('ui_header.l')k:SetContentAlignment(4)k:SetTextColor(col.white)k:SetText(J)k:DockMargin(5,15,0,0)f.Name=k end)end;if O.DisplayHeader then O:DisplayHeader(f)end;srp.ui.Create('srp_grid',function(P)P:SetParent(f)P:Dock(FILL)P:SetAutoHeight(true)P:SetSpacing(4,4)P.OnComplete=function(g,i)f:SetTall(i+65)f.TallTo=i+65 end;for F,G in ipairs(A)do ui.Create('srp_creditshop_item',function(g)g.ItemID=G.ID;g.CanBuy=G.CanBuy;g.CanBuyReason=G.CanBuyReason;g.HasPurchased=G.HasPurchased;g.Price=G.Price;g:SetUpgrade(G.Upgrade,self)P:AddItem(g)if O.FormatButton then O.FormatButton(g)end;if self.SelectedID==G.Upgrade.ID||self.SelectedUID==G.Upgrade.UID then g:OnMousePressed(MOUSE_LEFT)end;self.Items[G.Upgrade.UID]=g end)end end)self.List:AddItem(f)end)end;function d:Paint(h,i)draw.Box(0,0,h,i,col.midnight)end;function d:PerformLayout(h,i)if IsValid(self.UpgradePanel)then self.UpgradePanel:SetPos(h-380,0)end end;function d:PaintOver(h,i)if!self.IsLoaded then local Q=SysTime()*5;draw.NoTexture()surface.SetDrawColor(255,255,255)surface.DrawArc(h*0.5,i*0.5,41,46,Q*80,Q*80+180,20)end end;vgui.Register('srp_creditshop_panel',d,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/defcon/defcon_cl.lua:
srp.defcon=srp.defcon||{}srp.defcon.panel=srp.defcon.panel;srp.defcon.status=6;srp.defcon.status_reason=''local a,b=335,48;function srp.defcon.Open(c,d)if cvar.GetValue('srp_hud')!=true then return end;if IsValid(srp.defcon.panel)then srp.defcon.panel:SetDefcon(c,d)return end;srp.ui.Create('srp_defcon',function(e)e:SetSize(a,b)e:SetPos(-a-2,45)e:MoveTo(2,45,.5,0)e:SetDefcon(c,d)srp.defcon.panel=e end)end;net('srp.defcon.status',function()local c=net.ReadShort()local d=net.ReadString()d=d!=''&&d||nil;srp.defcon.status=c;srp.defcon.status_reason=d;srp.defcon.Open(c,d)system.FlashWindow()end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/defcon/defcon_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/eventrewards/ui/eventreward_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/firingrange/firingrange_sh.lua:
srp.firingrange=srp.firingrange||{}local a={}local b={}local c={}c.__index=c;function c:Init()self.Name='Unknown'self.Description=''self.Entities={}self.Settings={}self.DestroyedEntities=0;self.MaxEntities=0 end;function c:SetName(d)self.Name=d;return self end;function c:SetDescription(e)self.Description=e;return self end;function c:SetClass(f)self.Class=f;return self end;function c:AddSetting(g,h,i,j)table.insert(self.Settings,{id=g,mode=h,value=i,meta=j||{}})return self end;function c:SetSetting(g,k)if!self.Settings[g]then return end;self.SettingValue=self.SettingValue||{}self.SettingValue[g]=k end;function c:GetSetting(g)return self.Settings[g]end;function c:GetSettingValue(g)if!self.SettingValue then return end;return self.SettingValue[g]end;function c:Start(l,m)self.Index=l:EntIndex()self.Entity=l;self.Player=m;self:LoadHooks()self:SpawnEntity()self:SetStatus('OnStarted',m)end;function c:Stop(n)self:RemoveHooks()self:Cleanup()self:SetStatus('OnStopped',n)end;function c:LoadHooks()end;function c:RemoveHooks()end;function c:Cleanup()for o,l in pairs(self.Entities)do if IsValid(l)then l:Remove()end end end;function c:FiringRangeEntityHit(l)table.RemoveByValue(self.Entities,l)self.DestroyedEntities=self.DestroyedEntities+1;if self:ShouldEnd()then self:Stop(1)else self:SpawnEntity()end end;function c:ShouldEnd()return self.DestroyedEntities>=self.MaxEntities end;function c:SpawnEntity()local l=ents.Create(self.Class)l:SetFiringRange(self.Entity,self.Player)l:Spawn()l.OnHit=self.FiringRangeEntityHit;table.insert(self.Entities,l)end;function c:SetStatus(g,...)if self.Entity[g]then self.Entity[g](self.Entity,...)end end;function srp.firingrange.RegisterMode(g)local p={id=g}setmetatable(p,c)a[g]=p;p.internal=table.insert(b,p)p:Init()return p end;function srp.firingrange.GetMode(g,q)return q&&b[g]||a[g]end;srp.firingrange.RegisterMode('orbs'):SetName('Orbs'):SetClass('rp_firingrange_orb'):AddSetting('Duration','number',30,{min=15,max=30})
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/gamemaster/triggerdefinitions_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/gamemaster/bossbars/bossbar_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/gamemaster/domination/domination_cl.lua:
srp.domination=srp.domination||{}srp.domination.Teams=srp.domination.Teams||{}srp.domination.TeamMap=srp.domination.TeamMap||{}local a=Vector(0,0,200)local b=col.white:Copy()local c=Color(100,100,100,200)local d=Color(200,200,200,200)local e=Color(12,12,12,200)local f=Sound'galactic/capturepoints/ticketclick.wav'local g=32;local h=32;function srp.domination.GetTeam(i)if isstring(i)then return srp.domination.Teams[i]else local j=srp.domination.TeamMap[i.internal]return j&&srp.domination.Teams[j]end end;function srp.domination.AddZone(k)if!srp.domination.panel then srp.domination.panel=srp.ui.Create('srp_dominationzones')end;srp.domination.panel:AddItem(k)end;function srp.domination.RemoveZone(k)if IsValid(srp.domination.panel)then srp.domination.panel:RemoveItem(k)end end;function srp.domination.DisplayTeam(j)if!srp.domination.teams then srp.domination.teams=srp.ui.Create('srp_dominationteams')end;srp.domination.teams:AddTeam(j)end;function srp.domination.UpdateTeam(j,l)if srp.domination.teams then srp.domination.teams:UpdateTeam(j,l)end end;function srp.domination.TeamLoss(j)if!srp.domination.teams then srp.domination.teams=srp.ui.Create('srp_dominationteams')end;srp.domination.teams:TeamLoss(j)end;function srp.domination.RemoveTeam(j)if IsValid(srp.domination.teams)then srp.domination.teams:RemoveTeam(j)end end;net('srp.domination.SetTeam',function()local j=net.ReadString()local i=net.ReadGroup()srp.domination.Teams[j]=srp.domination.Teams[j]||{tickets=0,groups={},color=i.color}srp.domination.Teams[j].groups[i.internal]=true;srp.domination.TeamMap[i.internal]=true;srp.domination.DisplayTeam(j)end)net('srp.domination.RemoveTeam',function()local j=net.ReadString()if srp.domination.Teams[j]then for j,m in pairs(srp.domination.Teams[j].groups)do srp.domination.TeamMap[j]=nil end;srp.domination.Teams[j]=nil;srp.domination.RemoveTeam(j)end end)net('srp.domination.RemoveFromTeam',function()local j=net.ReadString()local i=net.ReadGroup()if srp.domination.Teams[j]then srp.domination.TeamMap[i.internal]=nil end end)net('srp.domination.SetTickets',function()local n=net.ReadString()local l=net.ReadUInt(12)if l<50 then chat.PlaySound()end;srp.domination.UpdateTeam(n,l)end)net('srp.domination.SyncTickets',function()for o=1,net.ReadUInt(8)do local j=net.ReadString()local l=net.ReadUInt(12)local p=net.ReadUInt(6)local q={}local r=col.white;for s=1,p do local i=net.ReadGroup()q[i.internal]=true;srp.domination.TeamMap[i.internal]=true;if s==1 then r=i.color end end;srp.domination.Teams[j]={tickets=l,groups=q,color=r}srp.domination.DisplayTeam(j)end end)net('srp.domination.TeamLoss',function()srp.domination.TeamLoss(net.ReadString())end)hook('InitPostEntity',function()timer.Simple(2,function()local t=ents.FindByClass'rp_capturezone'table.sort(t,function(u,v)return u:EntIndex()>v:EntIndex()end)for m,k in ipairs(t)do srp.domination.AddZone(k)end end)end)hook('EntityRemoved',function(k)if k:GetClass()=='rp_capturezone'then srp.domination.RemoveZone(k)end end)hook('HUDPaint',function()local w=LocalPlayer():GetPos()for m,k in ipairs(ents.FindByClass'rp_capturezone')do local x=k:GetPos()+a;local y=x:Distance(w)local z=x:ToScreen()local A=1-math.Clamp(y/2000,.2,1)local B=55+200*A;d.a=B;e.a=B;c.a=B;b.a=B;local C=z.x-g/2;local D=z.y-h/2;surface.SetDrawColor(c)surface.DrawRect(C,D,g,h)local A=(k:GetPercentage()||0)/100;local E=k.CapturedTeamColor||d;E.a=B;local F=(h-4)*A;draw.Box(C+2,D+h-F-2,g-4,F+1,E)surface.SetDrawColor(e)surface.DrawOutlinedRect(C,D,g,h,2)local G=k:GetZoneLetter()||'A'surface.SetTextColor(b)if#G==1 then surface.SetFont'ui_starwars.s'local H,I=surface.GetTextSize(G)surface.SetTextPos(z.x-H/2+1,D+I/4)else surface.SetFont'ui_starwars.xs'local H,I=surface.GetTextSize(G)surface.SetTextPos(z.x-H/2+1,D+I/2+2)end;surface.DrawText(G)draw.DrawText(k:GetZoneName()||'','ui_starwars.s',z.x,D+40,b,TEXT_ALIGN_CENTER)end end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/gamemaster/ui/agenda_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/gamemaster/ui/fogcontroller_ui.lua:
local a={}function a:Init()self:SetBackgroundColor(col.midnight)self:DockPadding(10,10,10,10)self:AddPanel('ui_scrollpanel',function(b)b:Dock(FILL)b.Padding=4;local c=self:CreateHeader('Fog Controller','Edits existing fog controllers. Please disable after use!')c:SetTall(80)b:AddItem(c)srp.ui.Create('srp_checkbox',function(d)d:Dock(TOP)d:SetTall(40)d:SetOptions({name='Disabled',value=false},{name='Enabled',value=true})d:SetSpeed(6000)d:SetPosition(1,true)d:DockMargin(4,4,4,20)b:AddItem(d)self.enabled=d end)srp.ui.Create('srp_label',function(e)e:Dock(TOP)e:SetFont'ui_label.r'e:SetText'Select Controller'b:AddItem(e)end)srp.ui.Create('srp_dropdown',function(f)f:Dock(TOP)f:SetBackgroundColor(col.grey_dark)f:OnSelect(function(g,h,i)self.fog_id=i.id;self:PopulateSettings(i.id)end)b:AddItem(f)self.selection=f end)srp.ui.Create('srp_label',function(e)e:Dock(TOP)e:SetText'Start Distance'b:AddItem(e)end)srp.ui.Create('srp_numberinput_rounded',function(g)g:Dock(TOP)g:SetInputWidth(300)g:SetMinLength(0)g:SetMaxLength(10000)g:SetValue(400)g:SetBackgroundColor(col.midnight_dark)b:AddItem(g)self.startpoint=g end)srp.ui.Create('srp_label',function(e)e:Dock(TOP)e:SetText'End Distance'e:SetTextColor(col.white_dark)b:AddItem(e)end)srp.ui.Create('srp_numberinput_rounded',function(g)g:Dock(TOP)g:SetInputWidth(300)g:SetMinLength(0)g:SetMaxLength(10000)g:SetValue(1000)g:SetBackgroundColor(col.midnight_dark)b:AddItem(g)self.endpoint=g end)srp.ui.Create('srp_label',function(e)e:Dock(TOP)e:SetText'Max Density %'e:SetTextColor(col.white_dark)b:AddItem(e)end)srp.ui.Create('srp_numberinput_rounded',function(g)g:Dock(TOP)g:SetInputWidth(300)g:SetMinLength(0)g:SetMaxLength(100)g:SetValue(50)g:SetBackgroundColor(col.midnight_dark)b:AddItem(g)self.density=g end)srp.ui.Create('srp_label',function(e)e:Dock(TOP)e:SetText'FarZ'e:SetTextColor(col.white_dark)b:AddItem(e)end)srp.ui.Create('srp_numberinput_rounded',function(g)g:Dock(TOP)g:SetInputWidth(300)g:SetMinLength(0)g:SetMaxLength(10000)g:SetValue(5000)g:SetBackgroundColor(col.midnight_dark)b:AddItem(g)self.farz=g end)srp.ui.Create('srp_panel',function(j)j:Dock(TOP)j:SetTall(300)j:SetBackgroundColor(col.transparent)j:DockPadding(0,0,0,0)j:AddPanel('srp_label',function(e)e:Dock(TOP)e:SetText'Primary Colour'e:SetTextColor(col.white_dark)end)j:AddPanel('srp_panel',function(j)j:Dock(FILL)j:SetBackgroundColor(col.transparent)j:AddPanel('DColorMixer',function(g)g:Dock(LEFT)g:SetWide(300)g:SetPalette(true)g:SetAlphaBar(true)g:SetWangs(true)g:SetAlphaBar(false)self.color=g end)end)b:AddItem(j)end)srp.ui.Create('srp_panel',function(j)j:DockMargin(0,0,0,0)j:DockPadding(5,5,5,5)j:SetTall(50)j:SetBackgroundColor(col.transparent)j:Dock(TOP)j:AddPanel('srp_button_rounded',function(g)g:SetBackgroundColor(col.midnight_dark)g:SetHoverColor(col.midnight_light)g:Dock(RIGHT)g:SetText'Submit Settings'g:DockMargin(0,0,0,0)g:DockPadding(0,0,0,0)g:LeftClick(function()self:SendSettings()end)end)b:AddItem(j)end)end)net.Start'srp.fog.RequestControllers'net.SendToServer()hook('OnFogControllersFound',self,function(self,k)self:SetControllers(k)end)end;function a:OnRemove()hook.Remove('OnFogControllersFound',self)end;function a:PopulateSettings()end;function a:SendSettings()if!self.fog_id then srp.notif.Warning(3,'No fog controller selected!')return end;local l=self.enabled:GetPosition()==2;net.Start'srp.fog.Update'net.WriteString(self.fog_id)net.WriteBool(l)if l then net.WriteUInt(self.startpoint:GetValue()||0,14)net.WriteUInt(self.endpoint:GetValue()||1000,14)net.WriteUInt(self.density:GetValue()||50,7)net.WriteUInt(self.farz:GetValue()||1001,14)local m=self.color:GetVector()net.WriteUInt(255*m.x,8)net.WriteUInt(255*m.y,8)net.WriteUInt(255*m.z,8)end;net.SendToServer()end;function a:SetControllers(k)for n,o in pairs(k)do self.selection:AddOption(n,{id=n,name=o},{text=col.white,icon='icon16/error.png'},n=='fog_default')end end;vgui.Register('srp_fogcontroller',a,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/gamemaster/ui/gamemasterlist_ui.lua:
local a={}local b=Color(0,0,0,150)function a:Init()self:SetSize(600,500)self:MakePopup(true)self:SetTitle('Online Gamemasters')self:SetBackgroundColor(col.midnight)self:Center()self:AddPanel('ui_scrollpanel',function(c)c:Dock(FILL)self.scroll=c end)self:DisplayGamemasters()end;function a:DisplayGamemasters()local d={[1]={},[2]={},[3]={},[4]={},[5]={},[6]={}}for e,f in player.Iterator()do local g=f:GetGamemasterID()||0;g=g>0&&g||(f:IsSuperAdmin()||f:IsRoot())&&6||nil;if!g||g<1 then continue end;d[g]=d[g]||{}table.insert(d[g],f)end;local h=0;for i=#d,1,-1 do local j=d[i]if#j>0 then self:AddHeader(i)end;for e,f in ipairs(j)do h=h+1;self:AddGamemaster(f,i,h)end end;if h==0 then self:AddPanel('srp_label',function(k)k:SetText'No gamemasters are online.'k:SetFont'ui_label.l'k:SetTextColor(col.grey_dark)k:Dock(TOP)k:SetTall(50)k:DockMargin(4,4,4,4)k:SetContentAlignment(2)end)self:AddPanel('srp_label',function(k)k:SetText'Need help? Ask a member of staff using the @ command instead!'k:SetFont'ui_label.l'k:SetTextColor(col.grey_dark)k:Dock(TOP)k:SetTall(50)k:DockMargin(4,4,4,4)k:SetContentAlignment(8)end)end end;function a:AddHeader(l)local m=ba.gamemaster.GetName(l)local n=ba.gamemaster.GetColor(l)||b;srp.ui.Create('srp_panel',function(c)c:DockPadding(0,4,0,4)c:DockMargin(0,0,0,0)c:SetTall(38)c:SetParent(self.scroll:GetCanvas())c:Dock(TOP)c:AddPanel('srp_label',function(k)k:SetFont'SSRPForkAwesome'k:SetText(0xf105,true)k:Dock(LEFT)k:SetWide(25)k:DockMargin(0,0,0,0)k:DockPadding(4,0,4,0)k:SetContentAlignment(5)k.Paint=function(o,p,q)draw.Box(0,0,p,q,n)end end)c:AddPanel('srp_label',function(k)k:SetText(m)k:Dock(FILL)end)c.Paint=function(o,p,q)draw.Box(0,4,p,q-8,col.grey_dark)draw.Box(0,q-6,p,2,col.grey)end end)end;local r=Color(0,0,0,100)local s=Color(0,0,0,200)function a:AddGamemaster(f,l,t)srp.ui.Create('srp_panel',function(c)c:DockPadding(0,0,0,0)c:DockMargin(0,0,0,0)c:SetTall(30)c:SetParent(self.scroll:GetCanvas())c:Dock(TOP)c:AddPanel('srp_label',function(k)k:SetText(t)k:Dock(LEFT)k:SetWide(25)k:DockMargin(0,0,0,0)k:DockPadding(4,0,4,0)k:SetContentAlignment(5)k.Paint=function(o,p,q)draw.Box(0,0,p,q,b)end end)c:AddPanel('srp_label',function(k)k:SetText(f:Nick()..' ('..f:SteamID()..')')k:Dock(FILL)end)c:AddPanel('srp_button',function(u)u:SetFont'SSRPForkAwesome'u:SetText(0xf08e,true)u:SetTextColor(col.white)u:Dock(RIGHT)u:SetWide(30)u:DockMargin(0,0,0,0)u:SetBackgroundColor(col.transparent)u:SetHoverColor(col.transparent)u:SetBorderColor(col.transparent)u:LeftClick(function()gui.OpenURL('https://superiorservers.co/profile/'..f:SteamID64())end)end)c.Paint=function(o,p,q)draw.Box(0,0,p,q,r)draw.Box(0,q-2,p,2,s)end end)end;vgui.Register('srp_gamemasters',a,'srp_window')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/gamemaster/ui/tempitems_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/groups/groupcmd_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/groups/orgs/ui/orgmenu_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/groups/ui/groupagenda_ui.lua:
local a={}local b=1;local c=2;local d=Color(0,0,0,150)local e=Color(0,0,0,200)function a:Init()self:DockPadding(0,0,0,0)self:DockMargin(0,0,0,0)self:SetBackgroundColor(col.grey_dark)self:AddPanel('srp_panel',function(f)f:Dock(TOP)f:SetTall(30)f:DockPadding(0,0,0,0)f:DockMargin(0,0,0,0)f:SetBackgroundColor(col.transparent)f:AddPanel('srp_label',function(g)g:SetText'MISSING_NAME'g:SetFont'ui_button.l'g:Dock(FILL)g:DockMargin(4,0,4,0)self.name=g end)f:AddPanel('srp_button',function(h)h:SetFont'SSRPForkAwesome'h:SetText(0xf104,true)h:SetWide(35)h:Dock(LEFT)h:DockMargin(0,0,0,0)h:DockPadding(0,0,0,0)h:SetBackgroundColor(d)h:SetHoverColor(e)h:SetBorderColor(col.transparent)h:LeftClick(function(h)self.container:Remove()end)end)f:AddPanel('srp_button',function(h)h:SetText'View Private'h:SetWide(150)h:Dock(RIGHT)h:DockMargin(0,0,0,0)h:DockPadding(0,0,0,0)h:SetBackgroundColor(d)h:SetHoverColor(e)h:SetBorderColor(col.transparent)h:SetVisible(false)h:LeftClick(function(h)self:ShowPrivateAgenda()end)self.PrivateAgenda=h end)f:AddPanel('srp_button',function(h)h:SetText'View Public'h:SetWide(150)h:Dock(RIGHT)h:DockMargin(0,0,0,0)h:DockPadding(0,0,0,0)h:SetBackgroundColor(d)h:SetHoverColor(e)h:SetBorderColor(col.transparent)h:LeftClick(function(h)self:ShowPublicAgenda()end)self.PublicAgenda=h end)f:AddPanel('srp_button',function(h)h:SetText'Edit Menu'h:SetWide(150)h:Dock(RIGHT)h:DockMargin(0,0,0,0)h:DockPadding(0,0,0,0)h:SetBackgroundColor(d)h:SetHoverColor(e)h:SetBorderColor(col.transparent)h:SetVisible(false)h:LeftClick(function(h)self:ShowEditMenu()end)self.ChangeAgenda=h end)self.controller=f end)self:AddPanel('srp_markdown',function(f)f:Dock(FILL)self.Markdown=f end)self:AddPanel('srp_panel',function(f)f:Dock(BOTTOM)f:SetVisible(false)f:SetTall(0)f:SetBackgroundColor(col.grey)f:SetBorderColor(col.transparent)f:DockPadding(2,2,2,2)f:AddPanel('srp_textinput',function(i)i:Dock(FILL)i:SetMultiline(true)i:SetBorderColor(col.transparent)i:SetFont'groupplate.description'i:DockMargin(2,2,2,2)i:OnChanged(function(j,i,k)self.Markdown:SetMarkdown(i)end)self.EditInput=i end)f:AddPanel('srp_panel',function(l)l:Dock(BOTTOM)l:SetTall(30)l:SetBorderColor(col.transparent)l:SetBackgroundColor(col.grey)l:DockPadding(0,0,0,0)l:DockMargin(1,1,1,1)l:AddPanel('srp_button',function(h)h:SetText'Submit'h:Dock(FILL)h:DockMargin(0,0,0,0)h:SetBorderColor(col.transparent)h:LeftClick(function()local m=self.EditInput:GetText()local n=self.AgendaMode==c;net.Start'srp.groups.AgendaChanged'net.WriteGroup(self.group)net.WriteString(m)net.WriteBool(n)net.SendToServer()self:HideEditMenu()end)end)end)self.EditMenu=f end)hook('OnAgendaUpdated',self,self.UpdateAgenda)end;function a:Setup(l,o)self.container=l;self.group=o;local p=o:GetColor()local q,j,r=ColorToHSV(p)local s=HSVToColor(q,j,math.Max(r*.8,0))self.name:SetText(self.group:GetName():upper())self.controller:SetBackgroundColor(s)local t=LocalPlayer():GetGroup()local u=LocalPlayer():GetGroupRank()self.PrivateAgenda:SetVisible(t&&o:IsConnected(t))self.PublicAgenda:SetVisible(t&&o:IsConnected(t))self.CanEdit=u&&u:HasPermission'edit'self.ChangeAgenda:SetVisible(t&&o:IsConnected(t)&&self.CanEdit)self:ShowPublicAgenda()end;function a:ShowEditMenu()self.EditMenu:SetVisible(true)self.EditMenu:SizeTo(-1,300,.25,0,-1,function()if IsValid(self.Markdown)then self.Markdown:InvalidateLayout(true)end end)end;function a:HideEditMenu(v)self.EditMenu:SizeTo(-1,0,.25,0,-1,function()if IsValid(self.EditMenu)then self.EditMenu:SetVisible(false)end;if IsValid(self.Markdown)then self.Markdown:InvalidateLayout(true)end end)end;function a:UpdateAgenda(o,m,n)if o.internal!=self.group.internal then return end;if self.AgendaMode==c&&n then self:ShowPrivateAgenda()elseif self.AgendaMode==b&&!n then self:ShowPublicAgenda()end end;function a:ShowPublicAgenda()local m=self.group:GetAgenda()||'##No Agenda set!'self.AgendaMode=b;self.Markdown:SetMarkdown(m)self.EditInput:SetText(m)end;function a:ShowPrivateAgenda()local m=self.group:GetPrivateAgenda()||'##No Agenda set!'self.AgendaMode=c;self.Markdown:SetMarkdown(m)self.EditInput:SetText(m)end;vgui.Register('srp_groupagenda',a,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/groups/ui/groupsettings_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/groups/ui/groupsettings_ui.lua:
local a={}function a:Init()self:DockPadding(5,5,5,5)self:DockMargin(0,0,0,0)self:SetBackgroundColor(col.midnight_dark)self:SetLoading(true)self.Settings={}self:AddPanel('srp_label',function(b)b:Dock(TOP)b:SetFont'ui_header.l'b:SetText'Settings'b:SetContentAlignment(1)b:SetTall(60)end)self:AddPanel('ui_scrollpanel',function(c)c:Dock(FILL)srp.ui.Create('srp_grid',function(d)d:Dock(TOP)d:SetAutoHeight(true)d:SetSpacing(5,5,true)c:AddItem(d)self.Grid=d end)end)hook('OnGroupSettingsUpdated',self,self.UpdateSettings)end;function a:OnRemove()hook.Remove('OnGroupSettingsUpdated',self)end;function a:Setup(e)self.group=e;self:PopulateSettings()srp.groups.GetSettings(e)end;function a:UpdateSettings(e,f)if e.id!=self.group.id then return end;for g,h in pairs(f)do self:UpdateSetting(g,h)end;self:SetLoading(false)end;function a:UpdateSetting(g,h)if self.Settings[g]then self.Settings[g]:SetValue(h)end end;function a:PopulateSettings()for i,j in pairs(srp.groups.GetSettingConfigsByCategory())do local k=srp.ui.Create('srp_label',function(b)b:SetTall(40)b:SetFont'ui_header.r'b:SetText(i)self.Grid:AddItem(b,true)end)local l=0;for m,n in ipairs(j)do if n.Blacklist&&table.HasValue(n.Blacklist,self.group.id)then continue end;srp.ui.Create('srp_panel_rounded',function(o)o.Config=n;o:DockPadding(5,5,5,5)o:DockMargin(5,5,5,5)o:SetBackgroundColor(col.midnight)o:SetTall(50)if!n.NoName then o:AddPanel('srp_panel',function(p)p:SetBackgroundColor(col.transparent)p:DockPadding(2,0,2,0)p:DockMargin(0,0,0,0)p:Dock(LEFT)p:SetWide(154)p:AddPanel('srp_label',function(b)b:SetText(n.Name)b:SetFont'ui_label.l'b:SetContentAlignment(4)b:Dock(FILL)o.Name=b end)o.LeftContainer=p end)end;o:AddPanel('srp_panel',function(p)p:SetBackgroundColor(col.transparent)p:DockPadding(0,0,0,0)p:DockMargin(0,0,0,0)p:Dock(FILL)o:AddPanel('srp_panel',function(q)q:SetBackgroundColor(col.transparent)q:DockPadding(1,2,1,1)q:DockMargin(0,0,0,0)q:Dock(RIGHT)q:SetWide(100)q:AddPanel('srp_button_rounded',function(r)r:SetText'Apply'r:Dock(TOP)r:DockMargin(0,0,0,0)r:SetTall(36)r:LeftClick(function()local h=o:GetValue()if h==nil then return end;if!n:Validate(self.group,h)then srp.notif.Warning(3,'Invalid value!')return end;net.Start'srp.groups.SetSetting'net.WriteGroup(self.group)net.WriteString(n.id)n:Write(h)net.SendToServer()end)end)end)if n.SetupPanel then o.ValuePnl=n:SetupPanel(o,p,self)else o.ValuePnl=p:AddPanel(n.PanelClass||'srp_textinput_rounded',function(o)o:Dock(FILL)end)end;o.GetValue=function(self)if self.Config.GetValue then return self.Config:GetValue(o,p,o.ValuePnl)else return self.ValuePnl:GetValue()end end;o.SetValue=function(self,h)if self.Config.SetValue then self.Config:SetValue(o,p,o.ValuePnl,h)else self.ValuePnl:SetValue(h)end end end)self.Settings[n.id]=o;self.Grid:AddItem(o,true)end)l=l+1 end;if l==0 then k:Remove()end end end;vgui.Register('srp_groupsettings',a,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/groups/ui/grouptags_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hacking/hacking_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hacking/z_reaction_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hacking/z_trivia_sh.lua:
local a={Name='Trivia',HideOverlay=false,Active=false}a.Difficulties={easy={Name='Easy',Color=col.orange,Settings={Countdown=20,QuizDifficulty=1}},normal={Name='Normal',Color=col.orange,Settings={Countdown=15,QuizDifficulty=2}},hard={Name='Hard',Color=col.orange,Settings={Countdown=10,QuizDifficulty=3}}}function a:Init(b)self.Countdown=10;self.Question=''end;function a:GenerateSettings(c,d)local e=srp.hacking.GetQuestion()self.Answer=e.answer;return{Question=e.question,Answers=e.answers,Countdown=10}end;function a:Start(f)self.Countdown=f.Countdown;self.Question=f.Question;self.Answers=f.Answers;self.Settings=f||{}self.StartTime=f.Start;self.EndTime=f.Start+self.Countdown;return self.EndTime end;function a:SetupDisplay(b)b:AddPanel('srp_panel',function(b)b:Dock(TOP)b:SetTall(120)b:DockMargin(15,55,15,20)b.Paint=function(g,h,i)surface.SetDrawColor(246,171,90)surface.DrawOutlinedRect(0,0,h,i,2)end;b:AddPanel('srp_label',function(j)j:Dock(FILL)j:SetText''j:SetFont'ui_header.s'j:SetContentAlignment(5)j:SetText(string.DecodeHTML(self.Question))j:SetWrap(true)end)end)b:AddPanel('srp_grid',function(b)b:Dock(FILL)b:SetAdjusted(true)b:DockMargin(50,50,50,50)for k,l in pairs(self.Answers)do srp.ui.Create('srp_button_rounded',function(m)m.answerId=k;m:SetSize(200,200)m:SetText(l:upper())m:SetFont'ui_header.l'm:SetBackgroundColor(l=='True'&&col.green||col.red)m:SetHoverColor(l=='True'&&col.green_dark||col.red_dark)m:LeftClick(function(g)self.Answer=g.answerId;srp.hacking.RequestInput(self)end)b:AddItem(m)end)end end)end;function a:Stop(n)self.Playing=false;self.Question=nil;if n==srp.hacking.COMPLETED then self:OnSuccess()else self:OnLost()end end;function a:OnFailedAttempt(o,p)end;function a:OnSuccess()end;function a:OnLost()end;function a:KeyPressed(b,k)end;function a:KeyReleased(b,q)end;function a:WriteInput()net.WriteUInt(self.Answer,3)end;function a:ReadInput()return net.ReadUInt(3)end;function a:IsValidInput(c,r)return self.Answer==r end;function a:Think(b)if self.NextCheck&&self.NextCheck>CurTime()then return end;if!system.HasFocus()then self.Answer=-1;srp.hacking.RequestInput(self)end;self.NextCheck=CurTime()+2 end;function a:Paint(b,h,i)end;srp.hacking.RegisterGame('trivia',a)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hacking/z_typing_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hangars/hangar_sh.lua:
srp.hangar=srp.hangar||{}srp.hangar.spawns={}srp.hangar.vehicles={}function srp.hangar.IsEmpty(a,b)local c=srp.hangar.spawns[a].hangars[b]if!c then return false end;local d=util.TraceHull({startpos=c.pos-Vector(0,0,50),endpos=c.pos+Vector(0,0,1)*600,mask=MASK_SHOT_HULL,mins=Vector(-500,-500,0),maxs=Vector(500,500,50),filter=Entity(0)})if IsValid(d.Entity)then return false end;local e=ents.FindByClass('prop_vehicle_*')for f,g in ipairs(e)do if g:GetPos():Distance(c.pos)<200 then return false end end;return true end;function srp.hangar.RegisterVehicle(h,i)i.class=h;srp.hangar.vehicles[h]=i end;function srp.hangar.Register(j,k,l,i)local m={}for n=1,#l do table.insert(m,srp.hangar.vehicles[l[n]])end;if j==info.Map then srp.hangar.spawns[k]={vehicles=m,hangars=i}end end;function srp.hangar.GetSpawns(k)return srp.hangar.spawns[k]end;function PLAYER:Repair(o,p,q)if!self:IsRobot()then return q(false)end;if self:GetMaxHealth()<=self:Health()then q(false)return else self:Heal(self:GetMaxHealth()*.35,true)q(true)end end
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/fkeys_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/overviews_cl.lua:
srp.hud=srp.hud||{}local a={}local b,c=60,40;local d=10;local e=Color(0,0,0,200)local f=25000;surface.CreateFont('ui_overview.r',{font='Titillium Web',size=128,weight=200})local function g(h,i,j,k,l,m)surface.SetFont(i)local n,o=surface.GetTextSize(h)local p,q=n+b,o+c;draw.Box(-p/2,-q/2,p,q,e)m=math.min(m,1)if k then draw.Box(-p/2,q/2-d,p,d,e)draw.Box(-p/2,q/2-d,p*m,d,l)end;draw.NoTexture()surface.SetDrawColor(k&&m>.5&&l||e)surface.DrawPoly({{x=-50,y=q/2},{x=50,y=q/2},{x=0,y=q/2+50}})surface.SetTextPos(-n/2,-o/2)surface.SetTextColor(j)surface.DrawText(h)end;function srp.hud.AddOverview(r,s)if!s||!s.text||!s.pos then return end;s.percent=s.percent||1;s.textcolor=s.textcolor&&s.textcolor:Copy()||col.white:Copy()s.barcolor=s.barcolor&&s.barcolor:Copy()||col.black:Copy()s.font=s.font||'ui_overview.r's.areaang=Angle()s.areax=s.areax||100;s.areay=s.areay||100;s.areaz=s.areaz||100;s.areacolor=s.areacolor&&s.areacolor:Copy()||Color(100,100,100,200)a[r]=s end;function srp.hud.RemoveOverview(r)a[r]=nil end;hook('PostDrawTranslucentRenderables',function(t,u)if u then return end;local v=LocalPlayer():EyePos()for w,s in pairs(a)do local x=s;if s.entity&&IsValid(s.entity)then x=s.entity:GetOverviewData(s)end;local y=(v-s.pos):Angle()y.p=0;y.r=90;y.y=y.y+90;local z=s.pos:Distance(v)local A=1-z/f;surface.SetAlphaMultiplier(A)local B=render.GetFogMode()render.FogMode(MATERIAL_FOG_NONE)cam.Start3D2D(s.pos,y,2)g(x.text,x.font,x.textcolor,x.showbar,x.barcolor,x.percent)cam.End3D2D()if x.drawarea&&input.IsKeyDown(KEY_F)then render.SetColorMaterial()render.DrawBox(x.areapos||x.pos,x.areaang,Vector(-x.areax/2,-x.areay/2,0),Vector(x.areax/2,x.areay/2,x.areaz),x.areacolor,true)end;render.FogMode(B)surface.SetAlphaMultiplier(1)end end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/emotes/emote_sh.lua:
srp.emotes=srp.emotes||{}srp.emotes.commands={}srp.emotes.commands_mapped={}EMOTE_ALL=1;EMOTE_MODEL=2;EMOTE_ALIGNMENT=3;EMOTE_GROUP=4;EMOTE_PERMISSION=5;function srp.emotes.GetValidEmotes(a,b)if!IsValid(a)then return end;if!b then return end;local c,d,e=a:GetModel(),a:GetGroup(),a:GetAllegianceID()||'NEUTRAL'local f={}for g,h in ipairs(b)do if!h.type then continue end;if h.type==EMOTE_ALL then f[#f+1]=h;continue end;if!h.args then continue end;if h.type==EMOTE_GROUP&&d then if table.ArrayHasValue(h.args,d.id)then f[#f+1]=h end;continue end;if h.type==EMOTE_PERMISSION&&d then local i=a:GetGroupClass()local j=a:GetGroupRank()if d:HasPermission(h.args)||j&&j:HasPermission(h.args)||i&&i:HasPermission(h.args)then f[#f+1]=h end;continue end;if h.type==EMOTE_MODEL then if table.ArrayHasValue(h.args,c)then f[#f+1]=h end;continue end;if h.type==EMOTE_ALIGNMENT then if table.ArrayHasValue(h.args,e)then f[#f+1]=h end;continue end end;return#f>0,#f>0&&f||{}end;function srp.emotes.Register(k)local g=table.insert(srp.emotes.commands,{name=k.Name,me=k.Me,mewith=k.MeWith,mat=k.Material,color=k.Color,lookup=k.Lookup,id=#srp.emotes.commands+1,CanUse=k.CanUse})srp.emotes.commands_mapped[k.Name:upper()]=g end;function srp.emotes.GetByName(l)local m=srp.emotes.commands_mapped[l:upper()]return srp.emotes.commands[m]end;srp.AddCommand('emote',function(n,h)srp.emotes.checkEmote(n,h)end):AddParam(cmd.UINT):SetCooldown(2):SetInfoSection('Chat'):SetInfo('Plays an emote by the given id'):SetInfoArgs({'id - The emote index'})srp.AddCommand('emotename',function(n,h,o)o=o==1||false;srp.emotes.checkEmoteName(n,h,o)end):AddParam(cmd.STRING):AddParam(cmd.UINT):SetCooldown(2):SetInfoSection('Chat'):SetInfo('Plays an emote by the given name'):SetInfoArgs({'Name - The name of the emote'})
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/notifications/notify_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/notifications/ui/bubbles_ui.lua:
local a={}local b=72;local c=5;local d=-90;local e=col.midnight_dark:Copy()e.a=200;local f=col.red:Copy()f.a=25;local g=col.midnight_light:Copy()e.a=200;local h=Color(255,255,255,50)function a:Init()self:DockMargin(0,0,0,0)self:SetKeyBoardInputEnabled(false)self:SetMouseInputEnabled(false)self:SetAlpha(0)self:AlphaTo(255,.25,.4)self.Percent=0;self.PercentColor=col.red end;function a:ShowDisplay()self:AddPanel('DImage',function(i)i:SetSize(32,32)i:DockMargin(0,0,0,0)i:SetAlpha(220)self.Icon=i end)self:AddPanel('srp_label',function(j)j:SetSize(b,b-10)j:SetContentAlignment(2)j:SetText''j:SetFont'ui_header.s'j:SetTextColor(col.white_dark)self.Count=j end)end;function a:SetDuration(k)self.Duration=k;timer.Create('srp.ui.bubble.'..self.ID,k,1,function()if IsValid(self)then self:DoRemove()end end)end;function a:DoRemove()self:AlphaTo(0,0.1,0,function()if IsValid(self)then self:Remove()end end)end;function a:Populate(l)self:ShowDisplay()self.ID=l.id;self.Item=l;self.PercentColor=h;if l.icon then self.Icon:SetMaterial(l.icon)end end;function a:SetValue(m,k)self.Amount=(self.Amount||0)+(m||0)self.Negative=self.Amount<0;self.Percent=(LocalPlayer():GetInventoryItemCount(self.Item.id)||m)/260000;self.Count:SetText(string.Comma(self.Amount))self:SetDuration(k)end;function a:PerformLayout(n,o)if IsValid(self.Icon)then self.Icon:SetPos((n-32)*.5,(o-32)*.3)end end;function a:Paint(n,o)draw.NoTexture()if self.Negative then surface.SetDrawColor(f)else surface.SetDrawColor(e)end;local p=n/2;surface.DrawArc(p,p,0,p,0,360,60)surface.SetDrawColor(g)surface.DrawArc(p,p,p-c,p,0,360,60)if self.Percent then surface.SetDrawColor(self.PercentColor)surface.DrawArc(p,p,p-c,p,d,d+360*self.Percent,360)end end;vgui.Register('srp_bubble',a,'srp_panel')local a={}function a:ShowDisplay()self:DockPadding(0,0,0,10)self:AddPanel('DImage',function(i)i:SetSize(40,40)i:SetAlpha(50)self.Icon=i end)self:AddPanel('srp_label',function(j)j:Dock(FILL)j:DockMargin(0,0,0,0)j:SetTall(b/2)j:SetContentAlignment(5)j:SetText''j:SetFont'ui_label.l'j:SetTextColor(col.white)j:DockMargin(0,10,0,8)self.Level=j end)self:AddPanel('srp_label',function(j)j:DockMargin(0,0,0,0)j:SetContentAlignment(8)j:SetText''j:SetFont'ui_label.rb'j:SetTextColor(col.white)j:SetSize(b,20)self.Count=j end)end;function a:Populate(q)self:ShowDisplay()self.ID=q.id;self.Tree=q;self.PercentColor=q.color:Copy()if q.icon then self.Icon:SetMaterial(q.icon)end end;function a:SetValue(r,m,k)m=math.abs(m)self.Amount=r+m;self.Percent=m/r;local s=LocalPlayer():GetTalentLevel(self.Tree.id)local t=srp.talents.GetLevel(s,self.Tree.id)local u=srp.talents.GetLevel(s+1,self.Tree.id)local v=(r-t)/(u-t)self.Percent=v;self:SetDuration(k)self.Level:SetText(s)self.Count:SetText(m)end;function a:PerformLayout(n,o)if IsValid(self.Icon)then self.Icon:SetPos((n-40)*.5,(o-40)*.5)end;if IsValid(self.Count)then self.Count:SetPos(0,o*.55)end end;vgui.Register('srp_xpbubble',a,'srp_bubble')local a={}function a:Init()self:SetSize(0,b)self:DockPadding(0,0,0,0)self:SetBackgroundColor(col.transparent)self:SetPos(ScrW()/2,55)self:SetKeyBoardInputEnabled(false)self:SetMouseInputEnabled(false)self.Bubbles={}end;function a:AddItemBubble(l,m,k)if IsValid(self.Bubbles[l.id])then self.Bubbles[l.id]:SetValue(m,k)return end;srp.ui.Create('srp_bubble',function(w)w:SetSize(b,b)w:SetPos(self:GetWide(),0)w:SetParent(self)w:Populate(l)w:SetValue(m,k)w:NoClipping(true)self.Bubbles[l.id]=w end)end;function a:AddXPBubble(q,r,m,k)if IsValid(self.Bubbles[q.id])then self.Bubbles[q.id]:SetValue(r,m,k)return end;srp.ui.Create('srp_xpbubble',function(w)w:SetSize(b,b)w:SetPos(self:GetWide(),0)w:SetParent(self)w:Populate(q)w:SetValue(r,m,k)w:NoClipping(true)self.Bubbles[q.id]=w end)end;function a:SortPanels()local x=self:GetChildren()for y,z in ipairs(x)do z:MoveTo((y-1)*b+(y-1)*2,0,0.25,0,-1)end;local A=#x*b+#x*2;self:SizeTo(A,b,.1,0,-1)self:MoveTo((ScrW()-A)/2,55,.25,0,-1)end;function a:OnChildAdded()self:SortPanels()end;function a:OnChildRemoved()self:SortPanels()end;vgui.Register('srp_bubblecontainer',a,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/notifications/ui/flashconfirm_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/scoreboard/init_sh.lua:
local a={['STEAM_0:1:26675200']='_Commonwealth'}function PLAYER:GetCountry()if a[self:SteamID()]then return a[self:SteamID()]else return self:GetNetVar('Country')||'us'end end;nw.Register'Country':Write(net.WriteString):Read(net.ReadString):SetPlayer()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/scoreboard/player_card_ui.lua:
local a={}local b=Material('materials/galactic/ui/warning.png','smooth')local c=Material('materials/galactic/ui/menu/usd.png','smooth noclamp nomips')local d=Color(0,0,0,50)local e=col.white:Copy()local f=col.yellow:Copy()local g=col.grey:Copy()g.a=100;local h=Material('galactic/ui/scoreboard/micon.png','smooth')local i=Material('galactic/ui/scoreboard/micoff.png','smooth')local j=Material('galactic/ui/scoreboard/user.png','smooth')local k=Material('galactic/ui/scoreboard/vip.png','smooth')local l=Material('galactic/ui/scoreboard/staff.png','smooth')local m={'USER','VIP','MOD','ADMIN','CC','DA','SA','CO','ROOT','ROOT'}local n={'GML','TGM','GM','VGM','SGM','HGM'}local o=cvar.Register'NickNames'o:SetDefault('')function PLAYER:SetNickName(p)o:AddMetadata(self:SteamID(),p)o:Save()end;function PLAYER:GetNickName()return o:GetMetadata(self:SteamID())end;local q;texture.Create('FLAG_us'):EnableProxy(false):Download('http://r2-cdn.superiorservers.co/flags/us.png',function(r,s)q=s end)local function t(u,v)end;function a:Init()self:SetTall(28)self:SetBorderColor(d)self:DockPadding(2,2,2,2)self:SetText''self:DockMargin(0,0,0,0)self:SetSoundHover(nil)self:MoveToFront()self:LeftClick(function(r)SetClipboardText(r.pl:SteamID())srp.notif.Neutral(3,'SteamID copied')end)self:AddPanel('DImage',function(u)u:Dock(LEFT)u:SetWide(24)u:SetMouseInputEnabled(false)u:DockMargin(2,0,2,0)self.country=u end)self:AddPanel('ui_imagebutton',function(u)u:Dock(LEFT)u:SetWide(24)u:DockMargin(2,0,2,0)u:SetSkin'SUP'self.avatar=u end)self:AddPanel('DPanel',function(u)u:Dock(LEFT)u:SetWide(82)u:SetMouseInputEnabled(false)u:DockMargin(1,0,1,0)u.Paint=function(r,w,x)local y=2;if self.CustomMaterial then surface.SetDrawColor(255,255,255,255)surface.SetMaterial(self.CustomMaterial)surface.DrawTexturedRect(y,(x-24)/2,24,24)end;if self.StaffMaterial then y=self.CustomMaterial&&28||2;surface.SetDrawColor(self.RankColor)surface.SetMaterial(self.StaffMaterial)surface.DrawTexturedRect(y,(x-20)/2,20,20)end;if self.RankName then y=y+22;local z=w-y;DisableClipping(true)draw.SimpleText(self.RankName,'ui_label.rb',y+z/2,x/2,self.RankColor,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)DisableClipping(false)end end end)self:AddPanel('srp_label',function(A)A:SetWide(260)A:Dock(LEFT)A:SetText'Name'A:SetFont'ui_label.l'A:SetMouseInputEnabled(false)t(A,col.red)self.name=A end)self:AddPanel('srp_label',function(A)A:Dock(LEFT)A:SetText''A:SetFont'ui_label.l'A:SetMouseInputEnabled(false)A:SetTextColor(col.white)A:SetWide(220)t(A,col.green)self.class=A end)self:AddPanel('srp_label',function(A)A:Dock(LEFT)A:SetText''A:SetFont'ui_label.l'A:SetMouseInputEnabled(false)A:SetTextColor(col.white)A:SetWide(220)t(A,col.pink)self.location=A end)self:AddPanel('srp_image',function(B)B:Dock(RIGHT)B:SetWide(27)B:DockMargin(2,0,2,0)B:SetContentAlignment(5)B:DockPadding(4,4,4,4)B.VoiceScale=100;B.LastVoiceChange=CurTime()-1;B.Paint=function(r,w,x)if r.LastVoiceChange+.4>CurTime()then draw.DrawText(r.VoiceScale,'ui_label.b',w/2,x/2-8,col.white,TEXT_ALIGN_CENTER)else derma.SkinHook('Paint','ImagePanel',r,w,x)end end;B.OnMouseWheeled=function(r,C)if C>0 then r.VoiceScale=math.min(r.VoiceScale+4,100)else r.VoiceScale=math.max(r.VoiceScale-4,0)end;local D=r.VoiceScale/100;r:SetAlpha(100+155*D)r.LastVoiceChange=CurTime()self.pl:SetVoiceVolumeScale(D)end;B:LeftClick(function(r)if self.pl:IsBlocked()then self.pl:Block(false)r:SetMaterial(h,true)r:SetImageColor(col.white)else self.pl:Block(true)r:SetMaterial(i,true)r:SetImageColor(col.red)end end)self.mute=B end)self:AddPanel('srp_image',function(B)B:Dock(RIGHT)B:SetWide(24)B:DockMargin(2,0,2,0)B:DockPadding(0,0,0,0)B:SetContentAlignment(5)B:SetMaterial(c)B:LeftClick(function(r)ba.ui.OpenAuthLink('/'..info.WebID..'/credits/'..self.pl:SteamID())end)self.gift=B end)self:AddPanel('srp_button',function(A)A:Dock(FILL)A:SetText''A:SetFont'ui_label.l'A:DockMargin(2,0,0,0)A:SetTextColor(col.white)A:SetContentAlignment(4)A:SetBackgroundColor(col.transparent)A:SetHoverColor(col.transparent)A:SetBorderColor(col.transparent)A:SetWide(350)A:LeftClick(function(r)if self.pl==LocalPlayer()then ui.StringRequest('Custom Title','What would you like your custom title to be set to?','',function(E)cmd.Run('setcustomtitle',E)end)else SetClipboardText(self.pl:SteamID())srp.notif.Neutral(3,'SteamID copied')end end)self.title=A end)self:AddPanel('srp_button_rounded',function(B)B:Dock(RIGHT)B:DockMargin(22,0,2,0)B:SetText(0xf246,true)B:SetFont'SSRPForkAwesome'B:SetContentAlignment(5)B:SetBackgroundColor(g)B:SetWide(24)B:LeftClick(function()local F=self.pl;ui.StringRequest('Nickname','What would you like to set '..self.pl:Name()..'\'s nickname to?','',function(E)if IsValid(F)then F:SetNickName(E)end end)end)self.nickname=B end)self:AddPanel('srp_label',function(A)A:Dock(RIGHT)A:SetWide(100)A:SetText'00:00:00'A:SetFont'ui_label.l'A:SetContentAlignment(6)A:SetMouseInputEnabled(false)self.playtime=A end)self:AddPanel('srp_label',function(A)A:Dock(RIGHT)A:SetText''A:SetFont'ui_label.l'A:SetMouseInputEnabled(false)A:SetVisible(false)A:SetTextColor(col.white)A:SetWide(80)self.status=A end)self:AddPanel('DImage',function(G)G:Dock(RIGHT)G:SetMouseInputEnabled(false)G:SetVisible(false)G:SetWide(20)G:SetImageColor(col.red)self.statusimg=G end)end;function a:SetPlayer(F)self.pl=F;self:Update()if!self.FirstTimeSet then self.FirstTimeSet=true;self:SetStaticInfo()end end;function a:UpdateFlag()self.country:SetMaterial(q,true)local H=self.pl:GetCountry()local I='FLAG_'..H;if texture.Get(I)then self.country:SetMaterial(texture.Get(I),true)else self.country:SetMaterial(q,true)texture.Create(I):EnableProxy(false):Download('http://r2-cdn.superiorservers.co/flags/'..H..'.png',function(r,s)if IsValid(self)then self.country:SetMaterial(s,true)end end)end end;function a:SetStaticInfo()if!IsValid(self.pl)then self:Remove()return end;self:UpdateFlag()self.avatar:SetPlayer(self.pl)local J=self.pl:GetVoiceVolumeScale()self.mute.VoiceScale=math.Round(J*100,0)self.mute:SetAlpha(55+200*J)self.mute:SetMaterial(self.pl:IsBlocked()&&i||h,true)self.mute:SetImageColor(self.pl:IsBlocked()&&col.red||col.white)end;function a:Update()if!IsValid(self.pl)then self:Remove()return end;local K=self.pl:GetChatTag()local L=K&&ba.chatEmotes[K:Trim()]local v=self.pl:GetChatColor():Copy()local x,r,M=ColorToHSV(v)v=HSVToColor(x,r,M*.75)self:SetBackgroundColor(v)self:SetHoverColor(HSVToColor(x,r,M*.65),true)local N=self.pl:GetNetVar('UserGroup')||1;local O=self.pl:GetGamemasterID()||0;self.StaffMaterial=self.pl:IsAdmin()&&l||self.pl:IsVIP()&&k||j;self.CustomMaterial=L&&L.mat;self.RankName=O>0&&' '..n[O]||''self.RankColor=self.pl:IsVIPPlus()&&f||e;local P=self.pl:GetTag()if v==col.white then v=col.grey_light end;local p=P..' '..self.pl:Nick()local Q=self.pl:GetNickName()if Q&&Q!=''then p=p..' ('..self.pl:GetNickName()..')'end;self.name:SetText(p)self.title:SetText(self.pl:GetCustomTitle()||self.pl:GetPlayRewardString())self.playtime:SetText(ba.str.FormatTime(self.pl:GetPlayTime()))if self.pl:IsJailed()then self.status:SetText'JAILED'self.status:SetTextColor(col.red_light)self.status:SetVisible(true)elseif self.pl:IsWanted()then self.status:SetText'WANTED'self.status:SetTextColor(col.red_light)self.status:SetVisible(true)elseif!self.pl:Alive()then self.status:SetText'DEAD'self.status:SetTextColor(col.red_light)self.status:SetVisible(true)self.statusimg:SetMaterial(b,true)self.statusimg:SetVisible(true)else self.status:SetVisible(false)self.statusimg:SetVisible(false)end;if self.pl:GetGroupClass()then self.class:SetText(self.pl:GetGroupClass().name)else self.class:SetText''end;if LocalPlayer():IsEnforcement()then local R=self.pl:GetLocation()self.location:SetText(R&&R.name||'')else self.location:SetText''end;if LocalPlayer()==self.pl&&LocalPlayer():IsVIPPlus()then self.title:SetMouseInputEnabled(true)end end;vgui.Register('srp_scoreboard_pl',a,'srp_button')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/ui/filters_ui.lua:
local a={{Name='None'},{Name='Vibrant',Value={['$pp_colour_colour']=1.5}},{Name='Super Vibrant',Value={['$pp_colour_colour']=2.5}},{Name='Washed Out',Value={['$pp_colour_colour']=0.5}},{Name='Black & White',Value={['$pp_colour_colour']=0}},{Name='Death',Value={['$pp_colour_mulr']=1,['$pp_colour_colour']=0,['$pp_colour_addr']=0.25714285714286,['$pp_colour_contrast']=0.26428571428571}}}cvar.Register('srp_colorfilter'):SetType(TYPE_NUMBER):SetDefault(1):AddMetadata('Category','SSRP'):AddMetadata('Menu','Colour Filter'):SetDescription('Modifies how colours are displayed.'):SetCustomElement('srp_filter_picker').Validate=function(self,b)return a[b]!=nil end;hook('RenderScreenspaceEffects',function()local c=cvar.GetValue('srp_colorfilter')||1;if c==1||!a[c]then return end;draw.ColorModify(a[c].Value)end)local d={}function d:Init()self:SetParent(self)self:Dock(FILL)self:DockMargin(0,0,0,0)self:SetBackgroundColor(col.grey_dark)self:SetHoverColor(col.grey)self:SetTextColor(col.white)local e=cvar.GetValue('srp_colorfilter')||1;local f=a[e]&&a[e].Name||'None'self:SetValue(f)for b,g in ipairs(a)do self:AddOption(g.Name,g,b==e)end;self:OnSelect(function(h,i,c)self.Cvar:SetValue(i)end)end;function d:SetCvar(cvar)self:DockPadding(5,5,5,5)self:SetTall(70)self.Cvar=cvar end;vgui.Register('srp_filter_picker',d,'srp_dropdown')
--gamemodes/srp_base/gamemode/modules/hud/weaponswitch/wepsxrganiser_cl.lua:
srp.weporganiser = srp.weporganiser or {}

srp.weporganiser.Menu = srp.weporganiser.Menu

srp.weporganiser.categories = {}
srp.weporganiser.categories_template = {Weapons = {}}
srp.weporganiser.categories_template_default = {}

local offsetAnchor = -100
local weporganizerDirectory = info.DataFolder .. 'weporganiser/'

file.CreateDir(weporganizerDirectory)

cvar.Register 'srp_weaponorganiser'
	:SetDefault('')

local function ignoreTools()
	return cvar.GetValue('srp_tools_ignore')
end

function srp.weporganiser.Get(id)
	return srp.weporganiser.categories
end

function srp.weporganiser.Register(tbl, default)
	srp.weporganiser.categories_template = {Weapons = {}}

	tbl.map = {}
	tbl.GetWeaponSlots = function(self, class)
		return self.map[class]
	end

	for slotid, data in ipairs(tbl) do
		srp.weporganiser.categories_template[slotid] = {Name = data.Name, Weapons = {}}

		for pos, weptbl in ipairs(data.Weapons) do
			weptbl.Order = offsetAnchor + pos

			tbl.map[weptbl.ClassName] = tbl.map[weptbl.ClassName] or {}
			table.insert(tbl.map[weptbl.ClassName], {Slot = slotid, Pos = pos})
		end
	end

	srp.weporganiser.categories = tbl

	if default then
		srp.weporganiser.categories_default = tbl
		srp.weporganiser.categories_template_default = srp.weporganiser.categories_template
	else
		srp.notif.Success(3, 'Weapon layout was updated!')
	end

	srp.hud.EnsureWeapons(true)
	return tbl
end

function srp.weporganiser.Reset()
	srp.weporganiser.Register(srp.weporganiser.categories_default)
	hook.Run('OnWeaponOrganiserReset')
end

function srp.weporganiser.Build(pl, weps, id)
	local loadout = srp.weporganiser.categories
	local managedLoadout = table.Copy(srp.weporganiser.categories_template)

	managedLoadout.Weapons = {}

	for _, wep in ipairs(weps) do
		if not IsValid(wep) then
			continue
		end

		local class = wep:GetClass()
		local slots = loadout:GetWeaponSlots(class)
		if slots then
			for _, slotTbl in ipairs(slots) do
				local data = loadout[slotTbl.Slot].Weapons[slotTbl.Pos]
				if data.Hide or (data.Tool and ignoreTools()) then
					continue
				end

				data.Ent = wep
				table.insert(managedLoadout[slotTbl.Slot].Weapons, data)
			end
			continue
		end

		local slot = math.Clamp(wep.Slot or 1, 1, #managedLoadout)
		table.insert(managedLoadout[slot].Weapons, {
			Name = wep.Name or wep.PrintName or util.GetPrintName(class),
			Class = class,
			Order = wep.SlotPos or 100,
			Ent = wep
		})
	end

	local remove = {}
	for i, slot in ipairs(managedLoadout) do
		table.sort(slot.Weapons, function(a, b)
			return a.Order < b.Order
		end)

		for _, tbl in ipairs(slot.Weapons) do
			tbl.SlotPos = table.insert(managedLoadout.Weapons, tbl)
		end
	end

	return managedLoadout
end

function srp.weporganiser.Load(fileName)
	local path = weporganizerDirectory .. fileName .. '.dat'
	local data = file.Read(path, 'DATA')
	if not data or data == '' then
		return
	end

	local format = util.JSONToTable(data)
	if format and format.Data then
		hook.Run('OnWeaponOrganiserFormatLoaded', fileName, srp.weporganiser.Register(format.Data))
	end
end

function srp.weporganiser.Save(fileName, tbl)
	local fileData = {
		Meta = {
			name = LocalPlayer():Nick(),
			creator = LocalPlayer():SteamID(),
			created = os.time()
		},
		Data = tbl
	}

	local path = weporganizerDirectory .. fileName .. '.dat'
	local jsonStr = util.TableToJSON(fileData, true)

	file.Write(path, jsonStr)
	hook.Run('OnWeaponOrganiserFormatSaved', fileName, fileData)

	cvar.SetValue('srp_weaponorganiser', fileName)
end

function srp.weporganiser.LoadFileList()
	local tbl = file.Find(weporganizerDirectory .. '*.dat', 'DATA')
	local fileNames = {}

	for _, v in pairs(tbl) do
		table.insert(fileNames, v:Replace('.dat', ''))
	end

	return fileNames
end

function srp.weporganiser.OpenMenu()
	if srp.weporganiser.Menu  then
		srp.weporganiser.Menu:Remove()
	end

	srp.weporganiser.Menu  = srp.ui.Create('srp_weaponorganizer')
	srp.weporganiser.Menu:Populate()
end

local function loadDefaults()
	srp.weporganiser.Register({
		{
			Name = 'Primary',
			Weapons = {}
		},
		{
			Name = 'Secondary',
			Weapons = {
				{Name = 'Holster & Keys', ClassName = 'weapon_holster'},
			}
		},
		{
			Name = 'Utility',
			Weapons = {
				{Name = 'Fists', ClassName = 'weapon_fists'},
				{Name = 'Frag Grenade', ClassName = 'weapon_frag'},
				{Name = "RPG", ClassName = 'weapon_rpg'},
				{Name = "Stunstick", ClassName = 'weapon_stunstick'},
				{Name = "Crowbar", ClassName = 'weapon_crowbar'},
			}
		},
		{
			Name = 'Tools',
			Weapons = {
				{Name = 'Tool Gun', ClassName = 'gmod_tool', Tool = true},
				{Name = 'Physgun', ClassName = 'weapon_physgun', Tool = true},
				{Name = 'Gravgun', ClassName = 'weapon_physcannon'},
			}
		},
	}, true)

	local fileName = cvar.GetValue('srp_weaponorganiser')
	if fileName and fileName ~= '' then
		srp.weporganiser.Load(fileName)
	end
end

hook('InitPostEntity', 'srp.weporganiser.LoadFromCvar', loadDefaults)
hook('OnReloaded', 'srp.weporganiser.LoadFromCvar', loadDefaults)

net('srp.weporganiser.Menu', function()
	srp.weporganiser.OpenMenu()
end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/hud/weaponswitch/ui/weporganiser_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/inventory/inventorydata_sh.lua:
srp.inventory=srp.inventory||{}srp.inventory.MaxStack=400000;srp.inventory.MaxStackBits=net.GetBits(srp.inventory.MaxStack)srp.inventory.MaxSlots=88;srp.inventory.MaxNonBatSlots=66;srp.inventory.MaxSlotBits=net.GetBits(512)srp.inventory.NONE=0;srp.inventory.PLAYER=1;srp.inventory.ENTITY=2;srp.inventory.STORAGE=3;srp.inventory.SHOP=4;srp.inventory.GROUP=5;local a={}local b={}local c={}c.__index=c;function c:Init()self.name=''self.color=color_white;self.items={}self.data={}self.mode=0;self.subscribers={}self.locking={}self.locked=false end;function c:LockingAction(d,e)local f=self.locking[d]if f&&e then return true end;self.locking[d]=e;return wasLocked end;function c:IsLockingAction(d)return self.locking[d]end;function c:SetColor(g)self.color=g;return self end;function c:GetColor()return self.color end;function c:SetName(h)self.name=h;return self end;function c:GetName()return self.name end;function c:SetController(i,j)self.mode=i;local k=srp.inventory.GetControllerMode(i)if k then table.Merge(self,k)end;if j then self:SetupController(j)end;return self end;function c:SetupController(j)self.controller=j;if j then j.Inventory=self end end;function c:SetMaxSlots(l)self.maxslots=l;return self end;function c:GetMaxSlots()return self.MaxSlotsFunc&&self:MaxSlotsFunc(self.controller)||self.maxslots||srp.inventory.MaxSlots end;function c:SetMaxSlotsFunc(m)self.MaxSlotsFunc=m;return self end;function c:HasSpace(n,o)if n.id then n={[n]=o}end;for p,o in pairs(n)do local q=self:SolveToken(p)if!q then return false end;if!(self:FindSlotWithSpace(q.id,nil,o)||self:GetEmptySlot())then return false end end;return true end;function c:SetValue(d,r)self.data[d]=r;return self end;function c:GetValue(d)return self.data[d]end;function c:WriteController()print'DEFAULT: INV:WriteController'end;function c:ReadController()print'DEFAULT: INV:ReadController'end;function c:Subscribe(s,t)if!t&&!self:CanSubscribe(s)then return false end;if!table.HasValue(self.subscribers,s)then table.insert(self.subscribers,s)end;return true end;function c:UnSubscribe(s)return table.RemoveByValue(self.subscribers,s)end;function c:CanSubscribe(s)if self.mode==srp.inventory.PLAYER then return self.controller==s elseif self.mode==srp.inventory.SHOP then return true else return false end end;function c:IsSubscribed(s)return table.HasValue(self.subscribers,s)end;function c:ShouldSave()return self.persist end;function c:SolveToken(p)if istable(p)then return p.itemid&&srp.items.Get(p.itemid)||p,p.meta else return srp.items.Get(p)end end;function c:Hash(u)if!u||table.Count(u)==0 then return end;local v={}for d,r in pairs(u)do v[#v+1]={key=d,value=tostring(r)}end;table.sort(v,function(w,x)return w.key>x.key end)local y=util.TableToJSON(v)return util.SHA1(y)end;function c:GetEmptySlot(z)for A=1,self:GetMaxSlots()do if!self.items[A]||self.items[A].count==0 then return A end end;return self:GetMaxSlots()+1 end;function c:SetCooldown(s,q,B)local C=CurTime()local D=B.basecooldown||B.cooldown;local E=B.basecooldown&&q.base||q.id;if!D then return true end;if s.ItemCooldowns[E]&&s.ItemCooldowns[E]>C then return false else s.ItemCooldowns[E]=C+D;return true end end;function c:OnUse(m)self.DoUse=m;return self end;function c:OnDeposit(m)self.DoDeposit=m;return self end;function c:OnPickup(m)self.DoPickup=m;return self end;function c:OnAltPickup(m)self.DoAltPickup=m;return self end;function c:DoUse(s,cell,q,o)return false end;function c:DoDeposit(s,cell,q,o)return false end;function c:DoPickup(s,q,o)return false end;function c:DoAltPickup(s,q,o)return false end;function c:CanUILeftClick(F,q,G)return false end;function c:CanUIRightClick(F,q,G)return false end;function c:OnUILeftClick(m)self.DoUILeftClick=m;return self end;function c:OnUIRightClick(m)self.DoUIRightClick=m;return self end;function c:DoUILeftClick(F)return false end;function c:DoUIRightClick(F)return false end;function c:IsMatchingCell(H,I)if!H||!I||H.itemid!=I.itemid then return false end;if H.hash&&I.hash!=H.hash then return false end;return true end;function c:FindSlotWithSpace(J,K,o)K=K||J;for A,cell in pairs(self.items)do if cell.itemid!=J then continue end;if cell.hash&&cell.hash!=K then continue end;if cell.count>=srp.inventory.MaxStack then continue end;if o&&cell.count+o>=srp.inventory.MaxStack then continue end;return A end end;function c:FindSlotsWith(J,K)local L={}local M=false;for A,cell in pairs(self.items)do if cell.itemid!=J then continue end;if cell.hash&&cell.hash!=K then continue end;if cell.count>0 then M=true;table.insert(L,A)end end;return M&&L||false end;function c:SetInventory(N)for O,P in ipairs(N)do local q=srp.items.Get(P.item||P.itemid)if!q then print('NO ITEM',P.item)continue end;local u=P.meta&&util.JSONToTable(P.meta)||nil;local K=N.hash||u&&self:Hash(u)local Q=P.cellid;self.items[Q]={index=Q,itemid=q.id,hash=K,meta=u,count=P.count}end end;function c:AddItem(p,o,R,S)local q,u=self:SolveToken(p)local K=u&&self:Hash(u)if!q then print('INV.AddItem does not exist',p,o,R,S)return end;if q.OnPreInventoryAdded&&self.controller:IsPlayer()then local T=q:OnPreInventoryAdded(self,u,o)if T&&table.Count(T)>0 then u=T;K=self:Hash(T)end end;local U=o;local V=0;local W={}while U>0 do local Q=self:FindSlotWithSpace(q.id,K)Q=Q||self:GetEmptySlot(R)if!Q then break end;local cell=self.items[Q]local X=srp.inventory.MaxStack-(cell&&cell.count||0)local Y=math.min(X,U)table.insert(W,Q)cell=cell||{index=Q,itemid=q.id,hash=K,meta=u,count=0,temp=q.temp}cell.count=cell.count+Y;V=V+Y;U=U-Y;self.items[Q]=cell end;if self:IsPlayer()then if q.OnPickedUp then q:OnPickedUp(self.controller,V)end;self.controller:DoAnimationEvent(ACT_GMOD_GESTURE_ITEM_PLACE)hook.Run('OnPlayerPickedUpItem',self.controller,cell,q,o)end;if!S then self:SyncCells(W)end;self:SaveCells(W)return U!=o,V end;function c:AddItems(Z,o,_,S)o=o||1;for O,p in pairs(Z)do if!self:AddItem(p,o,noWeight,S)then return false end end;return true end;function c:RemoveItems(Z,a0)a0=a0||1;if!self:HasItems(Z,a0)then return false end;for p,o in pairs(Z)do self:RemoveItem(p,o*a0)end;return true end;function c:RemoveItem(p,o,S)o=math.max(o||1,1)local q,u=self:SolveToken(p)local K=u&&self:Hash(u)local U=o;local L=self:FindSlotsWith(q.id,K)if!L then return false end;local W={}local a1={}for O,Q in ipairs(L)do local cell=self.items[Q]if!cell then continue end;local Y=math.min(cell.count,U)U=U-Y;cell.count=cell.count-Y;if cell.count<=0 then self.items[Q]=nil;table.insert(a1,Q)else table.insert(W,Q)end end;if!S then self:SyncCells(W,a1)end;self:SaveCells(W,a1)return U!=o,U,o-U end;function c:SwitchCells(a2,a3,a4)if a2==a3 then a4()return end;local H=self.items[a2]local I=self.items[a3]if!H then a4()return end;H.index=a3;self.items[a3]=H;if I then I.index=a2;self.items[a2]=I else self.items[a2]=nil end;local a5={H.index,I&&I.index||nil}local a6={!I&&a2||nil}self:SaveCells(a5,a6,function()self:SyncCells(a5,a6,true)a4()end)return true end;function c:MoveStack(a7,a8,o,a4)if a7==a8 then a4()return end;local a9=self.items[a7]local aa=self.items[a8]if!a9 then a4()return end;o=math.min(a9.count,o)if aa then if a9.itemid!=aa.itemid then return end;if a9.hash&&a9.hash!=aa.hash then return end;o=math.min(srp.inventory.MaxStack-aa.count,o)if o<=0 then return end;aa.count=aa.count+o;a9.count=a9.count-o else aa=table.Copy(a9)aa.index=a8;aa.count=o;self.items[a8]=aa;a9.count=a9.count-o end;local ab={aa.index}local a1={}if a9.count<=0 then self.items[a9.index]=nil;table.insert(a1,a9.index)else table.insert(ab,a9.index)end;self:SaveCells(ab,a1,function()self:SyncCells(ab,a1)a4()end)return true end;function c:GetItemCount(p,ac)local q,u=self:SolveToken(p)local K=u&&self:Hash(u)local o=0;for ad,cell in pairs(self.items)do if cell.itemid!=q.id then continue end;if cell.hash&&cell.hash!=K then continue end;o=o+(cell.count||0)end;if ac then return o>=ac else return o end end;function c:HasItem(p,o)return self:GetItemCount(p,o||1)end;function c:HasItems(Z,a0)a0=a0||1;for p,o in pairs(Z)do if!self:GetItemCount(p,o*a0)then return false end end;return true end;function c:ClientUse(cell,o)if!self.items[cell.index]then return end;net.Start'srp.inventory.Use'net.WriteString(self.id)net.WriteUInt(cell.index,srp.inventory.MaxSlotBits)net.WriteUInt(o||1,srp.inventory.MaxStackBits)net.SendToServer()end;function c:ClientDeposit(ae,cell,o)if!self.items[cell.index]then end;net.Start'srp.inventory.Deposit'net.WriteString(ae.id)net.WriteUInt(cell.index,srp.inventory.MaxSlotBits)net.WriteUInt(o||1,srp.inventory.MaxStackBits)net.SendToServer()end;function c:SetPlayer(j)self:SetController(srp.inventory.PLAYER,j)self:Subscribe(j,true)return self end;function c:SetStorage(j)self:SetController(srp.inventory.STORAGE,j)return self end;function c:SetShop(j)self:SetController(srp.inventory.SHOP,j)return self end;function c:IsPlayer()return self.mode==srp.inventory.PLAYER end;function c:IsStorage()return self.mode==srp.inventory.STORAGE end;function c:IsShop()return self.mode==srp.inventory.SHOP end;function c:WriteCell(cell)net.WriteUInt(cell.index,srp.inventory.MaxSlotBits)net.WriteString(cell.itemid)net.WriteUInt(cell.count,srp.inventory.MaxStackBits)if cell.hash then net.WriteBool(true)net.WriteString(cell.hash)net.WriteTable(cell.meta)else net.WriteBool(false)end end;function c:ReadCell()local Q=net.ReadUInt(srp.inventory.MaxSlotBits)if Q==0 then return end;local J=net.ReadString()local o=net.ReadUInt(srp.inventory.MaxStackBits)local v={index=Q,itemid=J,count=o}if net.ReadBool()then v.hash=net.ReadString()v.meta=net.ReadTable()end;return v end;function c:SyncCells(af,ag,ah)net.Start'srp.inventory.Sync'net.WriteString(self.id)net.WriteBool(ah)for O,ai in ipairs(af)do local cell=self.items[ai]if cell then self:WriteCell(cell)end end;net.WriteUInt(0,srp.inventory.MaxSlotBits)if ag then for O,ai in ipairs(ag)do net.WriteUInt(ai,srp.inventory.MaxSlotBits)end end;net.WriteUInt(0,srp.inventory.MaxSlotBits)net.Send(receivers||self.subscribers)end;function c:SyncAll(receivers,aj)net.Start'srp.inventory.Instance'net.WriteBool(aj)net.WriteString(self.id)net.WriteUInt(self.mode,3)net.WriteString(self.name)net.WriteColor(self.color)self:WriteController()for ai,cell in pairs(self.items)do if cell then self:WriteCell(cell)end end;net.WriteUInt(0,srp.inventory.MaxSlotBits)net.Send(receivers||self.subscribers)end;function c:SaveCells(ak,ag,al)if CLIENT||!self.persist||!(ak||ag)then if al then al()end;return end;local am=0;local an=0;local function ao()am=am+1;if am>=an then if al then al()end end end;if ak then an=table.Count(ak)for O,ai in ipairs(ak)do local cell=self.items[ai]self:Save(cell,ao)end end;if ag then an=an+table.Count(ag)for O,ai in ipairs(ag)do self:SaveRemove(ai,ao)end end end;function c:Save(cell,al)srp.inventory.UpdateItem(self,cell,al)end;function c:SaveRemove(ai,al)srp.inventory.DeleteItem(self,ai,al)end;function PLAYER:GetInventory()return self.Inventory end;function PLAYER:AddInventoryItems(n,o,z,S)return self.Inventory:AddItems(n,o,z,S)end;function PLAYER:AddInventoryItem(J,o,u,z,S)return self.Inventory:AddItem(J,o,nil,z,S)end;function PLAYER:HasInventoryItem(q,o)return self.Inventory:HasItem(q,o)end;function PLAYER:HasInventoryItems(n,a0)return self.Inventory:HasItems(n,a0)end;function PLAYER:InventoryHasSpace(n,o)return self.Inventory:HasSpace(n,o)end;function PLAYER:RemoveInventoryItem(q,o)return self.Inventory:RemoveItem(q,o)end;function PLAYER:TakeInventoryItem(q,o)return self.Inventory:RemoveItem(q,o)end;function PLAYER:GetInventoryItemCount(q)return self.Inventory:GetItemCount(q)end;function PLAYER:RemoveInventoryItems(n,a0)return self.Inventory:RemoveItems(n,a0)end;function PLAYER:TakeInventoryItems(n,a0)return self.Inventory:RemoveItems(n,a0)end;function srp.inventory.Instance(ad,h,ap)ad=srp.inventory.ConvertID(ad)if a[ad]then print('Inventory was already instantiated. Replacing.',ad)a[ad]=nil end;local aq={id=ad,persist=ap}setmetatable(aq,c)aq:Init()aq:SetName(h||ad)a[ad]=aq;return aq end;function srp.inventory.RegisterControllerMode(i,N)N=N||{}b[i]=N end;function srp.inventory.GetControllerMode(i)return b[i]end;function srp.inventory.ConvertID(ar)return IsEntity(ar)&&tostring(ar:IsPlayer()&&ar:CharacterID()||ar:EntIndex())||tostring(ar)end;function srp.inventory.Remove(ad)ad=srp.inventory.ConvertID(ad)a[ad]=nil end;function srp.inventory.Get(ad)ad=srp.inventory.ConvertID(ad)return a[ad]end;srp.inventory.RegisterControllerMode(srp.inventory.PLAYER,{MaxSlotsFunc=function(self,j)local l=j:GetGroup()&&srp.inventory.MaxSlots||srp.inventory.MaxNonBatSlots;local as=j:GetUpgradeCount('skill_weight')*2+math.min(j:GetTalentLevel('labourer'),30)return l+as end,CanDeposit=function(self,G)return G.mode==srp.inventory.STORAGE||G.mode==srp.inventory.GROUP end,CanSubscribe=function(self,s)return self.id==tostring(s:CharacterID())end,CanUILeftClick=function(self,F,cell,G)if!G then return true elseif self:CanDeposit(G)then return true,'Deposit'end end,CanUIRightClick=function(self,F,cell,G)return!G&&!cell.item.nodrop end,DoUILeftClick=function(self,F,cell,o,G)if!G then self:ClientUse(cell,o)elseif self:CanDeposit(G)then self:ClientDeposit(G,cell,o)end end,DoUIRightClick=function(self,F,cell,o,G)if!G&&!cell.item.nodrop then srp.inventory.RequestDrop(self,cell,o)end end,DoUse=function(self,s,cell,q,o)local at=q.interaction&&q.interaction.Use;if!at||!self:SetCooldown(s,q,at)then return false end;local au=math.min(at.count||o,o)local av=at.callback(q,s,self,cell,au)if av==true then return self:RemoveItem(cell,o)elseif isnumber(av)then return self:RemoveItem(cell,av)end end,WriteController=function(self)net.WriteEntity(self.controller)end,ReadController=function(self)return net.ReadEntity()end})srp.inventory.RegisterControllerMode(srp.inventory.SHOP,{CanSwitchCells=false,CanUILeftClick=function(self,F,cell,o,G)local aw=F:GetCurrencyName()local ax=F:GetCurrencyAmount()return true,'Purchase for '..string.Comma(ax)..' '..aw end,CanUIRightClick=function(self,F,cell,o,G)return false end,DoUILeftClick=function(self,F,cell,o,G)self:ClientUse(cell,o)end,DoUse=function(self,s,cell,q,o)if!q.cost&&!q.trade then return false end;local ay=q.tradeamount&&q.tradeamount*o||q.cost*o;if q.trade&&!s:HasInventoryItem(q.trade,ay)then return false end;ay=math.ceil(ay-ay*s:GetImprintValue('barter',0))if!s:HasMoney(ay)then return false end;if s:AddInventoryItem(cell,o)then if q.trade then s:TakeInventoryItem(q.trade,ay)else s:TakeMoney(ay)end;return self:RemoveItem(cell,o)else return false end end,WriteController=function(self)net.WriteString(self.controller.id)end,ReadController=function(self)return srp.inventory.GetShop(net.ReadString())end})srp.inventory.RegisterControllerMode(srp.inventory.GROUP,{CanSwitchCells=false,MaxSlotsFunc=function(self,j)return 84+j:GetUpgrade('storageweight')*6 end,CanSubscribe=function(self,s)local az=s:GetGroup()if!az then return false end;local aA=az:GetParent(true)return self.id==aA.id end,CanUILeftClick=function(self,F,cell,o,G)return true,'Withdraw'end,CanUIRightClick=function(self,F,cell,o,G)return false end,DoUILeftClick=function(self,F,cell,o,G)self:ClientUse(cell,o)end,DoUse=function(self,s,cell,q,o)if!self:CanSubscribe(s)then return false end;local az=s:GetGroup()local aB=s:GetGroupRank()if!az||!aB||!aB:HasPermission'storagewithdraw'then return false end;if s:AddInventoryItem(cell,o)then hook.Run('OnGroupInventoryWithdraw',self,s,cell,q,o)return self:RemoveItem(cell,o)else return false end end,DoDeposit=function(self,s,cell,q,o)if s:RemoveInventoryItem(cell,o)then hook.Run('OnGroupInventoryDeposited',self,s,cell,q,o)return self:AddItem(cell,o)else return false end end,WriteController=function(self)net.WriteString(self.controller.id)end,ReadController=function(self)return srp.groups.Get(net.ReadString())end})
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/inventory/ui/item_ui.lua:
local a={InventoryCell=true}local b=Color(200,200,200,50)local c=Color(255,255,255,15)local d=Material'gui/gradient_up'local e=Material'gui/gradient_down'local f=Material('materials/galactic/ui/foods/package.png','noclamp smooth')local g=Color(255,213,25)local h=Color(25,25,25,150)local i=utf8.char(0xf005)local j=Material'materials/galactic/ui/padlock.png'function a:Init()self:SetText''self:SetBorderColor(col.transparent)self:AddPanel('DImage',function(k)k:Dock(FILL)k:SetMouseInputEnabled(false)k:SetKeyboardInputEnabled(false)k:SetDragParent(self)k:DockMargin(10,10,10,10)self.icon=k end)self:AddPanel('srp_panel_rounded',function(l)l:DockPadding(2,0,2,0)l:SetVisible(false)l:SetBackgroundColor(col.transparent)l:SetMouseInputEnabled(false)l:AddPanel('srp_label',function(m)m:SetText'x0'm:SetFont'ui_label.r'm:SetContentAlignment(5)m:SetWide(48)m:Dock(FILL)m:SetMouseInputEnabled(false)m:SetKeyboardInputEnabled(false)m:SetTextColor(col.white)m:SetDragParent(self)m:DockMargin(0,0,0,0)m:DockPadding(0,0,0,0)self.count=m end)self.countcontainer=l end)self:MiddleClick(function(n)if input.IsMouseDown(MOUSE_MIDDLE)then srp.items.ToggleFavourite(n.item)end end)self:LeftClick(function(n,o,p)local q,r=input.GetCursorPos()n.WaitingDrag={x=q,y=r}end,function(n)if n:IsDragging()then n.WaitingDrag=false;n:StopDragAndDrop()else n:PrimaryUse()end end)self:RightClick(function(n,o,p)self:SecondaryUse()end)hook('OnItemFavouritesLoaded',self,self.LoadFavourite)hook('OnItemFavourited',self,self.SetFavourite)end;function a:Think()if!self.WaitingDrag||!self.CanSwitchCells then return end;local q,r=input.GetCursorPos()if math.abs(q-self.WaitingDrag.x)>=8||math.abs(r-self.WaitingDrag.y)>=8 then self.WaitingDrag=nil;self:StartDragAndDrop()end end;function a:LoadFavourite()if self.item then self.IsFaved=srp.items.IsFavourite(self.item)end end;function a:SetFavourite(s,t)if self.item&&self.item.id==s.id then self.IsFaved=t end end;function a:PrimaryUse()if!self.inventory||!self.cell then return end;local u=self.inventory:CanUILeftClick(self,self.cell,self.childInventory)if!u then return end;if input.IsShiftDown()then self.inventory:DoUILeftClick(self,self.cell,5,self.childInventory)return end;if input.IsKeyDown(KEY_LCONTROL)then srp.ui.Create('srp_requestvalue',function(l)l:SetTitle'Select Quantity'l:SetText'Select the amount you want to interact with.'l:SetWide(320)l:Center()l:OnInputPanelCreated(function(n,input)input:SetText(1)input:SetMinMax(1,self.itemcount)input:SetNumberInput(true,true,1)end)l:OnSubmit(function(n,v)if!IsValid(self)||!self.cell then return end;v=tonumber(v)if v&&v>0 then self.inventory:DoUILeftClick(self,self.cell,math.ceil(v),self.childInventory)end;n:Remove()end)end)return end;self.inventory:DoUILeftClick(self,self.cell,1,self.childInventory)end;function a:SecondaryUse()if!self.cell||!self.inventory then return end;local w=self.inventory:CanUIRightClick(self,self.cell,self.childInventory)if!w then return end;if input.IsShiftDown()then self.inventory:DoUIRightClick(self,self.cell,5,self.childInventory)return end;if input.IsKeyDown(KEY_LCONTROL)then srp.ui.Create('srp_requestvalue',function(l)l:SetTitle'Select Quantity'l:SetText'Select the amount you want to interact with.'l:SetWide(320)l:Center()l:OnInputPanelCreated(function(n,input)input:SetText(1)input:SetMinMax(1,self.itemcount)input:SetNumberInput(true,true,1)end)l:OnSubmit(function(n,v)if!IsValid(self)||!self.cell then return end;v=tonumber(v)if v&&v>0 then self.inventory:DoUIRightClick(self,self.cell,math.ceil(v),self.childInventory)end;n:Remove()end)end)return end;self.inventory:DoUIRightClick(self,self.cell,1,self.childInventory)end;function a:UpdateCell(x)x.item=x.item||srp.items.Get(x.itemid)x.hash=x.hash||x.meta&&self.inventory:Hash(x.meta)||nil;self.cell=x;self.item=x.item;self.itemcount=x.count;if!self.item then self:SetEmpty()return end;local s=self.item;self.IsFaved=srp.items.IsFavourite(s)self.icon:SetVisible(true)self.icon:SetMaterial(s.icon)if s.color then self.icon:SetImageColor(s.color)else self.icon:SetImageColor(col.white)end;self.count:SetText(string.Comma(self.itemcount))local y=s.tradecolor||b;self.countcontainer:SetVisible(true)local z='+'..string.Comma(self.itemcount)local A;local B;local C,D=self.inventory:CanUILeftClick(self,self.cell,self.childInventory)if!C then elseif D then A=D elseif s.interaction&&s.interaction.Use then A=s.interaction.Use.label||'Use'end;local w,E=self.inventory:CanUIRightClick(self,self.cell,self.childInventory)if w then B=E||'Drop'end;self:SetTooltipPanelOverride'srp_itemtip'self:SetTooltip({item=s,cell=x,count=z,mouse1=A,mouse2=B,mouse1icon=self:GetCurrencyMaterial()})self:SetDisabled(false)if s.tradecolor then local F,n,G=ColorToHSL(s.tradecolor)self.GradientBackground=s.tradecolor;self.GradientBackgroundAlt=HSLToColor(F,n,G*1.1)end end;function a:Populate(H,I,J,K)self.index=H;self.inventory=I;self.inventoryId=I.id;self.CanSwitchCells=I.CanSwitchCells!=false;self.childInventory=J;self.childInventoryId=self.childInventoryId;self.MaxSlots=K end;function a:SetItem(x)if!x then self:SetEmpty()else self:UpdateCell(x)end end;function a:SetEmpty()self.cell=nil;self.item=nil;self.IsFaved=nil;self.CanSwitchCells=false;self.icon:SetVisible(false)self.count:SetText''self:SetDisabled(true)self.GradientBackground=nil;self.GradientBackgroundAlt=nil;if self.MaxSlots<self.index then self.Unavailable=true end;self:SetTooltipPanelOverride(nil)self:SetTooltip(nil)end;function a:RemovedItem(L,M)if L.id==self.inventoryId&&self.index==M then self:SetEmpty()end end;function a:GetCurrencyName()if self.item.trade then local N=srp.items.Get(self.item.trade).name;return N[#N]=='s'&&N||N..'s'else return LocalPlayer():GetCurrency()end end;function a:GetCurrencyAmount()return self.item.tradeamount||self.item.cost||0 end;function a:GetCurrencyMaterial()return self.item.trade&&srp.items.Get(self.item.trade).icon||f end;function a:RequestValueStackCell(O,P,Q)srp.ui.Create('srp_requestvalue',function(l)l:SetTitle'Select Quantity'l:SetText'Select the amount you want to interact with.'l:SetWide(320)l:Center()l:OnInputPanelCreated(function(n,input)input:SetText(1)input:SetMinMax(1,Q)input:SetNumberInput(true,true,1)end)l:OnSubmit(function(n,v)if!IsValid(self)||!IsValid(P)||!O.cell then n:Remove()return end;v=tonumber(v)if v&&v>0 then srp.inventory.RequestMoveStack(O.inventory,O,P,math.min(v,Q))end;n:Remove()end)end)end;function a:ReceivedDragger(l)if!l.InventoryCell||!l.cell||self.inventoryId!=l.inventoryId then return end;local O,P=l,self;local R=input.IsKeyDown(KEY_LSHIFT)if self.inventory:IsMatchingCell(O.cell,P.cell)then local Q=math.min(O.cell.count,srp.inventory.MaxStack-P.cell.count)if Q<=0 then return end;if R then self:RequestValueStackCell(O,P,Q)else srp.inventory.RequestMoveStack(O.inventory,O,P,input.IsKeyDown(KEY_LCONTROL)&&math.min(5,Q)||Q)end elseif R&&!P.cell then self:RequestValueStackCell(O,P,O.cell.count)else srp.inventory.RequestSwitchCells(O.inventory,O,P)end;if O.item then O:SetDisabled(true,2)end;if P.item then P:SetDisabled(true,2)end end;function a:PerformLayout(S,F)if IsValid(self.countcontainer)then self.countcontainer:SetSize(S,15)self.countcontainer:SetPos(0,F-15)end end;function a:Paint(S,F)if self.item&&self:IsHovered()then draw.Box(0,0,S,F,self.GradientBackgroundAlt||c)return end;if self.GradientBackground then surface.SetDrawColor(self.GradientBackgroundAlt)surface.SetMaterial(e)surface.DrawTexturedRect(0,0,S,F)surface.SetDrawColor(self.GradientBackground)surface.SetMaterial(d)surface.DrawTexturedRect(0,0,S,F)draw.Box(2,2,S-4,F-4,col.midnight_light)else draw.Box(0,0,S,F,col.midnight_light)end;if self.Unavailable then surface.SetDrawColor(255,255,255,15)surface.SetMaterial(j)surface.DrawTexturedRect(16,16,S-32,S-32)end;surface.SetDrawColor(self.m_bdrColor)surface.DrawOutlinedRect(0,0,S,F)end;function a:PaintOver(S,F)if self.item&&self.IsFaved then draw.DrawText(i,'SSRPForkAwesome',2,2,g,TEXT_ALIGN_LEFT)end end;function a:OnRemove()hook.Remove('OnItemFavouritesLoaded',self)hook.Remove('OnItemFavourited',self)end;vgui.Register('srp_inventory_item',a,'srp_button')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/items/item_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/items/itemconsumes_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/items/affixes/affixes_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/items/resources/collectables_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/items/scrapping/ui/scrapmachine_ui.lua:
local a={}local b=Material'materials/galactic/ui/foods/package.png'local c=Material'materials/galactic/arena/chevron.png'local d=Color(0,0,0,100)local e=Color(0,0,0,50)local f=Color(0,150,0,150)function a:Init()self:SetTitle'Scrap Machine'self:MakePopup()self:SetSize(720,400)self:Center()self:SetBackgroundColor(col.midnight)self:SetAlpha(0)self:AlphaTo(255,.2,0)self:AddPanel('srp_label',function(g)g:SetText'Break down your items into basic materials'g:Dock(TOP)g:SetContentAlignment(5)g:SetTextColor(col.white)g:SetTall(70)g:SetFont'ui_header.r'end)self:AddPanel('srp_panel_rounded',function(h)h:SetSize(128,128)h:DockMargin(0,0,0,0)h:DockPadding(0,0,0,0)h:SetBorderColor(col.midnight_light)h:SetBackgroundColor(col.midnight_light)h:AddPanel('srp_inventoryitem',function(h)h:Dock(FILL)h:DockMargin(0,0,0,0)h:SetTextColor(col.white)h:OnSelected(function(h,i,j,k)self.count:SetMinMax(1,k)self.SelectedItem=i;self.Item=nil end)h:OnFilterItem(function(h,i)if i&&i.scrap then return true end end)h.PaintOver=function(l,m,n)if l.ItemCount then surface.DisableClipping(true)draw.WordBox(1,m/2,-2,'    x'..l.ItemCount..'    ','ui_header.s',col.black,col.white,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)surface.DisableClipping(false)end end;self.invitem=h end)self.container=h end)self:AddPanel('srp_panel',function(o)o:DockMargin(0,0,0,0)o:SetSize(200,128)o:SetBackgroundColor(col.transparent)o.Paint=function(l,m,n)surface.SetMaterial(c)surface.SetDrawColor(col.midnight_light)surface.DrawTexturedRectRotatedPoint(m*.25,n/2,100,100,-90,0,0)surface.DrawTexturedRectRotatedPoint(m*.5,n/2,100,100,-90,0,0)surface.DrawTexturedRectRotatedPoint(m*.75,n/2,100,100,-90,0,0)if self.Running then self.NextChevron=(self.NextChevron||0)+RealFrameTime()/1*5;local p=math.ceil(self.NextChevron%3)surface.SetDrawColor(f)surface.DrawTexturedRectRotatedPoint(m*.25*p,n/2,100,100,-90,0,0)end end;self.chevrons=o end)self:AddPanel('srp_panel_rounded',function(q)q:SetSize(128,128)q:SetBorderColor(col.midnight_light)q:SetBackgroundColor(col.midnight_light)q:DockMargin(0,0,0,0)q:SetText''q.PaintOver=function(l,m,n)if self.ItemCount then surface.DisableClipping(true)draw.WordBox(1,m/2,-2,'    x'..self.ItemCount..'    ','ui_header.s',col.black,col.white,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)surface.DisableClipping(false)end;m,n=m-24,n-24;surface.SetDrawColor(255,255,255,self.Item&&255||100)surface.SetMaterial(self.Item&&self.Item.icon||b)surface.DrawTexturedRect((m-m)/2+12,(n-n)/2+12,m,n)end;self.scrap=q end)self:AddPanel('srp_panel_rounded',function(h)h:SetBackgroundColor(e)h:SetSize(250,50)h:AddPanel('srp_button_rounded',function(h)h:Dock(RIGHT)h:SetText'Recycle Items'h:DockMargin(0,0,0,0)h:SetBackgroundColor(col.midnight_dark)h:SetHoverColor(col.midnight_light)h:LeftClick(function(l)if self.Running then srp.scrapping.End(self.Scrapper)elseif self.SelectedItem then self.invitem.ItemCount=self.count:GetValue()srp.scrapping.Start(self.Scrapper,self.SelectedItem,self.count:GetValue())end end)self.recycle=h end)h:AddPanel('srp_numberinput_rounded',function(h)h:Dock(FILL)h:DockMargin(0,0,4,0)h:SetMinMax(1,500000)h:SetValue(1)h:SetBackgroundColor(col.transparent)h:SetTextColor(col.white)self.count=h end)self.controls=h end)hook('OnScrappingStart',self,self.OnStart)hook('OnScrappingEnd',self,self.OnEnd)hook('OnScrappingProgress',self,self.OnProgress)end;function a:OnRemove()hook.Remove('OnScrappingStart',self)hook.Remove('OnScrappingEnd',self)hook.Remove('OnScrappingProgress',self)end;function a:OnStart(r,i)if r!=self.Scrapper then return end;self.Running=true;self.Item=i;self.ItemCount=0;self.invitem:SetDisabled(true)end;function a:OnEnd(r)if r!=self.Scrapper then return end;self.invitem:SetDisabled(false)self.Running=false;self.recycle:SetText'Recycle Items'self.recycle:SetBackgroundColor(col.grey)self.recycle:SetHoverColor(col.grey_dark)end;function a:OnProgress(r,s,t,k)if r!=self.Scrapper then return end;if!self.Running then self:OnStart(r,t)end;self.recycle:SetText'Stop'self.recycle:SetBackgroundColor(col.red_dark)self.recycle:SetHoverColor(col.red_dark)self.invitem:SetItem(s,{},1)self.Item=t;self.ItemCount=(self.ItemCount||0)+(k||1)self.invitem.ItemCount=r:GetItemCount()-1 end;function a:PerformLayout(m,n)self.close:SetPos(m-30,2)if IsValid(self.container)then self.container:SetPos((m-128)*.20,(n-128)*.5)end;if IsValid(self.chevrons)then self.chevrons:SetPos((m-200)*.5,(n-128)*.5)end;if IsValid(self.scrap)then self.scrap:SetPos((m-128)*.80,(n-128)*.5)end;if IsValid(self.controls)then self.controls:SetPos((m-250)*.5,(n-50)*.85)end end;vgui.Register('srp_scrapmachine',a,'srp_window')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/jail/jails_cl.lua:
srp.jail=srp.jail||{}local a='ssrp/'..info.WebID..'/ticketinfo/'local b='ssrp/'..info.WebID..'/ticketsgiven/'local c;local d;local e;function srp.jail.OpenHistory(f,g)if IsValid(c)then c:Remove()end;srp.ui.Create('srp_jails',function(h)h:Center()h:MakePopup(true)h:SetHistory(f,g)c=h end)end;function srp.jail.OpenBail()if IsValid(e)then e:Remove()end;srp.ui.Create('srp_bail',function(h)e=h end)end;function srp.jail.GetPlayerTickets(i,j)ba.http.FetchJson(a..i,function(k)j(true,k)end,function()j(false)end)end;function srp.jail.GetGivenTickets(l,j)ba.http.FetchJson(b..l,function(k)j(true,k)end,function()j(false)end)end;function srp.jail.GetCharacters(i)ba.http.FetchJson(ticketcharacters..i,function(k)hook.Run('OnPlayerCharactersLoaded',k)end)end;function srp.jail.OpenMenu(m,n)if IsValid(d)then d:Remove()end;srp.ui.Create('srp_jailticket',function(h)h:Populate(m,n)d=h end)end;function srp.jail.UpdateTicket(n)end;function srp.jail.GetBailables()net.Start'srp.jail.SendBailable'net.SendToServer()end;function srp.jail.CreateTicket(n)local o=srp.jail.GetReason(n.reasonid,true).sevdata;if!o then return end;net.Start'srp.jail.IssueTicket'net.WriteString(n.criminalsteamid)net.WriteUInt(n.criminalid,32)net.WriteString(n.description:sub(0,512))net.WriteUInt(n.reasonid,7)net.WriteUInt(math.Clamp(n.duration,o.mintime,o.maxtime),6)net.WriteBool(n.cooperative)net.WriteBool(n.arrest)net.WriteBool(n.bail)if n.bail then net.WriteUInt(n.bailamt,24)end;net.WriteUInt(#n.officers,7)for p,q in ipairs(n.officers)do net.WritePlayer(q)end;net.SendToServer()end;net('srp.jail.Bail',function()hook.Run('OnPlayerBailed',net.ReadPlayer())end)net('srp.jail.SendBailable',function()local r=net.ReadUInt(8)local s={}for t=1,r do s[#s+1]={Player=net.ReadPlayer(),Amount=net.ReadUInt(16)}end;hook.Run('OnBailablesLoaded',s)end)net('srp.jail.IssueTicket',function()local n;local u=net.ReadUInt(32)local v=net.ReadUInt(32)local w=net.ReadString()local x=player.GetBySteamID(w)local n={issuerid=u,criminal=x,criminalid=v,criminalsteamid=w,criminalname=IsValid(x)&&x:Nick()||w}if net.ReadBool()then n.description=net.ReadString()n.reasonid=net.ReadUInt(7)n.duration=net.ReadUInt(6)n.cooperative=net.ReadBool()n.arrest=net.ReadBool()n.bail=net.ReadBool()if n.bail then n.bailamt=net.ReadUInt(24)end;local y=net.ReadUInt(7)n.officers={}for t=1,y do local q=net.ReadPlayer()if IsValid(q)then table.insert(n.officers,q)end end end;srp.notif.FlashConfirm('ticketpending','Ticket Pending','A pending ticket for '..n.criminalname..' is waiting for you.',180,'Fill Out',function()srp.jail.OpenMenu(n)end)end)net('srp.jail.TicketIssued',function()if IsValid(d)then d:Remove()end;srp.notif.Success(3,'Ticket issued')hook.Run('OnJailTicketIssued')end)net('srp.jail.TicketStatus',function()hook.Run('OnJailTicketStatusChanged',net.ReadUInt(32),net.ReadUInt(3))end)net('srp.jail.OpenTickets',function()local z=net.ReadBool()if IsValid(srp.jail.tickets)then srp.jail.tickets:Populate(z&&net.ReadString()||nil)srp.jail.tickets:Show()return end;srp.ui.Create('srp_tickets',function(h)h:Populate(z&&net.ReadString()||nil)srp.jail.tickets=h end)end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/jail/ui/playerbutton_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/jail/ui/ticketcreate_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/leaderboard/leaderboard_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/loadouts/ui/loadoutmoduleslot_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/loginrewards/ui/loginrewards_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/map/doors/ui/agent_ui.lua:
local a={}a.HouseIcon=Material'sup/hud/istyping'local b=col.green:Copy()b.a=200;local c=col.blue_light:Copy()c.a=200;local d=col.red:Copy()d.a=200;local e=col.white:Copy()e.a=50;function a:Init()self:SetSize(800,600)self:Center()self:MakePopup()self:DockPadding(1,1,1,1)self:SetBackgroundColor(col.white_dark)self:SetLoading(true,1,'Connecting to Agency Database',col.white_dark,self.HouseIcon,nil,col.grey_light)self:AddPanel('srp_panel',function(f)f:SetSize(1600,600)f:SetPos(0,0)f:DockPadding(0,0,0,0)f:SetBackgroundColor(col.transparent)f:SetBorderColor(col.transparent)f:AddPanel('srp_agentheader',function(g)g:Dock(LEFT)g:SetWide(800)g:DockMargin(0,0,0,0)end)f:AddPanel('srp_panel',function(h)h:Dock(FILL)h:DockPadding(20,20,20,20)h:DockMargin(0,0,0,0)h:SetBackgroundColor(col.transparent)h:AddPanel('ui_scrollpanel',function(i)i:Dock(FILL)i:DockMargin(0,0,0,0)self.scroll=i end)end)self.container=f end)self:AddPanel('srp_button',function(j)j:DockMargin(0,0,0,0)j:SetText'Explore'j:SetFont'ui_label.l'j:SetTextColor(col.blue_light)j:SetBackgroundColor(col.white_dark)j:SetHoverColor(col.white_dark)j:SetPos(0,569)j:SetSize(100,30)j:CenterHorizontal()j:SetContentAlignment(5)j:MoveToFront()j:LeftClick(function(k)if self.Closing then self:Remove()else k:SetText'Close'k:SetTextColor(col.red_light)self:Next()self.Closing=true end end)end)self:DisplayAgency()end;function a:Next()self.container:MoveTo(-800,0,.25,0,1)end;function a:DisplayAgency()srp.ui.Create('srp_grid',function(l)l:SetAutoHeight(true)l:Dock(TOP)l:SetSpacing(10,10,true)for m,n in ipairs(srp.doors.GetGroups())do if n.Public||IsValid(n.Owner)&&n.Owner!=LocalPlayer()then continue end;srp.ui.Create('srp_agentproperty',function(f)f:Populate(n)l:AddItem(f)end)end;self.scroll:AddItem(l)end)end;vgui.Register('srp_agent',a,'srp_panel_rounded')local a={}function a:Init()self:SetSize(170,190)self:DockPadding(5,30,15,5)self:AddPanel('srp_label',function(o)o:Dock(TOP)o:SetFont'ui_label.l'o:SetMouseInputEnabled(false)o:SetTextColor(col.grey_light)o:SetWrap(true)o:SetTall(35)o:SetContentAlignment(7)self.name=o end)self:AddPanel('srp_label',function(o)o:Dock(TOP)o:SetWrap(true)o:SetTall(120)o:SetContentAlignment(7)o:SetMouseInputEnabled(false)o:SetTextColor(col.grey_light)self.description=o end)self:AddPanel('srp_button_rounded',function(o)o:SetContentAlignment(5)o:SetSize(78,22)o:SetText'0 RC'o:SetBackgroundColor(col.white)o:SetHoverColor(col.white)o:LeftClick(function()if self.purchased then cmd.Run('sellproperty')elseif self.Cost then srp.notif.Confirm({title='Property Purchase',sub_text='Are you sure you want to buy this property? If the property is marked as BUSINESS then you must use it for public-facing business and roleplay.',pid=self.pid,callback=function(n)cmd.Run('buypropertyid',n.pid)end})end end)self.price=o end)self:AddPanel('srp_button_rounded',function(o)o:SetContentAlignment(5)o:SetSize(78,22)o:SetText'Residential'o:SetBackgroundColor(col.grey)o:SetHoverColor(col.grey)o:SetMouseInputEnabled(false)self.status=o end)self:AddPanel('srp_button_rounded',function(o)o:SetContentAlignment(5)o:SetSize(78,22)o:SetText'Can Build'o:SetBackgroundColor(col.orange)o:SetHoverColor(col.orange)o:SetMouseInputEnabled(false)o:SetVisible(false)self.construction=o end)hook('OnDoorOwned',self,self.DoorOwned)hook('OnDoorUnowned',self,self.DoorRemove)end;function a:OnRemove()hook.Remove('OnDoorOwned',self)hook.Remove('OnDoorUnowned',self)end;function a:DoorOwned(p,m)if self.pid==m then self.price:SetText(p:Nick()||'Owned')self.price:MoveToFront()self.price:SetWide(160)self.purchased=true end end;function a:DoorRemove(m)if self.pid==m then self.price:SetText(self.Cost)self.price:MoveToFront()self.price:SetWide(78)self.purchased=false end end;function a:Populate(q)self.name:SetText(q.Name)self.description:SetText(q.Description||'')self.pid=q.id;if q.Price then self.Cost=q.Price;self.price:SetText(q.Price..' RC')if LocalPlayer():HasMoney(q.Price)then self.price:SetBackgroundColor(col.blue_light)self.price:SetHoverColor(col.blue_light)else self.price:SetBackgroundColor(col.red)self.price:SetHoverColor(col.red)end end;if q.Owner&&IsValid(q.Owner)then self:DoorOwned(q.Owner,q.id)end;if q.Business then self.status:SetBackgroundColor(b)self.status:SetHoverColor(b)self.status:SetText'Business'end;self.construction:SetVisible(q.Construction==true)end;function a:PerformLayout(r,s)self.price:SetPos(r-self.price:GetWide()-5,5)self.status:SetPos(5,5)self.construction:SetPos(5,163)end;local t=Color(0,0,0,55)local u=Color(0,0,0,100)function a:Paint(r,s)draw.RoundedBox(6,0,0,r,s,(self:IsHovered()||self.price:IsHovered()||self.status:IsHovered())&&u||t)end;vgui.Register('srp_agentproperty',a,'srp_panel_rounded')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/map/funcmodules/ui/funcmodulewarning_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/npc/dialogues/dialogue_sh.lua:
srp.dialogue=srp.dialogue||{}srp.dialogue.data=srp.dialogue.data||{}local a=function(b,c)chat.AddText(col.red,"Dialogue not implemented!")return false end;function srp.dialogue.FindByID(b)for d,e in pairs(srp.dialogue.data)do if e.id&&e.id:lower()==b:lower()then return e,d end end;return nil end;function srp.dialogue.Register(f)f.Close=function(self,g)srp.dialogue.Close(g,self)end;srp.dialogue.data[f.id]=f end
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/npc/dialogues/dialoguecustom_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/player/util/animations_sh.lua:
local a={"jaw_drop","left_part","right_part","left_mouth_drop","right_mouth_drop"}local function b(self)self.LastModelName=self.LastModelName||''self.FlexIndexCache=self.FlexIndexCache||{}local c=self:GetModel()if c!=self.LastModelName then self.LastModelName=c;for d=1,#a do table.insert(self.FlexIndexCache,self:GetFlexIDByName(a[d]))end end;return self.FlexIndexCache end;function GM:HandlePlayerSwimming(e,f,g)if!g then g=e:GetTable()end;if e:WaterLevel()<2||e:IsOnGround()then g.m_bInSwim=false;return false end;g.CalcIdeal=ACT_MP_SWIM;g.m_bInSwim=true;return true end;function GM:MouthMoveAnimation(e)local h=e:IsSpeaking()if moveMouth!=true then return end;local i=math.Clamp(e:VoiceVolume()*2,0,2)for j,k in ipairs(b(self))do if k!=nil then e:SetFlexWeight(k,i)end end end;function GM:HandlePlayerJumping(e,f,g)if!g then g=e:GetTable()end;if e:IsNoClip()then g.m_bJumping=false;return end;if!g.m_bJumping&&!e:OnGround()&&e:WaterLevel()<=0 then if!g.m_fGroundTime then g.m_fGroundTime=CurTime()elseif CurTime()-g.m_fGroundTime>0&&f:Length2DSqr()<0.25 then g.m_bJumping=true;g.m_bFirstJumpFrame=false;g.m_flJumpStartTime=0 end end;if g.m_bJumping then if g.m_bFirstJumpFrame then g.m_bFirstJumpFrame=false;e:AnimRestartMainSequence()end;if e:WaterLevel()>=2||CurTime()-g.m_flJumpStartTime>0.2&&e:OnGround()then g.m_bJumping=false;g.m_fGroundTime=nil;e:AnimRestartMainSequence()end;if g.m_bJumping then g.CalcIdeal=ACT_MP_JUMP;return true end end;return false end;function GM:HandlePlayerDucking(e,f,g)if!g then g=e:GetTable()end;if!e:IsFlagSet(FL_ANIMDUCKING)then return false end;if f:Length2DSqr()>0.25 then g.CalcIdeal=ACT_MP_CROUCHWALK else g.CalcIdeal=ACT_MP_CROUCH_IDLE end;return true end;function GM:HandlePlayerNoClipping(e,f,g)if!g then g=e:GetTable()end;if!e:IsNoClip()||e:InVehicle()then if g.m_bWasNoclipping then g.m_bWasNoclipping=nil;e:AnimResetGestureSlot(GESTURE_SLOT_CUSTOM)if CLIENT then e:SetIK(true)end end;return end;if!g.m_bWasNoclipping then e:AnimRestartGesture(GESTURE_SLOT_CUSTOM,ACT_GMOD_NOCLIP_LAYER,false)if CLIENT then e:SetIK(false)end end;return true end;function GM:HandlePlayerVaulting(e,f,g)if!g then g=e:GetTable()end;if f:LengthSqr()<1000000 then return end;if e:IsOnGround()then return end;g.CalcIdeal=ACT_MP_SWIM;return true end;function GM:HandlePlayerLanding(e,f,l)if e:IsNoClip()then return end;if e:IsOnGround()&&!l then e:AnimRestartGesture(GESTURE_SLOT_JUMP,ACT_LAND,true)end end;function GM:HandlePlayerDriving(e,g)if!g then g=e:GetTable()end;if!e:InVehicle()||!IsValid(e:GetParent())then return false end;local m,n=hook.Run("HandlePlayerDrivingAnimation",e)if n||m then g.CalcSeqOverride=n||g.CalcSeqOverride;g.CalcIdeal=m||g.CalcIdeal;return true end;local o=e:GetVehicle()if!o.HandleAnimation&&o.GetVehicleClass then local p=o:GetVehicleClass()local q=list.Get("Vehicles")[p]if q&&q.Members&&q.Members.HandleAnimation then o.HandleAnimation=q.Members.HandleAnimation else o.HandleAnimation=true end end;if isfunction(o.HandleAnimation)then local r=o:HandleAnimation(e)if r!=nil then g.CalcSeqOverride=r end end;if g.CalcSeqOverride==-1 then local s=o:GetClass()if s=="prop_vehicle_jeep"then g.CalcSeqOverride=e:LookupSequence("drive_jeep")elseif s=="prop_vehicle_airboat"then g.CalcSeqOverride=e:LookupSequence("drive_airboat")elseif s=="prop_vehicle_prisoner_pod"&&o:GetModel()=="models/vehicles/prisoner_pod_inner.mdl"then g.CalcSeqOverride=e:LookupSequence("drive_pd")else g.CalcSeqOverride=e:LookupSequence("sit_rollercoaster")end end;local t=g.CalcSeqOverride==e:LookupSequence("sit_rollercoaster")||g.CalcSeqOverride==e:LookupSequence("sit")if t&&e:GetAllowWeaponsInVehicle()&&IsValid(e:GetActiveWeapon())then local u=e:GetActiveWeapon():GetHoldType()if u=="smg"then u="smg1"end;local n=e:LookupSequence("sit_"..u)if n!=-1 then g.CalcSeqOverride=n end end;return true end;function GM:UpdateAnimation(e,f,v)if e:IsCuffed()||e:GetCustomBoneAnim()then return end;local w=f:Length()local x=1.0;if w>0.2 then x=w/v end;local y=math.min(x,1)if e:WaterLevel()>=2 then y=math.max(y,0.5)elseif!e:IsOnGround()&&w>=1000 then y=0.1 end;if e:Alive()&&IsValid(e:GetActiveWeapon())then if e:GetActiveWeapon().IsLightsaber then e:SetPlaybackRate(e.SeqOverrideRate||y)else e:SetPlaybackRate(y)end end;if CLIENT then if e:InVehicle()then local z=e:GetVehicle()local A=z:GetPoseParameter("vehicle_steer")A=A*2-1;if z:GetClass()=="prop_vehicle_prisoner_pod"then A=0;e:SetPoseParameter("aim_yaw",math.NormalizeAngle(e:GetAimVector():Angle().y-z:GetAngles().y-90))end;e:SetPoseParameter("vehicle_steer",A)end;GAMEMODE:GrabEarAnimation(e)end end;function GM:GrabEarAnimation(e,g)if!g then g=e:GetTable()end;g.ChatGestureWeight=g.ChatGestureWeight||0;if e:IsPlayingTaunt()then return end;if e:IsTyping()then g.ChatGestureWeight=math.Approach(g.ChatGestureWeight,1,FrameTime()*5.0)else g.ChatGestureWeight=math.Approach(g.ChatGestureWeight,0,FrameTime()*5.0)end;if g.ChatGestureWeight>0 then e:AnimRestartGesture(GESTURE_SLOT_VCD,ACT_GMOD_IN_CHAT,true)e:AnimSetGestureWeight(GESTURE_SLOT_VCD,g.ChatGestureWeight)end end;function GM:CalcMainActivity(e,f)local g=e:GetTable()g.CalcIdeal=ACT_MP_STAND_IDLE;g.CalcSeqOverride=-1;self:HandlePlayerLanding(e,f,e.m_bWasOnGround)if!(self:HandlePlayerNoClipping(e,f,g)||self:HandlePlayerDriving(e,g)||self:HandlePlayerVaulting(e,f,g)||self:HandlePlayerJumping(e,f,g)||self:HandlePlayerSwimming(e,f,g)||self:HandlePlayerDucking(e,f,g))then local B=f:Length2DSqr()if B>22500 then g.CalcIdeal=ACT_MP_RUN elseif B>0.25 then g.CalcIdeal=ACT_MP_WALK end end;g.m_bWasOnGround=e:IsOnGround()g.m_bWasNoclipping=e:IsNoClip()&&!e:InVehicle()return g.CalcIdeal,g.CalcSeqOverride end
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/polling/polls_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/quests/ui/quest_stats_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/quests/ui/quest_step_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/quests/ui/quest_step_voting_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/quests/ui/quest_ui.lua:
local a={}local b=350;local c=50;function a:Init()self:DockPadding(4,10,4,10)self:SetAlpha(0)self:AlphaTo(255,0.5,0)self:SetSize(b,c)self:SetPos(ScrW()-b,0)self:SetBackgroundColor(col.transparent)self:AddPanel('srp_panel',function(d)d:SetBackgroundColor(col.transparent)d:SetTall(30)d:Dock(TOP)d:DockMargin(0,0,0,0)d:DockPadding(0,0,0,0)d:AddPanel('srp_label',function(e)e:Dock(FILL)e:SetText''e:SetFont'ui_header.r'self.Title=e end)d:AddPanel('srp_label',function(e)e:SetWide(100)e:Dock(RIGHT)e:SetText'Step 0/0'e:SetFont'ui_header.s'e:SetContentAlignment(6)self.Steps=e end)self.Header=d end)self:AddPanel('srp_quest_step',function(d)d:Dock(TOP)d.HeightChanged=function(f,g)if!IsValid(self)then return end;local h=self.Daily&&0||50;self:SetTall(g+h)self:CenterVertical(.45)end;self.Step=d end)self.StepID=0;hook('OnQuestStepChanged',self,self.OnStepChanged)end;function a:Populate(i)self.IsCompleted=false;self.Quest=i;self.Daily=i:GetType()==srp.quests.TYPE_DAILY;self.Header:SetVisible(!self.Daily)self.Header:SetTall(self.Daily&&0||30)if self.Daily then self:DockPadding(25,0,4,0)self.Header:SetVisible(false)self.Header:SetTall(2)else self.Header:SetVisible(true)self.Header:SetTall(30)end;local j=srp.invasion.FormatString(i:GetName(),i.interalData)self.Title:SetText(j)local k=i:GetStep()if k then self:AddStep(k)end end;function a:OnStepChanged(i,l)if self.Quest.instanceid==i.instanceid then self:AddStep(self.Quest:GetStep())end end;function a:AddStep(k)self.StepID=k.stepid;self.Steps:SetText('Step '..self.StepID..'/'..#self.Quest.steps)self.Step:Populate(self.Quest,k)end;function a:Completed()self.IsCompleted=true;self:AlphaTo(0,1,0,function()if IsValid(self)then self:Remove()end end)end;local m=Color(102,183,240,100)function a:PaintOver(n,g)if!self.IsCompleted then return end;surface.SetDrawColor(0,0,0,255)surface.DrawRect(0,0,n,g)if self.Daily then surface.SetDrawColor(81,162,221)surface.DrawOutlinedRect(0,0,n,g,1)else surface.SetDrawColor(100,200,100)surface.DrawOutlinedRect(0,0,n,g,1)end end;vgui.Register('srp_quest',a,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/realtimestrategy/ui/rtsaction_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/realtimestrategy/ui/rtsactioncontainer_ui.lua:
local a={}local b=Material'gui/gradient_up'local c=Material'gui_gradient_up'local d=Material'materials/galactic/ui/character_orb.png'local e=Material'materials/galactic/ui/character_orb_inner.png'local f={[KEY_PAD_0]=10,[KEY_PAD_1]=1,[KEY_PAD_2]=2,[KEY_PAD_3]=3,[KEY_PAD_4]=4,[KEY_PAD_5]=5,[KEY_PAD_6]=6,[KEY_PAD_7]=7,[KEY_PAD_8]=8,[KEY_PAD_9]=9}function a:Init()local g,h=ScrW(),ScrH()local i=math.min(math.max(g-g*.6,800),g-40)self.ActionButtons={}self:SetSize(i,114)self:SetPos((g-i)/2,h-114)self:DockMargin(0,0,0,0)self:DockPadding(0,0,0,0)self:SetAlpha(0)self:AlphaTo(255,1,0)self:AddPanel('srp_button',function(j)j:SetText' Command Panel'j:SetFont'ui_label.rb'j:Dock(TOP)j:SetTall(30)j:SetContentAlignment(4)j:DockPadding(0,0,0,0)j:DockMargin(0,0,0,0)j:SetTextColor(col.white)j:SetBorderColor(col.white)j:LeftClick(function(k)k:SetDisabled(true,.3)if self.Hidden then self.Hidden=false;self:AlphaTo(255,.3,0)self:MoveTo(self.x,ScrH()-114,.15,.15,2)k:SetTextColor(col.white)else self.Hidden=true;self:MoveTo(self.x,ScrH()-30,.15,0,2)self:AlphaTo(25,.15,.15,function()if IsValid(k)then k:SetTextColor(col.white_dark)end end)end end)self.title=j end)self:AddPanel('srp_button_rounded',function(l)l:SetClose()l:SetTextColor(col.white)l:SetSize(30,26)l:SetPos(i-33,2)l:SetContentAlignment(5)l:DockPadding(0,0,0,0)l:SetHoverColor(col.transparent)l:SetBackgroundColor(col.transparent)l:MoveToFront()l:LeftClick(function(m)cmd.Run('rts')self:GetParent():Remove()end)self.close=l end)self.ControlPanel=self:AddMode(ACTIONMODE_CONTROL,true,RIGHT,188,function(m,n)return table.FilterCopy(srp.rts.GetAll(),function(o)return!(o:IsContextual()||o:IsUnit())end)end)self.UnitPanel=self:AddMode(ACTIONMODE_UNIT,false,FILL,nil,function(m,n)return table.FilterCopy(srp.rts.GetAll(),function(o)return o:IsUnit()end)end)hook('PlayerBindPress',self,function(p,q,r,s)if!s||p!=self then return end;if r=='impulse 100'then return true elseif r=='+menu_context'then return true elseif r:find('slot')==1 then return true end end)hook('PlayerButtonDown',self,function(p,q,t)if p!=self||!IsFirstTimePredicted()then return end;local u=input.IsKeyDown(KEY_LALT)local v=f[t]if t==KEY_F then self.title:ForceLeftClick()elseif t==KEY_C then if u then self.ControlPanel:TryOpenConfig()else self.UnitPanel:TryOpenConfig()end elseif v then self:_OnRequestCreateGroup(v,u)else if!self.ControlPanel:TrySelectSlot(t,u)then self.UnitPanel:TrySelectSlot(t)end end end)end;function a:OnRemove()hook.Remove('PlayerButtonDown',self)hook.Remove('PlayerBindPress',self)end;function a:SetTitle(w)self.title:SetText(w)end;function a:FilterActions(x)self.UnitPanel:FilterActions(x)self.ControlPanel:FilterActions(x)end;function a:DoAction(y,z,A)self.UnitPanel:DoAction(y,z,A)self.ControlPanel:DoAction(y,z,A)end;function a:AddMode(n,B,C,i,D)self.title:SetBackgroundColor(col.midnight_light)self.title:SetHoverColor(col.midnight_light)self.title:SetBorderColor(col.midnight_light)return self:AddPanel('srp_rtsactions',function(p)p:SetSmallMode(true)p:Dock(C)p:Populate(self:GetParent())p:OnFilter(D)p:OnActionRequested(function(m,E,F)self:_OnActionRequested(m,E,F,self.EntitySelection)end)p:SetMode(n,B)if i then p:SetWide(i)end end)end;function a:OnActionRequested(G)self._OnActionRequested=G;return self end;function a:_OnActionRequested()end;function a:OnActionModeChanged(G)self._OnActionModeChanged=G;return self end;function a:_OnActionModeChanged()end;function a:OnRequestCreateGroup(G)self._OnRequestCreateGroup=G;return self end;function a:_OnRequestCreateGroup(H,I)end;function a:Paint(J,K)draw.Box(0,0,J,K,srp.rts.Style.background)end;vgui.Register('srp_rtsactioncontainer',a,'srp_panel')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/realtimestrategy/ui/configs/rtscfg_npc_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/server/sky/sky_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/server/statistics/statcapture_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/simroom/simroom_cl.lua:
srp.simroom=srp.simroom||{}function srp.simroom.Toggle(a)net.Start'srp.simroom.ToggleStatus'net.WriteUInt(a,3)net.SendToServer()end
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/simroom/ui/simroom_display_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/simroom/ui/simroom_ui.lua:
local a=1.5;local b={}function b:Init()self:SetTitle'Simroom Spawner'self:SetBackgroundColor(col.midnight_light)self:DockPadding(10,40,10,10)self:SetSize(1200,600)self:MakePopup()self:Center()hook('OnSimroomStatusChanged',self,self.OnStatusChanged)self:AddPanel('srp_panel_rounded',function(c)c:Dock(LEFT)c:SetWide(250)c:DockMargin(10,10,10,10)c:SetBackgroundColor(col.midnight)c:AddPanel('srp_panel_rounded',function(c)c:Dock(TOP)c:DockMargin(1,1,1,1)c:SetTall(34)c:AddPanel('srp_button_rounded',function(d)d:Dock(LEFT)d:SetWide(32)d:SetFont'SSRPForkAwesome'd:SetText(0xf04b,true)d:DockMargin(1,1,1,1)d:SetBackgroundColor(col.blue_dark)d:SetHoverColor(col.blue)d:SetDisabled(true)d:SetTooltip('Start/Stop Simulation')d:LeftClick(function(e)e:SetDisabled(true,5)srp.simroom.Toggle(self.Internal)end)self.Status=d end)c:AddPanel('srp_button_rounded',function(d)d:Dock(LEFT)d:SetWide(32)d:SetFont'SSRPForkAwesome'd:SetText(0xf093,true)d:DockMargin(1,1,1,1)d:SetBackgroundColor(col.green_dark)d:SetHoverColor(col.green)d:SetTooltip('Apply spawns')d:LeftClick(function(e)e:SetDisabled(true,5)self:Build()end)self.Save=d end)c:AddPanel('srp_button_rounded',function(d)d:Dock(RIGHT)d:SetWide(32)d:SetFont'SSRPForkAwesome'd:SetText(0xf067,true)d:DockMargin(1,1,1,1)d:SetBackgroundColor(col.midnight_light)d:LeftClick(function()self.SimroomDisplay:NewNode()end)end)c:AddPanel('srp_button_rounded',function(d)d:Dock(RIGHT)d:SetWide(32)d:SetFont'SSRPForkAwesome'd:SetText(0xf068,true)d:DockMargin(1,1,1,1)d:SetBackgroundColor(col.midnight_light)d:LeftClick(function()self.SimroomDisplay:RemoveLastNode()end)end)c:AddPanel('srp_button_rounded',function(d)d:Dock(RIGHT)d:SetWide(32)d:SetFont'SSRPForkAwesome'd:SetText(0xf1f8,true)d:DockMargin(1,1,1,1)d:SetBackgroundColor(col.midnight_light)d:LeftClick(function()self.SimroomDisplay:ClearNodes()end)end)end)self.Settings=c end)self:AddPanel('srp_simroom_display',function(c)c:Dock(FILL)c:DockMargin(10,10,10,10)c:SetBackgroundColor(col.midnight)self.SimroomDisplay=c end)self:AddOption('Waves','Waves',function(c)return c:AddPanel('srp_slider',function(c)c:Dock(FILL)c:SetMinMax(1,srp.simroom.MaxWaves)c:SetValue(1)c:SetInterval(0,1)end)end)self:AddOption('WaveDelay','Wave Delay',function(c)return c:AddPanel('srp_slider',function(c)c:Dock(FILL)c:SetMinMax(2,srp.simroom.MaxWaveDelay)c:SetValue(2)c:SetInterval(0,1)end)end)self:AddOption('MinSpawns','Min Spawns',function(c)return c:AddPanel('srp_slider',function(c)c:Dock(FILL)c:SetMinMax(1,srp.simroom.MaxSpawns)c:SetValue(1)c:SetInterval(0,1)end)end)end;function b:OnStatusChanged(f,g)if f!=self.Controller then return end;if g then self.Status:SetBackgroundColor(col.red_dark)self.Status:SetHoverColor(col.red)self.Status:SetText(0xf04c,true)else self.Status:SetBackgroundColor(col.blue_dark)self.Status:SetHoverColor(col.blue)self.Status:SetText(0xf04b,true)end end;function b:AddOption(h,i,j)self.Settings:AddPanel('srp_panel_rounded',function(c)c:DockMargin(2,5,2,5)c:SetBackgroundColor(col.midnight_dark)c:Dock(TOP)c:SetTall(45)c:AddPanel('srp_label',function(k)k:Dock(TOP)k:SetTall(10)k:SetText(i)k:SetFont'ui_label.r'end)self.Settings[h]=j(c)end)end;function b:Populate(f,l)self.Controller=f;self.Internal=f:GetSimRoom()self:OnStatusChanged(self.Controller,f:GetRunning())local m=srp.simroom.Get(self.Internal,true)if m then self:DisplaySimroom(m,l)else self:Remove()return end;if l then self.Status:SetDisabled(false)self:Load(l)end end;function b:DisplaySimroom(m,n)self.Simroom=m;self.SimroomDisplay:Populate(m,n)end;function b:Build()local o=self.SimroomDisplay:Build()if#o==0 then return end;net.Start'srp.simroom.Create'srp.simroom.Write(self.Simroom,{internal=self.Simroom.internal,Waves=math.Clamp(self.Settings.Waves:GetValue(),1,srp.simroom.MaxWaves),WaveDelay=math.Clamp(self.Settings.WaveDelay:GetValue(),2,srp.simroom.MaxWaveDelay),MinSpawns=math.Clamp(self.Settings.MinSpawns:GetValue(),1,srp.simroom.MaxSpawns),Spawns=o})net.SendToServer()self.Status:SetDisabled(false)end;function b:Load(l)self.Settings.Waves:SetValue(l.Waves)self.Settings.WaveDelay:SetValue(l.WaveDelay)self.Settings.MinSpawns:SetValue(l.MinSpawns)for p,q in pairs(l.Spawns)do self.SimroomDisplay:Load(q)end end;function b:OnRemove()hook.Remove('OnSimroomStatusChanged',self)end;vgui.Register('srp_simroom',b,'srp_window')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/talents/entity_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/talents/meta_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/talents/talent_cl.lua:
srp.talents=srp.talents||{}net('srp.talents.DisablePassives',function()hook.Run('OnTalentPassivesToggled',net.ReadBool())end)net('srp.talents.SyncSession',function()LocalPlayer().joined=net.ReadUInt(32)end)net('srp.talents.Deselect',function()srp.talents.ClearTree(LocalPlayer(),net.ReadString())end)net('srp.talents.DeselectAll',function()srp.talents.ClearSelectedTalents(LocalPlayer())end)net('srp.talents.Xp',function()local a=LocalPlayer()local b=net.ReadString()local c=net.ReadUInt(32)local d=net.ReadBool()local e=c-a:GetTalentXP(b)if d then surface.PlaySound'friends/friend_online.wav'end;a:SetTalentXP(c,b)srp.notif.FlashXPDrop(b,c,e,5)if b!='default'then a.TalentXP.default=(a.TalentXP.default||0)+e end;hook.Run('OnTalentXPReceived',b,c,e,d)end)net('srp.talents.SyncXp',function()local a=LocalPlayer()a.TalentXP={}a.TalentLevel={}local f=net.ReadUInt(8)for g=1,f do local treeid=net.ReadString()local c=net.ReadUInt(32)a.TalentXP[treeid]=c;a.TalentLevel[treeid]=srp.talents.GetLevelFromXP(c,treeid)a:UpdatePassiveTalents(treeid)end;hook.Run'OnTalentsSynced'end)net('srp.talents.SelectSync',function()local a=LocalPlayer()local h=net.ReadUInt(4)a.TalentSelect={}for g=1,h do local treeid=net.ReadString()local i=net.ReadUInt(4)for j=1,i do local k=net.ReadUInt(4)local b=net.ReadUInt(7)local l=srp.talents.Get(treeid)if!l then continue end;local m=l.talents[k].options[b]if m then srp.talents.ProcessTalent(a,l,m,b)end end end;hook.Run'OnTalentsSelectSynced'end)net('srp.talents.Select',function()local treeid=net.ReadString(treeid)local k=net.ReadUInt(4)local b=net.ReadUInt(7)local l=srp.talents.Get(treeid)if!l then return end;local m=l.talents[k].options[b]if m then srp.talents.ProcessTalent(LocalPlayer(),l,m,b)hook.Run('OnTalentSelected',treeid,k,b)end end)concommand.Add('talent_calc',function(a,n,o,p)if#o==0 then print("{target_level:50} {basexp:75} {vipmultiplier:1} {booster:2}")return end;local q=tonumber(o[1])||50;local r=tonumber(o[2])||75;local s=tonumber(o[3])||1.75;local t=tonumber(o[4])||2;if!q||q<=0||r<=0 then return end;local u=srp.talents.GetXPTable('default')||{0}local v=u[q]||u[1]local w=0;local x=0;while w<v do x=x+1;if math.random()<0.15 then w=w+r*s*t end end end,nil)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/talents/talent_sh.lua:
srp.talents=srp.talents||{}srp.talents.trees=srp.talents.trees||{}srp.talents.trees_mapped={}srp.talents.xpwrap=40;srp.talents.maxlevel=150;local a={}local b={}local c={}local function d(e)if!e then return'default'end;if srp.talents.trees[e]then e=srp.talents.trees[e].xpid end;return a[e]&&e||'default'end;function srp.talents.ClearTree(f,g)f.TalentXP={default=0}f.TalentLevel={default=0}f.TalentPassives={}f.TalentCooldown={default=0}f.Talents={}f.TalentSelect={}hook.Run('OnTalentsCleared',f,g)end;function srp.talents.ClearSelectedTalents(f)f.Talents={}f.TalentSelect={}hook.Run('OnTalentsCleared',f)end;function srp.talents.AddTalent(e,h)h.id=e;b[e]=h;if h.key then c[h.key]=c[h.key]||{}c[h.key][h.id]=h end;return h end;function srp.talents.GetTalent(e)return b[e]end;function srp.talents.GetTalents()return b end;function srp.talents.GetTalentsWithKey(i)return c[i]end;function srp.talents.AddTree(e,h)h.id=e;if h.talents then for j,k in pairs(h.talents)do for e,l in ipairs(k.options)do h.talents[j].options[e].tierid=j end end end;h.xpid=h.xpid||'default'h.internal=table.insert(srp.talents.trees_mapped,h)srp.talents.trees[e]=h;return h end;function srp.talents.Get(e)return srp.talents.trees[e]end;function srp.talents.GetAll(m)return m&&srp.talents.trees_mapped||srp.talents.trees end;function srp.talents.GetLevel(n,e)e=d(e)return a[e][math.Min(n||0,#a[e])]end;function srp.talents.GetLevels(e)e=d(e)return a[e]end;function srp.talents.FormatValue(f,o)local p=f:GetGroup()local q=p&&f:GetGroupClass()local r=p&&p.id;if q&&q:HasPermission('jedi')then r='JEDI'end;return isnumber(o)&&o||r&&o[r]||o.default||0 end;function srp.talents.ProcessTalent(f,s,t,e)local u=f:GetSelectedTalent(s.id,t.tierid)local v=u&&s.talents[t.tierid].options[u]if u==e then return end;if v then f:AddTalentValue(v.talent,-srp.talents.FormatValue(f,v.value))end;f:AddTalentValue(t.talent,srp.talents.FormatValue(f,t.value))f:SelectTalent(s.id,t.tierid,e)end;function srp.talents.GetLevelFromXP(w,e)if!w then return 0 end;e=d(e)for x=1,#a[e]do local y=a[e][x]if y>w then return x-1 end end;return srp.talents.maxlevel end;function srp.talents.AddXPTable(e,z)a[e]=z()end;function srp.talents.GetXPTable(e)e=d(e)return a[e]end;srp.talents.AddXPTable('default',function()local w=0;local A={}A[0]=0;for B=1,srp.talents.maxlevel do w=w+5000*B;A[#A+1]=math.floor(w/2)end;return A end)
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/time/time_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/trading/ui/inventoryselect_listitem_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/training/ui/traininginfo_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/training/ui/trainingplcode_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/training/ui/trainingplcode_ui.lua:
local a={Paint=function()end}local b=Material('materials/galactic/ui/menu/forums.png','smooth noclamp nomips')local c=Material('materials/galactic/ui/menu/trello.png','smooth noclamp nomips')local d=Material('materials/galactic/ui/menu/discord.png','smooth noclamp nomips')local e=Color(10,10,10,220)function a:Init()self:GetParent().blur=false;if ScrH()<=720 then self.paddingw=ScrW()*.5 else self.paddingw=ScrW()*.25 end;self:SetBackgroundColor(col.transparent)self:DockPadding(self.paddingw,80,self.paddingw,0)self:DockMargin(0,0,0,0)self:AddPanel('srp_label',function(f)f:Dock(TOP)f:SetContentAlignment(4)f:SetTall(95)f:SetFont'ui_header.xl'self.title=f end)self:AddPanel('srp_label',function(f)f:Dock(TOP)f:SetContentAlignment(7)f:SetTall(100)f:SetFont'ui_label.l'f:SetWrap(true)self.text=f end)self:AddPanel('srp_grid',function(g)g:Dock(FILL)self.grid=g end)end;function a:Populate(h)self.step=h;self.title:SetText(h.title)self.text:SetText(h.text)self:CreateButton()if h.modules then self:DisplaySmallModules(h.modules)end;if h.sections then for i=1,#h.sections do self:AddPanel('srp_label',function(f)f:SetContentAlignment(7)f:SetSize((ScrW()-self.paddingw*2)*.33,300)f:SetFont'ui_label.r'f:SetText(h.sections[i])self.grid:AddItem(f)end)end end end;function a:DisplaySmallModules(j)self.text:SetTall(110)self:AddPanel('ui_scrollpanel',function(k)k:Dock(FILL)k:DockMargin(0,15,0,0)self:AddPanel('srp_grid',function(g)g:SetAutoHeight(true)g.x_space=1;k:AddItem(g)self.grid=g end)end)for l,m in pairs(j)do self:AddPanel('srp_panel',function(n)n:DockMargin(0,0,0,0)n:DockPadding(10,10,10,10)n:SetSize(190,285)n:SetBorderColor(col.black)n:SetBackgroundColor(col.transparent)n.Paint=function(o,p,q)surface.SetDrawColor(e)surface.DrawRect(0,0,p,q)surface.SetMaterial(m.icon)surface.SetDrawColor(255,255,255,175)surface.DrawTexturedRect(0,0,p,q)end;n:AddPanel('srp_label',function(f)f:Dock(TOP)f:SetContentAlignment(4)f:SetText(m.name)f:SetFont'ui_header.r'end)n:AddPanel('srp_label',function(f)f:Dock(FILL)f:SetContentAlignment(7)f:SetText(m.description)f:SetFont'ui_label.r'f:SetWrap(true)end)self.grid:AddItem(n)end)end end;vgui.Register('srp_training_basic',a,'srp_training_base')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/triumphs/ui/triumphtitle_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/triumphs/ui/triumphwindow_ui.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/trivia/ui/triviaview_ui.lua:
local a={}function a:Init()self:SetBackgroundColor(col.white)end;function a:Populate(b,c,d,e,f,g)self.Trivia=b;self.UIPosition=c;self.UIAngles=d;self.Position=b:LocalToWorld(c)self.Angles=b:LocalToWorldAngles(d)self:SetSize(f,g)self:Start3D(e)end;function a:Think()if IsValid(self.Trivia)then self.Position=self.Trivia:LocalToWorld(self.UIPosition)self.Angles=self.Trivia:LocalToWorldAngles(self.UIAngles)end end;function a:Start3D(e)self.IsThreeDimensional=true;hook.Add('PostDrawTranslucentRenderables',self,function()vgui.Start3D2D(self.Position,self.Angles,e)self:Paint3D2D()vgui.End3D2D()end)end;vgui.Register('srp_triviaview',a,'srp_panel_rounded')
--addons/!lpakr_out/gamemodes/srp_base/gamemode/modules/voice/radio_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/modules/activities/cloaking/cloaking_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/modules/activities/droideka/droideka_cl.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/modules/activities/jedi/sparring_sh.lua:
nw.Register'srp.spar':Write(net.WriteBool):Read(net.ReadBool):SetPlayer()srp.AddCommand('spar',function(a,b)local c=a:GetEyeTrace().Entity;if!IsValid(c)||!c:IsPlayer()then return end;if c:GetPos():Distance(a:GetPos())<=300 then srp.spar.RequestSpar(a,c)end end):AddAlias('sparring'):SetChatCommand():SetInfoSection('Jedi'):SetInfo('Send a spar request to the player you are looking at.').CanRun=function(self,a)return IsValid(a:GetActiveWeapon())&&a:GetActiveWeapon().IsLightsaber==true end;srp.AddCommand('sparquit',function(a,b)srp.spar.EndSpar(a,false)end):AddAlias('quitspar'):AddAlias('endspar'):SetInfoSection('Jedi'):SetInfo('Quit (and lose) the spar session.'):SetChatCommand().CanRun=function(self,a)return a.sparring==true end
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/modules/activities/jetpack/jetpack_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/modules/activities/jetpack/jetpack_sh.lua:
nw.Register'srp.jetpack':Write(net.WriteEntity):Read(net.ReadEntity):SetPlayer():SetHook('OnJetpackChanged')nw.Register'srp.player.jetfuel':Write(net.WriteUInt,10):Read(net.ReadUInt,10):SetPlayer()local a=4;local b=50;sound.Add({name='jetpack.Boost',sound={Sound('player/suit_sprint.wav')},volume=.2,level=50,pitch={100,105}})sound.Add({name='jetpack.Deny',sound={Sound('player/suit_denydevice.wav')},volume=.2,level=50,pitch={100,105}})function PLAYER:SetPropulsion(c)self._propulsion=math.Clamp(c,0,b)end;function PLAYER:AddPropulsion(c)self._propulsion=math.Clamp((self._propulsion||0)+c,0,b)end;function PLAYER:GetPropulsion()return self._propulsion||0 end;function PLAYER:GetJetpack()return self:GetNetVar'srp.jetpack'end;function PLAYER:SetJetpack(d)return self:SetNetVar('srp.jetpack',d)end;function PLAYER:SetFuel(e)self:SetNetVar('srp.player.jetfuel',e)end;function PLAYER:GetFuel()return self:GetNetVar('srp.player.jetfuel',0)||0 end;function PLAYER:AddFuel(e)local f=self:GetFuel()self:SetNetVar('srp.player.jetfuel',math.Clamp(f+e,0,500))end;keybind.Add('Toggle Jetpack',KEY_O,function(self,g)srp.jetpack.Toggle(g)end)keybind.Add('Remove Jetpack',KEY_P,function(self,g)srp.jetpack.Remove(g)end)hook('CalcMainActivity','CalcMainActivity',function(g)local h=g:GetJetpack()if!IsValid(h)||!h.GetEnabled||!h:GetEnabled()then return end;if!g:IsOnGround()&&g:GetFuel()>0 then return ACT_MP_SWIM,-1 end end)hook('PlayerTick','srp.propulsion',function(g,i)if SERVER&&!srp.gamemaster.GetToggle('jetpack')then return end;if g:IsNoClip()||g:IsOnGround()then return end;local h=g:GetJetpack()if!IsValid(g:GetJetpack())||!h:GetEnabled()then return end;local f=g:GetFuel()local j=i:GetVelocity()if g.JetpackBoost then g:SetFuel(f-15)g:EmitSound('jetpack.Boost')local k=g:GetAimVector()i:SetVelocity(k*800+Vector(0,0,600))g.JetpackBoost=false;return end;local l=i:KeyDown(IN_JUMP)&&f>0;if!l then g:AddPropulsion(-1)if f>0&&j.z<0&&!i:KeyDown(IN_DUCK)then j.z=Lerp(FrameTime()/1*4,j.z,math.max(-200,j.z))i:SetVelocity(j)end;return end;local m=i:GetMoveAngles()local n=g:GetPropulsion()local o=i:KeyDown(IN_SPEED)local p=j.z;if n<b then n=n+(o&&10||15)g:AddPropulsion(n)end;j=j+m:Right()*(i:KeyDown(IN_MOVELEFT)&&-15||i:KeyDown(IN_MOVERIGHT)&&15||0)j=j+m:Forward()*(i:KeyDown(IN_FORWARD)&&15||i:KeyDown(IN_BACK)&&-15||0)local q=o&&80||300;j.x=math.Clamp(j.x,-q,q)j.y=math.Clamp(j.y,-q,q)j.z=math.min(j.z+n,400)if o then j.x=Lerp(FrameTime()/1*3,j.x,0)j.y=Lerp(FrameTime()/1*3,j.y,0)j.z=19 end;i:SetVelocity(j)if SERVER&&(!g.lastfuel||g.lastfuel<CurTime())then g:AddFuel(o&&-2||-1)g.lastfuel=CurTime()+a end end)
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/modules/chat/chathandlers_sh.lua:
chat.Register'Jedi':Set('Tab','Group'):Write(chat.WriteCoreMessage):Read(function(self)return chat.ReadCoreMessage(self,col.green,'[JEDI] ')end):Filter(function(a,b)return filter.GetPermission'jedi'end)hook('ShouldSuppressChat',function(a,c,d)if d&&a:IsJEDI()then chat.Send('Jedi',a,c)return true end end)
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/modules/map/busmanager/ui/busloading_ui.lua:
local a={}local b=col.grey_dark:Copy()local c=Material('galactic/ui/bus.png','smooth noclamp')function a:Init()self:SetBackgroundColor(b)self:SetSize(ScrW(),ScrH())self:SetPos(0,0)self:SetAlpha(0)self:AlphaTo(255,1,0)self:AddPanel('srp_image',function(d)d:SetMaterial(c)d:SetSize(512,512)self.icon=d end)self:AddPanel('srp_label',function(e)e:SetText'Traveling to next station'e:SetFont'ui_header.xxl'e:SizeToContents()self.label=e end)end;function a:PerformLayout(f,g)local h=(g-512)*.3;self.icon:SetPos((f-512)*.5,h)self.label:SetPos((f-self.label:GetWide())*.5,h+520)end;function a:Think()if!IsValid(LocalPlayer():GetBus())then self:Remove()end end;vgui.Register('srp_bustravel',a,'srp_panel')
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/config/events/events_sh.lua:
srp.events.SetRooms({rp_liberator_sup_b8at={Pos=Vector(-4711,-2692,-13822),Walls={Small={{pos=Vector(-5527,-1913,-13544),ang=Angle(0,0,90),w=8000,h=1205},{pos=Vector(-3936,-3447,-13544),ang=Angle(0,180,90),w=8000,h=1205},{pos=Vector(-5527,-3447,-13544),ang=Angle(0,90,90),w=8000,h=1205},{pos=Vector(-3937,-1912,-13544),ang=Angle(0,-90,90),w=8000,h=1205}},Large={{pos=Vector(-5527,-1913,-13544),ang=Angle(0,0,90),w=8000,h=1205},{pos=Vector(-3936,-3447,-13544),ang=Angle(0,180,90),w=8000,h=1205},{pos=Vector(-5527,-3447,-13544),ang=Angle(0,90,90),w=8000,h=1205},{pos=Vector(-3937,-1912,-13544),ang=Angle(0,-90,90),w=8000,h=1205}}}}})
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/config/gamemaster/realtimestrategy/door_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/config/gamemaster/realtimestrategy/funcmodule_sh.lua:
srp.rts.Register'ctx_funcmodule':SetName'Toggle':SetIcon('icon16/lock_open.png'):SetServersideAction():SetContextual(function(self,a,b)return b.funcmodule end):OnSelected(function(self,c,d,e)srp.funcmodules.ToggleModule(c,d[1])end)
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/config/gifts_sh.lua:
gifts.Add('santasnaughtylist',{Unique=false,Name='Naughty List',Icon='materials/galactic/ui/triumphs/package.png',Description='You\'ve been a bad boy! Take this coal 2 titles to show how naughty you are!',Price=15000,Items={{'item','XMAS_COAL',25},{'achievement','naughtylist'}}})gifts.Add('santasnicelist',{Unique=true,Name='Nice List',Icon='materials/galactic/ui/triumphs/package.png',Description='You\'ve been a good boy! Receive/send every bundle!',Credits=10000,BuyForSelf=true,Items={{'achievement','nicelist'},{'gift','thebasics'},{'gift','northstar_red'},{'gift','northstar_purple'},{'gift','northstar_blue'},{'gift','frostedarrow_purple'},{'gift','frostedarrow_golden'},{'gift','frostedarrow_blue'},{'gift','santasstocking'},{'gift','festivefood'},{'gift','santassack'},{'gift','thebears'},{'message','and everything else!'}}})gifts.Add('thebasics',{Unique=false,Name='Back to Basics',Icon='materials/galactic/ui/triumphs/package.png',Description='The navigation package. Northstar effect and title.',Credits=3500,Items={{'money',35000},{'xp',10000,'luck'},{'xp',10000,'hacking'},{'xp',10000,'labourer'},{'xp',10000,'agility'},{'xp',10000,'jediforce'},{'xp',10000}}})gifts.Add('thebasicsrc',{Unique=true,Name='Back to Basics',Icon='materials/galactic/ui/triumphs/package.png',Description='The navigation package. Northstar effect and title.',Price=125000,Items={{'money',35000},{'xp',10000,'luck'},{'xp',10000,'hacking'},{'xp',10000,'labourer'},{'xp',10000,'agility'},{'xp',10000,'jediforce'},{'xp',10000}}})gifts.Add('thebears',{Unique=true,Name='Beary Xmas',Icon='materials/galactic/seasonal/christmas/elf.png',Description='For all your cudly needs. Comes with all bear pets.',Credits=2500,Items={{'cosmetic','christmas_demobear'},{'cosmetic','christmas_engibear'},{'cosmetic','christmas_heavybear'},{'cosmetic','christmas_medicbear'},{'cosmetic','christmas_pyrobear'},{'cosmetic','christmas_scoutbear'},{'cosmetic','christmas_spybear'},{'cosmetic','christmas_sniperbear'},{'cosmetic','christmas_soldierbear'},{'achievement','giftbearer'}}})gifts.Add('santasstocking',{Unique=true,Name='Santa\'s Sock',Icon='materials/galactic/seasonal/christmas/christmas sock.png',Description='A stocking full of gifts.',Credits=1000,Items={{'randcosmetic',1},{'money',20000},{'xp',1000},{'xp',1000,'luck'},{'xp',1000,'jediforce'},{'xp',1000,'crafting'},{'achievement','santasstocking'}}})gifts.Add('santassack',{Unique=true,Name='Santa\'s Sack',Icon='materials/galactic/seasonal/christmas/sack.png',Description='A sack full of gits.',Credits=1500,Items={{'randcosmetic',1},{'randcosmetic',1},{'money',45000},{'xp',3500},{'xp',3500,'luck'},{'xp',3500,'jediforce'},{'xp',3500,'crafting'},{'achievement','santassack'}}})gifts.Add('festivefood',{Unique=false,Name='Festive Food',Icon='materials/galactic/seasonal/christmas/pudding.png',Description='Snacks for your favourite friend(s).',Credits=550,Items={{'achievement','santasfestivefood'},{'item','XMAS_HOTCHOCOLATE',50},{'item','XMAS_FRIEDCHICKEN',50},{'item','XMAS_COOKIEMILK',50},{'item','FOOD_TURKEY',50},{'item','FOOD_XMASLOG',50},{'item','FOOD_GINGERBREAD',50},{'item','FOOD_CUPCAKE',50},{'item','XMAS_EGGNOG',50},{'item','XMAS_WINE',50},{'item','ALCOHOL_VODKA',50},{'item','ALCOHOL_MERENZANE',50},{'item','ALCOHOL_ARDEES',50},{'item','ALCOHOL_TATSUNSET',50}}})gifts.Add('frostedarrow_blue',{Unique=true,Name='Blue Arrow',Icon='materials/galactic/seasonal/christmas/arrows.png',Description='A cosmetic frozen arrow for the head.',Credits=1000,Items={{'money',25000},{'xp',2000},{'item','TOKEN_XMAS',25},{'cosmetic','effect_arrow_blue'}}})gifts.Add('frostedarrow_golden',{Unique=true,Name='Golden Arrow',Icon='materials/galactic/seasonal/christmas/arrows.png',Description='A cosmetic frozen arrow for the head.',Credits=1000,Items={{'money',25000},{'xp',2000},{'item','TOKEN_XMAS',25},{'cosmetic','effect_arrow_golden'}}})gifts.Add('frostedarrow_purple',{Unique=true,Name='Purple Arrow',Icon='materials/galactic/seasonal/christmas/arrows.png',Description='A cosmetic frozen arrow for the head.',Credits=1000,Items={{'money',25000},{'xp',2000},{'item','TOKEN_XMAS',25},{'cosmetic','effect_arrow_purple'}}})gifts.Add('northstar_blue',{Unique=true,Name='Blue Northstar',Icon='materials/galactic/seasonal/christmas/shooting star.png',Description='The navigation package. Northstar effect and title.',Credits=1000,Items={{'money',25000},{'xp',2000},{'item','TOKEN_XMAS',25},{'achievement','navigator'},{'cosmetic','effect_northstar_blue'}}})gifts.Add('northstar_purple',{Unique=true,Name='Purple Star',Icon='materials/galactic/seasonal/christmas/shooting star.png',Description='The navigation package. Northstar effect and title.',Credits=1000,Items={{'money',25000},{'xp',2000},{'item','TOKEN_XMAS',25},{'achievement','navigator'},{'cosmetic','effect_northstar_purple'}}})gifts.Add('northstar_red',{Unique=true,Name='Red Northstar',Icon='materials/galactic/seasonal/christmas/shooting star.png',Description='The navigation package. Northstar effect and title.',Credits=1000,Items={{'money',25000},{'xp',2000},{'item','TOKEN_XMAS',25},{'achievement','navigator'},{'cosmetic','effect_northstar_red'}}})
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/config/items/stores_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/config/items/items/weapons_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/config/map/spawnpoints/anaxes_sh.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/gamemode/config/map/spawnpoints/coruscantbelow_sh.lua:
srp.spawn.AddSpawnPoints('rp_coruscantbelow',{adminroom={Vector(-7156,-1760,-3168),Vector(-5862,-1760,-3168),Vector(-6389,-1760,-3168)},jails={REPUBLIC={{pos=Vector(6204,-6893,80),ang=Angle()},{pos=Vector(6204,-7047,80),ang=Angle()},{pos=Vector(6170,-6969,80),ang=Angle()},{pos=Vector(6204,-7202,80),ang=Angle()},{pos=Vector(6204,-7277,80),ang=Angle()},{pos=Vector(6170,-7360,80),ang=Angle()}},CIS={{pos=Vector(6204,-6893,80),ang=Angle()},{pos=Vector(6204,-7047,80),ang=Angle()},{pos=Vector(6170,-6969,80),ang=Angle()},{pos=Vector(6204,-7202,80),ang=Angle()},{pos=Vector(6204,-7277,80),ang=Angle()},{pos=Vector(6170,-7360,80),ang=Angle()}},CIVILIAN={{pos=Vector(6204,-6893,80),ang=Angle()},{pos=Vector(6204,-7047,80),ang=Angle()},{pos=Vector(6170,-6969,80),ang=Angle()},{pos=Vector(6204,-7202,80),ang=Angle()},{pos=Vector(6204,-7277,80),ang=Angle()},{pos=Vector(6170,-7360,80),ang=Angle()}}},groups={['NAVY']={pos=Vector(4127,11763,-32),ang=Angle(0,140,0),dir=Vector(-1,1,0)},['JEDI']={pos=Vector(4127,11763,-32),ang=Angle(0,140,0),dir=Vector(-1,1,0)},['CG']={pos=Vector(6021,-7373,48),ang=Angle(0,120,0),dir=Vector(-1,1,0)},['41ST']={pos=Vector(5180,-6733,48),dir=Vector(1,-1,0)},['32nd']={pos=Vector(4175,-7761,48),ang=Angle(0,180,0),dir=Vector(-1,1,0)},['RC']={pos=Vector(4180,-7381,48),ang=Angle(0,-153,0),dir=Vector(-1,1,0)},['ARC']={pos=Vector(4180,-6996,48),ang=Angle(0,-30,0),dir=Vector(-1,1,0)},['501ST']={pos=Vector(5180,-7082,48),ang=Angle(0,180,0),dir=Vector(1,-1,0)},['212TH']={pos=Vector(5180,-7468,48),ang=Angle(0,-180,0),dir=Vector(1,-1,0)},['327TH']={pos=Vector(5060,-8044,48),ang=Angle(0,-160,0),dir=Vector(-1,-1,0)},['187TH']={pos=Vector(5060,-8044,48),ang=Angle(0,-160,0),dir=Vector(-1,-1,0)},['104TH']={pos=Vector(3580,-7748,48),dir=Vector(-1,1,0)},['GM']={pos=Vector(3580,-7748,48),dir=Vector(-1,1,0)},['RM']={pos=Vector(3580,-7360,48),dir=Vector(-1,1,0)},['PLAZA']={pos=Vector(8668,7214,-46),dir=Vector(1,1,0)},['DOWNTOWN']={pos=Vector(6107,-4814,-38),dir=Vector(-1,-1,0)}},allegiances={['CIS']={pos=Vector(-7156,-1760,-3168),dir=Vector(1,-1,0)},['CIVILIAN']={pos=Vector(-2555,-3244,481),dir=Vector(-1,1,0)}},default={pos=Vector(4515,10672,0),ang=Angle(0,-140,0),dir=Vector(-1,-1,0)}})srp.spawn.AddCustomPoint('Plaza','ALL',{gridid='PLAZA',cooldown=10,permanent=true,textcolor=col.blue,outline=col.blue,map='rp_coruscantbelow'})srp.spawn.AddCustomPoint('Downtown','ALL',{gridid='DOWNTOWN',cooldown=10,permanent=true,textcolor=col.green,outline=col.green,map='rp_coruscantbelow'})
--addons/!lpakr_out/lua/weapons/cw_css_base/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/cw_css_base/shared.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/weapons/gmod_tool/stool_cl.lua:
function ToolObj:FreezeMovement()return false end;function ToolObj:DrawHUD()end
--addons/!lpakr_out/gamemodes/srp_base/entities/weapons/gmod_tool/stools/camera.lua:
TOOL.Category="Render"TOOL.Name="#tool.camera.name"TOOL.ClientConVar["locked"]="0"TOOL.ClientConVar["key"]="37"TOOL.ClientConVar["toggle"]="1"TOOL.Information={{name="left"},{name="right"}}cleanup.Register("cameras")local function a(b,c)if CLIENT then return true end;local d=false;for e,f in pairs(ents.FindByClass("gmod_cameraprop"))do if!f.controlkey||f.controlkey!=c then continue end;if IsValid(f:GetPlayer())&&b!=f:GetPlayer()then continue end;d=true;break end;if!d&&!b:CheckLimit("cameras")then return false end;return true end;local function g(b,c,h,i,j)if IsValid(b)&&!a(b,c)then return false end;local k=ents.Create("gmod_cameraprop")if!IsValid(k)then return end;duplicator.DoGeneric(k,j)if c then for e,f in pairs(ents.FindByClass("gmod_cameraprop"))do if!f.controlkey||f.controlkey!=c then continue end;if IsValid(b)&&IsValid(f:GetPlayer())&&b!=f:GetPlayer()then continue end;f:Remove()end;k:SetKey(c)k.controlkey=c end;k:SetPlayer(b)k.toggle=i;k.locked=h;k:Spawn()k:SetTracking(NULL,Vector(0))k:SetLocked(h)k:SetPropOwner(b)if i==1 then numpad.OnDown(b,c,"Camera_Toggle",k)else numpad.OnDown(b,c,"Camera_On",k)numpad.OnUp(b,c,"Camera_Off",k)end;if IsValid(b)then b:AddCleanup("cameras",k)b:AddCount("cameras",k)end;return k end;duplicator.RegisterEntityClass("gmod_cameraprop",g,"controlkey","locked","toggle","Data")function TOOL:LeftClick(l)local b=self:GetOwner()local c=self:GetClientNumber("key")if c==-1 then return false end;if!a(b,c)then return false end;if CLIENT then return true end;local h=self:GetClientNumber("locked")local i=self:GetClientNumber("toggle")local k=g(b,c,h,i,{Pos=l.StartPos,Angle=b:EyeAngles()})undo.Create("Camera")undo.AddEntity(k)undo.SetPlayer(b)undo.Finish()return true,k end;function TOOL:RightClick(l)local m,f=self:LeftClick(l,true)if CLIENT then return true end;if!IsValid(f)then return false end;if l.Entity:IsWorld()then l.Entity=self:GetOwner()l.HitPos=l.Entity:GetPos()end;if l.Entity:IsPlayer()then l.HitPos=l.Entity:GetPos()end;f:SetTracking(l.Entity,l.Entity:WorldToLocal(l.HitPos))return true end;local n=TOOL:BuildConVarList()function TOOL.BuildCPanel(o)o:AddControl("ComboBox",{MenuButton=1,Folder="camera",Options={["#preset.default"]=n},CVars=table.GetKeys(n)})o:AddControl("Numpad",{Label="#tool.camera.key",Command="camera_key"})o:AddControl("CheckBox",{Label="#tool.camera.static",Command="camera_locked",Help=true})o:AddControl("CheckBox",{Label="#tool.toggle",Command="camera_toggle"})end
--addons/!lpakr_out/lua/weapons/gmod_tool/stools/drgbase_tool_info.lua:
TOOL.Tab="DrGBase"TOOL.Category="Tools"TOOL.Name="#tool.drgbase_tool_info.name"TOOL.BuildCPanel=function(a)a:Help("#tool.drgbase_tool_info.desc")a:Help("#tool.drgbase_tool_info.0")end;local b={"Status","AI","Possession","Movement","Animation","Viewcam"}function TOOL:LeftClick(c)if!IsValid(c.Entity)then return false end;if!c.Entity.IsDrGNextbot then return false end;if CLIENT then return true end;local d=self:GetOwner()d:SetNW2Int("DrGBaseNextbotInfoToolPage",1)d:DrG_SingleEntitySelect(c.Entity)return true end;function TOOL:RightClick()if CLIENT then return false end;local d=self:GetOwner()if IsValid(d:DrG_GetSelectedEntities()[1])then local e=d:GetNW2Int("DrGBaseNextbotInfoToolPage")if e<#b then d:SetNW2Int("DrGBaseNextbotInfoToolPage",e+1)else d:SetNW2Int("DrGBaseNextbotInfoToolPage",1)end;d:SendLua('surface.PlaySound("buttons/lightswitch2.wav")')else d:SendLua('surface.PlaySound("buttons/button10.wav")')end;return false end;function TOOL:Reload(c)if CLIENT then return true end;self:GetOwner():DrG_ClearSelectedEntities()return true end;if CLIENT then DrGBase.INFO_TOOL={}DrGBase.INFO_TOOL.Viewcam=nil;DrGBase.INFO_TOOL.RT=GetRenderTarget("DrGBaseInfoToolRT",256,256,false)DrGBase.INFO_TOOL.Mat=CreateMaterial("DrGBaseInfoToolMaterial","GMODScreenspace",{["$basetexture"]=DrGBase.INFO_TOOL.RT,["$basetexturetransform"]="center .5 .5 scale -1 -1 rotate 0 translate 0 0",["$texturealpha"]=0,["$vertexalpha"]=1})end;function TOOL:DrawToolScreen(f,g)surface.SetDrawColor(DrGBase.CLR_DARKGRAY)surface.DrawRect(0,0,f,g)local d=self:GetOwner()local h=d:DrG_GetSelectedEntities()[1]if IsValid(h)then local e=d:GetNW2Int("DrGBaseNextbotInfoToolPage")local i=b[e]||"Invalid"if i=="Status"then draw.SimpleText("Health:","DermaLarge",10,10,DrGBase.CLR_LIGHTGRAY)draw.SimpleText(h:Health().." / "..h:GetMaxHealth(),"DermaLarge",10,50,util.DrG_MergeColors(h:Health()/h:GetMaxHealth(),DrGBase.CLR_GREEN,DrGBase.CLR_RED))draw.SimpleText("Regen: "..tostring(h:GetHealthRegen()),"DermaLarge",10,90,DrGBase.CLR_LIGHTGRAY)draw.SimpleText("Godmode: "..(h:GetGodMode()&&"Enabled"||"Disabled"),"DermaLarge",10,130,DrGBase.CLR_LIGHTGRAY)draw.SimpleText("Status:","DermaLarge",10,170,DrGBase.CLR_LIGHTGRAY)if h:IsDead()then draw.SimpleText("Dead","DermaLarge",100,170,DrGBase.CLR_RED)elseif h:IsDown()then draw.SimpleText("Down","DermaLarge",100,170,DrGBase.CLR_ORANGE)else draw.SimpleText("Alive","DermaLarge",100,170,DrGBase.CLR_GREEN)end elseif i=="AI"then draw.SimpleText("Enemy:","DermaLarge",10,10,DrGBase.CLR_LIGHTGRAY)if h:HasEnemy()then local j=h:GetEnemy()if j:IsPlayer()then draw.SimpleText(j:GetName(),"DermaLarge",10,50,DrGBase.CLR_RED)else draw.SimpleText("#"..j:GetClass(),"DermaLarge",10,50,DrGBase.CLR_RED)end else draw.SimpleText("None","DermaLarge",10,50,DrGBase.CLR_RED)end;draw.SimpleText("Relationship:","DermaLarge",10,130,DrGBase.CLR_LIGHTGRAY)draw.SimpleText("Spotted: "..(h:HasSpottedLocalPlayer()&&"True"||"False"),"DermaLarge",10,170,DrGBase.CLR_LIGHTGRAY)local k=h:LocalPlayerRelationship()if k==D_LI then draw.SimpleText("Like","DermaLarge",170,130,DrGBase.CLR_GREEN)elseif k==D_HT then draw.SimpleText("Hate","DermaLarge",170,130,DrGBase.CLR_RED)elseif k==D_FR then draw.SimpleText("Afraid","DermaLarge",170,130,DrGBase.CLR_PURPLE)elseif k==D_NU then draw.SimpleText("Neutral","DermaLarge",165,130,DrGBase.CLR_CYAN)elseif k==D_ER then draw.SimpleText("Error","DermaLarge",170,130,DrGBase.CLR_ORANGE)end;draw.SimpleText("Omniscient: "..(h:IsOmniscient()&&"True"||"False"),"DermaLarge",10,90,DrGBase.CLR_LIGHTGRAY)elseif i=="Possession"then if h:IsPossessed()then draw.SimpleText("Possessed by:","DermaLarge",10,10,DrGBase.CLR_LIGHTGRAY)draw.SimpleText(h:GetPossessor():GetName(),"DermaLarge",10,50,DrGBase.CLR_CYAN)draw.SimpleText("Locked on:","DermaLarge",10,90,DrGBase.CLR_LIGHTGRAY)local l=h:PossessionGetLockedOn()if IsValid(l)then if l:IsPlayer()then draw.SimpleText(l:GetName(),"DermaLarge",10,130,DrGBase.CLR_ORANGE)else draw.SimpleText("#"..l:GetClass(),"DermaLarge",10,130,DrGBase.CLR_ORANGE)end else draw.SimpleText("None","DermaLarge",10,130,DrGBase.CLR_ORANGE)end else draw.SimpleText("This nextbot","DermaLarge",f/2,g/2-40,DrGBase.CLR_RED,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)draw.SimpleText("isn't possessed","DermaLarge",f/2,g/2,DrGBase.CLR_RED,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)end elseif i=="Movement"then draw.SimpleText("Speed: "..tostring(math.Round(h:Speed(true),2)),"DermaLarge",10,10,DrGBase.CLR_LIGHTGRAY)draw.SimpleText("Scale: "..tostring(math.Round(h:GetScale(),2)),"DermaLarge",10,50,DrGBase.CLR_LIGHTGRAY)draw.SimpleText("Movement:","DermaLarge",10,130,DrGBase.CLR_LIGHTGRAY)draw.SimpleText(h:GetMovement():DrG_ToString(2),"DermaLarge",10,170,DrGBase.CLR_CYAN)elseif i=="Animation"then if h.IsDrGNextbotSprite then draw.SimpleText("Animation:","DermaLarge",10,10,DrGBase.CLR_LIGHTGRAY)draw.SimpleText(h:GetSpriteAnim(),"DermaLarge",10,50,DrGBase.CLR_CYAN)draw.SimpleText("Frame: "..tostring(h:GetSpriteFrame()),"DermaLarge",10,90,DrGBase.CLR_LIGHTGRAY)else draw.SimpleText("Sequence:","DermaLarge",10,10,DrGBase.CLR_LIGHTGRAY)draw.SimpleText(h:GetSequenceName(h:GetSequence()),"DermaLarge",10,50,DrGBase.CLR_CYAN)draw.SimpleText("Activity:","DermaLarge",10,90,DrGBase.CLR_LIGHTGRAY)draw.SimpleText(h:GetSequenceActivityName(h:GetSequence()),"DermaLarge",10,130,DrGBase.CLR_CYAN)end;draw.SimpleText("Attacking? "..(h:IsAttack(h:GetSequence())&&"True"||"False"),"DermaLarge",10,170,DrGBase.CLR_LIGHTGRAY)elseif i=="Viewcam"then local m=d.ShouldDisableLegs;d.ShouldDisableLegs=true;local n=h:GetPos()local o=h:EyePos()render.PushRenderTarget(DrGBase.INFO_TOOL.RT)DrGBase.INFO_TOOL.Viewcam=true;render.RenderView({x=0,y=0,w=256,h=256,origin=Vector(n.x,n.y,o.z),angles=h:EyeAngles(),dopostprocess=false,drawviewmodel=false,drawmonitors=true})DrGBase.INFO_TOOL.Viewcam=nil;render.PopRenderTarget()d.ShouldDisableLegs=m;DrGBase.INFO_TOOL.Mat:SetTexture("$basetexture",DrGBase.INFO_TOOL.RT)surface.SetMaterial(DrGBase.INFO_TOOL.Mat)surface.DrawTexturedRect(0,0,f,g)end;draw.SimpleText("("..tostring(e)..")","DermaLarge",10,g-10,DrGBase.CLR_LIGHTGRAY,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM)if e==2&&h:IsAIDisabled()then draw.SimpleText(b[e],"DermaLarge",f/2,g-10,DrGBase.CLR_RED,TEXT_ALIGN_CENTER,TEXT_ALIGN_BOTTOM)else draw.SimpleText(b[e],"DermaLarge",f/2,g-10,DrGBase.CLR_LIGHTGRAY,TEXT_ALIGN_CENTER,TEXT_ALIGN_BOTTOM)end;draw.SimpleText(">>","DermaLarge",f-10,g-10,DrGBase.CLR_LIGHTGRAY,TEXT_ALIGN_RIGHT,TEXT_ALIGN_BOTTOM)else draw.SimpleText("No nextbot","DermaLarge",f/2,g/2-20,DrGBase.CLR_RED,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)draw.SimpleText("selected","DermaLarge",f/2,g/2+20,DrGBase.CLR_RED,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)end end;if CLIENT then language.Add("tool.drgbase_tool_info.name","Nextbot Info")language.Add("tool.drgbase_tool_info.desc","View and edit information about the nextbot.")language.Add("tool.drgbase_tool_info.0","Left click to select/deselect a nextbot.")hook.Add("ShouldDrawLocalPlayer","DrGBaseNextbotInfoToolDrawPlayer",function(p)local q=p:GetActiveWeapon()if!IsValid(q)||q:GetClass()!="gmod_tool"then return end;local r=p:GetTool()if r==nil||r.Mode!="drgbase_tool_info"then return end;local h=p:DrG_GetSelectedEntities()[1]if!IsValid(h)then return end;local e=p:GetNW2Int("DrGBaseNextbotInfoToolPage")local i=b[e]||"Invalid"if i!="Viewcam"then return end;cam.Start3D()cam.End3D()return DrGBase.INFO_TOOL.Viewcam end)end
--addons/!lpakr_out/lua/weapons/gmod_tool/stools/drgbase_tool_omniscient.lua:
TOOL.Tab="DrGBase"TOOL.Category="Tools"TOOL.Name="#tool.drgbase_tool_omniscient.name"TOOL.BuildCPanel=function(a)a:Help("#tool.drgbase_tool_omniscient.desc")a:Help("#tool.drgbase_tool_omniscient.0")end;function TOOL:LeftClick(b)if!IsValid(b.Entity)then return false end;if!b.Entity.IsDrGNextbot then return false end;return true end;if CLIENT then language.Add("tool.drgbase_tool_omniscient.name","Set Omniscient")language.Add("tool.drgbase_tool_omniscient.desc","Disable/enable omniscience for a nextbot.")language.Add("tool.drgbase_tool_omniscient.0","Left click to toggle omniscience. (Green => Enabled / Red => Disabled)")hook.Add("PreDrawHalos","DrGBaseToolOmniscientHalos",function()local c=LocalPlayer():GetActiveWeapon()if!IsValid(c)||c:GetClass()!="gmod_tool"then return end;local d=LocalPlayer():GetTool()if d==nil||d.Mode!="drgbase_tool_omniscient"then return end;local e={}local f={}for g,h in ipairs(DrGBase.GetNextbots())do if!IsValid(h)then continue end;if h:IsOmniscient()then table.insert(e,h)else table.insert(f,h)end end;halo.Add(e,DrGBase.CLR_GREEN)halo.Add(f,DrGBase.CLR_RED)end)end
--addons/!lpakr_out/lua/weapons/gmod_tool/stools/drgbase_tool_relationship.lua:
TOOL.Tab="DrGBase"TOOL.Category="Tools"TOOL.Name="#tool.drgbase_tool_relationship.name"function TOOL:LeftClick(a)end;function TOOL:RightClick(a)end;function TOOL:Reload()end;if SERVER then else language.Add("tool.drgbase_tool_relationship.name","Relationship Tool")language.Add("tool.drgbase_tool_relationship.desc","Edit a nextbot's relationships.")language.Add("tool.drgbase_tool_relationship.0","Left click to select a nextbot, right click to use quick select.")end
--addons/!lpakr_out/lua/weapons/gmod_tool/stools/particlecontrol.lua:
TOOL.Category="Particle Controller"TOOL.Name="Adv. Particle Control"TOOL.Command=nil;TOOL.ConfigName=""TOOL.HighlightedEnt=nil;TOOL.ClientConVar["effectname"]="env_fire_large"TOOL.ClientConVar["mode_beam"]="0"TOOL.beamattach1=0;TOOL.beamattach2=0;TOOL.ClientConVar["utileffect_scale"]="1"TOOL.ClientConVar["utileffect_magnitude"]="1"TOOL.ClientConVar["utileffect_radius"]="10"TOOL.ClientConVar["color_enabled"]="0"TOOL.ClientConVar["color_r"]="255"TOOL.ClientConVar["color_g"]="20"TOOL.ClientConVar["color_b"]="0"TOOL.ClientConVar["color_outofone"]="0"TOOL.ClientConVar["attachnum"]="0"TOOL.ClientConVar["repeatrate"]="0"TOOL.ClientConVar["repeatsafety"]="1"TOOL.ClientConVar["propmodel"]="models/hunter/plates/plate.mdl"TOOL.ClientConVar["propangle"]="1"TOOL.ClientConVar["propinvis"]="0"TOOL.ClientConVar["numpadkey"]="52"TOOL.ClientConVar["toggle"]="1"TOOL.ClientConVar["starton"]="1"TOOL.Information={{name="info1",stage=1,icon="gui/info.png"},{name="left0",stage=0,icon="gui/lmb.png"},{name="left1",stage=1,icon="gui/lmb.png"},{name="middle01",icon="gui/mmb.png"},{name="right0",stage=0,icon="gui/rmb.png"},{name="right1",stage=1,icon="gui/rmb.png"},{name="reload0",stage=0,icon="gui/r.png"},{name="reload1",stage=1,icon="gui/r.png"}}if CLIENT then language.Add("tool.particlecontrol.name","Advanced Particle Controller")language.Add("tool.particlecontrol.desc","Attach particle effects to things")language.Add("tool.particlecontrol.help","Particles are used for all sorts of different special effects. You can attach them to models and turn them on and off with a key.")language.Add("tool.particlecontrol.info1","BEAM EFFECT: Attaches to two points")language.Add("tool.particlecontrol.left0","Add an effect to an object")language.Add("tool.particlecontrol.left1","Add the other end to an object")language.Add("tool.particlecontrol.middle01","Scroll through an object's attachments")language.Add("tool.particlecontrol.right0","Attach a new prop with the effect on it")language.Add("tool.particlecontrol.right1","Attach a new prop and add the other end to it")language.Add("tool.particlecontrol.reload0","Remove all effects from an object")language.Add("tool.particlecontrol.reload1","Cancel beam effect")end;util.PrecacheSound("weapons/pistol/pistol_empty.wav")function TOOL:LeftClick(a)local b=self:GetClientInfo("effectname",0)local c=self:GetClientNumber("attachnum",0)local d=self:GetClientNumber("repeatrate",0)local e=self:GetClientNumber("repeatsafety",0)local f=self:GetClientNumber("numpadkey",0)local g=self:GetClientNumber("toggle",0)local h=self:GetClientNumber("starton",0)local i=Vector(self:GetClientNumber("utileffect_scale",0),self:GetClientNumber("utileffect_magnitude",0),self:GetClientNumber("utileffect_radius",0))local j=nil;if self:GetClientNumber("color_enabled",0)==1 then if self:GetClientNumber("color_outofone",0)==1 then j=Color(self:GetClientNumber("color_r",0),self:GetClientNumber("color_g",0),self:GetClientNumber("color_b",0),1)else j=Color(self:GetClientNumber("color_r",0),self:GetClientNumber("color_g",0),self:GetClientNumber("color_b",0),0)end end;local k=self:GetOwner()if self:GetClientNumber("mode_beam",0)==0 then if a.Entity:IsValid()then if CLIENT then return true end;if a.Entity:GetClass()=="prop_effect"&&a.Entity.AttachedEntity then a.Entity=a.Entity.AttachedEntity end;AttachParticleControllerNormal(k,a.Entity,{NewTable={EffectName=b,AttachNum=c,RepeatRate=d,RepeatSafety=e,Toggle=g,StartOn=h,NumpadKey=f,UtilEffectInfo=i,ColorInfo=j}})return true end else local l=self:NumObjects()if a.Entity:IsValid()then if a.Entity:GetClass()=="prop_effect"&&a.Entity.AttachedEntity then a.Entity=a.Entity.AttachedEntity end;self:SetObject(l+1,a.Entity,a.HitPos,nil,nil,a.HitNormal)if l==0 then self.beamattach1=c else self.beamattach2=c end;if l>0 then if CLIENT then self:ClearObjects()return true end;local m,n=self:GetEnt(1),self:GetEnt(2)local constraint=constraint.AttachParticleControllerBeam(m,n,{EffectName=b,AttachNum=self.beamattach1,AttachNum2=self.beamattach2,RepeatRate=d,RepeatSafety=e,Toggle=g,StartOn=h,NumpadKey=f,UtilEffectInfo=i,ColorInfo=j},k)self:ClearObjects()else self:SetStage(l+1)end;return true end end end;function TOOL:RightClick(a)local b=self:GetClientInfo("effectname",0)local c=self:GetClientNumber("attachnum",0)local d=self:GetClientNumber("repeatrate",0)local e=self:GetClientNumber("repeatsafety",0)local f=self:GetClientNumber("numpadkey",0)local g=self:GetClientNumber("toggle",0)local h=self:GetClientNumber("starton",0)local i=Vector(self:GetClientNumber("utileffect_scale",0),self:GetClientNumber("utileffect_magnitude",0),self:GetClientNumber("utileffect_radius",0))local j=nil;if self:GetClientNumber("color_enabled",0)==1 then if self:GetClientNumber("color_outofone",0)==1 then j=Color(self:GetClientNumber("color_r",0),self:GetClientNumber("color_g",0),self:GetClientNumber("color_b",0),1)else j=Color(self:GetClientNumber("color_r",0),self:GetClientNumber("color_g",0),self:GetClientNumber("color_b",0),0)end end;local k=self:GetOwner()local o=self:GetClientInfo("propmodel",0)local p=self:GetClientNumber("propangle",0)if!util.IsValidModel(o)then return false end;if!util.IsValidProp(o)then return false end;if CLIENT then return true end;prop=ents.Create("prop_physics")prop:SetModel(o)prop:SetPos(a.HitPos-a.HitNormal*prop:OBBMins().z)if p==1 then prop:SetAngles(Angle(0,a.HitNormal:Angle().y,0))else prop:SetAngles(a.HitNormal:Angle())end;prop:SetCollisionGroup(20)prop.PropOwner=self:GetOwner()prop:Spawn()local q=true;if!util.IsValidPhysicsObject(prop,0)then q=false end;if!a.Entity:IsValid()then q=false end;if a.Entity&&a.Entity:IsPlayer()then q=false end;if!util.IsValidPhysicsObject(a.Entity,a.PhysicsBone)then q=false end;if q==true then local r=constraint.Weld(prop,a.Entity,0,a.PhysicsBone,0,true,true)else if util.IsValidPhysicsObject(prop,0)then prop:GetPhysicsObject():EnableMotion(false)end end;if self:GetClientNumber("propinvis",0)==1 then prop:SetRenderMode(1)prop:SetColor(Color(255,255,255,0))duplicator.StoreEntityModifier(prop,"colour",{Color=Color(255,255,255,0),RenderMode=1,RenderFX=0})end;undo.Create("prop")undo.AddEntity(prop)undo.SetPlayer(k)undo.Finish("Prop ("..tostring(o)..")")if!prop:IsValid()then return false end;if self:GetClientNumber("mode_beam",0)==0 then AttachParticleControllerNormal(k,prop,{NewTable={EffectName=b,AttachNum=c,RepeatRate=d,RepeatSafety=e,Toggle=g,StartOn=h,NumpadKey=f,UtilEffectInfo=i,ColorInfo=j}})else local l=self:NumObjects()self:SetObject(l+1,prop,a.HitPos,nil,nil,a.HitNormal)if l==0 then self.beamattach1=c else self.beamattach2=c end;if l>0 then if CLIENT then self:ClearObjects()return true end;local m,n=self:GetEnt(1),self:GetEnt(2)local constraint=constraint.AttachParticleControllerBeam(m,n,{EffectName=b,AttachNum=self.beamattach1,AttachNum2=self.beamattach2,RepeatRate=d,RepeatSafety=e,Toggle=g,StartOn=h,NumpadKey=f,UtilEffectInfo=i,ColorInfo=j},k)self:ClearObjects()else self:SetStage(l+1)end;return true end;return true end;function TOOL:Reload(a)if self:GetClientNumber("mode_beam",0)!=0&&self:NumObjects()>0 then self:ClearObjects()self:SetStage(0)return true end;if a.Entity:IsValid()then local s=false;if a.Entity:GetClass()=="prop_effect"&&a.Entity.AttachedEntity then a.Entity=a.Entity.AttachedEntity end;for t,u in pairs(ents:GetAll())do if u:GetClass()=="particlecontroller_normal"then if u:GetParent()==a.Entity then s=true end;if IsValid(u:GetTargetEnt2())then if u:GetTargetEnt2()==a.Entity||u:GetTargetEnt2():GetParent()==a.Entity then s=true end end end end;return s end end;if CLIENT then local v=Color(0,0,0,255)local w=Color(0,255,0,255)local x=Color(255,255,255,255)function TOOL:DrawHUD()local y=LocalPlayer()local z=y:GetEyeTrace()local c=self:GetClientNumber("attachnum",0)local function A(B)if!B:GetAttachments()||!B:GetAttachments()[1]then local C,D=B:GetPos(),B:GetAngles()local C=C:ToScreen()local E={x=C.x+5,y=C.y-5}draw.RoundedBox(0,C.x-3,C.y-3,6,6,v)draw.RoundedBox(0,C.x-1,C.y-1,2,2,w)draw.SimpleTextOutlined("0: (origin)","Default",E.x,E.y,w,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM,2,v)return end;if B:GetAttachments()[c]then local C,D=B:GetPos(),B:GetAngles()local C=C:ToScreen()local E={x=C.x+5,y=C.y-5}draw.RoundedBox(0,C.x-2,C.y-2,4,4,v)draw.RoundedBox(0,C.x-1,C.y-1,2,2,x)draw.SimpleTextOutlined("0: (origin)","Default",E.x,E.y,x,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM,1,v)end;for t,table in pairs(B:GetAttachments())do local C,D=B:GetAttachment(table.id).Pos,B:GetAttachment(table.id).Ang;local C=C:ToScreen()local E={x=C.x+5,y=C.y-5}if table.id!=c then draw.RoundedBox(0,C.x-2,C.y-2,4,4,v)draw.RoundedBox(0,C.x-1,C.y-1,2,2,x)draw.SimpleTextOutlined(table.id..": "..table.name,"Default",E.x,E.y,x,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM,1,v)end end;if!B:GetAttachments()[c]then local C,D=B:GetPos(),B:GetAngles()local C=C:ToScreen()local E={x=C.x+5,y=C.y-5}draw.RoundedBox(0,C.x-3,C.y-3,6,6,v)draw.RoundedBox(0,C.x-1,C.y-1,2,2,w)draw.SimpleTextOutlined("0: (origin)","Default",E.x,E.y,w,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM,2,v)else local C,D=B:GetAttachment(c).Pos,B:GetAttachment(c).Ang;local C=C:ToScreen()local E={x=C.x+5,y=C.y-5}draw.RoundedBox(0,C.x-3,C.y-3,6,6,v)draw.RoundedBox(0,C.x-1,C.y-1,2,2,w)draw.SimpleTextOutlined(c..": "..B:GetAttachments()[c].name,"Default",E.x,E.y,w,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM,2,v)end end;if IsValid(z.Entity)&&z.Entity==self.HighlightedEnt then A(self.HighlightedEnt)return end;if IsValid(z.Entity)&&z.Entity!=self.HighlightedEnt then if self.HighlightedEnt!=nil then self.HighlightedEnt=nil end;self.HighlightedEnt=z.Entity end;if!IsValid(z.Entity)&&self.HighlightedEnt!=nil then self.HighlightedEnt=nil end end;function TOOL:Holster()if self.HighlightedEnt!=nil then self.HighlightedEnt=nil end end;local function F(k,G)local H=k:GetActiveWeapon()if!IsValid(H)||H:GetClass()!="gmod_tool"||H.Mode!=G then return end;return H:GetToolObject(G)end;local function I(k,J,K)if!K then return end;if J=="invnext"then local self=F(k,"particlecontrol")if!self then return end;return self:ScrollDown(k:GetEyeTraceNoCursor())elseif J=="invprev"then local self=F(k,"particlecontrol")if!self then return end;return self:ScrollUp(k:GetEyeTraceNoCursor())end end;if game.SinglePlayer()then timer.Simple(5,function()hook.Add("PlayerBindPress","particlecontrol_playerbindpress",I)end)else hook.Add("PlayerBindPress","particlecontrol_playerbindpress",I)end;function TOOL:Scroll(a,L)if!IsValid(self.HighlightedEnt)then return end;local M=0;if self.HighlightedEnt:GetAttachments()then M=table.Count(self.HighlightedEnt:GetAttachments())end;local N=self:GetClientNumber("attachnum",0)if N>M then N=0 end;local c=N+L;if c<0 then c=M end;if c>M then c=0 end;RunConsoleCommand("particlecontrol_attachnum",tostring(c))self:GetOwner():EmitSound("weapons/pistol/pistol_empty.wav")return true end;function TOOL:ScrollUp(a)return self:Scroll(a,-1)end;function TOOL:ScrollDown(a)return self:Scroll(a,1)end end;local O=TOOL:BuildConVarList()O["particlecontrol_attachnum"]=nil;function TOOL.BuildCPanel(P)P:AddControl("Header",{Description="#tool.particlecontrol.help"})P:AddControl("ComboBox",{MenuButton=1,Folder="particlecontrol",Options={["#preset.default"]=O},CVars=table.GetKeys(O)})AddParticleBrowser(P,{name="Effect",commands={effectname="particlecontrol_effectname",mode_beam="particlecontrol_mode_beam",color="particlecontrol_color",utileffect="particlecontrol_utileffect"}})P:AddControl("Label",{Text=""})P:AddControl("Slider",{Label="Attachment",Type="Integer",Min="0",Max="10",Command="particlecontrol_attachnum"})P:ControlHelp("Attachment point on the model to use. Set to 0 to attach to the model origin or to attach model-covering effects to the entire model.")P:AddControl("Slider",{Label="Repeat Rate",Type="Float",Min="0",Max="5",Command="particlecontrol_repeatrate"})P:ControlHelp("How often the effect plays. Set to 0 to not repeat.")P:AddControl("CheckBox",{Label="Repeat Safety",Command="particlecontrol_repeatsafety"})P:ControlHelp("If on, effects are removed before being repeated. This stops them from piling up endlessly, but can also cause small problems, like effects being cut off. You should probably keep this on unless you know what you're doing.")P:AddControl("Label",{Text=""})P:AddControl("Label",{Text=""})local Q={Label="Prop",ConVar="particlecontrol_propmodel",Category="Prop",Height=1,Models={}}Q.Models["models/hunter/plates/plate025x025.mdl"]={}Q.Models["models/hunter/plates/plate.mdl"]={}Q.Models["models/weapons/w_smg1.mdl"]={}Q.Models["models/props_junk/popcan01a.mdl"]={}P:AddControl("PropSelect",Q)P:AddControl("ComboBox",{Label="Prop Angle",MenuButton="0",Options={["Spawn upright"]={particlecontrol_propangle="1"},["Spawn at surface angle"]={particlecontrol_propangle="2"}}})P:AddControl("CheckBox",{Label="Invisible prop (particles only)",Command="particlecontrol_propinvis"})P:AddControl("Label",{Text=""})P:AddControl("Label",{Text=""})P:AddControl("Numpad",{Label="Effect Key",Command="particlecontrol_numpadkey"})P:AddControl("CheckBox",{Label="Toggle",Command="particlecontrol_toggle"})P:AddControl("CheckBox",{Label="Start on?",Command="particlecontrol_starton"})end
--addons/!lpakr_out/lua/improvedstacker/localify.lua:
module("localify",package.seeall)languages={bg="Bulgarian",cs="Czech",da="Danish",de="German",el="Greek",["en-pt"]="Pirate",en="English",es="Spanish",et="Estonian",fi="Finnish",fr="French",he="Hebrew",hr="Croatian",hu="Hungarian",it="Italian",ja="Japanese",ko="Korean",lt="Lithuanian",nl="Dutch",no="Norwegian",pl="Polish",["pt-br"]="Brazilian Portuguese",["pt-pt"]="Portuguese",ru="Russian",sk="Slovak",["sv-se"]="Swedish",th="Thai",tr="Turkish",uk="Ukranian",vi="Vietnamese",["zh-cn"]="Simplified Chinese",["zh-tw"]="Traditional Chinese"}localizations=localizations||{bg={},cs={},da={},de={},el={},["en-pt"]={},en={},es={},et={},fi={},fr={},he={},hr={},hu={},it={},ja={},ko={},lt={},nl={},no={},pl={},["pt-br"]={},["pt-pt"]={},ru={},sk={},["sv-se"]={},th={},tr={},uk={},vi={},["zh-cn"]={},["zh-tw"]={}}local error=error;local include=include;local tostring=tostring;local GetConVar=GetConVar;local AddCSLuaFile=AddCSLuaFile;FALLBACK=FALLBACK||"en"function Bind(a,b,c)if!IsValidLanguage(a)then error("Invalid language provided ('"..tostring(a).."')")return end;localizations[a:lower()][b]=c end;function Localize(b,a,d)if a&&!IsValidLanguage(a)then ErrorNoHalt("Invalid localify_language provided ('"..tostring(a).."')\n")a=FALLBACK end;local e=localizations[a&&a:lower()||GetLocale()]return e&&e[b]||d&&b||localizations[FALLBACK]&&localizations[FALLBACK][b]||nil end;function AddLanguage(a,f)if IsValidLanguage(a)then return end;languages[a:lower()]=f;localizations[a:lower()]={}end;function RemoveLanguage(a)if!IsValidLanguage(a)then return end;languages[a:lower()]=nil;localizations[a:lower()]=nil;if a:lower()==FALLBACK then FALLBACK="en"end end;function IsValidLanguage(a)return a&&languages[a:lower()]end;function SetFallbackLanguage(a)if!IsValidLanguage(a)then error("Invalid language provided ('"..tostring(a).."')")return end;FALLBACK=a:lower()end;function GetLocale(g)return SERVER&&g&&g:GetInfo("localify_language"):lower()||(GetConVarString("localify_language")==""&&FALLBACK||GetConVarString("localify_language"):lower())end;function GetLanguages()return languages end;function GetLocalizations(a)return!a&&localizations||a&&localizations[a:lower()]||nil end;function GetFallbackLanguage()return FALLBACK end;function LoadSharedFile(h)include(h)end;function LoadServerFile(h)if CLIENT then return end;include(h)end;function LoadClientFile(h)include(h)end;if CLIENT then CreateClientConVar("localify_language",GetConVarString("gmod_language"),false,true)cvars.AddChangeCallback("gmod_language",function(f,i,j)if!IsValidLanguage(j)then return end;RunConsoleCommand("localify_language",j)end,"localify")end
--addons/!lpakr_out/lua/weapons/gmod_tool/stools/sup_areatrigger.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/weapons/gmod_tool/stools/weld.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/cam.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/cd_ray.lua:
WireToolSetup.setCategory("Memory")WireToolSetup.open("cd_ray","CD Ray","gmod_wire_cd_ray",nil,"CD Rays")if CLIENT then language.Add("Tool.wire_cd_ray.name","CD Ray Tool (Wire)")language.Add("Tool.wire_cd_ray.desc","Spawns a CD Ray.")language.Add("WireCDRayTool_cd_ray","CD Ray:")language.Add("sboxlimit_wire_cd_rays","You've hit CD Rays limit!")TOOL.Information={{name="left",text="Create/Update "..TOOL.Name},{name="right",text="Create CD lock (to keep CD in same spot)"}}end;WireToolSetup.BaseLang()TOOL.ClientConVar["model"]="models/jaanus/wiretool/wiretool_beamcaster.mdl"TOOL.ClientConVar["lockmodel"]="models/venompapa/wirecdlock.mdl"TOOL.ClientConVar["Range"]="64"TOOL.ClientConVar["DefaultZero"]="0"function TOOL:RightClick(a)if!a.HitPos then return false end;if a.Entity:IsPlayer()then return false end;if CLIENT then return true end;local b=self:GetOwner()if a.Entity:IsValid()&&a.Entity:GetClass()=="gmod_wire_cd_lock"then return true end;if!self:GetSWEP():CheckLimit("wire_cd_locks")then return false end;local c=a.HitNormal:Angle()c.pitch=c.pitch+90;local d=self:GetClientNumber("Range")local e=self:GetClientNumber("DefaultZero")!=0;local f=self:GetClientInfo("lockmodel")if!util.IsValidModel(f)||!util.IsValidProp(f)then return end;local g=WireLib.MakeWireEnt(b,{Class="gmod_wire_cd_lock",Pos=a.HitPos,Angle=c,Model=f})local h=g:OBBMins()g:SetPos(a.HitPos-a.HitNormal*h.z)local i=WireLib.Weld(g,a.Entity,a.PhysicsBone,true)undo.Create("Wire Data CD Locky")undo.AddEntity(g)undo.AddEntity(i)undo.SetPlayer(b)undo.Finish()b:AddCleanup("wire_cd_locks",g)b:AddCleanup("wire_cd_locks",i)return true end;function TOOL.BuildCPanel(j)WireDermaExts.ModelSelect(j,"wire_cd_ray_Model",list.Get("Wire_Laser_Tools_Models"),1)j:NumSlider("Range","wire_cd_ray_Range",1,512,2)end
--addons/!lpakr_out/lua/wire/stools/clutch.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/colorer.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/colorer.lua:
WireToolSetup.setCategory("Visuals")WireToolSetup.open("colorer","Colorer","gmod_wire_colorer",nil,"Colorers")if CLIENT then language.Add("Tool.wire_colorer.name","Colorer Tool (Wire)")language.Add("Tool.wire_colorer.desc","Spawns a constant colorer prop for use with the wire system.")language.Add("WireColorerTool_colorer","Colorer:")language.Add("WireColorerTool_outColor","Output Color")language.Add("WireColorerTool_Range","Max Range:")language.Add("WireColorerTool_Model","Choose a Model:")TOOL.Information={{name="left",text="Create/Update "..TOOL.Name}}WireToolSetup.setToolMenuIcon("icon16/color_wheel.png")end;WireToolSetup.BaseLang()WireToolSetup.SetupMax(20)TOOL.ClientConVar["Model"]="models/jaanus/wiretool/wiretool_siren.mdl"TOOL.ClientConVar["outColor"]="0"TOOL.ClientConVar["range"]="2000"function TOOL.BuildCPanel(a)WireToolHelpers.MakePresetControl(a,"wire_colorer")WireDermaExts.ModelSelect(a,"wire_colorer_model",list.Get("Wire_Laser_Tools_Models"),1,true)a:CheckBox("#WireColorerTool_outColor","wire_colorer_outColor")a:NumSlider("#WireColorerTool_Range","wire_colorer_Range",1,10000,2)end
--addons/!lpakr_out/lua/wire/stools/keypad.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/locator.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/motor.lua:
WireToolSetup.setCategory("Physics/Force")WireToolSetup.open("motor","Motor","gmod_wire_motor",nil,"Motors")if CLIENT then language.Add("Tool.wire_motor.name","Motor Tool (Wire)")language.Add("Tool.wire_motor.desc","Makes a controllable motor")language.Add("WireMotorTool_torque","Torque:")language.Add("WireMotorTool_friction","Hinge Friction:")language.Add("WireMotorTool_nocollide","No Collide")language.Add("WireMotorTool_forcelimit","Force Limit:")language.Add("WireMotorTool_offset","Position Offset:")TOOL.Information={{name="left_0",stage=0,text="Choose the wheel's axis"},{name="reload_0",stage=0,text="Remove wire motor constraint"},{name="left_1",stage=1,text="Choose the base's axis"},{name="reload_1",stage=1,text="Cancel wire motor"},{name="left_2",stage=2,text="Place the controller"},{name="reload_2",stage=2,text="Cancel wire motor"}}end;WireToolSetup.BaseLang()WireToolSetup.SetupMax(10)function TOOL:GetConVars()return self:GetClientNumber("torque"),self:GetClientNumber("friction"),self:GetClientNumber("nocollide"),self:GetClientNumber("forcelimit"),self:GetClientNumber("offset")end;function TOOL:LeftClick_Update(a)local b=a.Entity.constraint;if IsValid(b)then b:DontDeleteOnRemove(a.Entity)if IsValid(a.Entity.axis)then a.Entity.axis:DontDeleteOnRemove(a.Entity)end;local c=b:GetTable()b:Remove()local d,e,f,g=self:GetConVars()local b,h=MakeWireMotor(self:GetOwner(),c.Ent1,c.Ent2,c.Bone1,c.Bone2,c.LPos1,c.LPos2,e,d,f,g)b.MyCrtl=a.Entity:EntIndex()a.Entity:SetConstraint(b)a.Entity:DeleteOnRemove(b)if h then a.Entity:SetAxis(h)a.Entity:DeleteOnRemove(h)end end end;function TOOL:LeftClick(a)if IsValid(a.Entity)&&a.Entity:IsPlayer()then return end;if SERVER&&!util.IsValidPhysicsObject(a.Entity,a.PhysicsBone)then return false end;local i=self:NumObjects()local j=a.Entity:GetPhysicsObjectNum(a.PhysicsBone)if self:CheckHitOwnClass(a)&&i==0 then return true end;if i==0&&!IsValid(a.Entity)then return end;if i==1&&a.Entity==self:GetEnt(1)then return end;local d,e,f,g,k=self:GetConVars()if i>1 then if CLIENT then self:ClearObjects()return true end;local l=self:GetOwner()local m,n,o=self:GetEnt(1),self:GetEnt(2),a.Entity;local b,h=self.constraint,self.axis;if!b||!IsValid(b)then WireLib.AddNotify(self:GetOwner(),"Wire Motor Invalid!",NOTIFY_GENERIC,7)self:ClearObjects()self:SetStage(0)return end;local p=self:LeftClick_Make(a,l)if isbool(p)then return p end;self:LeftClick_PostMake(p,l,a)if p then p:DeleteOnRemove(b)if h then p:DeleteOnRemove(h)end end;self:ClearObjects()self:SetStage(0)elseif i==1 then self:SetObject(i+1,a.Entity,a.HitPos,j,a.PhysicsBone,a.HitNormal)if CLIENT then self:ClearObjects()self:ReleaseGhostEntity()return true end;local m,n=self:GetEnt(1),self:GetEnt(2)local q,r=self:GetBone(1),self:GetBone(2)local s,t=self:GetPos(1),self:GetPos(2)local u,v=self:GetLocalPos(1),self:GetLocalPos(2)local w,x=self:GetNormal(1),self:GetNormal(2)local y,z=self:GetPhys(1),self:GetPhys(2)local A,B=w:Angle(),(x*-1):Angle()local C=y:AlignAngles(A,B)y:SetAngles(C)local D=t+y:GetPos()-self:GetPos(1)y:SetPos(D)y:Wake()u=y:WorldToLocal(t+x*64)local constraint,h=MakeWireMotor(self:GetOwner(),m,n,q,r,u,v,e,d,f,g)self.constraint,self.axis=constraint,h;undo.Create("gmod_wire_motor")if h then undo.AddEntity(h)end;if constraint then undo.AddEntity(constraint)end;undo.SetPlayer(self:GetOwner())undo.Finish()if h then self:GetOwner():AddCleanup("constraints",h)end;if constraint then self:GetOwner():AddCleanup("constraints",constraint)end;self:SetStage(2)self:ReleaseGhostEntity()else k=math.Clamp(k,0,1024)self:SetObject(i+1,a.Entity,a.HitPos+a.HitNormal*k,j,a.PhysicsBone,a.HitNormal)self:StartGhostEntity(a.Entity)self:SetStage(i+1)end;return true end;function TOOL:RightClick(a)return false end;function TOOL:Reload(a)if self:GetStage()>0 then self:ClearObjects()self:SetStage(0)self:ReleaseGhostEntity()else if!IsValid(a.Entity)||a.Entity:IsPlayer()then return false end;if CLIENT then return true end;return constraint.RemoveConstraints(a.Entity,"WireMotor")end end;function TOOL:Think()if self:NumObjects()==1 then self:UpdateGhostEntity()end end;TOOL.ClientConVar={torque=500,friction=1,nocollide=1,forcelimit=0,offset=2,model="models/jaanus/wiretool/wiretool_siren.mdl"}function TOOL.BuildCPanel(E)local F={["models/jaanus/wiretool/wiretool_siren.mdl"]=true,["models/jaanus/wiretool/wiretool_controlchip.mdl"]=true,["models/fasteroid/inductor.mdl"]=true}WireDermaExts.ModelSelect(E,"wire_motor_model",F,1)E:NumSlider("#WireMotorTool_torque","wire_motor_torque",0,10000,5)E:NumSlider("#WireMotorTool_forcelimit","wire_motor_forcelimit",0,50000,10)E:NumSlider("#WireMotorTool_friction","wire_motor_friction",0,100,1)E:NumSlider("#WireMotorTool_offset","wire_motor_offset",0,512,2)E:CheckBox("#WireMotorTool_nocollide","wire_motor_nocollide")end
--addons/!lpakr_out/lua/wire/stools/relay.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/simple_explosive.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/spawner.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/speedometer.lua:
WireToolSetup.setCategory("Detection")WireToolSetup.open("speedometer","Speedometer","gmod_wire_speedometer",nil,"Speedometers")if CLIENT then language.Add("tool.wire_speedometer.name","Speedometer Tool (Wire)")language.Add("tool.wire_speedometer.desc","Spawns a speedometer for use with the wire system.")language.Add("Tool_wire_speedometer_xyz_mode","Split Outputs to X,Y,Z")language.Add("Tool_wire_speedometer_angvel","Add Angular Velocity Outputs")TOOL.Information={{name="left",text="Create/Update "..TOOL.Name}}end;WireToolSetup.BaseLang()WireToolSetup.SetupMax(10)TOOL.Model="models/jaanus/wiretool/wiretool_speed.mdl"TOOL.ClientConVar={xyz_mode=0,angvel=0}function TOOL.BuildCPanel(a)a:CheckBox("#Tool_wire_speedometer_xyz_mode","wire_speedometer_xyz_mode")a:CheckBox("#Tool_wire_speedometer_angvel","wire_speedometer_AngVel")end
--addons/!lpakr_out/lua/wire/stools/textscreen.lua:
return lpakr()()
--addons/!lpakr_out/lua/wire/stools/vehicle.lua:
WireToolSetup.setCategory("Vehicle Control")WireToolSetup.open("vehicle","Vehicle Controller","gmod_wire_vehicle",nil,"Vehicle Controllers")if CLIENT then language.Add("Tool.wire_vehicle.name","Vehicle Controller Tool (Wire)")language.Add("Tool.wire_vehicle.desc","Spawn/link a Wire Vehicle controller.")end;WireToolSetup.BaseLang()WireToolSetup.SetupMax(20)TOOL.ClientConVar["model"]="models/jaanus/wiretool/wiretool_siren.mdl"WireToolSetup.SetupLinking(true,"vehicle")function TOOL.BuildCPanel(a)WireDermaExts.ModelSelect(a,"wire_vehicle_model",list.Get("Wire_Misc_Tools_Models"),1)end
--addons/!lpakr_out/lua/wire/stools/weight.lua:
WireToolSetup.setCategory("Physics","Detection")WireToolSetup.open("weight","Weight (Adjustable)","gmod_wire_weight",nil,"Adjustable Weights")if CLIENT then language.Add("tool.wire_weight.name","Weight Tool (Wire)")language.Add("tool.wire_weight.desc","Spawns a weight.")TOOL.Information={{name="left",text="Create/Update "..TOOL.Name},{name="reload",text="Copy model"}}end;WireToolSetup.BaseLang()WireToolSetup.SetupMax(20)TOOL.ClientConVar={model="models/props_interiors/pot01a.mdl"}TOOL.ReloadSetsModel=true;function TOOL.BuildCPanel(a)ModelPlug_AddToCPanel(a,"weight","wire_weight",true)end
--addons/!lpakr_out/gamemodes/srp_base/entities/weapons/gmod_tool/cl_viewscreen.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/remotecontroller.lua:
AddCSLuaFile()SWEP.Author="Divran"SWEP.Contact=""SWEP.Purpose="Remote control for Pod Controllers in wire."SWEP.Instructions="Left Click on Pod Controller to link up, and use to start controlling."SWEP.Category="Wiremod"SWEP.PrintName="Remote Control"SWEP.Slot=0;SWEP.SlotPos=4;SWEP.DrawAmmo=false;SWEP.Weight=1;SWEP.Spawnable=true;SWEP.AdminOnly=false;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo="none"SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=false;SWEP.Secondary.Ammo="none"SWEP.viewModel="models/weapons/v_pistol.mdl"SWEP.worldModel="models/weapons/w_pistol.mdl"if CLIENT then return end;function SWEP:PrimaryAttack()local a=self:GetOwner()local b=a:GetEyeTrace()if IsValid(b.Entity)&&b.Entity:GetClass()=="gmod_wire_pod"&&gamemode.Call("PlayerUse",a,b.Entity)then self.Linked=b.Entity;a:ChatPrint("Remote Controller linked.")end end;function SWEP:Holster()local a=self:GetOwner()if IsValid(a)&&self.Linked then self:Off(a)end;return true end;function SWEP:OnDrop()local a=self:GetOwner()if IsValid(a)&&self.Linked then self:Off(a)end;self.Linked=nil end;function SWEP:On(a)if IsValid(self.Linked)&&self.Linked.HasPly&&self.Linked:HasPly()then if WireLib.CanTool(a,self.Linked,"remotecontroller")then if self.Linked.RC then self.Linked:RCEject(self.Linked:GetPly())else self.Linked:GetPly():ExitVehicle()end else a:ChatPrint("Pod is in use.")return end end;self.Active=true;self.OldMoveType=!a:InVehicle()&&a:GetMoveType()||MOVETYPE_WALK;self.InitialAngle=a:EyeAngles()a:SetMoveType(MOVETYPE_NONE)a:DrawViewModel(false)a.using_wire_remote_control=true;if IsValid(self.Linked)&&self.Linked.PlayerEntered then self.Linked:PlayerEntered(a,self)end end;function SWEP:Off(a)if self.Active then a:SetMoveType(self.OldMoveType||MOVETYPE_WALK)end;self.Active=nil;self.OldMoveType=nil;a:DrawViewModel(true)a.using_wire_remote_control=false;if IsValid(self.Linked)&&self.Linked:GetPly()==a then self.Linked:PlayerExited()end end;function SWEP:Think()if!self.Linked then return end;local a=self:GetOwner()if!IsValid(a)then return end;if a:KeyPressed(IN_USE)then if!self.Active then self:On(a)else self:Off(a)end end end;hook.Add("PlayerNoClip","wire_remotecontroller_antinoclip",function(a,c)if a.using_wire_remote_control then return false end end)
--addons/!lpakr_out/lua/weapons/sup_binos.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/sup_blurrg1120.lua:
AddCSLuaFile()SWEP.DrawCrosshair=false;SWEP.FadeCrosshairOnAim=true;SWEP.CSMuzzleFlashes=false;SWEP.AimPos=Vector(-3.25,0,1.4)SWEP.AimAng=Vector(0,0,0)SWEP.SprintPos=Vector(2,-11,-5)SWEP.SprintAng=Vector(50,0,2)SWEP.ViewModelMovementScale=.5;SWEP.IconLetter='b'SWEP.PrintName='Blurrg-1120'SWEP.BobScale=0;SWEP.SwayScale=0;SWEP.ViewbobIntensity=2;SWEP.ViewbobEnabled=true;SWEP.AmmoOffset=Vector(15,-2.3,-2.5)SWEP.PlayBackRate=30;SWEP.PlayBackRateSV=12;SWEP.BulletDiameter=7.62;SWEP.CaseLength=39;SWEP.Kind=WEAPON_HEAVY;SWEP.AutoSpawnable=false;SWEP.AllowDrop=false;SWEP.IgnoreReloadSound=true;SWEP.NormalHoldType='revolver'SWEP.RunHoldType='normal'SWEP.FireModes={'auto','semi','2burst','3burst','overcharge'}SWEP.Base='cw_base'SWEP.Category='SUP Starwars Weapons'SWEP.Slot=2;SWEP.SlotPos=0;SWEP.Author='Scott'SWEP.Contact=''SWEP.Purpose=''SWEP.Instructions=''SWEP.ViewModelFlip=false;SWEP.ViewModel='models/galactic/weapons/vmodels/blurrg1120.mdl'SWEP.WorldModel='models/galactic/weapons/wmodels/blurrg1120.mdl'SWEP.Spawnable=true;SWEP.AdminSpawnable=true;SWEP.Primary.ClipSize=50;SWEP.Primary.DefaultClip=0;SWEP.Primary.Automatic=true;SWEP.Primary.Ammo='ammo_blaster'SWEP.FireDelay=.09;SWEP.FireSound=Sound'blaster.dc15sa_fire'SWEP.ReloadSound=Sound'blaster.reload_pistol'SWEP.Recoil=2;SWEP.RecoilAngle=Angle(-2,0,0)SWEP.HipSpread=0.02;SWEP.AimSpread=0.01;SWEP.VelocitySensitivity=1;SWEP.MaxSpreadInc=0;SWEP.SpreadPerShot=0;SWEP.SpreadCooldown=0;SWEP.Shots=1;SWEP.Damage=30;SWEP.DeployTime=1;SWEP.ShowHands=true;SWEP.UIPosition=Vector(0,-60,0)SWEP.UIAngle=Angle(0,0,0)function SWEP:OnFireModeChanged(a)if a=='overcharge'then self.AmmoPerShot=math.random(5,10)self.Damage=200;self.FireDelay=2 else self.AmmoPerShot=1;self.Damage=35;self.FireDelay=.08 end end
--addons/!lpakr_out/lua/weapons/sup_dc17m_glrc.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/sup_dc17m_glrc.lua:
AddCSLuaFile()if CLIENT then SWEP.DrawCrosshair=false;SWEP.CSMuzzleFlashes=true;SWEP.AimPos=Vector(0,-1,0)SWEP.AimAng=Vector(0,0,0)SWEP.RestPos=Vector(0,-.5,.5)SWEP.SprintPos=Vector(5,-3,1)SWEP.SprintAng=Vector(-15,50,0)SWEP.ViewModelMovementScale=.5;SWEP.IconLetter='b'end;SWEP.UIPosition=Vector(0,0,0)SWEP.UIAngle=Angle(0,90,0)SWEP.PrintName='DC-17m Launcher'SWEP.MuzzleEffect='swb_pistol_large'SWEP.BobScale=0;SWEP.SwayScale=0;SWEP.ViewbobIntensity=4;SWEP.ViewbobEnabled=true;SWEP.AmmoOffset=Vector(16,-1.5,-4)SWEP.FadeCrosshairOnAim=false;SWEP.PlayBackRate=1;SWEP.PlayBackRateSV=1;SWEP.BulletDiameter=5;SWEP.CaseLength=10;SWEP.Kind=WEAPON_HEAVY;SWEP.AutoSpawnable=false;SWEP.AllowDrop=false;SWEP.NormalHoldType='ar2'SWEP.RunHoldType='passive'SWEP.FireModes={'auto','semi'}SWEP.Base='cw_base'SWEP.Category='SUP Starwars Weapons'SWEP.Slot=0;SWEP.SlotPos=0;SWEP.Author='Scott'SWEP.Contact=''SWEP.Purpose=''SWEP.Instructions=''SWEP.ViewModelFlip=false;SWEP.ViewModel='models/galactic/weapons/vmodels/supdc17m.mdl'SWEP.WorldModel='models/weapons/w_dc17m_at.mdl'SWEP.Bodygroups='020'SWEP.Spawnable=true;SWEP.AdminSpawnable=true;SWEP.AmmoOffset=Vector(20,0,-2)SWEP.Primary.ClipSize=2;SWEP.Primary.DefaultClip=0;SWEP.Primary.Automatic=true;SWEP.FireDelay=3;SWEP.FireSound=Sound'weapons/ar2/ar2_altfire.wav'SWEP.ReloadSound=Sound'blaster.reload_dc17m'SWEP.Recoil=3;SWEP.RecoilAngle=Angle(-3,0,0)SWEP.RecoilAngleSpread=Angle(0,0,0)SWEP.ProjectileVeloctiy=3000;SWEP.Primary.Ammo='ammo_gl'SWEP.ShotgunReload=false;SWEP.ReloadStartWait=0.6;SWEP.ReloadFinishWait=1.1;SWEP.ReloadShellInsertWait=0.6;SWEP.Chamberable=false;SWEP.HipSpread=0;SWEP.AimSpread=0;SWEP.VelocitySensitivity=2.2;SWEP.MaxSpreadInc=0.06;SWEP.SpreadPerShot=0.02;SWEP.SpreadCooldown=1.03;SWEP.Shots=8;SWEP.Damage=550;SWEP.DeployTime=2;SWEP.ShowHands=true;SWEP.IsGrenadeLauncher=true;function SWEP:CreateFragGrenade(a,b,c)local d=ents.Create('rp_grenade_gl')d.class=self:GetClass()d.Damage=d.Damage||self.Damage||200;d.Range=d.Range||self.Range||175;d:SetOwner(c)d:SetPos(a)d:Spawn()if c:IsPlayer()then b=b+b*c:GetTalentPassive('GrenadeThrow')end;local e=d:GetPhysicsObject()if IsValid(e)then e:SetVelocity(b)end end;function SWEP:ThrowGrenade(c)local f=c:EyePos()local g=c:EyeAngles()local h=g:Forward()h.z=h.z+0.01;local i=g:Right()local a=f+h*18+i*8;local b=c:GetVelocity()b=b+h*3000;self:CreateFragGrenade(a,b,c)end;function SWEP:DoCustomFire(j,k,l)return true end;function SWEP:DoImpactEffect(m,n)end
--addons/!lpakr_out/lua/weapons/sup_dc17mbr_s.lua:
AddCSLuaFile()if CLIENT then SWEP.DrawCrosshair=false;SWEP.CSMuzzleFlashes=true;SWEP.AimPos=Vector(-5.89,0,2.5)SWEP.AimAng=Vector(0,0,0)SWEP.SprintPos=Vector(10,-10,2)SWEP.SprintAng=Vector(-15,50,0)SWEP.ViewModelMovementScale=.5;SWEP.IconLetter='b'end;SWEP.UIPosition=Vector(0,-30,0)SWEP.UIAngle=Angle(0,90,0)sound.Add({name='blaster.dc17mbr_firesmashy',channel=CHAN_WEAPON,volume=.35,level=90,pitch={95,100},sound='weapons/dc17m_sza_fire.wav'})sound.Add({name='blaster.dc17mbr_reloadsmashy',channel=CHAN_WEAPON,volume=.35,level=90,pitch={95,100},sound='weapons/dc17m_sza_reload.wav'})SWEP.PrintName='SZA'SWEP.Tracer=1;SWEP.TracerName='sup_laser_yellow'SWEP.Primary.Tracer=1;SWEP.Primary.TracerName='sup_laser_yellow'SWEP.ImpactEffectColor=Vector(255,200,0)SWEP.DamageType=DMG_DISSOLVE;SWEP.AmmoType='dissolve'SWEP.BobScale=0;SWEP.SwayScale=0;SWEP.ViewbobIntensity=2;SWEP.ViewbobEnabled=true;SWEP.AmmoOffset=Vector(25,-2,-2.5)SWEP.CanPenetrate=false;SWEP.PlayBackRate=30;SWEP.PlayBackRateSV=12;SWEP.BulletDiameter=7.62;SWEP.CaseLength=39;SWEP.Kind=WEAPON_HEAVY;SWEP.AutoSpawnable=false;SWEP.AllowDrop=false;SWEP.NormalHoldType='ar2'SWEP.RunHoldType='passive'SWEP.FireModes={'auto','semi'}SWEP.Base='cw_base'SWEP.Category='SUP Custom Weapons'SWEP.Slot=1;SWEP.SlotPos=0;SWEP.Author='Scott'SWEP.Contact=''SWEP.Purpose=''SWEP.Instructions=''SWEP.ViewModelFOV=70;SWEP.ViewModelFlip=false;SWEP.ViewModel='models/galactic/weapons/vmodels/supdc17m.mdl'SWEP.WorldModel='models/tobester/smashy/kerrigan_gun_wmodel.mdl'SWEP.Spawnable=true;SWEP.AdminSpawnable=false;SWEP.Hide=true;SWEP.Primary.ClipSize=50;SWEP.Primary.DefaultClip=0;SWEP.Primary.Automatic=true;SWEP.FireDelay=0.10;SWEP.FireSound='blaster.dc17mbr_firesmashy'SWEP.ReloadSound='blaster.dc17mbr_reloadsmashy'SWEP.RecoilAngle=Angle(-1.8,0,0)SWEP.HipSpread=.02;SWEP.AimSpread=.002;SWEP.VelocitySensitivity=0;SWEP.MaxSpreadInc=0;SWEP.SpreadPerShot=0;SWEP.SpreadCooldown=0;SWEP.Shots=1;SWEP.Damage=42;SWEP.DeployTime=1;SWEP.ShowHands=true;SWEP.BulletDiameter=0;SWEP.CaseLength=0;SWEP.HasScope=false;SWEP.FadeCrosshairOnAim=true;SWEP.PreventQuickScoping=true
--addons/!lpakr_out/lua/weapons/sup_detonator/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/sup_detonator/shared.lua:
SWEP.Category='SUP Starwars Weapons'SWEP.Slot=3;SWEP.SlotPos=1;SWEP.Spawnable=true;SWEP.AdminOnly=true;SWEP.PrintName='Detonator'SWEP.DrawAmmo=false;SWEP.UseHands=true;SWEP.ViewModelFlip=true;SWEP.ViewModel=Model'models/galactic/weapons/vmodels/supdatapad.mdl'SWEP.WorldModel=Model'models/weapons/w_swrcdeton.mdl'SWEP.HoldType='pistol'SWEP.Primary.Automatic=false;SWEP.Primary.Ammo='none'SWEP.Secondary.Automatic=false;SWEP.Secondary.Ammo='none'SWEP.UIPosition=Vector(0,-70,0)SWEP.UIAngle=Angle(-90,90,0)SWEP.Timers={5,10,15,20,25,30,35,40,45}function SWEP:PrimaryAttack()self:SendWeaponAnim(ACT_VM_PRIMARYATTACK)self:SetNextPrimaryFire(CurTime()+2)timer.Simple(.25,function()if!IsValid(self)then return end;self:SendWeaponAnim(ACT_VM_DRAW)self:GetOwner():SetAnimation(PLAYER_ATTACK1)end)end;function SWEP:SecondaryAttack()return false end
--addons/!lpakr_out/lua/weapons/sup_dlt19.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/entities/weapons/sup_droideka.lua:
AddCSLuaFile()SWEP.PrintName='Droideka Weapon'SWEP.Author='Scott'SWEP.HoldType='normal'SWEP.Category='SUP Weapons'SWEP.UseHands=false;SWEP.Slot=1;SWEP.SlotPos=1;SWEP.Spawnable=true;SWEP.DrawAmmo=false;SWEP.WorldModel=''SWEP.Primary.Damage=225;SWEP.Primary.NumShots=1;SWEP.Primary.Cone=0;SWEP.Primary.Delay=0;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=true;SWEP.Primary.Ammo='AR2'SWEP.Primary.TakeAmmo=0;SWEP.Secondary.Damage=50;SWEP.Secondary.NumShots=1;SWEP.Secondary.Cone=0;SWEP.Secondary.Delay=0;SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo='AR2'SWEP.Secondary.TakeAmmo=0;SWEP.Tracer='cwbase_laser'SWEP.AnimPrefix='ar2'SWEP.ViewModelFlip=false;SWEP.DrawCrosshair=false;sound.Add({name='droideka.Fire1',channel=CHAN_AUTO,volume=1,pitch={95,105},level=100,sound='galactic/droideka/droideka_fire.wav'})function SWEP:Deploy()if IsValid(self:GetOwner())&&CLIENT then self:GetOwner():InvalidateBoneCache()end end;function SWEP:Initialize()self:SetHoldType(self.HoldType)end;function SWEP:PrimaryAttack()self:SetNextPrimaryFire(CurTime()+.25)self:GetOwner():SetAnimation(PLAYER_ATTACK1)end;function SWEP:SecondaryAttack()end;local a=3;local b=Color(255,255,255,150)function SWEP:DrawHUD(c,d)draw.RoundedBox(10,(ScrW()-a)/2,(ScrH()-a)/2,a*2,a*2,b)end;function SWEP:Holster()if!SERVER then return true end;self:GetOwner():DrawViewModel(true)self:GetOwner():DrawWorldModel(true)return true end;function SWEP:Reload()end;function SWEP:DrawWorldModel()end;function SWEP:PreDrawViewModel(e)return true end
--addons/!lpakr_out/lua/weapons/sup_e5_falcon.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/sup_e60r.lua:
AddCSLuaFile()SWEP.PrintName='E60R Launcher'SWEP.Author='Scott'SWEP.HoldType='rpg'SWEP.Category='SUP Starwars Weapons'SWEP.UseHands=false;SWEP.Slot=3;SWEP.SlotPos=1;SWEP.Spawnable=true;SWEP.WorldModel='models/weapons/w_E60R.mdl'SWEP.ViewModel='models/weapons/v_E60R.mdl'local a=Sound'weapons/sw_rocket/rocket_fire.wav'local b=Sound'weapons/dc17m_at_reload.wav'game.AddAmmoType({name='ammo_e60r',dmgtype=DMG_BLAST,tracer=TRACER_LINE_AND_WHIZ,plydmg=0,npcdmg=0,force=1,minsplash=0,maxsplash=0})SWEP.Primary.ClipSize=1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo='ammo_e60r'SWEP.AnimPrefix='rpg'SWEP.ViewModelFlip=false;SWEP.DrawCrosshair=false;function SWEP:Initialize()self:SetHoldType('rpg')end;function SWEP:CanPrimaryAttack()if self:Clip1()<=0 then self:SetNextPrimaryFire(CurTime()+0.2)self:EmitSound('Weapon_Pistol.Empty')return false end;return true end;function SWEP:PrimaryAttack()if!IsFirstTimePredicted()then return end;if!self:CanPrimaryAttack()then return end;if CLIENT then return false end;local c=self:GetOwner()local d=ents.Create'e60r_rocket'if!IsValid(d)then return end;local e=c:GetAimVector()local f=e:Cross(Vector(0,c:IsPlayer()&&c:Crouching()&&2.5||0,1))local g=f:Cross(e)local h=c:GetShootPos()+e*24+f*8+g*-1;d:SetOwner(c)d:SetPos(h)d:SetAngles(e:Angle())d:Spawn()d:Activate()self:EmitSound(a)self:SendWeaponAnim(ACT_VM_PRIMARYATTACK)self:SetNextPrimaryFire(CurTime()+1)self:SetClip1(0)end;function SWEP:SecondaryAttack()return false end;function SWEP:Reload()if!IsFirstTimePredicted()||self.nextreload&&self.nextreload>CurTime()then return end;self.nextreload=CurTime()+5;if self:Clip1()<=0 then if self:DefaultReload(ACT_VM_RELOAD)then self:SetNextPrimaryFire(self.nextreload)self:EmitSound(b)end end end;function SWEP:Deploy()self:SetHoldType('rpg')if self:Clip1()>0 then self:SendWeaponAnim(ACT_VM_DEPLOY)else self:SendWeaponAnim(ACT_VM_DEPLOY_EMPTY)end end;function SWEP:Holster()return true end;function SWEP:DrawHUD()srp.weapons.DrawCrosshair(nil,nil,255,0)end
--addons/!lpakr_out/lua/weapons/sup_grenade_flash.lua:
AddCSLuaFile()SWEP.Base='weapon_grenadebase'SWEP.PrintName='Flash Grenade'SWEP.Author='Scott'SWEP.Purpose='It\'s a flash grenade'SWEP.Spawnable=false;SWEP.Category='SUP Weapons'SWEP.GrenadeEnt='rp_grenade_flash'SWEP.HoldType='grenade'SWEP.WorldMaterial=false;SWEP.ViewMaterial=false;SWEP.Impact=false;SWEP.Range=850
--addons/!lpakr_out/lua/weapons/sup_grenade_popper.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/sup_ichigo.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/sup_iqa11.lua:
AddCSLuaFile()SWEP.DrawCrosshair=false;SWEP.PrintName='IQ A-11'SWEP.CSMuzzleFlashes=true;SWEP.RestPos=Vector(0,-2,0)SWEP.AimPos=Vector(-5.105,-5,1.31)SWEP.AimAng=Vector(0,0,0)SWEP.SprintPos=Vector(0,-10,-1)SWEP.SprintAng=Vector(-15,40,0)SWEP.ViewModelMovementScale=.5;SWEP.IconLetter='b'SWEP.SkinSlotId=1;SWEP.DelayedZoom=true;SWEP.SimulateCenterMuzzle=true;SWEP.ZoomAmount=15;SWEP.AdjustableZoom=true;SWEP.MinZoom=1;SWEP.MaxZoom=35;SWEP.ZoomSteps=5;SWEP.ScopeOverrideMaterialIndex=5;SWEP.ScopeFOV=20;SWEP.ScopeFlipX=true;SWEP.ScopeFlipY=false;SWEP.ScopedBlur=false;SWEP.MuzzleEffect='swb_pistol_lar ge'SWEP.BobScale=0;SWEP.SwayScale=0;SWEP.ViewbobIntensity=2;SWEP.ViewbobEnabled=true;SWEP.AmmoOffset=Vector(20,-1,-3)SWEP.PlayBackRate=5;SWEP.PlayBackRateSV=5;SWEP.BulletDiameter=7.62;SWEP.CaseLength=39;SWEP.CanPenetrate=true;SWEP.HasScope=true;SWEP.FadeCrosshairOnAim=true;SWEP.PreventQuickScoping=true;SWEP.Kind=WEAPON_HEAVY;SWEP.AutoSpawnable=false;SWEP.AllowDrop=false;SWEP.NormalHoldType='ar2'SWEP.RunHoldType='passive'SWEP.FireModes={'bolt'}SWEP.Base='cw_base'SWEP.Category='SUP Starwars Weapons'SWEP.Slot=1;SWEP.SlotPos=0;SWEP.Author='Scott'SWEP.Contact=''SWEP.Purpose=''SWEP.Instructions=''SWEP.ViewModelFlip=false;SWEP.ViewModel='models/galactic/weapons/bf/v_iqa11_rifle.mdl'SWEP.WorldModel='models/galactic/weapons/bf/w_iqa11_rifle.mdl'SWEP.Spawnable=true;SWEP.AdminSpawnable=true;SWEP.Primary.ClipSize=1;SWEP.Primary.DefaultClip=0;SWEP.Primary.Automatic=false;SWEP.FireDelay=1.5;SWEP.FireSound=Sound'blaster.fire_sniper'SWEP.Recoil=4;SWEP.RecoilAngle=Angle(-15,0,0)SWEP.HipDivRecoil=Vector(0.05,.05,.05)SWEP.RecoilSpeed=25;SWEP.HipSpread=0.08;SWEP.AimSpread=0;SWEP.VelocitySensitivity=0;SWEP.MaxSpreadInc=0.06;SWEP.SpreadPerShot=0.007;SWEP.SpreadCooldown=0.13;SWEP.Shots=1;SWEP.Damage=280;SWEP.DeployTime=5;SWEP.ShowHands=true;SWEP.UIPosition=Vector(0,-60,0)SWEP.UIAngle=Angle(0,90,0)function SWEP:AdjustMouseSensitivity()if self.dt.State==SWB_AIMING then local a=math.Clamp(cvar.GetValue('weapon_aimsense_sniper')||1,0,1)return a>0&&a||.7 end end
--addons/!lpakr_out/lua/weapons/sup_mine.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/sup_mine.lua:
AddCSLuaFile()local a=CurTime()if CLIENT then SWEP.DrawCrosshair=false;SWEP.PrintName='Mines'SWEP.CSMuzzleFlashes=true;SWEP.AimPos=Vector(0,0,0)SWEP.AimAng=Vector(0,0,0)SWEP.SprintPos=Vector(0,-15,-10)SWEP.SprintAng=Vector(40,0,0)SWEP.ViewModelMovementScale=.4;SWEP.IconLetter='b'end;SWEP.MuzzleEffect='CS_MuzzleFlash_X'SWEP.BobScale=0;SWEP.SwayScale=0;SWEP.ViewbobIntensity=2;SWEP.ViewbobEnabled=true;SWEP.AmmoOffset=Vector(24,-0.3,-4.5)SWEP.PlayBackRate=30;SWEP.PlayBackRateSV=5;SWEP.BulletDiameter=11.43;SWEP.CaseLength=23;SWEP.Kind=WEAPON_HEAVY;SWEP.AutoSpawnable=false;SWEP.AllowDrop=false;SWEP.NormalHoldType='normal'SWEP.RunHoldType='normal'SWEP.FireModes={'semi'}SWEP.Base='swb_base'SWEP.Category='SUP Weapons'SWEP.Slot=3;SWEP.SlotPos=1;SWEP.Author='Scott'SWEP.Contact=''SWEP.Purpose=''SWEP.Instructions=''SWEP.ViewModelFOV=75;SWEP.ViewModelFlip=false;SWEP.ViewModel='models/milrp/weapons/antitank/v_mine.mdl'SWEP.WorldModel='models/milrp/weapons/antitank/w_mine.mdl'SWEP.Spawnable=true;SWEP.AdminSpawnable=true;SWEP.Primary.ClipSize=1;SWEP.Primary.DefaultClip=0;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo='MINE'SWEP.FireDelay=15;SWEP.Recoil=5;SWEP.HipSpread=0.4;SWEP.AimSpread=0.01;SWEP.VelocitySensitivity=10;SWEP.MaxSpreadInc=0.03;SWEP.SpreadPerShot=0.0035;SWEP.SpreadCooldown=0.2;SWEP.Shots=1;SWEP.Damage=25;SWEP.DeployTime=10;SWEP.UseHands=true;SWEP.HasScope=false;SWEP.ViewModelReload=nil;SWEP.AlreadyDrawn=true;SWEP.ReloadSegmented=true;SWEP.ReloadSegmentedFirst='empty_holster'SWEP.ReloadSegmentedFinish=ACT_VM_READY;SWEP.ReloadInsertWait=4;SWEP.MineEnt='sup_placedmine'SWEP.BlackZones={{Vector(),2000}}function SWEP:PrimaryAttack()if!SERVER then return end;a=CurTime()self:SetNextPrimaryFire(a+self.FireDelay)self:SetNextSecondaryFire(a+self.FireDelay)if!(self:GetOwner():IsProne()||self:GetOwner():Crouching())then return end;if self:CanPlace()then self:SendWeaponAnim(ACT_VM_PRIMARYATTACK)timer.Simple(1,function()if IsValid(self)then self:PlaceMine()end end)self.Cooldown=CurTime()+3 else self.Cooldown=CurTime()+1 end end;function SWEP:CanPlace()local b=self:GetOwner()local c=b:GetEyeTraceNoCursor()if!c.HitWorld||c.HitPos:Distance(b:GetPos())>500 then return end;for d,e in ipairs(self.BlackZones)do if e[1]:Distance(c.HitPos)<e[2]then return end end;local f=c.HitNormal:Dot(Vector(0,0,1))if f>.8&&f<1.1 then return true,c.HitPos,c.HitNormal end end;function SWEP:PlaceMine()local g,h,i=self:CanPlace()if!g then return end;local j=self:GetOwner()j.explosives=j.explosives||{}if#j.explosives>=8 then local k=table.remove(j.explosives,1)if IsValid(k)then k:Remove()end end;self:SendWeaponAnim(ACT_VM_READY)local k=ents.Create(self.MineEnt)if IsValid(k)then local l=(h-i*50):Angle()k:SetPropOwner(self:GetOwner())k:SetPos(h)k:SetAngles(l)k:SetAllegianceID(self:GetOwner():GetAllegianceID())k:SetModel('models/props/starwars/weapons/lasertrap.mdl')k:Spawn()table.insert(j.explosives,k)end end
--addons/!lpakr_out/lua/weapons/sup_shax.lua:
AddCSLuaFile()if CLIENT then SWEP.DrawCrosshair=false;SWEP.CSMuzzleFlashes=true;SWEP.RestPos=Vector(0,-1,-.4)SWEP.AimPos=Vector(0,0,0)SWEP.AimAng=Vector(0,0,0)SWEP.SprintPos=Vector(2,-3,1)SWEP.SprintAng=Vector(-15,40,0)SWEP.ViewModelMovementScale=.5;SWEP.IconLetter='b'SWEP.DelayedZoom=true;SWEP.SimulateCenterMuzzle=false;SWEP.ZoomAmount=15;SWEP.AdjustableZoom=true;SWEP.MinZoom=1;SWEP.MaxZoom=35;SWEP.ZoomSteps=5;SWEP.ScopeOverrideMaterialIndex=1;SWEP.ScopeFOV=10;SWEP.ScopeFlipX=true;SWEP.ScopeFlipY=false;SWEP.ScopedBlur=false end;SWEP.PrintName='Shax'SWEP.MuzzleEffect='swb_pistol_large'SWEP.BobScale=0;SWEP.SwayScale=0;SWEP.ViewbobIntensity=2;SWEP.ViewbobEnabled=true;SWEP.AmmoOffset=Vector(25,-2,-2.5)SWEP.CanPenetrate=false;SWEP.PlayBackRate=30;SWEP.PlayBackRateSV=12;SWEP.BulletDiameter=7.62;SWEP.CaseLength=39;SWEP.Kind=WEAPON_HEAVY;SWEP.AutoSpawnable=false;SWEP.AllowDrop=false;SWEP.NormalHoldType='ar2'SWEP.RunHoldType='passive'SWEP.FireModes={'auto','semi'}SWEP.Base='cw_base'SWEP.Category='SUP Custom Weapons'SWEP.Slot=1;SWEP.SlotPos=0;SWEP.Author='Scott'SWEP.Contact=''SWEP.Purpose=''SWEP.Instructions=''SWEP.ViewModelFlip=false;SWEP.ViewModel='models/tobester/weapons/v_shax_blaster.mdl'SWEP.WorldModel='models/tobester/weapons/w_shax_blaster.mdl'SWEP.Spawnable=true;SWEP.AdminSpawnable=false;SWEP.Hide=true;SWEP.Primary.ClipSize=50;SWEP.Primary.DefaultClip=0;SWEP.Primary.Automatic=true;SWEP.FireDelay=0.19;SWEP.FireSound='blaster.shax_fire'SWEP.ReloadSound='blaster.shax_reload'SWEP.TracerName='sup_laser_yellow_mando'SWEP.ImpactEffectColor=Vector(255,255,2)SWEP.RecoilAngle=Angle(-.65,0,0)SWEP.HipSpread=.02;SWEP.AimSpread=.002;SWEP.VelocitySensitivity=0;SWEP.MaxSpreadInc=0;SWEP.SpreadPerShot=0;SWEP.SpreadCooldown=0;SWEP.Shots=1;SWEP.Damage=60;SWEP.DeployTime=1;SWEP.ShowHands=true;SWEP.BulletDiameter=0;SWEP.CaseLength=0;SWEP.HasScope=false;SWEP.FadeCrosshairOnAim=false;SWEP.PreventQuickScoping=true;SWEP.DamageType=DMG_DISSOLVE;SWEP.AmmoType='dissolve'SWEP.UIPosition=Vector(0,-50,0)SWEP.UIAngle=Angle(0,90,0)sound.Add({name='blaster.shax_fire',channel=CHAN_WEAPON,volume=.35,level=90,pitch={95,100},sound='weapons/shax_fire.wav'})sound.Add({name='blaster.shax_reload',channel=CHAN_WEAPON,volume=.35,level=90,pitch={95,100},sound='weapons/shax_reload.wav'})
--addons/!lpakr_out/lua/weapons/sup_stealthblaster.lua:
AddCSLuaFile()SWEP.DrawCrosshair=false;SWEP.CSMuzzleFlashes=true;SWEP.RestPos=Vector(-.5,-2,0.5)SWEP.AimPos=Vector(-4.478,-4,1.192)SWEP.AimAng=Vector(0,0,0)SWEP.SprintPos=Vector(2,-5,0)SWEP.SprintAng=Vector(-15,55,0)SWEP.ViewModelMovementScale=.5;SWEP.IconLetter='b'SWEP.DelayedZoom=true;SWEP.SimulateCenterMuzzle=false;SWEP.ZoomAmount=15;SWEP.AdjustableZoom=true;SWEP.MinZoom=1;SWEP.MaxZoom=35;SWEP.ZoomSteps=5;SWEP.ScopeOverrideMaterialIndex=2;SWEP.ScopeFOV=10;SWEP.ScopeFlipX=true;SWEP.ScopeFlipY=false;SWEP.ScopedBlur=false;SWEP.PrintName='Shadow Blaster'SWEP.MuzzleEffect='swb_pistol_large'SWEP.BobScale=0;SWEP.SwayScale=0;SWEP.ViewbobIntensity=2;SWEP.ViewbobEnabled=true;SWEP.AmmoOffset=Vector(25,-2,-2.5)SWEP.CanPenetrate=false;SWEP.PlayBackRate=30;SWEP.PlayBackRateSV=12;SWEP.BulletDiameter=7.62;SWEP.CaseLength=39;SWEP.Kind=WEAPON_HEAVY;SWEP.AutoSpawnable=false;SWEP.AllowDrop=false;SWEP.NormalHoldType='ar2'SWEP.RunHoldType='passive'SWEP.FireModes={'auto','semi'}SWEP.Base='cw_base'SWEP.Category='SUP Starwars Weapons'SWEP.Slot=1;SWEP.SlotPos=0;SWEP.Author='Scott'SWEP.Contact=''SWEP.Purpose=''SWEP.Instructions=''SWEP.ViewModelFlip=false;SWEP.ViewModel='models/tobester/weapons/v_stealthblaster.mdl'SWEP.WorldModel='models/tobester/weapons/w_stealthblaster.mdl'SWEP.Spawnable=true;SWEP.AdminSpawnable=true;SWEP.Primary.ClipSize=12;SWEP.Primary.DefaultClip=0;SWEP.Primary.Automatic=true;SWEP.FireDelay=0.25;SWEP.FireSound=Sound'westarm5.fire'SWEP.RecoilAngle=Angle(-.85,0,0)SWEP.HipSpread=.02;SWEP.AimSpread=.002;SWEP.VelocitySensitivity=0;SWEP.MaxSpreadInc=0;SWEP.SpreadPerShot=0;SWEP.SpreadCooldown=0;SWEP.Shots=1;SWEP.Damage=100;SWEP.PvPDamage=75;SWEP.DeployTime=2;SWEP.ReloadFinishWait=2;SWEP.ShowHands=true;SWEP.BulletDiameter=0;SWEP.CaseLength=0;SWEP.HasScope=true;SWEP.FadeCrosshairOnAim=true;SWEP.PreventQuickScoping=true;function SWEP:BulletCallback(a,b,c)if IsValid(b.Entity)&&b.Entity:IsPlayer()then c:SetDamage(self.PvPDamage)end end
--addons/!lpakr_out/lua/weapons/swb_knife/shared.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/swsft_base.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/weapons/weapon_bombtool.lua:
AddCSLuaFile()SWEP.PrintName='EOD Toolkit'SWEP.Author='Scott'SWEP.DrawAmmo=false;SWEP.Category='SUP Weapons'SWEP.UseHands=true;SWEP.Slot=3;SWEP.SlotPos=5;SWEP.Spawnable=true;SWEP.ViewModelFOV=50;SWEP.WorldModel='models/galactic/weapons/wmodels/supdatapad.mdl'SWEP.ViewModel='models/galactic/weapons/vmodels/supdatapad.mdl'SWEP.ViewModelFlip=false;SWEP.DrawCrosshair=false;SWEP.HoldType='pistol'SWEP.Primary.Damage=0;SWEP.Primary.Ammo='none'SWEP.Secondary.Damage=0;SWEP.Secondary.Ammo='none'SWEP.Cooldown=5;SWEP.FailedSound=Sound('weapons/physgun_off.wav')function SWEP:Initialize()self:SetHoldType'pistol'end;function SWEP:PrimaryAttack()if!IsFirstTimePredicted()||CLIENT then return true end;local a=self:GetOwner()local b=a:GetEyeTrace()local c=b.Entity;if!IsValid(c)||!c.EODInteract then return false end;if b.HitPos:Distance(a:GetPos())>600 then return false end;c:EODInteract(a,function(d)if!IsValid(c)then return end;if d then a:AddTalentXP(60)c:EmitSound('npc/manhack/grind'..math.random(1,5)..'.wav')local e=EffectData()e:SetOrigin(b.HitPos)util.Effect('cball_explode',e,false,true)else srp.notif.Warning(a,3,term.Get('NoEODRequired'))c:EmitSound(self.FailedSound)end end)self:SetNextPrimaryFire(CurTime()+self.Cooldown)return false end;function SWEP:SecondaryAttack()if!IsFirstTimePredicted()||CLIENT then return true end;local a=self:GetOwner()local b=a:GetEyeTrace()local c=b.Entity;if!IsValid(c)||!c.EODManage then return false end;if b.HitPos:Distance(a:GetPos())>800 then return false end;local d,f=c:EODManage(a)if d then if f then a:AddTalentXP(f)end;local e=EffectData()e:SetOrigin(b.HitPos)util.Effect('cball_explode',e,false,true)c:EmitSound('npc/manhack/grind'..math.random(1,5)..'.wav')end;self:SetNextSecondaryFire(CurTime()+self.Cooldown)return false end;function SWEP:DrawHUD()end
--addons/!lpakr_out/gamemodes/starwarsrp/entities/weapons/weapon_claw.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/weapons/weapon_deconstruction.lua:
AddCSLuaFile()SWEP.PrintName='Deconstruction Tool'SWEP.Author='Scott'SWEP.DrawAmmo=false;SWEP.Category='SUP Weapons'SWEP.UseHands=true;SWEP.Slot=3;SWEP.SlotPos=5;SWEP.Spawnable=false;SWEP.ViewModelFOV=50;SWEP.WorldModel='models/galactic/repairtool/w_repairtool.mdl'SWEP.ViewModel='models/galactic/repairtool/v_repairtool.mdl'SWEP.ViewModelFlip=false;SWEP.DrawCrosshair=false;SWEP.HoldType='pistol'SWEP.Primary.Damage=0;SWEP.Primary.Ammo='none'SWEP.Secondary.Damage=0;SWEP.Secondary.Ammo='none'SWEP.Cooldown=1;function SWEP:Initialize()self:SetHoldType'pistol'end;function SWEP:PrimaryAttack()if!IsFirstTimePredicted()||CLIENT then return true end;local a=self:GetOwner()local b=a:GetEyeTrace()local c=b.Entity;if!IsValid(c)then return false end;if!c.Construction then return end;srp.construction.Remove(a,c)self:SetNextPrimaryFire(CurTime()+self.Cooldown)return false end;function SWEP:SecondaryAttack()return false end;function SWEP:DrawHUD()end
--addons/!lpakr_out/lua/weapons/weapon_drr_remote_republic.lua:
AddCSLuaFile()SWEP.PrintName='Republic Drone'SWEP.Category='Drones'SWEP.Spawnable=true;SWEP.UseHands=true;SWEP.DrawAmmo=false;SWEP.ViewModelFOV=50;SWEP.Slot=3;SWEP.SlotPos=5;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=true;SWEP.Primary.Ammo='none'SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo='none'SWEP.ViewModel='models/dronesrewrite/c_controller/c_controller.mdl'SWEP.WorldModel='models/dronesrewrite/w_controller/w_controller.mdl'SWEP.TargetDRR=NULL;SWEP.RemoteDRRDistance=4096;SWEP.DroneClass={'dronesrewrite_republic'}function SWEP:DoIdle()timer.Create('weapon_idle'..self:EntIndex(),self:SequenceDuration(),1,function()if IsValid(self)then self:SendWeaponAnim(ACT_VM_IDLE)self:DoIdle()end end)end;function SWEP:Initialize()self:SetHoldType("slam")end;function SWEP:DrawHUD()if IsValid(self.Owner:GetNWEntity('DronesRewriteDrone'))then return end;local a=util.TraceLine({start=EyePos(),endpos=self.Owner:GetShootPos()+self.Owner:GetAimVector()*self.RemoteDRRDistance,filter=self.Owner})local b=a.Entity;local c='Drone that you\'re looking at - 'if!IsValid(b)then b=self:GetNWEntity('DronesRewriteDrone')c='Chosen drone - 'end;if IsValid(b)&&b.IS_DRR then local d,e=ScrW()/2,ScrH()-220;draw.SimpleText(c..b:GetUnit(),'DronesRewrite_customfont2_1',d,e,Color(255,255,255,200),TEXT_ALIGN_CENTER)local f=b:LocalToWorld(b:OBBCenter())local a=util.TraceLine({start=EyePos(),endpos=f,filter=self.Owner})if a.Hit&&a.Entity!=b then return end;local f=f:ToScreen()local g=math.sin(CurTime()*2)*30;surface.DrawCircle(f.x,f.y,g,Color(255,255,255,50))local g=math.sin(CurTime()*4)*30;surface.DrawCircle(f.x,f.y,g,Color(255,255,255,50))end end;function SWEP:CreateDrone()local h=self:GetOwner()local a=h:GetEyeTraceNoCursor()if!a.Hit then return end;h.Drone=ents.Create(self.DroneClass[math.random(1,#self.DroneClass)])if IsValid(h.Drone)then local f=a.HitPos+a.HitNormal*(self.SpawnHeight&&self.SpawnHeight||32)h.Drone:SetupOwner(h)h.Drone:SetPos(f)h.Drone:SetAngles(Angle(0,(h:GetPos()-a.HitPos):Angle().y,0))h.Drone:Spawn()h.Drone:Activate()h.Drone.Owner=h;undo.Create'drone_undo'undo.AddEntity(h.Drone)undo.SetPlayer(h)undo.Finish'Drone'print'Create Drones!'return h.Drone end end;function SWEP:GetDrone()local h=self:GetOwner()if IsValid(h.Drone)then if h.Drone:IsDroneDestroyed()then h.Drone:Remove()return self:CreateDrone()else return h.Drone end else return self:CreateDrone()end end;function SWEP:PrimaryAttack()if!SERVER then return end;local i=self:GetDrone()if IsValid(i)then self:SetNextPrimaryFire(CurTime()+0.5)self:SetNextSecondaryFire(CurTime()+0.5)end end;function SWEP:SecondaryAttack()self:SetNextPrimaryFire(CurTime()+0.9)self:SetNextSecondaryFire(CurTime()+0.9)local h=self:GetOwner()h:SetAnimation(PLAYER_ATTACK1)self.Weapon:SendWeaponAnim(ACT_VM_PRIMARYATTACK)self:DoIdle()end;function SWEP:Reload()if self.NextUse&&self.NextUse>CurTime()then return end;self.NextUse=CurTime()+2;srp.notif.Confirm({title='Confirm Destruction',sub_text='Are you sure you want to self-destruct this drone?',ent=self,callback=function(j)net.Start'dronesrewrite_selfdestruct'net.SendToServer()end})end;function SWEP:OnRemove(k)timer.Stop('weapon_idle'..self:EntIndex())local h=self:GetOwner()if!k&&IsValid(h)&&IsValid(h.Drone)then h.Drone:Remove()end end;function SWEP:Holster()self:OnRemove(true)return true end;function SWEP:Deploy()self.Weapon:SendWeaponAnim(ACT_VM_DRAW)self:DoIdle()self:SetDeploySpeed(0.7)self:SetNextPrimaryFire(CurTime()+self:SequenceDuration()*0.8)self:SetNextSecondaryFire(CurTime()+self:SequenceDuration()*0.8)return true end
--addons/!lpakr_out/lua/weapons/weapon_headtaker.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/weapons/weapon_holster.lua:
AddCSLuaFile()SWEP.PrintName='Holster & Keys'SWEP.Author='Scott'SWEP.HoldType='normal'SWEP.Category='SUP Weapons'SWEP.UseHands=false;SWEP.Slot=2;SWEP.SlotPos=1;SWEP.Spawnable=true;SWEP.DrawAmmo=false;SWEP.WorldModel=''SWEP.ViewModelFOV=100;SWEP.Primary.Damage=0;SWEP.Primary.NumShots=0;SWEP.Primary.Cone=0;SWEP.Primary.Delay=0;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo='none'SWEP.Primary.TakeAmmo=0;SWEP.Primary.Tracer=0;SWEP.Primary.TracerName='none'SWEP.Secondary.Ammo='none'SWEP.AnimPrefix='rpg'SWEP.ViewModelFlip=false;SWEP.DrawCrosshair=false;sound.Add({name='Holster.Knocking',channel=CHAN_STATIC,volume=1,level=50,pitch={90,120},sound=Sound('physics/wood/wood_crate_impact_hard2.wav'),loop=false})sound.Add({name='Holster.Bell',channel=CHAN_STATIC,volume=1,level=50,pitch=150,sound=Sound('ambient/alarms/warningbell1.wav'),loop=false})list.Add('NPCUsableWeapons',{class='',title='No Weapon'})list.Add('NPCUsableWeapons',{class='weapon_holster',title='Holster'})SWEP.DoorLockSound=Sound'doors/door_latch1.wav'SWEP.DoorUnlockSound=Sound'doors/door_latch3.wav'SWEP.ClassInteraction={func_door={'LockDoor','UnlockDoor',menus={'Lock / Knock','Unlock / Ring'}},func_door_rotating={'LockDoor','UnlockDoor',menus={'Lock / Knock','Unlock / Ring'}},gmod_sent_vehicle_fphysics_base={'LockCarDoor','UnlockCarDoor','LMB Lock | RMB Unlock Car',menus={'Lock Car','Unlock Car'}},wac_hc_base={'LockCarDoor','UnlockCarDoor','LMB Lock | RMB Unlock Aircraft',menus={'Lock Car','Unlock Car'}},lvs_base={'LockCarDoor','UnlockCarDoor','LMB Lock | RMB Unlock',menus={'Lock Vehicle','Unlock Vehicle'}},lvs_base_fakehover={'LockCarDoor','UnlockCarDoor','LMB Lock | RMB Unlock',menus={'Lock Vehicle','Unlock Vehicle'}},lvs_base_fighterplane={'LockCarDoor','UnlockCarDoor','LMB Lock | RMB Unlock',menus={'Lock Vehicle','Unlock Vehicle'}},lvs_base_starfighter={'LockCarDoor','UnlockCarDoor','LMB Lock | RMB Unlock',menus={'Lock Vehicle','Unlock Vehicle'}},lvs_base_repulsorlift={'LockCarDoor','UnlockCarDoor','LMB Lock | RMB Unlock',menus={'Lock Vehicle','Unlock Vehicle'}},lvs_walker_atte={'LockCarDoor','UnlockCarDoor','LMB Lock | RMB Unlock',menus={'Lock ATTE','Unlock ATTE'}},player={'FreePlayer',menus={'Free player'}}}SWEP.InteractionIcons={Material('materials/gui/lmb.png','noclamp'),Material('materials/gui/rmb.png','noclamp')}function SWEP:Initialize()self:SetHoldType(self.HoldType)self.DrawAmmo=false end;function SWEP:PrimaryAttack()if CLIENT then return end;local a=self:GetOwner()if!a:IsPlayer()then return end;local b=a:GetEyeTrace()local c=b.Entity;if!IsValid(c)||b.HitPos:Distance(a:GetPos())>250 then return end;local d=self.ClassInteraction[c:GetClass()]||self.ClassInteraction[c.Base]if IsFirstTimePredicted()&&d&&d[1]then local e=self[d[1]](self,a,c)if e then self:SetNextPrimaryFire(CurTime()+e)return end end;self:SetNextPrimaryFire(CurTime()+.5)end;function SWEP:SecondaryAttack()if CLIENT then return end;local a=self:GetOwner()if!a:IsPlayer()then return end;local b=a:GetEyeTrace()local c=b.Entity;if!IsValid(c)||b.HitPos:Distance(a:GetPos())>150 then return end;local d=self.ClassInteraction[c:GetClass()]||self.ClassInteraction[c.Base]if IsFirstTimePredicted()&&d&&d[2]then local e=self[d[2]](self,a,c)if e then self:SetNextSecondaryFire(CurTime()+e)return end end;self:SetNextSecondaryFire(CurTime()+.5)end;function SWEP:UnlockDoor(a,c)if c:HasDoorAccess(a)then c:EmitSound(self.DoorUnlockSound)c:Fire('Unlock')local f=c:GetLinkedDoors()for g,c in ipairs(f)do c:EmitSound(self.DoorUnlockSound)c:Fire('Unlock')end end;if!self.NextBell||CurTime()>self.NextBell then c:EmitSound'Holster.Bell'return 5 end end;function SWEP:LockDoor(a,c)if c:HasDoorAccess(a)then c:EmitSound(self.DoorLockSound)c:Fire('Lock')local f=c:GetLinkedDoors()for g,c in ipairs(f)do c:EmitSound(self.DoorLockSound)c:Fire('Lock')end;return end;if!self.NextKnock||CurTime()>self.NextKnock then c:EmitSound'Holster.Knocking'return.3 end end;function SWEP:UnlockCarDoor(h,c)local a=c:GetPropOwner()if IsValid(a)&&!(a:IsEventCharacter()||a==h)then return end;c:EmitSound(self.DoorUnlockSound)c:UnLock()end;function SWEP:LockCarDoor(h,c)local a=c:GetPropOwner()if IsValid(a)&&!(a:IsEventCharacter()||a==h)then return end;c:EmitSound(self.DoorLockSound)c:Lock()end;function SWEP:FreePlayer(a,c)srp.jail.TryBreakFree(a,c)end;function SWEP:Deploy()return true end;function SWEP:Holster()if!SERVER then return true end;local a=self:GetOwner()if!IsValid(a)&&a:IsPlayer()then a:DrawViewModel(true)a:DrawWorldModel(true)end;return true end;local i;function SWEP:Reload()if IsValid(i)then return end;if!CLIENT||!IsFirstTimePredicted()then return end;local a=self:GetOwner()local c=a:GetEyeTrace().Entity;if!IsValid(c)||!c:IsDoor()||c:GetPos():Distance(a:GetPos())>100||c:GetDoorOwner()!=LocalPlayer()&&!LocalPlayer():IsDA(true)then return end;srp.ui.Create('srp_agentaccess',function(j)j:Populate(c)i=j end)end;function SWEP:DrawWorldModel()end;function SWEP:PreDrawViewModel(k)return true end;local l=32;local m=5;local n=Color(0,0,0,180)function SWEP:DrawHUD()local a=self:GetOwner()if IsValid(a:GetVehicle())then return end;local b=a:GetEyeTrace()local c=b.Entity;if!IsValid(c)||b.HitPos:Distance(a:GetPos())>150 then return end;local o=self.ClassInteraction[c:GetClass()]||self.ClassInteraction[c.Base]if!o||!o.menus then return end;local p,q=ScrW(),ScrH()local r=#o.menus;local s=q-r*l-r*m;for t,u in ipairs(o.menus)do local v=p-205;draw.RoundedBox(6,v,s,200,l,n)draw.SimpleText(u,'ui_label.r',v+26,s+l/2,col.white,TEXT_ALIGN_LEFT,TEXT_ALIGN_CENTER)surface.SetDrawColor(255,255,255,255)surface.SetMaterial(self.InteractionIcons[t])surface.DrawTexturedRect(v+5,s+(l-16)/2,16,16)s=s+l+m end end
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_appr.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_appr.lua:
AddCSLuaFile()SWEP.Author="Robotboy655 + King David"SWEP.Category="Lightsabers"SWEP.Contact=""SWEP.RenderGroup=RENDERGROUP_BOTH;SWEP.Slot=2;SWEP.SlotPos=4;SWEP.Spawnable=true;SWEP.DrawAmmo=false;SWEP.DrawCrosshair=false;SWEP.AutoSwitchTo=false;SWEP.AutoSwitchFrom=false;SWEP.DrawWeaponInfoBox=false;SWEP.ViewModel="models/weapons/v_crowbar.mdl"SWEP.WorldModel="models/sgg/starwars/weapons/w_anakin_ep3_saber_hilt.mdl"SWEP.ViewModelFOV=55;SWEP.IgnoreCosmetics=true;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo="none"SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo="none"SWEP.PrintName="Apprentice Lightsaber"SWEP.Class="weapon_lightsaber_appr"SWEP.DualWielded=false;SWEP.CanMoveWhileAttacking=true;SWEP.SaberDamage=150;SWEP.SaberBurnDamage=20;SWEP.MaxForce=175;SWEP.RegenSpeed=2;SWEP.CanKnockback=true;SWEP.UseForms={["Versatile"]={1,2,3}}SWEP.ForcePowerList={"Meditate","Force Leap","Force Absorb"}SWEP.DevestatorList={}SWEP.UseHilt="models/sgg/starwars/weapons/w_anakin_ep3_saber_hilt.mdl"SWEP.UseLength=false;SWEP.UseWidth=false;SWEP.UseColor=Color(255,255,255)SWEP.UseDarkInner=false;SWEP.UseLoopSound=false;SWEP.UseSwingSound=false;SWEP.UseOnSound=false;SWEP.UseOffSound=false;SWEP.UseSecHilt=false;SWEP.UseSecLength=false;SWEP.UseSecWidth=false;SWEP.UseSecColor=false;SWEP.UseSecDarkInner=false;SWEP.Base="wos_adv_single_lightsaber_base"
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_cisvibrosword.lua:
AddCSLuaFile()SWEP.Author="Robotboy655 + King David + Scott"SWEP.Category="Lightsabers"SWEP.Contact=""SWEP.RenderGroup=RENDERGROUP_BOTH;SWEP.Slot=2;SWEP.SlotPos=4;SWEP.Spawnable=true;SWEP.DrawAmmo=false;SWEP.DrawCrosshair=false;SWEP.AutoSwitchTo=false;SWEP.AutoSwitchFrom=false;SWEP.DrawWeaponInfoBox=false;SWEP.ViewModel="models/weapons/v_crowbar.mdl"SWEP.WorldModel="models/cac/weapons/vibroblade.mdl"SWEP.ViewModelFOV=55;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo="none"SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo="none"SWEP.PrintName="CIS Vibro Sword"SWEP.Class="weapon_lightsaber_cisvibrosword"SWEP.DualWielded=false;SWEP.CanMoveWhileAttacking=true;SWEP.SaberDamage=250;SWEP.SaberBurnDamage=20;SWEP.MaxForce=175;SWEP.RegenSpeed=1.5;SWEP.CanKnockback=true;SWEP.UseForms={["Agile"]={1,2,3},["Versatile"]={1,2,3},["Aggressive"]={1,2,3},["Defensive"]={1,2,3}}SWEP.ForcePowerList={"Meditate","Force Leap","Force Repulse","Force Push","Force Pull","Saber Throw"}SWEP.DevestatorList={}SWEP.Stances={}SWEP.NoBlade=true;SWEP.NoGlow=true;SWEP.UseHilt="models/cac/weapons/vibroblade.mdl"SWEP.UseLength=42;SWEP.UseWidth=false;SWEP.UseColor=Color(255,50,255)SWEP.UseDarkInner=false;SWEP.UseLoopSound=false;SWEP.UseSwingSound=false;SWEP.UseOnSound=false;SWEP.UseOffSound=false;SWEP.Base="wos_adv_single_lightsaber_base"SWEP.HolsterBone='ValveBiped.Bip01_Spine'function SWEP:HolsterTranslate(a,b,c)b=b+c:Right()*2+c:Forward()*15;c:RotateAroundAxis(c:Up(),5)c:RotateAroundAxis(c:Forward(),15)return b,c end
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_freya.lua:
AddCSLuaFile()SWEP.Author="Robotboy655 + King David"SWEP.Category="Lightsabers"SWEP.Contact=""SWEP.RenderGroup=RENDERGROUP_BOTH;SWEP.Slot=2;SWEP.SlotPos=4;SWEP.Spawnable=true;SWEP.DrawAmmo=false;SWEP.DrawCrosshair=false;SWEP.AutoSwitchTo=false;SWEP.AutoSwitchFrom=false;SWEP.DrawWeaponInfoBox=false;SWEP.ViewModel="models/weapons/v_crowbar.mdl"SWEP.WorldModel="models/tobester/weapons/freya/freya_staff.mdl"SWEP.ViewModelFOV=55;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo="none"SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo="none"SWEP.PrintName="Freya's Dual Sabers"SWEP.Class="weapon_lightsaber_freya"SWEP.DualWielded=true;SWEP.SaberDamage=250;SWEP.SaberBurnDamage=15;SWEP.CanMoveWhileAttacking=true;SWEP.MaxForce=300;SWEP.RegenSpeed=1;SWEP.CanKnockback=true;SWEP.ForcePowerList={"Meditate","Saber Throw","Force Leap","Force Absorb","Force Heal","Force Push","Cloak"}SWEP.UseForms={Arrogant={1,2,3}}SWEP.UseHilt=false;SWEP.UseLength=30;SWEP.UseWidth=false;SWEP.UseColor=false;SWEP.UseDarkInner=false;SWEP.UseLoopSound=false;SWEP.UseSwingSound=false;SWEP.UseOnSound=false;SWEP.UseOffSound=false;SWEP.UseSecHilt=false;SWEP.UseSecLength=30;SWEP.UseSecWidth=false;SWEP.UseSecColor=false;SWEP.UseSecDarkInner=false;SWEP.DamageType=DMG_DISSOLVE;SWEP.Base="wos_adv_dual_lightsaber_base"
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_hotwire.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_otter.lua:
AddCSLuaFile()SWEP.Author="Robotboy655 + King David"SWEP.Category='SUP Custom Weapons'SWEP.Contact=""SWEP.RenderGroup=RENDERGROUP_BOTH;SWEP.Slot=2;SWEP.SlotPos=4;SWEP.Spawnable=true;SWEP.DrawAmmo=false;SWEP.DrawCrosshair=false;SWEP.AutoSwitchTo=false;SWEP.AutoSwitchFrom=false;SWEP.DrawWeaponInfoBox=false;SWEP.ViewModel="models/weapons/v_crowbar.mdl"SWEP.WorldModel="models/sgg/starwars/weapons/w_anakin_ep3_saber_hilt.mdl"SWEP.ViewModelFOV=55;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo="none"SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo="none"SWEP.PrintName="Dancing Blades"SWEP.Class="weapon_lightsaber_otter"SWEP.DualWielded=true;SWEP.SaberDamage=250;SWEP.SaberBurnDamage=20;SWEP.CanMoveWhileAttacking=true;SWEP.MaxForce=200;SWEP.RegenSpeed=1.5;SWEP.CanKnockback=true;SWEP.ForcePowerList={"Meditate","Saber Throw","Force Leap","Force Absorb","Force Heal","Force Push","Cloak"}SWEP.UseForms={Arrogant={1,2,3}}SWEP.UseHilt=false;SWEP.UseLength=false;SWEP.UseWidth=false;SWEP.UseColor=false;SWEP.UseDarkInner=false;SWEP.UseLoopSound=false;SWEP.UseSwingSound=false;SWEP.UseOnSound=false;SWEP.UseOffSound=false;SWEP.UseSecHilt=false;SWEP.UseSecLength=false;SWEP.UseSecWidth=false;SWEP.UseSecColor=false;SWEP.UseSecDarkInner=false;SWEP.DamageType=DMG_DISSOLVE;SWEP.Base="wos_adv_dual_lightsaber_base"
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_saberpike_h.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_sentinel_barrett.lua:
AddCSLuaFile()SWEP.Author='Robotboy655 + King David'SWEP.Category='Lightsabers'SWEP.Contact=''SWEP.RenderGroup=RENDERGROUP_BOTH;SWEP.Slot=2;SWEP.SlotPos=4;SWEP.Spawnable=true;SWEP.DrawAmmo=false;SWEP.DrawCrosshair=false;SWEP.AutoSwitchTo=false;SWEP.AutoSwitchFrom=false;SWEP.DrawWeaponInfoBox=false;SWEP.ViewModel='models/weapons/v_crowbar.mdl'SWEP.WorldModel="models/weapons/starwars/w_kr_hilt.mdl"SWEP.ViewModelFOV=55;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo='none'SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo='none'SWEP.PrintName='Barrett\'s Lightsabers'SWEP.Class='weapon_lightsaber_consular_barrett'SWEP.DualWielded=true;SWEP.SaberDamage=250;SWEP.SaberBurnDamage=20;SWEP.CanMoveWhileAttacking=true;SWEP.MaxForce=250;SWEP.RegenSpeed=1.5;SWEP.CanKnockback=true;SWEP.ForcePowerList={'Meditate','Force Leap','Force Absorb','Force Pull','Force Push','Force Repulse','Force Heal','Group Heal','Resurrect'}SWEP.UseForms={Arrogant={1,2,3}}SWEP.UseHilt=false;SWEP.UseLength=false;SWEP.UseWidth=false;SWEP.UseColor=false;SWEP.UseDarkInner=false;SWEP.UseLoopSound=false;SWEP.UseSwingSound=false;SWEP.UseOnSound=false;SWEP.UseOffSound=false;SWEP.UseSecHilt=false;SWEP.UseSecLength=false;SWEP.UseSecWidth=false;SWEP.UseSecColor=false;SWEP.UseSecDarkInner=false;SWEP.Base='wos_adv_dual_lightsaber_base'
--addons/!lpakr_out/lua/weapons/weapon_lightsaber_sentinel_shiro.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/weapons/weapon_repairtool/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/weapon_se14c.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/entities/weapons/weapon_stungun.lua:
return lpakr()()
--addons/!lpakr_out/lua/weapons/wos_adv_dual_lightsaber_base/shared.lua:
AddCSLuaFile()SWEP.PrintName="Dual Lightsaber Base"SWEP.Author="Robotboy655"SWEP.Category="Robotboy655's Weapons"SWEP.Contact="robotboy655@gmail.com"SWEP.Purpose="To slice off each others limbs and heads."SWEP.Instructions="Use the force, Luke."SWEP.RenderGroup=RENDERGROUP_BOTH;SWEP.LoadDelay=0;SWEP.RegendSpeed=1;SWEP.MaxForce=150;SWEP.HasTalentStats=true;SWEP.ForcePowerList={}SWEP.DevestatorList={}SWEP.Slot=2;SWEP.SlotPos=4;SWEP.Spawnable=false;SWEP.DrawAmmo=false;SWEP.DrawCrosshair=false;SWEP.AutoSwitchTo=false;SWEP.AutoSwitchFrom=false;SWEP.DrawWeaponInfoBox=false;SWEP.ViewModel="models/weapons/v_crowbar.mdl"SWEP.WorldModel="models/sgg/starwars/weapons/w_anakin_ep3_saber_hilt.mdl"SWEP.ViewModelFOV=55;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo="none"SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo="none"SWEP.AlwaysRaised=true;SWEP.BlockInvincibility=false;SWEP.Stance=1;SWEP.CombatTypeModel=false;SWEP.Enabled=false;SWEP.StanceCycle={}SWEP.StanceCycle["Arrogant"]="ryoku_"SWEP.IsLightsaber=true;SWEP.IsDualLightsaber=true;SWEP.CurStance=1;SWEP.CurForm="judge_"SWEP.BlockDrainRate=0.1;SWEP.DevestatorTime=0;SWEP.UltimateCooldown=0;SWEP.CanCloakAttack=true;SWEP.Blade=wOS.GetBlade'default'SWEP.Blade2=wOS.GetBlade'default'SWEP.SaberDamage=50;SWEP.WepDamageBoost=0;SWEP.Animations={channeling='idle_dual',meditate='sit_zen',force='walk_magic',airborne='balanced_jump',idle={blocking='run_melee2',forms={default={'ryoku_idle_lower'}}},moving={blocking='walk_slam',forms={default={'ryoku_run_lower'}}}}function SWEP:PlayWeaponSound(a)local b=self:GetOwner()if CLIENT then return end;if IsValid(b)&&IsValid(b:GetActiveWeapon())&&b:GetActiveWeapon()!=self then return end;if!IsValid(b)then return self:EmitSound(a)end;b:EmitSound(a)end;local c=Vector(0,0,20)local d=math.cos(math.rad(35))function SWEP:CanTarget(e,f,g)if!IsValid(e)then return end;if e==self:GetOwner()then return end;if e:GetClass()==g then return true elseif f&&(e:IsNPC()||e:IsNextBot())then return true elseif e:IsPlayer()&&!e:IsCloaked()&&!e:IsGhosted()then return true end end;function SWEP:SelectTargets(h,i,targetnpcs,g)if!i then i=512 end;if h==1 then local j=self:SelectSingleTarget(i,targetnpcs,g)if j then return j end end;return self:SelectMultipleTargets(h,i,targetnpcs,g)end;function SWEP:SelectSingleTarget(i,k,g)local b=self:GetOwner()local l=b:GetShootPos()local m=b:GetAimVector()local n={start=l,endpos=l+m*i,filter=b}local o=util.TraceHull(n)if self:CanTarget(o.Entity,targetnpcs,g)then return{o.Entity}end;local o=util.TraceHull(n)if self:CanTarget(o.Entity,targetnpcs,g)then return{o.Entity}end;m.p=0;n.endpos=l+m*i;local o=util.TraceHull(n)if self:CanTarget(o.Entity,targetnpcs,g)then return{o.Entity}end end;function SWEP:SelectMultipleTargets(h,i,targetnpcs,g)local b=self:GetOwner()local p=ents.FindInCone(b:EyePos(),b:GetAimVector(),i,d)local q={}local r=b:GetPos()table.sort(p,function(s,t)return s:GetPos():DistToSqr(r)<t:GetPos():DistToSqr(r)end)for u,v in ipairs(p)do if!self:CanTarget(v,targetnpcs,g)then continue end;if SERVER then else if v:InSight()then q[#q+1]=v end end;if#q>=h then break end end;return q end;function SWEP:GetActiveForcePowers()local w={}for x,y in pairs(self.ForcePowers)do local z=wOS.AvailablePowers[y]if!z then continue end;local A=hook.Run("CanUseLightsaberForcePower",self:GetOwner(),z.name)if A==false then continue end;table.insert(w,z)end;return w end;function SWEP:GetActiveForcePowerType(x)local w=self:GetActiveForcePowers()return w[x]end;function SWEP:GetActiveDevestators()local B={}for x,C in pairs(self.Devestators)do local z=wOS.AvailableDevestators[C]if z then table.insert(B,z)end end;return B end;function SWEP:GetActiveDevestatorType(x)local B=self:GetActiveDevestators()return B[x]end;function SWEP:OnRestore()end;function SWEP:SetNextAttack(D,E)self:SetNextPrimaryFire(CurTime()+D)self:SetNextSecondaryFire(CurTime()+D)if E then self.ForceNextCooldown=CurTime()+D end end;function SWEP:IsForceCooldown(F)return self:GetOwner():KeyDown(IN_ATTACK2)||self.ForceNextCooldown&&self.ForceNextCooldown+(F||0)>CurTime()end;function SWEP:SetNextForcePower(D)self.NextForcePower=CurTime()+D end;function SWEP:CanForcePower()return self.NextForcePower&&self.NextForcePower<CurTime()end;function SWEP:ForceJumpAnim()local b=self:GetOwner()b.m_bJumping=true;b.m_bFirstJumpFrame=true;b.m_flJumpStartTime=CurTime()b:AnimRestartMainSequence()end;SWEP.ForcePowers={}function SWEP:SetupDataTables()self:NetworkVar("Float",0,"BladeLength")self:NetworkVar("Float",1,"MaxLength")self:NetworkVar("Float",2,"BladeWidth")self:NetworkVar("Float",3,"Force")self:NetworkVar("Float",4,"SecBladeLength")self:NetworkVar("Float",5,"SecMaxLength")self:NetworkVar("Float",6,"SecBladeWidth")self:NetworkVar("Float",7,"DevEnergy")self:NetworkVar("Float",9,"Delay")self:NetworkVar("Bool",0,"DarkInner")self:NetworkVar("Bool",1,"SecDarkInner")self:NetworkVar("Bool",2,"Enabled")self:NetworkVar("Int",0,"ForceType")self:NetworkVar("Int",1,"DevestatorType")self:NetworkVar("Int",3,"Stance")self:NetworkVar("Int",4,"Form")self:NetworkVar("Vector",0,"CrystalColorVector")self:NetworkVar("Vector",1,"SecCrystalColorVector")self:NetworkVar("String",0,"WorldModel")self:NetworkVar("String",1,"SecWorldModel")self:NetworkVar("String",2,"OnSound")self:NetworkVar("String",3,"OffSound")self:NetworkVar("Int",5,"BladeID")self:NetworkVar("Int",6,"BladeID2")self:NetworkVarNotify('BladeID',function(v,G,H,I)self.Blade=wOS.GetBlade(I||1,true)end)self:NetworkVarNotify('BladeID2',function(v,G,H,I)self.Blade2=wOS.GetBlade(I||1,true)end)self:NetworkVarNotify('CrystalColorVector',function(v,G,H,I)self.primaryCrystalColor=Color(I.x,I.y,I.z)end)self:NetworkVarNotify('SecCrystalColorVector',function(v,G,H,I)self.secondaryCrystalColor=Color(I.x,I.y,I.z)end)end;function SWEP:GetForceStats(x,J)local b=self:GetOwner()if!IsValid(b)then return end;local K=b:GetForceLevel(x)+1;J=J||wOS.AvailablePowers[x]if!J||!J.Upgrades then return end;return J.Upgrades[K]||J.Upgrades[#J.Upgrades]end;function SWEP:GetCrystalColor()if!self.primaryCrystalColor then return self.primaryCrystalColor else local L=self:GetCrystalColorVector()return Color(L.x,L.y,L.z)end end;function SWEP:GetSecCrystalColor()if!self.secondaryCrystalColor then return self.secondaryCrystalColor else local L=self:GetSecCrystalColorVector()return Color(L.x,L.y,L.z)end end;function SWEP:LoadToolValues(M)end;function SWEP:Initialize()self.LoopSound=self.LoopSound||"lightsaber/saber_loop"..math.random(1,8)..".wav"self.SwingSound=self.SwingSound||"lightsaber/saber_swing"..math.random(1,2)..".wav"self:SetWeaponHoldType(self:GetTargetHoldType())local b=self:GetOwner()self.ForcePowers={}for u,N in pairs(self.ForcePowerList)do if wOS.AvailablePowers[N]then self.ForcePowers[#self.ForcePowers+1]=N end end;self.Devestators={}for u,O in pairs(self.DevestatorList)do if wOS.AvailableDevestators[O]then self.Devestators[#self.Devestators+1]=O end end end;function SWEP:SetupWeaponHoldTypeForAI(z)local b=self:GetOwner()if!b:IsNPC()then return end;self.ActivityTranslateAI={}self.ActivityTranslateAI[ACT_IDLE]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_ANGRY]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_RELAXED]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_STIMULATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_RELAXED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_STIMULATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_RANGE_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_RANGE_ATTACK1_LOW]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_MELEE_ATTACK1]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_MELEE_ATTACK2]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_SPECIAL_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_RANGE_AIM_LOW]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_COVER_LOW]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_WALK]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_RELAXED]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_STIMULATED]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_AGITATED]=ACT_WALK;self.ActivityTranslateAI[ACT_RUN_CROUCH]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_CROUCH_AIM]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_RELAXED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_STIMULATED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_AGITATED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM]=ACT_RUN;self.ActivityTranslateAI[ACT_SMALL_FLINCH]=ACT_RANGE_ATTACK_PISTOL;self.ActivityTranslateAI[ACT_BIG_FLINCH]=ACT_RANGE_ATTACK_PISTOL;if b:GetClass()=="npc_metropolice"then self.ActivityTranslateAI[ACT_IDLE]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_ANGRY]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_RELAXED]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_STIMULATED]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_MP_RUN]=ACT_HL2MP_RUN_SUITCASE;self.ActivityTranslateAI[ACT_WALK]=ACT_WALK_SUITCASE;self.ActivityTranslateAI[ACT_MELEE_ATTACK1]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_RANGE_ATTACK1]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_SPECIAL_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_SMALL_FLINCH]=ACT_RANGE_ATTACK_PISTOL;self.ActivityTranslateAI[ACT_BIG_FLINCH]=ACT_RANGE_ATTACK_PISTOL;return end;if b:GetClass()=="npc_combine_s2"then self.ActivityTranslateAI[ACT_IDLE]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_ANGRY]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_RELAXED]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_STIMULATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_RELAXED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_STIMULATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_RANGE_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_RANGE_ATTACK1_LOW]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_MELEE_ATTACK1]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_MELEE_ATTACK2]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_SPECIAL_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_RANGE_AIM_LOW]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_COVER_LOW]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_WALK]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_RELAXED]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_STIMULATED]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_AGITATED]=ACT_WALK;self.ActivityTranslateAI[ACT_RUN]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_RELAXED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_STIMULATED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_AGITATED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM]=ACT_RUN;self.ActivityTranslateAI[ACT_SMALL_FLINCH]=ACT_RANGE_ATTACK_PISTOL;self.ActivityTranslateAI[ACT_BIG_FLINCH]=ACT_RANGE_ATTACK_PISTOL;return end;if b:GetClass()=="npc_combine_s"then self.ActivityTranslateAI[ACT_IDLE]=ACT_IDLE_UNARMED;self.ActivityTranslateAI[ACT_IDLE_ANGRY]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_RELAXED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_STIMULATED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_AGITATED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_AIM_RELAXED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_AIM_STIMULATED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_AIM_AGITATED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_RANGE_ATTACK1]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_RANGE_ATTACK1_LOW]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_MELEE_ATTACK1]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_MELEE_ATTACK2]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_SPECIAL_ATTACK1]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_RANGE_AIM_LOW]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_COVER_LOW]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_WALK]=ACT_WALK_UNARMED;self.ActivityTranslateAI[ACT_WALK_RELAXED]=ACT_WALK_UNARMED;self.ActivityTranslateAI[ACT_WALK_STIMULATED]=ACT_WALK_UNARMED;self.ActivityTranslateAI[ACT_WALK_AGITATED]=ACT_WALK_UNARMED;self.ActivityTranslateAI[ACT_RUN]=ACT_RUN_AIM_SHOTGUN;self.ActivityTranslateAI[ACT_RUN_AIM_RELAXED]=ACT_RUN_AIM_SHOTGUN;self.ActivityTranslateAI[ACT_RUN_AIM_STIMULATED]=ACT_RUN_AIM_SHOTGUN;self.ActivityTranslateAI[ACT_RUN_AIM_AGITATED]=ACT_RUN_AIM_SHOTGUN;self.ActivityTranslateAI[ACT_RUN_AIM]=ACT_RUN_AIM_SHOTGUN;return end end;function SWEP:GetCapabilities()return bit.bor(CAP_WEAPON_MELEE_ATTACK1)end;function SWEP:NPC_NextLogic()local b=self:GetOwner()if!IsValid(self)||!IsValid(b)then return end;if b:IsCurrentSchedule(SCHED_CHASE_ENEMY)then return end;self.NPC_NextLogicTimer=true;self:NPC_ChaseEnemy()timer.Simple(math.Rand(0.7,1),function()self.NPC_NextLogicTimer=false end)end;function SWEP:NPC_ChaseEnemy()local b=self:GetOwner()if!IsValid(self)||!IsValid(b)then return end;if b:GetEnemy():GetPos():Distance(self:GetPos())>70 then b:SetSchedule(SCHED_CHASE_ENEMY)end;if b:GetEnemy()==b then b:SetEnemy(NULL)return end;if!self.CooldownTimer&&b:GetEnemy():GetPos():Distance(self:GetPos())<=70 then b:SetSchedule(SCHED_MELEE_ATTACK1)self:NPCShoot_Primary(ShootPos,ShootDir)end end;function SWEP:NPCThink()local b=self:GetOwner()if!IsValid(b)||!IsValid(self)||!b:IsNPC()then return end;if self:GetEnabled()!=IsValid(b:GetEnemy())then self:SetEnabled(IsValid(b:GetEnemy()))end;b:ClearCondition(13)b:ClearCondition(17)b:ClearCondition(18)b:ClearCondition(20)b:ClearCondition(48)b:ClearCondition(42)b:ClearCondition(45)if!self.NPC_NextLogicTimer&&IsValid(b:GetEnemy())then self:NPC_NextLogic()end;self:Think()end;function SWEP:NPCShoot_Primary(ShootPos,ShootDir)local b=self:GetOwner()if!IsValid(self)||!IsValid(b)then return end;if!b:GetEnemy()then return end;self.CooldownTimer=true;local P=0.4;if b:GetClass()=="npc_alyx"then P=0.8 end;timer.Simple(P,function()if!IsValid(self)||!IsValid(b)then return end;self.CooldownTimer=false end)end;function SWEP:SetBlade(Q,x,R)if Q>1 then self:SetBladeID2(wOS.GetBlade(x,R).internal)else self:SetBladeID(wOS.GetBlade(x,R,true).internal)end end;function SWEP:PrimaryAttack()local b=self:GetOwner()if!IsValid(b)then return end;if b.IsBlocking then return end;if self.HeavyCharge then return end;if prone&&b:IsProne()then b:SetAnimation(PLAYER_ATTACK1)self:SetNextAttack(1.0)return end;if!self:GetNWBool("SWL_CustomAnimCheck",false)then b:SetAnimation(PLAYER_ATTACK1)self:SetNextAttack(1.0)return end;if b:KeyDown(IN_USE)&&self:GetEnabled()then self.CurStance=self:SetNWInt("Stance",self.CurStance)self:SetNextAttack(0.1)return end;self.CurStance=self:GetNWInt("Stance",1)self.CurForm=self:GetNWString("CombatTypeModel","judge_")if self:GetEnabled()then local S;if!b:OnGround()then self.AerialLand=true else end;if SERVER&&b:IsCloaked()then b:SetCloaked(false)end;self:SetNextAttack(self:GetDelay())end end;function SWEP:SecondaryAttack()local b=self:GetOwner()if b.IsBlocking then return end;if self.HeavyCharge then return end;if b:KeyDown(IN_USE)&&self:GetEnabled()&&self:GetNWBool("SWL_CustomAnimCheck",false)&&!(prone&&b:IsProne())then return end;local T=self:GetForceType()if!IsValid(b)then return end;local U=self:GetActiveForcePowerType(T)if!U then return end;local A=hook.Run('CanUseLightsaberForcePower',b,U.name)if A==false then return end;if SERVER&&U.ActionServer then local K=b:GetForceLevel(U.id)+1;local V=U.Upgrades&&(U.Upgrades[K]||U.Upgrades[#U.Upgrades])local q={}if U.target then q=self:SelectTargets(U.target,U.distance,U.targetnpcs,U.targetclass)end;U.ActionServer(self,q[1],q,V)if SERVER&&!U.CanCloak&&b:IsCloaked()then b:SetCloaked(false)end end end;function SWEP:Reload()local b=self:GetOwner()if!b:KeyPressed(IN_RELOAD)then return end;if b:KeyDown(IN_WALK)then if CLIENT then wOS:OpenDevestatorMenu()end;return end;if b:KeyDown(IN_USE)then if CLIENT then wOS:OpenFormMenu(true)end;return end;self:SetEnabled(!self:GetEnabled())end;function SWEP:GetTargetHoldType()if self:GetWorldModel()=="models/weapons/starwars/w_maul_saber_staff_hilt.mdl"then return"knife"end;if self:LookupAttachment("blade2")&&self:LookupAttachment("blade2")>0 then return"knife"end;return"melee2"end;function SWEP:OnEnabled(W)if!self:GetEnabled()||W then self:PlayWeaponSound(self:GetOnSound())end;if CLIENT||self:GetEnabled()&&!W then return end;self:SetHoldType(self:GetTargetHoldType())timer.Remove("rb655_ls_ht")local b=self:GetOwner()self.SoundLoop=CreateSound(b,Sound(self.LoopSound))if self.SoundLoop then self.SoundLoop:Play()end;self.SoundSwing=CreateSound(b,Sound(self.SwingSound))if self.SoundSwing then self.SoundSwing:Play()self.SoundSwing:ChangeVolume(0,0)end;self.SoundHit=CreateSound(b,Sound("lightsaber/saber_hit.wav"))if self.SoundHit then self.SoundHit:Play()self.SoundHit:ChangeVolume(0,0)end end;function SWEP:OnDisabled(X)if CLIENT then if X then rb655_SaberClean(self:EntIndex())end;return true end;if self.SoundLoop then self.SoundLoop:Stop()self.SoundLoop=nil end;if self.SoundSwing then self.SoundSwing:Stop()self.SoundSwing=nil end;if self.SoundHit then self.SoundHit:Stop()self.SoundHit=nil end;return true end;function SWEP:OnEnabledOrDisabled(G,H,I)if H==I then return end;if I then self:OnEnabled()else self:PlayWeaponSound(self:GetOffSound())timer.Create("rb655_ls_ht",0.4,1,function()if IsValid(self)then self:SetHoldType("normal")end end)self:OnDisabled()end end;function SWEP:OnDrop()if self:GetEnabled()then self:PlayWeaponSound(self:GetOffSound())end;self:OnDisabled(true)end;function SWEP:OnRemove()if self:GetEnabled()&&IsValid(self:GetOwner())then self:PlayWeaponSound(self:GetOffSound())end;self:OnDisabled(true)end;function SWEP:Deploy()local Y=self:GetOwner()if SERVER&&IsValid(Y)&&!self.IsSetup then self:SetStandard()self.IsSetup=true end;self.CurStance=self:GetNWInt("Stance",1)self.CurForm=self:GetNWString("CombatTypeModel","judge_")if self.SetupAppearance then self:SetupAppearance(Y)end;if self:GetEnabled()then self:OnEnabled(true)else self:SetHoldType("normal")end;if CLIENT then return end;if Y:IsPlayer()&&Y:FlashlightIsOn()then Y:Flashlight(false)end;self:SetBladeLength(0)return true end;function SWEP:Holster()if self:GetEnabled()then self:PlayWeaponSound(self:GetOffSound())end;local b=self:GetOwner()b.IsBlocking=false;b:SetNWBool("IsMeditating",false)local S=CurTime()if self:GetNextPrimaryFire()>S||self:GetNextSecondaryFire()>S then return false else return self:OnDisabled(true)end end;local Z=Vector(0,0,36)local _=Vector(0,0,18)function SWEP:GetSaberPosAng(a0,a1)a0=a0||1;local b=self:GetOwner()if IsValid(b)then local a2=b:LookupBone'ValveBiped.Bip01_R_Hand'local a3=self:LookupAttachment('blade'..a0)if a1 then a3=self:LookupAttachment('quillon'..a0)end;if a3&&a3>0 then local a4=self:GetAttachment(a3)if!a2&&SERVER then a4.Pos=a4.Pos+Z;if SERVER&&IsValid(b)&&b:IsPlayer()&&b:Crouching()then a4.Pos=a4.Pos-_ end;a4.Ang.p=0 end;return a4.Pos,a4.Ang:Forward()end;if a2 then local r,a5=b:GetBonePosition(a2)if r==b:GetPos()then local a6=b:GetBoneMatrix(a2)if a6 then r=a6:GetTranslation()a5=a6:GetAngles()end end;a5:RotateAroundAxis(a5:Forward(),180)a5:RotateAroundAxis(a5:Up(),30)a5:RotateAroundAxis(a5:Forward(),-5.7)a5:RotateAroundAxis(a5:Right(),92)r=r+a5:Up()*-3.3+a5:Right()*0.8+a5:Forward()*5.6;return r,a5:Forward()end end;local a7=self:GetAngles()a7.p=0;local a8=self:GetPos()+a7:Right()*0.6-a7:Up()*0.2+a7:Forward()*0.8;if SERVER&&IsValid(b)&&b:Crouching()then a8=a8-_ end;return a8,-a7:Forward()end;function SWEP:GetSaberSecPosAng(a0,a1,a9)a0=a0||1;local b=self:GetOwner()if IsValid(b)then local a2=b:LookupBone("ValveBiped.Bip01_L_Hand")local a3;if a9 then a3=a9:LookupAttachment("blade"..a0)if a1 then a3=a9:LookupAttachment("quillon"..a0)end end;if a3&&a3>0 then local a4=a9:GetAttachment(a3)if!a2&&SERVER then a4.Pos=a4.Pos+Vector(0,0,36)if SERVER&&IsValid(b)&&b:IsPlayer()&&b:Crouching()then a4.Pos=a4.Pos-Vector(0,0,18)end;a4.Ang.p=0 end;return a4.Pos,a4.Ang:Forward()end;if a2 then local r,a5=b:GetBonePosition(a2)if r==b:GetPos()then local a6=b:GetBoneMatrix(a2)if a6 then r=a6:GetTranslation()a5=a6:GetAngles()end end;if a0>1 then a5:RotateAroundAxis(a5:Forward(),180)end;a5:RotateAroundAxis(a5:Up(),30)a5:RotateAroundAxis(a5:Right(),82)r=r+a5:Up()*-2.5+a5:Right()*2.6+a5:Forward()*32;r=r+a5:Forward()*-26;return r,a5:Forward()end end;local a7=a9:GetAngles()a7.p=0;local a8=a9:GetPos()+a7:Right()*0.6-a7:Up()*0.2+a7:Forward()*0.8;if SERVER&&IsValid(b)&&b:Crouching()then a8=a8-Vector(0,0,18)end;return a8,-a7:Forward()end;function SWEP:OnForceChanged(G,H,I)if H>I then self.NextForce=CurTime()+2 end end;function SWEP:Think()self.WorldModel=self:GetWorldModel()self:SetModel(self:GetWorldModel())local b=self:GetOwner()if b:KeyDown(IN_WALK)&&!b:KeyDown(IN_SPEED)&&self:GetForce()>0&&self:GetEnabled()&&!(prone&&b:IsProne())then b:SetNWBool("IsBlocking",true)b:SetNWFloat("BlockTime",CurTime()+0.4)b.IsBlocking=true else b:SetNWBool("IsBlocking",false)b.IsBlocking=false end;local U=self:GetActiveForcePowerType(self:GetForceType())if U&&U.think&&!b:KeyDown(IN_USE)then local A=hook.Run("CanUseLightsaberForcePower",b,U.name)if A!=false&&U.think then U.think(self)end end;if CLIENT then return end;self:ServerThoughts()end;function SWEP:DrawHitEffects(n,aa)if self:GetBladeLength()<=0 then return end;if n&&n.Hit then rb655_DrawHit(n.HitPos,n.HitNormal)end;if aa&&aa.Hit then rb655_DrawHit(aa.HitPos,aa.HitNormal)end end;local ab=ACT_HL2MP_IDLE_KNIFE;local ac={}ac[ACT_MP_STAND_IDLE]=ab;ac[ACT_MP_WALK]=ab+1;ac[ACT_MP_RUN]=ab+2;ac[ACT_MP_CROUCH_IDLE]=ab+3;ac[ACT_MP_CROUCHWALK]=ab+4;ac[ACT_MP_ATTACK_STAND_PRIMARYFIRE]=ab+5;ac[ACT_MP_ATTACK_CROUCH_PRIMARYFIRE]=ab+5;ac[ACT_MP_RELOAD_STAND]=ab+6;ac[ACT_MP_RELOAD_CROUCH]=ab+6;ac[ACT_MP_JUMP]=ab+7;ac[ACT_RANGE_ATTACK1]=ab+8;ac[ACT_MP_SWIM]=ab+9;function SWEP:TranslateActivity(ad)local b=self:GetOwner()if b:IsNPC()then if self.ActivityTranslateAI[ad]then return self.ActivityTranslateAI[ad]end;return-1 end;if b:Crouching()then local o=util.TraceHull({start=b:GetShootPos(),endpos=b:GetShootPos()+Vector(0,0,20),mins=b:OBBMins(),maxs=b:OBBMaxs(),filter=b})if self:GetEnabled()&&o.Hit&&ad==ACT_MP_ATTACK_CROUCH_PRIMARYFIRE then return ACT_HL2MP_IDLE_KNIFE+5 end;if!self:GetEnabled()&&self:GetHoldType()=="normal"&&b:Crouching()&&ad==ACT_MP_CROUCH_IDLE then return ACT_HL2MP_IDLE_KNIFE+3 end;if(!self:GetEnabled()&&self:GetHoldType()=="normal"||self:GetEnabled()&&o.Hit)&&ad==ACT_MP_CROUCH_IDLE then return ACT_HL2MP_IDLE_KNIFE+3 end;if(!self:GetEnabled()&&self:GetHoldType()=="normal"||self:GetEnabled()&&o.Hit)&&ad==ACT_MP_CROUCHWALK then return ACT_HL2MP_IDLE_KNIFE+4 end end;if b:WaterLevel()>1&&self:GetEnabled()then return ac[ad]end;if self.ActivityTranslate[ad]!=nil then return self.ActivityTranslate[ad]end;return-1 end
--addons/!lpakr_out/lua/weapons/wos_adv_single_lightsaber_base/shared.lua:
AddCSLuaFile()SWEP.PrintName="Lightsaber Base"SWEP.Author="Robotboy655 + King David"SWEP.Category="Robotboy655's Weapons"SWEP.Contact="robotboy655@gmail.com"SWEP.Purpose="To slice off each others limbs and heads."SWEP.Instructions="Use the force, Luke."SWEP.RenderGroup=RENDERGROUP_BOTH;SWEP.LoadDelay=0;SWEP.RegendSpeed=1;SWEP.MaxForce=150;SWEP.ForcePowerList={}SWEP.DevestatorList={}SWEP.HasTalentStats=true;SWEP.Slot=2;SWEP.SlotPos=4;SWEP.Spawnable=false;SWEP.DrawAmmo=false;SWEP.DrawCrosshair=false;SWEP.AutoSwitchTo=false;SWEP.AutoSwitchFrom=false;SWEP.DrawWeaponInfoBox=false;SWEP.ViewModel="models/weapons/v_crowbar.mdl"SWEP.WorldModel="models/sgg/starwars/weapons/w_anakin_ep3_saber_hilt.mdl"SWEP.ViewModelFOV=55;SWEP.Primary.ClipSize=-1;SWEP.Primary.DefaultClip=-1;SWEP.Primary.Automatic=false;SWEP.Primary.Ammo="none"SWEP.Secondary.ClipSize=-1;SWEP.Secondary.DefaultClip=-1;SWEP.Secondary.Automatic=true;SWEP.Secondary.Ammo="none"SWEP.AlwaysRaised=true;SWEP.BlockInvincibility=false;SWEP.Stance=1;SWEP.CombatTypeModel=false;SWEP.Enabled=false;SWEP.StanceCycle={}SWEP.StanceCycle["Defensive"]="judge_"SWEP.StanceCycle["Aggressive"]="phalanx_"SWEP.StanceCycle["Agile"]="ryoku_"SWEP.StanceCycle["Versatile"]="vanguard_"SWEP.StanceCycle["Djem So"]="judge_"SWEP.PlayerStances={}SWEP.IsLightsaber=true;SWEP.CurStance=1;SWEP.CurForm="judge_"SWEP.BlockDrainRate=0.1;SWEP.DevestatorTime=0;SWEP.UltimateCooldown=0;SWEP.CanCloakAttack=true;SWEP.Blade=wOS.GetBlade'default'SWEP.SaberDamage=50;SWEP.WepDamageBoost=0;SWEP.Animations={channeling='idle_dual',meditate='sit_zen',force='walk_magic',airborne='balanced_jump',idle={prefix=true,blocking='run_melee2',forms={default={'r_idle','b_idle','h_idle'},['vanguard_']={'f_idle','b_idle','h_idle'}}},moving={prefix=true,blocking='run_melee2',forms={default={'r_run','b_run','h_run'},['vanguard_']={'f_run','b_run','h_run'}}}}function SWEP:PlayWeaponSound(a)if CLIENT then return end;local b=self:GetOwner()if IsValid(b)&&IsValid(self:GetOwner():GetActiveWeapon())&&self:GetOwner():GetActiveWeapon()!=self then return end;if!IsValid(b)then return self:EmitSound(a)end;b:EmitSound(a)end;local c=Vector(0,0,20)local d=math.cos(math.rad(35))function SWEP:CanTarget(e,f,g)if!IsValid(e)then return end;if e==self:GetOwner()then return end;if e:GetClass()==g then return true elseif f&&(e:IsNPC()||e:IsNextBot())then return true elseif e:IsPlayer()&&!e:IsCloaked()&&!e:IsGhosted()then return true end end;function SWEP:SelectTargets(h,i,targetnpcs,g)if!i then i=512 end;if h==1 then local j=self:SelectSingleTarget(i,targetnpcs,g)if j then return j end end;return self:SelectMultipleTargets(h,i,targetnpcs,g)end;function SWEP:SelectSingleTarget(i,k,g)local b=self:GetOwner()local l=b:GetShootPos()local m=b:GetAimVector()local n={start=l,endpos=l+m*i,filter=b}local o=util.TraceHull(n)if self:CanTarget(o.Entity,targetnpcs,g)then return{o.Entity}end;local o=util.TraceHull(n)if self:CanTarget(o.Entity,targetnpcs,g)then return{o.Entity}end;m.p=0;n.endpos=l+m*i;local o=util.TraceHull(n)if self:CanTarget(o.Entity,targetnpcs,g)then return{o.Entity}end end;function SWEP:SelectMultipleTargets(h,i,targetnpcs,g)local b=self:GetOwner()local p=ents.FindInCone(b:EyePos(),b:GetAimVector(),i,d)local q={}local r=b:GetPos()table.sort(p,function(s,t)return s:GetPos():DistToSqr(r)<t:GetPos():DistToSqr(r)end)for u,v in ipairs(p)do if!self:CanTarget(v,targetnpcs,g)then continue end;if SERVER then else if v:InSight()then q[#q+1]=v end end;if#q>=h then break end end;return q end;function SWEP:GetActiveForcePowers()local w={}for x,y in pairs(self.ForcePowers)do local z=wOS.AvailablePowers[y]if!z then continue end;local A=hook.Run("CanUseLightsaberForcePower",self:GetOwner(),z.name)if A==false then continue end;table.insert(w,z)end;return w end;function SWEP:GetActiveForcePowerType(x)local w=self:GetActiveForcePowers()return w[x]end;function SWEP:GetActiveDevestators()local B={}for x,C in pairs(self.Devestators)do local z=wOS.AvailableDevestators[C]if z then table.insert(B,z)end end;return B end;function SWEP:GetActiveDevestatorType(x)local B=self:GetActiveDevestators()return B[x]end;function SWEP:OnRestore()end;function SWEP:SetNextAttack(D,E)self:SetNextPrimaryFire(CurTime()+D)self:SetNextSecondaryFire(CurTime()+D)if E then self.ForceNextCooldown=CurTime()+D end end;function SWEP:IsForceCooldown(F)return self:GetOwner():KeyDown(IN_ATTACK2)||self.ForceNextCooldown&&self.ForceNextCooldown+(F||0)>CurTime()end;function SWEP:SetNextForcePower(D)self.NextForcePower=CurTime()+D end;function SWEP:CanForcePower()return self.NextForcePower&&self.NextForcePower<CurTime()end;function SWEP:ForceJumpAnim()local b=self:GetOwner()b.m_bJumping=true;b.m_bFirstJumpFrame=true;b.m_flJumpStartTime=CurTime()b:AnimRestartMainSequence()end;SWEP.ForcePowers={}function SWEP:SetupDataTables()self:NetworkVar("Float",0,"BladeLength")self:NetworkVar("Float",1,"MaxLength")self:NetworkVar("Float",2,"BladeWidth")self:NetworkVar("Float",3,"Force")self:NetworkVar("Float",4,"DevEnergy")self:NetworkVar("Float",6,"Delay")self:NetworkVar("Bool",0,"DarkInner")self:NetworkVar("Bool",1,"Enabled")self:NetworkVar("Int",0,"ForceType")self:NetworkVar("Int",1,"DevestatorType")self:NetworkVar("Int",3,"Stance")self:NetworkVar("Int",4,"Form")self:NetworkVar("Vector",0,"CrystalColorVector")self:NetworkVar("Vector",1,"SecCrystalColorVector")self:NetworkVar("String",0,"WorldModel")self:NetworkVar("String",1,"OnSound")self:NetworkVar("String",2,"OffSound")self:NetworkVar("Int",5,"BladeID")self:NetworkVar("Int",6,"BladeID2")self:NetworkVarNotify('BladeID',function(v,G,H,I)self.Blade=wOS.GetBlade(I||1,true)end)self:NetworkVarNotify('BladeID2',function(v,G,H,I)self.Blade2=wOS.GetBlade(I||1,true)end)self:NetworkVarNotify('CrystalColorVector',function(v,G,H,I)self.primaryCrystalColor=Color(I.x,I.y,I.z)end)self:NetworkVarNotify('SecCrystalColorVector',function(v,G,H,I)self.secondaryCrystalColor=Color(I.x,I.y,I.z)end)end;function SWEP:GetForceStats(x,J)local b=self:GetOwner()if!IsValid(b)then return end;local K=b:GetForceLevel(x)+1;J=J||wOS.AvailablePowers[x]if!J||!J.Upgrades then return end;return J.Upgrades[K]||J.Upgrades[#J.Upgrades]end;function SWEP:GetCrystalColor()if!self.primaryCrystalColor then return self.primaryCrystalColor else local L=self:GetCrystalColorVector()return Color(L.x,L.y,L.z)end end;function SWEP:GetSecCrystalColor()if!self.secondaryCrystalColor then return self.secondaryCrystalColor else local L=self:GetSecCrystalColorVector()return Color(L.x,L.y,L.z)end end;function SWEP:LoadToolValues(M)end;function SWEP:Initialize()self.IsLightsaber=true;self.LoopSound=self.LoopSound||"lightsaber/saber_loop"..math.random(1,8)..".wav"self.SwingSound=self.SwingSound||"lightsaber/saber_swing"..math.random(1,2)..".wav"self:SetWeaponHoldType(self:GetTargetHoldType())local b=self:GetOwner()self.ForcePowers={}for u,N in pairs(self.ForcePowerList)do if wOS.AvailablePowers[N]then self.ForcePowers[#self.ForcePowers+1]=N end end;self.Devestators={}for u,O in pairs(self.DevestatorList)do if wOS.AvailableDevestators[O]then self.Devestators[#self.Devestators+1]=O end end end;function SWEP:SetupWeaponHoldTypeForAI(z)local b=self:GetOwner()if!b:IsNPC()then return end;self.ActivityTranslateAI={}self.ActivityTranslateAI[ACT_IDLE]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_ANGRY]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_RELAXED]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_STIMULATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_RELAXED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_STIMULATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_RANGE_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_RANGE_ATTACK1_LOW]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_MELEE_ATTACK1]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_MELEE_ATTACK2]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_SPECIAL_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_RANGE_AIM_LOW]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_COVER_LOW]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_WALK]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_RELAXED]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_STIMULATED]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_AGITATED]=ACT_WALK;self.ActivityTranslateAI[ACT_RUN_CROUCH]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_CROUCH_AIM]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_RELAXED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_STIMULATED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_AGITATED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM]=ACT_RUN;self.ActivityTranslateAI[ACT_SMALL_FLINCH]=ACT_RANGE_ATTACK_PISTOL;self.ActivityTranslateAI[ACT_BIG_FLINCH]=ACT_RANGE_ATTACK_PISTOL;if b:GetClass()=="npc_metropolice"then self.ActivityTranslateAI[ACT_IDLE]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_ANGRY]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_RELAXED]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_STIMULATED]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_MP_RUN]=ACT_HL2MP_RUN_SUITCASE;self.ActivityTranslateAI[ACT_WALK]=ACT_WALK_SUITCASE;self.ActivityTranslateAI[ACT_MELEE_ATTACK1]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_RANGE_ATTACK1]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_SPECIAL_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_SMALL_FLINCH]=ACT_RANGE_ATTACK_PISTOL;self.ActivityTranslateAI[ACT_BIG_FLINCH]=ACT_RANGE_ATTACK_PISTOL;return end;if b:GetClass()=="npc_combine_s2"then self.ActivityTranslateAI[ACT_IDLE]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_ANGRY]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_RELAXED]=ACT_IDLE;self.ActivityTranslateAI[ACT_IDLE_STIMULATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_RELAXED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_STIMULATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_IDLE_AIM_AGITATED]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_RANGE_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_RANGE_ATTACK1_LOW]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_MELEE_ATTACK1]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_MELEE_ATTACK2]=ACT_MELEE_ATTACK_SWING;self.ActivityTranslateAI[ACT_SPECIAL_ATTACK1]=ACT_RANGE_ATTACK_THROW;self.ActivityTranslateAI[ACT_RANGE_AIM_LOW]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_COVER_LOW]=ACT_IDLE_ANGRY_MELEE;self.ActivityTranslateAI[ACT_WALK]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_RELAXED]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_STIMULATED]=ACT_WALK;self.ActivityTranslateAI[ACT_WALK_AGITATED]=ACT_WALK;self.ActivityTranslateAI[ACT_RUN]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_RELAXED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_STIMULATED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM_AGITATED]=ACT_RUN;self.ActivityTranslateAI[ACT_RUN_AIM]=ACT_RUN;self.ActivityTranslateAI[ACT_SMALL_FLINCH]=ACT_RANGE_ATTACK_PISTOL;self.ActivityTranslateAI[ACT_BIG_FLINCH]=ACT_RANGE_ATTACK_PISTOL;return end;if b:GetClass()=="npc_combine_s"then self.ActivityTranslateAI[ACT_IDLE]=ACT_IDLE_UNARMED;self.ActivityTranslateAI[ACT_IDLE_ANGRY]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_RELAXED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_STIMULATED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_AGITATED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_AIM_RELAXED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_AIM_STIMULATED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_IDLE_AIM_AGITATED]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_RANGE_ATTACK1]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_RANGE_ATTACK1_LOW]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_MELEE_ATTACK1]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_MELEE_ATTACK2]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_SPECIAL_ATTACK1]=ACT_MELEE_ATTACK1;self.ActivityTranslateAI[ACT_RANGE_AIM_LOW]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_COVER_LOW]=ACT_IDLE_SHOTGUN;self.ActivityTranslateAI[ACT_WALK]=ACT_WALK_UNARMED;self.ActivityTranslateAI[ACT_WALK_RELAXED]=ACT_WALK_UNARMED;self.ActivityTranslateAI[ACT_WALK_STIMULATED]=ACT_WALK_UNARMED;self.ActivityTranslateAI[ACT_WALK_AGITATED]=ACT_WALK_UNARMED;self.ActivityTranslateAI[ACT_RUN]=ACT_RUN_AIM_SHOTGUN;self.ActivityTranslateAI[ACT_RUN_AIM_RELAXED]=ACT_RUN_AIM_SHOTGUN;self.ActivityTranslateAI[ACT_RUN_AIM_STIMULATED]=ACT_RUN_AIM_SHOTGUN;self.ActivityTranslateAI[ACT_RUN_AIM_AGITATED]=ACT_RUN_AIM_SHOTGUN;self.ActivityTranslateAI[ACT_RUN_AIM]=ACT_RUN_AIM_SHOTGUN;return end end;function SWEP:GetCapabilities()return bit.bor(CAP_WEAPON_MELEE_ATTACK1)end;function SWEP:NPC_NextLogic()local b=self:GetOwner()if!IsValid(self)||!IsValid(b)then return end;if b:IsCurrentSchedule(SCHED_CHASE_ENEMY)then return end;self.NPC_NextLogicTimer=true;self:NPC_ChaseEnemy()timer.Simple(math.Rand(0.7,1),function()self.NPC_NextLogicTimer=false end)end;function SWEP:NPC_ChaseEnemy()local b=self:GetOwner()if!IsValid(self)||!IsValid(b)then return end;if b:GetEnemy():GetPos():Distance(self:GetPos())>70 then b:SetSchedule(SCHED_CHASE_ENEMY)end;if b:GetEnemy()==b then b:SetEnemy(NULL)return end;if!self.CooldownTimer&&b:GetEnemy():GetPos():Distance(self:GetPos())<=70 then b:SetSchedule(SCHED_MELEE_ATTACK1)self:NPCShoot_Primary(ShootPos,ShootDir)end end;function SWEP:NPCThink()local b=self:GetOwner()if!IsValid(b)||!IsValid(self)||!b:IsNPC()then return end;if self:GetEnabled()!=IsValid(b:GetEnemy())then self:SetEnabled(IsValid(b:GetEnemy()))end;b:ClearCondition(13)b:ClearCondition(17)b:ClearCondition(18)b:ClearCondition(20)b:ClearCondition(48)b:ClearCondition(42)b:ClearCondition(45)if!self.NPC_NextLogicTimer&&IsValid(b:GetEnemy())then self:NPC_NextLogic()end;self:Think()end;function SWEP:NPCShoot_Primary(ShootPos,ShootDir)local b=self:GetOwner()if!IsValid(self)||!IsValid(b)then return end;if!b:GetEnemy()then return end;self.CooldownTimer=true;local P=0.4;if b:GetClass()=="npc_alyx"then P=0.8 end;timer.Simple(P,function()if!IsValid(self)||!IsValid(b)then return end;self.CooldownTimer=false end)end;function SWEP:SetBlade(Q,x,R)if Q>1 then self:SetBladeID2(wOS.GetBlade(x,R).internal)else self:SetBladeID(wOS.GetBlade(x,R).internal)end end;function SWEP:PrimaryAttack()local b=self:GetOwner()if!IsValid(b)then return end;if b.IsBlocking then return end;if self.HeavyCharge then return end;if prone&&b:IsProne()then b:SetAnimation(PLAYER_ATTACK1)self:SetNextAttack(1.0)return end;if!self:GetNWBool("SWL_CustomAnimCheck",false)then b:SetAnimation(PLAYER_ATTACK1)self:SetNextAttack(1.0)return end;if b:KeyDown(IN_USE)&&self:GetEnabled()then self.CurStance=self:SetNWInt("Stance",self.CurStance)self:SetNextAttack(0.1)return end;self.CurStance=self:GetNWInt("Stance",1)self.CurForm=self:GetNWString("CombatTypeModel","judge_")if self:GetEnabled()then local S;if!b:OnGround()then self.AerialLand=true else end;if SERVER&&b:IsCloaked()then b:SetCloaked(false)end;self:SetNextAttack(self:GetDelay())end end;function SWEP:SecondaryAttack()local b=self:GetOwner()if b.IsBlocking then return end;if self.HeavyCharge then return end;if b:KeyDown(IN_USE)&&self:GetEnabled()&&self:GetNWBool("SWL_CustomAnimCheck",false)&&!(prone&&b:IsProne())then return end;local T=self:GetForceType()if!IsValid(b)||!self:GetActiveForcePowerType(T)then return end;local U=self:GetActiveForcePowerType(T)if!U then return end;local A=hook.Run("CanUseLightsaberForcePower",b,U.name)if A==false then return end;if SERVER&&U.ActionServer then local K=b:GetForceLevel(U.id)+1;local V=U.Upgrades&&(U.Upgrades[K]||U.Upgrades[#U.Upgrades])local q={}if U.target then q=self:SelectTargets(U.target,U.distance,U.targetnpcs,U.targetclass)end;U.ActionServer(self,q[1],q,V)if SERVER&&!U.CanCloak&&b:IsCloaked()then b:SetCloaked(false)end end end;function SWEP:Reload()local b=self:GetOwner()if!b:KeyPressed(IN_RELOAD)then return end;if b:WaterLevel()>2 then return end;if b:KeyDown(IN_WALK)then if CLIENT then wOS:OpenDevestatorMenu()end;return end;if b:KeyDown(IN_USE)then if CLIENT then wOS:OpenFormMenu()end;return end;self:SetEnabled(!self:GetEnabled())end;function SWEP:GetTargetHoldType()if self:GetWorldModel()=="models/weapons/starwars/w_maul_saber_staff_hilt.mdl"then return"knife"end;if self:LookupAttachment("blade2")&&self:LookupAttachment("blade2")>0 then return"knife"end;return"melee2"end;function SWEP:OnEnabled(W)if!self:GetEnabled()||W then self:PlayWeaponSound(self:GetOnSound())end;if CLIENT||self:GetEnabled()&&!W then return end;self:SetHoldType(self:GetTargetHoldType())timer.Remove("rb655_ls_ht")local b=self:GetOwner()self.SoundLoop=CreateSound(b,Sound(self.LoopSound))if self.SoundLoop then self.SoundLoop:Play()end;self.SoundSwing=CreateSound(b,Sound(self.SwingSound))if self.SoundSwing then self.SoundSwing:Play()self.SoundSwing:ChangeVolume(0,0)end;self.SoundHit=CreateSound(b,Sound("lightsaber/saber_hit.wav"))if self.SoundHit then self.SoundHit:Play()self.SoundHit:ChangeVolume(0,0)end end;function SWEP:OnDisabled(X)if CLIENT then if X then rb655_SaberClean(self:EntIndex())end;return true end;if self.SoundLoop then self.SoundLoop:Stop()self.SoundLoop=nil end;if self.SoundSwing then self.SoundSwing:Stop()self.SoundSwing=nil end;if self.SoundHit then self.SoundHit:Stop()self.SoundHit=nil end;return true end;function SWEP:OnEnabledOrDisabled(G,H,I)if H==I then return end;if I then self:OnEnabled()else self:PlayWeaponSound(self:GetOffSound())timer.Create("rb655_ls_ht",0.4,1,function()if IsValid(self)then self:SetHoldType("normal")end end)self:OnDisabled()end end;function SWEP:OnDrop()if self:GetEnabled()then self:PlayWeaponSound(self:GetOffSound())end;self:OnDisabled(true)end;function SWEP:OnRemove()if self:GetEnabled()&&IsValid(self:GetOwner())then self:PlayWeaponSound(self:GetOffSound())end;self:OnDisabled(true)end;function SWEP:Deploy()local Y=self:GetOwner()if SERVER&&IsValid(Y)&&!self.IsSetup then self:SetStandard()self.IsSetup=true end;self.CurStance=self:GetNWInt("Stance",1)self.CurForm=self:GetNWString("CombatTypeModel","judge_")if self.SetupAppearance then self:SetupAppearance(Y)end;if self:GetEnabled()then self:OnEnabled(true)else self:SetHoldType("normal")end;if CLIENT then return end;if Y:IsPlayer()&&Y:FlashlightIsOn()then Y:Flashlight(false)end;self:SetBladeLength(0)return true end;function SWEP:Holster()if self:GetEnabled()then self:PlayWeaponSound(self:GetOffSound())end;local b=self:GetOwner()if!IsValid(b)then return end;b.IsBlocking=false;b:SetNWBool("IsMeditating",false)local S=CurTime()if self:GetNextPrimaryFire()>S||self:GetNextSecondaryFire()>S then return false else return self:OnDisabled(true)end end;local Z=Vector(0,0,36)local _=Vector(0,0,18)function SWEP:GetSaberPosAng(a0,a1)a0=a0||1;local b=self:GetOwner()if IsValid(b)then local a2=b:LookupBone'ValveBiped.Bip01_R_Hand'local a3=self:LookupAttachment('blade'..a0)if a1 then a3=self:LookupAttachment('quillon'..a0)end;if a3&&a3>0 then local a4=self:GetAttachment(a3)if!a2&&SERVER then a4.Pos=a4.Pos+Z;if SERVER&&IsValid(b)&&b:IsPlayer()&&b:Crouching()then a4.Pos=a4.Pos-_ end;a4.Ang.p=0 end;return a4.Pos,a4.Ang:Forward()end;if a2 then local r,a5=b:GetBonePosition(a2)if r==b:GetPos()then local a6=b:GetBoneMatrix(a2)if a6 then r=a6:GetTranslation()a5=a6:GetAngles()end end;a5:RotateAroundAxis(a5:Forward(),180)a5:RotateAroundAxis(a5:Up(),30)a5:RotateAroundAxis(a5:Forward(),-5.7)a5:RotateAroundAxis(a5:Right(),92)r=r+a5:Up()*-3.3+a5:Right()*0.8+a5:Forward()*5.6;return r,a5:Forward()end end;local a7=self:GetAngles()a7.p=0;local a8=self:GetPos()+a7:Right()*0.6-a7:Up()*0.2+a7:Forward()*0.8;if SERVER&&IsValid(b)&&b:Crouching()then a8=a8-_ end;return a8,-a7:Forward()end;function SWEP:OnForceChanged(G,H,I)if H>I then self.NextForce=CurTime()+2 end end;function SWEP:Think()self.WorldModel=self:GetWorldModel()self:SetModel(self:GetWorldModel())local b=self:GetOwner()if!IsValid(b)then return end;if b:KeyDown(IN_WALK)&&!b:KeyDown(IN_SPEED)&&self:GetForce()>0&&self:GetEnabled()&&!(prone&&b:IsProne())then b:SetNWBool("IsBlocking",true)b:SetNWFloat("BlockTime",CurTime()+0.4)b.IsBlocking=true else b:SetNWBool("IsBlocking",false)b.IsBlocking=false end;local U=self:GetActiveForcePowerType(self:GetForceType())if U&&U.think&&!b:KeyDown(IN_USE)then local A=hook.Run("CanUseLightsaberForcePower",b,U.name)if A!=false&&U.think then U.think(self)end end;if CLIENT then return true end;self:ServerThoughts()end;local a9=ACT_HL2MP_IDLE_KNIFE;local aa={}aa[ACT_MP_STAND_IDLE]=a9;aa[ACT_MP_WALK]=a9+1;aa[ACT_MP_RUN]=a9+2;aa[ACT_MP_CROUCH_IDLE]=a9+3;aa[ACT_MP_CROUCHWALK]=a9+4;aa[ACT_MP_ATTACK_STAND_PRIMARYFIRE]=a9+5;aa[ACT_MP_ATTACK_CROUCH_PRIMARYFIRE]=a9+5;aa[ACT_MP_RELOAD_STAND]=a9+6;aa[ACT_MP_RELOAD_CROUCH]=a9+6;aa[ACT_MP_JUMP]=a9+7;aa[ACT_RANGE_ATTACK1]=a9+8;aa[ACT_MP_SWIM]=a9+9;function SWEP:TranslateActivity(ab)local b=self:GetOwner()if b:IsNPC()then if self.ActivityTranslateAI[ab]then return self.ActivityTranslateAI[ab]end;return-1 end;if b:Crouching()then local o=util.TraceHull({start=b:GetShootPos(),endpos=b:GetShootPos()+Vector(0,0,20),mins=b:OBBMins(),maxs=b:OBBMaxs(),filter=b})if self:GetEnabled()&&o.Hit&&ab==ACT_MP_ATTACK_CROUCH_PRIMARYFIRE then return ACT_HL2MP_IDLE_KNIFE+5 end;if!self:GetEnabled()&&self:GetHoldType()=="normal"&&b:Crouching()&&ab==ACT_MP_CROUCH_IDLE then return ACT_HL2MP_IDLE_KNIFE+3 end;if(!self:GetEnabled()&&self:GetHoldType()=="normal"||self:GetEnabled()&&o.Hit)&&ab==ACT_MP_CROUCH_IDLE then return ACT_HL2MP_IDLE_KNIFE+3 end;if(!self:GetEnabled()&&self:GetHoldType()=="normal"||self:GetEnabled()&&o.Hit)&&ab==ACT_MP_CROUCHWALK then return ACT_HL2MP_IDLE_KNIFE+4 end end;if b:WaterLevel()>1&&self:GetEnabled()then return aa[ab]end;if self.ActivityTranslate[ab]!=nil then return self.ActivityTranslate[ab]end;return-1 end
--addons/!lpakr_out/lua/entities/base_wire_entity.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_gmodentity")ENT.Type="anim"ENT.PrintName="Wire Unnamed Ent"ENT.Purpose="Base for all wired SEnts"ENT.RenderGroup=RENDERGROUP_TRANSLUCENT;ENT.Spawnable=false;ENT.AdminOnly=false;ENT.IsWire=true;if CLIENT then local a=CreateClientConVar("wire_drawoutline",1,true,false)function ENT:Initialize()self.NextRBUpdate=CurTime()+0.25;self.PlayerWasLookingAtMe=false end;function ENT:Draw()self:DoNormalDraw()Wire_Render(self)if self.GetBeamLength&&(!self.GetShowBeam||self:GetShowBeam())then Wire_DrawTracerBeam(self,1,self.GetBeamHighlight&&self:GetBeamHighlight()||false)end end;local b={dietime=0}function ENT:AddWorldTip(c)b.dietime=SysTime()+RealFrameTime()*4;b.ent=self end;local d=18;function ENT:GetWorldTipPositions(e,f,g,h,i,j)local k=LocalPlayer()local l=k:GetEyeTrace().HitPos;local m=k:GetShootPos()if l==m then l=m+k:GetAimVector()*5 end;l=l:ToScreen()l.x=math.Round(l.x)l.y=math.Round(l.y)e=math.min(e,ScrW()-64)f=math.min(f,ScrH()-64)local n=l.x-32;local o=l.y-32;if WireLib.WiringToolRenderAvoid then local p=WireLib.WiringToolRenderAvoid[1]local q=WireLib.WiringToolRenderAvoid[2]local r=WireLib.WiringToolRenderAvoid[3]local s=WireLib.WiringToolRenderAvoid[4]-8;if n-e<r&&n>p&&o-f<s&&o>q then n=p-8;o=s-(s-q)/2+f/2;if e>ScrW()*0.4 then o=q-8 end end end;local t=n-e;local u=o-f;if t<32 then n=32+e;t=32 end;if u<32 then o=32+f;u=32 end;local v=(n+t)/2;local w=(o+u)/2;return{min={x=t,y=u},max={x=n,y=o},center={x=v,y=w},size={w=e,h=f},bodysize={w=g,h=h},footersize={w=i,h=j},edgesize=d}end;function ENT:DrawWorldTipOutline(l)draw.NoTexture()surface.SetDrawColor(25,25,25,200)local x={{x=l.min.x+d,y=l.min.y,u=0,v=0},{x=l.max.x,y=l.min.y,u=0,v=0},{x=l.max.x,y=l.max.y-d+0.5,u=0,v=0},{x=l.max.x-d+0.5,y=l.max.y,u=0,v=0},{x=l.min.x,y=l.max.y,u=0,v=0},{x=l.min.x,y=l.min.y+d,u=0,v=0}}render.CullMode(MATERIAL_CULLMODE_CCW)surface.DrawPoly(x)surface.SetDrawColor(0,0,0,255)for y=1,#x-1 do surface.DrawLine(x[y].x,x[y].y,x[y+1].x,x[y+1].y)end;surface.DrawLine(x[#x].x,x[#x].y,x[1].x,x[1].y)end;local function z(A)local B=A:GetNWString("WireName")if!B||B==""then return A.PrintName else return B end end;function ENT:GetWorldTipBodySize()local c=self:GetOverlayData().txt;if c==nil||c==""then return 0,0 end;return surface.GetTextSize(c)end;function ENT:DrawWorldTipBody(l)local C=self:GetOverlayData()draw.DrawText(C.txt,"GModWorldtip",l.center.x,l.min.y+d/2,Color(255,255,255,255),TEXT_ALIGN_CENTER)end;function ENT:DrawWorldTip()local C=self:GetOverlayData()if!C then return end;surface.SetFont("GModWorldtip")local D=z(self).." ["..self:EntIndex().."]"local B;if CPPI then local E=self:CPPIGetOwner()B=string.format("(%s)",E&&E:IsPlayer()&&E:GetName()||"World")else B="("..self:GetPlayerName()..")"end;local g,h=self:GetWorldTipBodySize()local F,G=surface.GetTextSize(D)local H,I=surface.GetTextSize(B)local J=g;local K=h;local i,j=0,0;local L=false;if J<F+H-d then L=true;i=math.max(J,F,H)j=G+I+d+8;J=i;K=K+j else i=math.max(J,F+8+H)j=math.max(G,I)+d+8;J=i;K=K+j end;if h==0 then K=K-h-d end;local l=self:GetWorldTipPositions(J+d*2,K+d,g,h,i,j)self:DrawWorldTipOutline(l)local M=l.min.y;if h>0 then self:DrawWorldTipBody(l)M=M+h+d;surface.SetDrawColor(0,0,0,255)surface.DrawLine(l.min.x,M,l.max.x,M)end;if L then draw.DrawText(D,"GModWorldtip",l.center.x,M+8,Color(255,255,255,255),TEXT_ALIGN_CENTER)draw.DrawText(B,"GModWorldtip",l.center.x,M+G+16,Color(255,255,255,255),TEXT_ALIGN_CENTER)else draw.DrawText(D,"GModWorldtip",l.min.x+d,M+16,Color(255,255,255,255))draw.DrawText(B,"GModWorldtip",l.min.x+l.size.w-H-d,M+16,Color(255,255,255,255))end end;local N=CreateConVar("cl_drawworldtooltips","1",{FCVAR_ARCHIVE})hook.Add("HUDPaint","wire_draw_world_tips",function()if!N:GetBool()then return end;if SysTime()>b.dietime then return end;local A=b.ent;if!IsValid(A)then return end;A:DrawWorldTip()end)function ENT:BeingLookedAtByLocalPlayer()local O=BaseClass.BeingLookedAtByLocalPlayer(self)local P=self:GetTable()if P.PlayerWasLookingAtMe!=O then net.Start("wire_overlay_request")if O then net.WriteBool(true)net.WriteEntity(self)net.WriteFloat(P.OverlayData&&P.OverlayData.__time||0)else net.WriteBool(false)end;net.SendToServer()P.PlayerWasLookingAtMe=O end;return O end;local Q;hook.Add("Think","wire_base_lookedatbylocalplayer",function()local R=LocalPlayer()if!IsValid(R)then Q=nil;return end;local S=R:GetEyeTrace().Entity;if S!=Q&&IsValid(Q)&&Q.IsWire then Q:BeingLookedAtByLocalPlayer()end;if IsValid(S)&&S.IsWire&&S:BeingLookedAtByLocalPlayer()then Q=S else Q=nil end end)function ENT:DoNormalDraw(T,U)if!T&&a:GetBool()&&Q==self then self:DrawEntityOutline()self:DrawModel()else self:DrawModel()end;if!U&&Q==self then self:AddWorldTip()end end;function ENT:Think()if CurTime()>=(self.NextRBUpdate||0)then self.NextRBUpdate=CurTime()+10;Wire_UpdateRenderBounds(self)end end;local V={}local W={}function ENT:DrawEntityOutline()if W[self]then return end;V[#V+1]=self;W[self]=true end;local X=Color(255,100,255)hook.Add("PreDrawHalos","Wiremod_overlay_halos",function()if#V==0 then return end;outline.Add(V,X,outline.MODE_BOTH)V={}W={}end)function ENT:GetOverlayText()local B=self:GetNWString("WireName")if B==""then B=self.PrintName end;local Y="- "..B.." -"local C=self:GetOverlayData()if C&&C.txt then return Y.."\n"..C.txt else return Y end end;net.Receive("wire_overlay_data",function(Z)local A=net.ReadEntity()if IsValid(A)then A.OverlayData=net.ReadTable()end end)end;function ENT:SetOverlayText(c)local _=self.OverlayData;if!_ then _={}self.OverlayData=_ end;if c&&#c>12000 then c=string.sub(c,1,12000)end;if c==_.txt then return end;_.txt=c;_.__time=CurTime()end;function ENT:SetOverlayData(C)if C&&C.txt&&#C.txt>12000 then C.txt=string.sub(C.txt,1,12000)end;self.OverlayData=C;self.OverlayData.__time=CurTime()end;function ENT:GetOverlayData()return self.OverlayData end;if CLIENT then return end;util.AddNetworkString("wire_overlay_data")util.AddNetworkString("wire_overlay_request")local function a0(R,A,a1)local _=A.OverlayData;if _&&_.__time&&_.__time>a1[1]then net.Start("wire_overlay_data")net.WriteEntity(A)net.WriteTable(_)net.Send(R)a1[1]=_.__time end end;local a2=WireLib.RegisterPlayerTable()local function a3()for R,a1 in pairs(a2)do local A=a1[2]if A&&A:IsValid()then a0(R,A,a1)else a2[R]=nil end end;if!next(a2)then timer.Remove("WireOverlayUpdate")end end;net.Receive("wire_overlay_request",function(Z,R)if net.ReadBool()then local A=net.ReadEntity()if!(A&&A:IsValid())then return end;local a4=net.ReadFloat()local a1={a4,A}a2[R]=a1;a0(R,A,a1)if!timer.Exists("WireOverlayUpdate")then timer.Create("WireOverlayUpdate",0.1,0,a3)end else a2[R]=nil end end)function ENT:OnRemove()WireLib.Remove(self)end;function ENT:OnRestore()WireLib.Restored(self)end;function ENT:BuildDupeInfo()return WireLib.BuildDupeInfo(self)end;function ENT:ApplyDupeInfo(R,A,a5,a6)WireLib.ApplyDupeInfo(R,A,a5,a6)end;function ENT:PreEntityCopy()duplicator.ClearEntityModifier(self,"WireDupeInfo")local a7=self:BuildDupeInfo()if a7 then duplicator.StoreEntityModifier(self,"WireDupeInfo",a7)end end;function ENT:OnEntityCopyTableFinish(a8)a8.OverlayData=nil;a8.lastWireOverlayUpdate=nil;a8.WireDebugName=nil end;local function a9(aa)return function(ab,ac)if ab==nil then return ac end;if ab==0 then return game.GetWorld()end;local A=aa[ab]if IsValid(A)then return A else return ac end end end;function ENT:OnDuplicated()self.DuplicationInProgress=true end;function ENT:PostEntityPaste(ad,ae,aa)if ae.EntityMods&&ae.EntityMods.WireDupeInfo then ae:ApplyDupeInfo(ad,ae,ae.EntityMods.WireDupeInfo,a9(aa))end;self.DuplicationInProgress=nil end;ENT.LINK_STATUS_UNLINKED=1;ENT.LINK_STATUS_LINKED=2;ENT.LINK_STATUS_INACTIVE=2;ENT.LINK_STATUS_DEACTIVATED=2;ENT.LINK_STATUS_ACTIVE=3;ENT.LINK_STATUS_ACTIVATED=3;function ENT:ColorByLinkStatus(af)local ag=self:GetColor().a;if af==self.LINK_STATUS_UNLINKED then self:SetColor(Color(255,0,0,ag))elseif af==self.LINK_STATUS_LINKED then self:SetColor(Color(255,165,0,ag))elseif af==self.LINK_STATUS_ACTIVE then self:SetColor(Color(0,255,0,ag))else self:SetColor(Color(255,255,255,ag))end end
--addons/!lpakr_out/lua/entities/drgbase_nextbot/locomotion.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/drgbase_nextbot/animations.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/dronesrewrite_camera/shared.lua:
ENT.Base="dronesrewrite_base"ENT.Type="anim"ENT.PrintName="Camera Drone"ENT.Spawnable=false;ENT.AdminSpawnable=false;ENT.Category="Drones Rewrite"ENT.UNIT="CAM"ENT.Model="models/dronesrewrite/cameradr/cameradr.mdl"ENT.FirstPersonCam_pos=Vector(4.5,0,-3.6)ENT.ThirdPersonCam_distance=30;ENT.DoExplosionEffect="splode_drone_sparks"ENT.AngOffset=4;ENT.Alignment=0.5;ENT.HealthAmount=20;ENT.DefaultHealth=20;ENT.Speed=1500;ENT.SprintCoefficient=1.7;ENT.RotateSpeed=6;ENT.Fuel=40;ENT.MaxFuel=40;ENT.HUD_hudName="Camera"ENT.OverlayName="No Overlay"ENT.UseNightVision=false;ENT.UseFlashlight=false;ENT.KeysFuncs=DRONES_REWRITE.DefaultKeys()ENT.AllowYawRestrictions=true;ENT.YawMin=-55;ENT.YawMax=55;ENT.PitchMin=-15;ENT.Slots={["Camera"]=1}ENT.Sounds={PropellerSound={Name="drones/ardr.wav",Pitch=100,Level=65,PitchCoef=0.02,Volume=0.17},ExplosionSound={Name="ambient/energy/spark3.wav",Level=100,Pitch=150}}ENT.Propellers={Damage=1,Health=10,HitRange=7,Model="models/dronesrewrite/flower_propeller/flower_propeller.mdl",HitPitch=255,HitLevel=60,RandomHitSounds={"physics/metal/metal_box_impact_bullet2.wav","physics/metal/metal_box_impact_bullet2.wav","physics/metal/metal_box_impact_bullet2.wav"},RandomLoseSounds={"physics/glass/glass_cup_break1.wav","physics/glass/glass_cup_break2.wav"},LosePitch=255,LoseLevel=65,Info={Vector(6.4,9.15,1.5),Vector(-6.4,-9.15,1.5),Vector(-6.4,9.15,1.5),Vector(6.4,-9.15,1.5)}}ENT.Weapons={["Camera"]={Name="Camera"}}ENT.Modules={}
--addons/!lpakr_out/lua/entities/ent_lightsaber.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/ent_textscreen/shared.lua:
ENT.Type='anim'ENT.Base='base_anim'ENT.PrintName='Textscreen'ENT.Spawnable=false;ENT.RenderGroup=RENDERGROUP_BOTH;srp=srp||{}function ENT:SetupDataTables()self:NetworkVar('String',0,'Text')self:NetworkVar('Int',0,'Font')self:NetworkVar('Int',1,'Size')self:NetworkVar('Int',2,'R')self:NetworkVar('Int',3,'G')self:NetworkVar('Int',4,'B')end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/furniture_clock.lua:
AddCSLuaFile()ENT.PrintName='Furniture - Clock'ENT.Author='Scott (STEAM_0:1:26675200)'ENT.Type='anim'ENT.Base='base_anim'ENT.Contact=''ENT.Purpose=''ENT.Instructions=''ENT.Spawnable=false;ENT.RenderGroup=RENDERGROUP_BOTH;ENT.Model='models/props_combine/breenclock.mdl'ENT.SoundClock='Clock.Alarm'ENT.Interactive=true;ENT.InteractionName='Turn On'ENT.InteractionName2='Turn Off'sound.Add({name='Clock.Tick',channel=CHAN_STATIC,volume=1,level=50,pitch=150,sound=Sound('player/geiger1.wav'),loop=false})sound.Add({name='Clock.Alarm',channel=CHAN_STATIC,volume=1.5,level=55,pitch=122,sound=Sound('npc/dog/dog_scared1.wav'),loop=false})function ENT:SetupDataTables()self:NetworkVar('Bool',0,'On')end;function ENT:Initialize()end;function ENT:Use(a)self:SetOn(!self:GetOn())end;local b=20;function ENT:DrawInteraction(c,d,e)surface.SetFont'ui_header.s'surface.SetDrawColor(255,255,255,255)surface.SetMaterial(c.OnPickup)surface.SetTextColor(255,255,255,255)local f=self:GetOn()&&self.InteractionName2||self.InteractionName;local g,h=surface.GetTextSize(f)g=g+b+4;local i,j=e.x,e.y;surface.DrawTexturedRect(i,j,b,b)surface.SetTextPos(i+b+2,j-2)surface.DrawText(f)end;function ENT:Think()if!self:GetOn()then self:SetNextClientThink(CurTime()+1)return true end;self:EmitSound('Clock.Tick')self:SetNextClientThink(CurTime()+1)return true end;function ENT:OnRemove()hook.Remove('OnHourChanged',self)end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/furniture_coffee.lua:
AddCSLuaFile()ENT.PrintName='Furniture - Coffee'ENT.Author='Scott (STEAM_0:1:26675200)'ENT.Type='anim'ENT.Base='base_anim'ENT.Contact=''ENT.Purpose=''ENT.Instructions=''ENT.Spawnable=false;ENT.RenderGroup=RENDERGROUP_BOTH;ENT.Model='models/galactic/me3fix/coffeemaker01.mdl'ENT.Interactive=true;ENT.InteractiveDrinking='Drink Coffee'ENT.InteractivePreparing='Preparing Coffee - 'local a=20;function ENT:SetupDataTables()self:NetworkVar('Float',0,'Countdown')end;function ENT:Initialize()end;function ENT:OnSpawned(b)if b.CoffeeCooldown then self:SetCountdown(b.CoffeeCooldown)end end;function ENT:Use(b)if self:GetCountdown()>CurTime()then return end;if b:AddInventoryItem('LIQUID_COFFEE',1)then self:SetCountdown(CurTime()+1200)end end;function ENT:OnRemove()local c=self.ConstructionOwner;if IsValid(c)then c.CoffeeCooldown=self:GetCountdown()end end;function ENT:DrawInteraction(d,e,f)surface.SetFont'ui_header.s'surface.SetDrawColor(255,255,255,255)surface.SetMaterial(d.OnPickup)surface.SetTextColor(255,255,255,255)local g=self:GetCountdown()-CurTime()if g<0 then g=self.InteractiveDrinking else g=self.InteractivePreparing..string.NiceTime(g)end;local h,i=surface.GetTextSize(g)h=h+a+4;local j,k=f.x,f.y;surface.DrawTexturedRect(j,k,a,a)surface.SetTextPos(j+a+2,k-2)surface.DrawText(g)end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/gambling_machine_base/shared.lua:
ENT.Type='anim'ENT.Base='base_srp'ENT.PrintName='Gambling Machine Base'ENT.Price=500;ENT.BackgroundColor=Color(96,135,192)ENT.Interactive=true;ENT.TaxThreshold=5000;ENT.TaxWinnings=0.02;ENT.ModelTransforms={['models/props/console4.mdl']={OffsetPos=Vector(25.5,0,15),OffsetAng=Angle(0,90,60),Scale=0.021,X=-2550,Y=-2000,W=5125,H=1400,MainLight={Offset=Vector(-20,0,60),Angle=Angle(-45,0,0)},LeftLight={Offset=Vector(-20,-25,60),Angle=Angle(-90,0,-20)},RightLight={Offset=Vector(-20,25,60),Angle=Angle(-90,0,20)}},['models/props/cs_office/tv_plasma.mdl']={OffsetPos=Vector(6.3,0,-6.5),OffsetAng=Angle(0,90,90),Scale=0.020,X=-1400,Y=-2100,W=2780,H=1650,MainLight={Offset=Vector(8,0,-45),Angle=Angle(-90,0,0)},LeftLight={Offset=Vector(8,-25,-45),Angle=Angle(-90,0,-20)},RightLight={Offset=Vector(8,25,-45),Angle=Angle(-90,0,20)}}}ENT.ModelTransforms.Default=ENT.ModelTransforms['models/props/console4.mdl']function ENT:SetupDataTables()self:NetworkVar('Int',0,'price')self:NetworkVar('Bool',1,'IsPayingOut')end;function ENT:SetDefaultPrice(a)self.DefaultPrice=a;self:Setprice(a)end;function ENT:GetTransforms()if self.transforms then return self.transforms else self.transforms=self.ModelTransforms[self:GetModel()]||self.ModelTransforms.Default;return self.transforms end end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/gambling_machine_basicslots/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/gmod_lamp.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/gmod_light.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/gmod_wire_cameracontroller.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Camera Controller"ENT.WireDebugName="Camera Controller"local function a(b,c,d,e,f,g,h)if f then if d.LocalEyeAngles then c=d:LocalEyeAngles()else c=d:EyeAngles()local i=d:GetVehicle()if SERVER&&IsValid(i)then c=i:WorldToLocalAngles(c)end end;if IsValid(e)then if g then b=e:LocalToWorld(b-c:Forward()*h)c=e:LocalToWorldAngles(c)else b=e:LocalToWorld(b)-c:Forward()*h end else b=b-c:Forward()*h end else if IsValid(e)then b=e:LocalToWorld(b-c:Forward()*h)c=e:LocalToWorldAngles(c)end end;return b,c end;if CLIENT then local j=false;local self;local k;local l=Vector(0,0,0)local m=Vector(0,0,0)local h=0;local n=0;local o=0;local p=0;local q=0;local r=0;local s=Angle(0,0,0)local t=Angle(0,0,0)local u=Angle(0,0,0)local v=false;local w=false;local f=false;local x=false;local g=false;local y=false;local z=false;local A=false;local B=true;local C=true;local D=false;local E=math.max;local F=math.abs;local G=GetConVar("wire_cam_smooth_amount")local H;local function I()return H,IsValid(H)end;local function J(b,e,K)local L,M;if!f then if K then L=e:GetPos()else L=self:GetPos()end;M=b else if K then L=e:LocalToWorld(l)else L=l end;M=b end;local N={start=L,endpos=M,mask=z&&CONTENTS_SOLID||bit.bor(MASK_WATER,CONTENTS_SOLID),mins=Vector(-8,-8,-8),maxs=Vector(8,8,8)}local O=util.TraceHull(N)if O.Hit then return O.HitPos end;return b end;hook.Remove("CalcView","wire_camera_controller_calcview")hook.Add("CalcView","wire_camera_controller_calcview",function()if!j then return end;if!IsValid(self)then j=false;return end;local P=G:GetFloat()local Q=P-2;local b=l;local c=s;local n=h;local e,K=I()local R={}if f then m=LerpVector(FrameTime()*P,m,b)local P=G:GetFloat()local Q=P-2;if A then if r!=0 then q=math.Clamp(q+r*FrameTime()*100*E((F(n)+F(q))/10,10),0,16000-n)r=0 end;n=n+q end;p=Lerp(FrameTime()*P,p,n)b,c=a(b,c,LocalPlayer(),e,f,g,p)if y then b=J(b,e,K)end;R.origin=b;R.angles=c elseif K then m=LerpVector(FrameTime()*P,m,b)t=LerpAngle(FrameTime()*Q,t,c)b,c=a(m,t,LocalPlayer(),e,f,g,n)if y then b=J(b,e,K)end;R.origin=b;R.angles=c else if y then b=J(b,e,K)end;m=LerpVector(FrameTime()*P,m,b)t=LerpAngle(FrameTime()*Q,t,c)R.origin=m;R.angles=t end;R.drawviewer=B;return R end)hook.Add("PlayerBindPress","wire_camera_controller_zoom",function(d,S,T)if j&&A then if S=="invprev"then r=-1;return true elseif S=="invnext"then r=1;return true end end end)local U=GetConVar("sensitivity")hook.Remove("InputMouseApply","wire_camera_controller_input_unlock")hook.Add("InputMouseApply","wire_camera_controller_input_unlock",function(V,W,X,s)if D then V:SetViewAngles(Angle(0,s.y,0))D=false;return true end;if!j then return end;if!x then return end;if!IsValid(self)then j=false;return end;local Y=U:GetFloat()*FrameTime()local Z=Matrix()Z:SetAngles(s)if v then local e,_=I()if _ then local a0=Matrix()a0:SetAngles(e:GetAngles())local a1=(Z:GetInverseTR()*a0):GetAngles()if math.abs(a1.y)>90 then a1.r=-a1.r end;Z:Rotate(Angle(X*Y,-W*Y,a1.r*Y))else Z:Rotate(Angle(X*Y,-W*Y,-s.r*Y))end else Z:Rotate(Angle(X*Y,-W*Y,0))end;V:SetViewAngles(Z:GetAngles())return true end)local a2;local function a3()l.x=net.ReadFloat()l.y=net.ReadFloat()l.z=net.ReadFloat()s.p=net.ReadFloat()s.y=net.ReadFloat()s.r=net.ReadFloat()v=net.ReadBit()!=0;h=math.Clamp(net.ReadFloat(),-16000,16000)a2=net.ReadInt(32)if a2!=-1&&IsValid(Entity(a2))then H=Entity(a2)a2=nil elseif a2==-1 then a2=nil end end;hook.Add("NetworkEntityCreated","wire_camera_controller_network_entity",function(a4)if a2&&a4:EntIndex()==a2 then H=a4;a2=nil end end)net.Receive("wire_camera_controller_toggle",function(a5)local a6=net.ReadBit()!=0;local a7=net.ReadEntity()if a7!=self&&j then return end;self=a7;local e,K=I()if K then e:SetNoDraw(false)end;if a6 then w=net.ReadBit()!=0;f=net.ReadBit()!=0;x=net.ReadBit()!=0;g=net.ReadBit()!=0;A=net.ReadBit()!=0;y=net.ReadBit()!=0;z=net.ReadBit()!=0;B=net.ReadBit()!=0;C=net.ReadBit()!=0;a3()local e,K=I()if K&&!C then e:SetNoDraw(true)end;if!j then m=Vector(l.x,l.y,l.z)t=Angle(s.p,s.y,s.r)n=h;p=h;q=0 end else a2=nil;if j then D=true end end;j=a6 end)net.Receive("wire_camera_controller_sync",function(a5)if!j||!IsValid(self)then return end;local a7=net.ReadEntity()if a7!=self then return end;a3()end)return end;function ENT:Initialize()BaseClass.Initialize(self)WireLib.CreateOutputs(self,{"On","HitPos (The hitpos of a trace emitted from the user) [VECTOR]","CamPos (The position of the camera.\nTakes clientside rotation into account, but not clientside zooming.) [VECTOR]","CamDir (The direction of the camera, in vector form.\nTakes clientside rotation into account.) [VECTOR]","CamAng (The direction of the camera, in angle form.\nTakes clientside rotation into account.) [ANGLE]","Trace (A trace emitted from the user) [RANGER]"})WireLib.CreateInputs(self,{"Activated","Direction (Sets the direction of the camera, in vector form.\nIf clientside movement is enabled, this is ignored.) [VECTOR]","Angle (Sets the direction of the camera, in angle form.\nIf clientside movement is enabled, this is ignored.) [ANGLE]","Position (Sets the position of the camera.\nIf clientside movement is enabled, this specifies the center of the camera's orbit.) [VECTOR]","Distance (Sets the 'distance' of the camera.\nIn other words, the camera will be moved away from the specified position by this amount.\nIf clientside zooming is enabled, this is the farthest you can zoom in.)","UnRoll (If free movement is enabled, this resets the roll back to zero.)","Parent (Parents the camera to this entity.) [ENTITY]","FilterEntities (In addition to ignoring the contraption of the 'Parent' entity, or the cam controller itself\nif parent isn't used, entities in this list will be ignored by the 'HitPos' and 'Trace' outputs) [ARRAY]","FLIR","FOV","Vehicles (Links all vehicles of passed array to this cam controller) [ARRAY]"})self.Activated=false;self.Active=false;self.FOV=nil;self.FLIR=false;self.Position=Vector(0,0,0)self.Angle=Angle(0,0,0)self.Distance=0;self.UnRoll=false;self.Players={}self.Vehicles={}self.NextGetContraption=0;self.NextUpdateOutputs=0;self:GetCameraFilterEntities()self:ColorByLinkStatus(self.LINK_STATUS_UNLINKED)end;function ENT:UpdateOverlay()local a8=self.AutoUnclip&&"Yes"||"No"if self.AutoUnclip_IgnoreWater then a8=a8 .." (Ignores water)"end;self:SetOverlayText(string.format("Local Coordinates: %s\nClient side movement: %s\nFree movement: %s\nCL movement local to parent: %s\nClient side zooming: %s\nAuto unclip: %s\nDraw player: %s\nDraw parent: %s\n\nActivated: %s",self.ParentLocal&&"Yes"||"No",self.AutoMove&&"Yes"||"No",self.FreeMove&&"Yes"||"No",self.LocalMove&&"Yes"||"No",self.AllowZoom&&"Yes"||"No",a8,self.DrawPlayer&&"Yes"||"No",self.DrawParent&&"Yes"||"No",self.Activated&&"Yes"||"No"))end;function ENT:Setup(w,f,x,g,A,y,B,z,C,a9)self.ParentLocal=tobool(w)self.AutoMove=tobool(f)self.FreeMove=tobool(x)self.LocalMove=tobool(g)self.AllowZoom=tobool(A)self.AutoUnclip=tobool(y)self.AutoUnclip_IgnoreWater=tobool(z)self.DrawPlayer=tobool(B)self.DrawParent=tobool(C)if a9 then for aa,ab in ipairs(a9)do if TypeID(ab)!=TYPE_ENTITY then continue end;if!IsValid(ab)then continue end;self:LinkEnt(ab)end end;self:UpdateOverlay()end;local function ac(l,s,ad,e,v)net.WriteFloat(l.x)net.WriteFloat(l.y)net.WriteFloat(l.z)net.WriteFloat(s.p)net.WriteFloat(s.y)net.WriteFloat(s.r)net.WriteBit(v)net.WriteFloat(ad)local ae=IsValid(e)&&e:EntIndex()||-1;net.WriteInt(ae,32)end;util.AddNetworkString("wire_camera_controller_toggle")function ENT:SyncSettings(d,af)if af==nil then af=self.Active end;if!IsValid(d)then d=self.Players end;net.Start("wire_camera_controller_toggle")net.WriteBit(af)net.WriteEntity(self)if self.Active then net.WriteBit(self.ParentLocal)net.WriteBit(self.AutoMove)net.WriteBit(self.FreeMove)net.WriteBit(self.LocalMove)net.WriteBit(self.AllowZoom)net.WriteBit(self.AutoUnclip)net.WriteBit(self.AutoUnclip_IgnoreWater)net.WriteBit(self.DrawPlayer)net.WriteBit(self.DrawParent)ac(self.Position,self.Angle,self.Distance,self.Parent,self.UnRoll)end;net.Send(d)end;util.AddNetworkString("wire_camera_controller_sync")function ENT:SyncPositions(d)if!IsValid(d)then d=self.Players end;net.Start("wire_camera_controller_sync")net.WriteEntity(self)ac(self.Position,self.Angle,self.Distance,self.Parent,self.UnRoll)net.Send(d)end;function ENT:GetCameraFilterEntities()if CurTime()<self.NextGetContraption then return end;self.NextGetContraption=CurTime()+5;self.Entities={}local e=self;if IsValid(self.Parent)then e=self.Parent end;local ag=constraint.GetAllConstrainedEntities(e)for aa,ab in pairs(ag)do self.Entities[#self.Entities+1]=ab end;if self.Inputs.FilterEntities&&self.Inputs.FilterEntities.Value then for aa,ab in pairs(self.Inputs.FilterEntities.Value)do if IsEntity(ab)&&IsValid(ab)then self.Entities[#self.Entities+1]=ab end end end end;function ENT:UpdateOutputs()if CurTime()<self.NextUpdateOutputs then return end;self.NextUpdateOutputs=CurTime()+0.1;local d=self.Players[1]if self.Active&&IsValid(d)then local e=self.Parent;local K=IsValid(e)local l,s=self.Position,self.Angle;local b=l;local c=s;b,c=a(b,c,d,e,self.AutoMove,self.LocalMove,self.Distance)if self.AutoUnclip then local L,M;if!self.AutoMove then if K then L=e:GetPos()else L=self:GetPos()end;M=b else if K then L=e:LocalToWorld(l)else L=l end;M=b end;local N={start=L,endpos=M,mask=self.AutoUnclip_IgnoreWater&&CONTENTS_SOLID||bit.bor(MASK_WATER,CONTENTS_SOLID),mins=Vector(-8,-8,-8),maxs=Vector(8,8,8)}local O=util.TraceHull(N)if O.Hit then b=O.HitPos end end;local O=util.TraceLine({start=b,endpos=b+c:Forward()*999999999,filter=self.Entities})O.RealStartPos=b;local ah=O.HitPos||Vector(0,0,0)if self.OldDupe then WireLib.TriggerOutput(self,"X",ah.x)WireLib.TriggerOutput(self,"Y",ah.y)WireLib.TriggerOutput(self,"Z",ah.z)end;WireLib.TriggerOutput(self,"HitPos",ah)WireLib.TriggerOutput(self,"CamPos",b)WireLib.TriggerOutput(self,"CamDir",c:Forward())WireLib.TriggerOutput(self,"CamAng",c)WireLib.TriggerOutput(self,"Trace",O)else if self.OldDupe then WireLib.TriggerOutput(self,"X",0)WireLib.TriggerOutput(self,"Y",0)WireLib.TriggerOutput(self,"Z",0)end;WireLib.TriggerOutput(self,"HitPos",Vector(0,0,0))WireLib.TriggerOutput(self,"CamPos",Vector(0,0,0))WireLib.TriggerOutput(self,"CamDir",Vector(0,0,0))WireLib.TriggerOutput(self,"CamAng",Angle(0,0,0))WireLib.TriggerOutput(self,"Trace",nil)end end;function ENT:Think()BaseClass.Think(self)if self.NeedsSyncSettings then self.NeedsSyncSettings=nil;self:SyncSettings()end;if self.NeedsSyncPositions then self.NeedsSyncPositions=nil;self:SyncPositions()end;self:GetCameraFilterEntities()self:UpdateOutputs()self:NextThink(CurTime())return true end;hook.Add("SetupPlayerVisibility","gmod_wire_cameracontroller",function(ai)local a7=ai.CamController;if IsValid(a7)then local l=a7.Position;if IsValid(a7.Parent)then l=a7.Parent:LocalToWorld(l)end;AddOriginToPVS(l)end end)function ENT:OnRemove()if IsValid(self.Parent)then self.Parent:RemoveCallOnRemove("wire_camera_controller_remove_parent")end;self:ClearEntities()end;function ENT:DisableCam(d)if#self.Vehicles==0&&!d then d=self:GetPlayer()end;self:SetFOV(d,false)self:SetFLIR(d,false)self:SyncSettings(d,false)if IsValid(d)then for aj=1,#self.Players do if self.Players[aj]==d then table.remove(self.Players,aj)break end end;d.CamController=nil else self.Players={}end;if#self.Players==0 then WireLib.TriggerOutput(self,"On",0)self.Active=false;self:ColorByLinkStatus(self.LINK_STATUS_LINKED)end end;function ENT:EnableCam(d)if self.DuplicationInProgress then return end;if#self.Vehicles==0&&!d then d=self:GetPlayer()end;if IsValid(d)then for aj=1,#self.Players do if self.Players[aj]==d then return end end;self.Players[#self.Players+1]=d;d.CamController=self;self:SetFOV(d)self:SetFLIR(d)WireLib.TriggerOutput(self,"On",1)self.Active=true;self:ColorByLinkStatus(self.LINK_STATUS_ACTIVE)self:SyncSettings(d)else local ak={}for aj=1,#self.Players do ak[self.Players[aj]]=true end;for aj=#self.Vehicles,1,-1 do local i=self.Vehicles[aj]if IsValid(i)then local d=i:GetDriver()if IsValid(d)then if!ak[d]then self:EnableCam(d)end end else self:UnlinkEnt(i)end end end end;function ENT:SetFOV(d,al)if al==nil&&self.FOV!=nil then al=true end;if self.FOV==0 then al=false end;if IsValid(d)then if al then if!d.Wire_Cam_DefaultFOV then d.Wire_Cam_DefaultFOV=d:GetFOV()end;if d:GetFOV()!=self.FOV then d:SetFOV(self.FOV,0)end elseif d.Wire_Cam_DefaultFOV then if d:GetFOV()!=d.Wire_Cam_DefaultFOV then d:SetFOV(d.Wire_Cam_DefaultFOV,0)end;d.Wire_Cam_DefaultFOV=nil end else for aj=#self.Players,1,-1 do local d=self.Players[aj]if IsValid(d)then self:SetFOV(d,al)else table.remove(self.Players,aj)end end end end;function ENT:SetFLIR(d,al)if al==nil then al=self.FLIR end;if IsValid(d)then if al then FLIR.start(d)else FLIR.stop(d)end else for aj=#self.Players,1,-1 do local d=self.Players[aj]if IsValid(d)then self:SetFLIR(d,al)else table.remove(self.Players,aj)end end end end;function ENT:LocalizePositions(al)if self.ParentLocal then return end;if IsValid(self.Parent)then local e=self.Parent;if al then self.Position=e:WorldToLocal(self.Position)self.Angle=e:WorldToLocalAngles(self.Angle)else self.Position=e:LocalToWorld(self.Position)self.Angle=e:LocalToWorldAngles(self.Angle)end end end;function ENT:TriggerInput(am,an)if am=="Activated"then self.Activated=an!=0;if an!=0 then self:EnableCam()else self:DisableCam()end;self:UpdateOverlay()elseif am=="Zoom"||am=="FOV"then self.FOV=math.Clamp(an,0,90)if!self.Activated then return end;self:SetFOV()elseif am=="FLIR"then self.FLIR=an!=0;if!self.Activated then return end;self:SetFLIR()elseif am=="Vehicles"then self:ClearEntities()for aa,ab in ipairs(an)do if TypeID(ab)!=TYPE_ENTITY then continue end;if!IsValid(ab)then continue end;self:LinkEnt(ab)end else self:LocalizePositions(false)if am=="Parent"then self.Parent=an elseif am=="Position"then self.Position=an elseif am=="Distance"then self.Distance=an elseif am=="UnRoll"then self.UnRoll=tobool(an)elseif am=="Direction"then self.Angle=an:Angle()elseif am=="Angle"then self.Angle=an elseif am=="X"then self.Position.x=an elseif am=="Y"then self.Position.y=an elseif am=="Z"then self.Position.z=an elseif am=="Pitch"then self.Angle.p=an elseif am=="Yaw"then self.Angle.y=an elseif am=="Roll"then self.Angle.r=an end;self:LocalizePositions(true)self.NeedsSyncPositions=true end end;local ao={[1]="Activated",[2]="Parent",[3]="Zoom",[4]="FOV",[5]="FLIR",[6]="X",[7]="Y",[8]="Z",[9]="Distance",[10]="Pitch",[11]="Yaw",[12]="Roll",[13]="UnRoll",[14]="ParentLocal",[15]="AutoMove",[16]="FreeMove",[17]="LocalMove",[18]="AllowZoom",[19]="AutoUnclip",[20]="AutoUnclip_IgnoreWater",[21]="DrawPlayer",[22]="DrawParent"}function ENT:WriteCell(ap,an)if!ao[ap]then return false end;local aq=ao[ap]if ap<14 then if ap==2 then an=Entity(an)end;self:TriggerInput(aq,an)return true else an=tobool(an)if self[aq]!=an then self[aq]=an;self.NeedsSyncSettings=true;return true end end;return false end;hook.Add("PlayerEnteredVehicle","gmod_wire_cameracontroller",function(ai,ar)if IsValid(ar.CamController)&&ar.CamController.Activated then ar.CamController:EnableCam(ai)end end)hook.Add("PlayerLeaveVehicle","gmod_wire_cameracontroller",function(ai,ar)if IsValid(ar.CamController)&&ar.CamController.Activated then ar.CamController:DisableCam(ai)end end)concommand.Add("wire_cameracontroller_leave",function(ai)if IsValid(ai.CamController)then ai.CamController:DisableCam(ai)end end)function ENT:UpdateMarks()WireLib.SendMarks(self,self.Vehicles)end;function ENT:ClearEntities()self:DisableCam()for aj=1,#self.Vehicles do local ar=self.Vehicles[aj]if IsValid(ar)then ar:RemoveCallOnRemove("wire_camera_controller_remove_pod")ar.CamController=nil end end;self.Vehicles={}self:UpdateMarks()return true end;function ENT:LinkEnt(as)as=WireLib.GetClosestRealVehicle(as,self:GetPos(),self:GetPlayer())if!IsValid(as)||!as:IsVehicle()then return false,"Must link to a vehicle"end;for aj=1,#self.Vehicles do if self.Vehicles[aj]==as then return false end end;as.CamController=self;as:CallOnRemove("wire_camera_controller_remove_pod",function()self:UnlinkEnt(as)end)self.Vehicles[#self.Vehicles+1]=as;self.Players={}if!self.Active then if#self.Vehicles>0 then self:ColorByLinkStatus(self.LINK_STATUS_LINKED)else self:ColorByLinkStatus(self.LINK_STATUS_UNLINKED)end end;if IsValid(as:GetDriver())then self:EnableCam(as:GetDriver())end;self:UpdateMarks()return true end;function ENT:UnlinkEnt(as)local at=0;for aj=1,#self.Vehicles do if self.Vehicles[aj]==as then at=aj;break end end;if at==0 then return false end;if IsValid(as:GetDriver())then self:DisableCam(as:GetDriver())end;as:RemoveCallOnRemove("wire_camera_controller_remove_pod")table.remove(self.Vehicles,at)as.CamController=nil;if!self.Active then if#self.Vehicles>0 then self:ColorByLinkStatus(self.LINK_STATUS_LINKED)else self:ColorByLinkStatus(self.LINK_STATUS_UNLINKED)end end;self:UpdateMarks()return true end;function ENT:BuildDupeInfo()local au=BaseClass.BuildDupeInfo(self)local i={}for aj=1,#self.Vehicles do i[aj]=self.Vehicles[aj]:EntIndex()end;au.Vehicles=i;au.OldDupe=self.OldDupe;return au end;function ENT:ApplyDupeInfo(d,a4,au,av)BaseClass.ApplyDupeInfo(self,d,a4,au,av)if au.cam||au.pod||au.OldDupe then if au.cam then local aw=av(au.cam)if IsValid(aw)then aw:Remove()end end;if au.pod then self.Vehicles[1]=av(au.pod)end;WireLib.AdjustSpecialInputs(self,{"Activated","X","Y","Z","Pitch","Yaw","Roll","Angle [ANGLE]","Position [VECTOR]","Distance","UnRoll","Direction [VECTOR]","Parent [ENTITY]","FLIR","FOV"})WireLib.AdjustSpecialOutputs(self,{"On","X","Y","Z","HitPos [VECTOR]","CamPos [VECTOR]","CamDir [VECTOR]","CamAng [ANGLE]","Trace [RANGER]"})self.OldDupe=true else local i=au.Vehicles;if i then for aj=1,#i do self:LinkEnt(av(i[aj]))end end end;timer.Simple(0.1,function()if IsValid(self)then self:UpdateMarks()end end)end;WireLib.AddInputAlias("Zoom","FOV")WireLib.AddOutputAlias("XYZ","HitPos")duplicator.RegisterEntityClass("gmod_wire_cameracontroller",WireLib.MakeWireEnt,"Data","ParentLocal","AutoMove","FreeMove","LocalMove","AllowZoom","AutoUnclip","DrawPlayer","AutoUnclip_IgnoreWater","DrawParent","Vehicles")
--addons/!lpakr_out/lua/entities/gmod_wire_cd_lock.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire CD Lock"ENT.WireDebugName="CD Lock"if CLIENT then return end;local a=2;local b=5000;local c=16;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self.Const=nil;self.Disk=nil;self.DisableLinking=0;self.Inputs=WireLib.CreateSpecialInputs(self,{"Disable"},{"NORMAL"})self.Outputs=WireLib.CreateSpecialOutputs(self,{"Locked","DiskEntity"},{"NORMAL","ENTITY"})self:NextThink(CurTime()+0.25)end;function ENT:TriggerInput(d,e)if d=="Disable"then self.DisableLinking=e;if e>=1&&self.Const then self.Const:Remove()self.Const=nil;self.Disk.Lock=nil;self.Disk=nil;WireLib.TriggerOutput(self,"Locked",0)WireLib.TriggerOutput(self,"DiskEntity",nil)self:NextThink(CurTime()+a)end end end;function ENT:Think()BaseClass.Think(self)if self.DoNextThink then self:NextThink(self.DoNextThink)self.DoNextThink=nil;return true end;if!IsValid(self.Disk)&&self.DisableLinking<1 then local f=self:LocalToWorld(Vector(0,0,0))local g=ents.FindInSphere(f,c)for h,i in pairs(g)do if i:IsValid()&&i:GetClass()=="gmod_wire_cd_disk"then if i.Lock==nil then self:AttachDisk(i)end end end else self:NextThink(CurTime()+1)return true end end;function ENT:AttachDisk(i)local j=self:LocalToWorld(Vector(0,0,0))local k=self:GetAngles()i:SetPos(j)i:SetAngles(k)self.NoCollideConst=constraint.NoCollide(self,i,0,0)if!self.NoCollideConst then WireLib.TriggerOutput(self,"Locked",0)WireLib.TriggerOutput(self,"DiskEntity",nil)return end;self.Const=constraint.Weld(self,i,0,0,b,true)if!self.Const then self.NoCollideConst:Remove()self.NoCollideConst=nil;WireLib.TriggerOutput(self,"Locked",0)WireLib.TriggerOutput(self,"DiskEntity",nil)return end;self.Const:CallOnRemove("wire_cd_remove_on_weld",function()if!self:IsValid()then return end;self.Const=nil;if IsValid(self.Disk)then self.Disk.Lock=nil end;self.Disk=nil;self.NoCollideConst=nil;WireLib.TriggerOutput(self,"Locked",0)WireLib.TriggerOutput(self,"DiskEntity",nil)self.DoNextThink=CurTime()+a end)i:DeleteOnRemove(self.Const)self:DeleteOnRemove(self.Const)self.Const:DeleteOnRemove(self.NoCollideConst)i.Lock=self;self.Disk=i;WireLib.TriggerOutput(self,"Locked",1)WireLib.TriggerOutput(self,"DiskEntity",i)end;duplicator.RegisterEntityClass("gmod_wire_cd_lock",WireLib.MakeWireEnt,"Data")
--addons/!lpakr_out/lua/entities/gmod_wire_colorer.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/gmod_wire_data_satellitedish.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Data Satellite Dish"ENT.WireDebugName="Satellite Dish"if CLIENT then return end;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self:ShowOutput()end;function ENT:LinkEnt(a)if!IsValid(a)||a:GetClass()!="gmod_wire_data_transferer"then return false,"Satellite Dishes can only be linked to Wire Data Transferers!"end;self.Transmitter=a;self:ShowOutput()WireLib.SendMarks(self,{a})return true end;function ENT:UnlinkEnt()self.Transmitter=nil;self:ShowOutput()WireLib.SendMarks(self,{})return true end;function ENT:ShowOutput()self:SetOverlayText(IsValid(self.Transmitter)&&"Linked"||"Unlinked")end;duplicator.RegisterEntityClass("gmod_wire_data_satellitedish",WireLib.MakeWireEnt,"Data")function ENT:BuildDupeInfo()local b=BaseClass.BuildDupeInfo(self)||{}if IsValid(self.Transmitter)then b.Transmitter=self.Transmitter:EntIndex()end;return b end;function ENT:ApplyDupeInfo(c,d,b,e)BaseClass.ApplyDupeInfo(self,c,d,b,e)self.Transmitter=e(b.Transmitter)self:ShowOutput()end
--addons/!lpakr_out/lua/entities/gmod_wire_data_store.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Data Storer"ENT.WireDebugName="Data Store"if CLIENT then return end;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self.Values={A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0}end;duplicator.RegisterEntityClass("gmod_wire_data_store",WireLib.MakeWireEnt,"Data")
--addons/!lpakr_out/lua/entities/gmod_wire_datarate.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Data Transferrer"ENT.WireDebugName="DataTransfer"if CLIENT then return end;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self:SetUseType(SIMPLE_USE)self.Outputs=Wire_CreateOutputs(self,{"Output","HiSpeed_DataRate","Wire_DataRate"})self.Inputs=Wire_CreateInputs(self,{"Input","Smooth","Interval"})self.Memory=nil;self.Smooth=0.1;self.Interval=0.25;self.WDataRate=0;self.WDataBytes=0;self.HDataRate=0;self.HDataBytes=0;self:SetOverlayText("Hi-Speed data rate: 0 bps\nWire data rate: 0 bps")end;function ENT:Think()BaseClass.Think(self)self.WDataRate=(self.WDataRate*(2-self.Smooth)+self.WDataBytes*1/self.Interval*self.Smooth)/2;self.WDataBytes=0;self.HDataRate=(self.HDataRate*(2-self.Smooth)+self.HDataBytes*1/self.Interval*self.Smooth)/2;self.HDataBytes=0;Wire_TriggerOutput(self,"HiSpeed_DataRate",self.HDataRate)Wire_TriggerOutput(self,"Wire_DataRate",self.WDataRate)self:SetOverlayText("Hi-Speed data rate: "..math.floor(self.HDataRate).." bps\nWire data rate: "..math.floor(self.WDataRate).." bps")self:NextThink(CurTime()+self.Interval)return true end;function ENT:ReadCell(a)a=math.floor(a)if self.Memory then if self.Memory.LatchStore&&self.Memory.LatchStore[math.floor(a)]then self.HDataBytes=self.HDataBytes+1;return self.Memory.LatchStore[math.floor(a)]elseif self.Memory.ReadCell then self.HDataBytes=self.HDataBytes+1;local b=self.Memory:ReadCell(a)if b then return b else return 0 end end end;return nil end;function ENT:WriteCell(a,c)a=math.floor(a)if self.Memory then if self.Memory.LatchStore&&self.Memory.LatchStore[math.floor(a)]then self.Memory.LatchStore[math.floor(a)]=c;self.HDataBytes=self.HDataBytes+1;return true elseif self.Memory.WriteCell then local d=self.Memory:WriteCell(a,c)self.HDataBytes=self.HDataBytes+1;return d end end;return false end;function ENT:TriggerInput(e,c)if e=="Input"then self.Memory=self.Inputs.Input.Src;self.WDataBytes=self.WDataBytes+1;Wire_TriggerOutput(self,"Output",c)elseif e=="Smooth"then self.Smooth=2*(1-math.Clamp(c,0,1))elseif e=="Interval"then self.Interval=math.Clamp(c,0.1,2)end end;duplicator.RegisterEntityClass("gmod_wire_datarate",WireLib.MakeWireEnt,"Data")
--addons/!lpakr_out/lua/entities/gmod_wire_dual_input.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Dual Input"ENT.WireDebugName="Dual Input"if CLIENT then return end;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self.Outputs=Wire_CreateOutputs(self,{"Out"})end;function ENT:Setup(a,b,c,d,e,f)self.keygroup=a;self.keygroup2=b;local g=self:GetPlayer()numpad.OnDown(g,a,"WireDualInput_On",self,1)numpad.OnUp(g,a,"WireDualInput_Off",self,1)numpad.OnDown(g,b,"WireDualInput_On",self,-1)numpad.OnUp(g,b,"WireDualInput_Off",self,-1)self.toggle=c==1||c==true;self.value_off=d;self.value_on=e;self.value_on2=f;self.Value=d;self.Select=0;self:ShowOutput(self.value_off)Wire_TriggerOutput(self,"Out",self.value_off)end;function ENT:InputActivate(h)if self.toggle&&self.Select==h then return self:Switch(!self.On,h)end;return self:Switch(true,h)end;function ENT:InputDeactivate(h)if self.toggle then return true end;return self:Switch(false,h)end;function ENT:Switch(i,h)if!self:IsValid()then return false end;self.On=i;self.Select=h;if i&&h==1 then self:ShowOutput(self.value_on)self.Value=self.value_on elseif i&&h==-1 then self:ShowOutput(self.value_on2)self.Value=self.value_on2 else self:ShowOutput(self.value_off)self.Value=self.value_off end;Wire_TriggerOutput(self,"Out",self.Value)return true end;function ENT:ShowOutput(j)self:SetOverlayText("("..self.value_on2 .." - "..self.value_off.." - "..self.value_on..") = "..j)end;local function k(g,l,h)if!l:IsValid()then return false end;if!gamemode.Call("PlayerUse",g,l)then return end;return l:InputActivate(h)end;local function m(g,l,h)if!l:IsValid()then return false end;if!gamemode.Call("PlayerUse",g,l)then return end;return l:InputDeactivate(h)end;numpad.Register("WireDualInput_On",k)numpad.Register("WireDualInput_Off",m)duplicator.RegisterEntityClass("gmod_wire_dual_input",WireLib.MakeWireEnt,"Data","keygroup","keygroup2","toggle","value_off","value_on","value_on2","frozen")
--addons/!lpakr_out/lua/entities/gmod_wire_forcer.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Forcer"ENT.RenderGroup=RENDERGROUP_BOTH;ENT.WireDebugName="Forcer"function ENT:SetupDataTables()self:NetworkVar("Float",0,"BeamLength")self:NetworkVar("Bool",0,"ShowBeam")self:NetworkVar("Bool",1,"BeamHighlight")end;if CLIENT then return end;local a=CreateConVar("wire_forcer_permissions",1,FCVAR_ARCHIVE,"0 = no check for forcers, 1 = GravGunPunt, 2 = GravGunPickupAllowed",0,2)function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self.Force=0;self.OffsetForce=0;self.Velocity=0;self.Inputs=WireLib.CreateInputs(self,{"Force","OffsetForce","Velocity","Length"})self:Setup(0,100,true,false)end;function ENT:Setup(b,c,d,e)self.ForceMul=b||1;self.Reaction=e||false;if c then self:SetBeamLength(c)end;if d!=nil then self:SetShowBeam(d)end;self:ShowOutput()end;function ENT:TriggerInput(f,g)if f=="Force"then self.Force=g;self:SetBeamHighlight(g!=0)self:ShowOutput()elseif f=="OffsetForce"then self.OffsetForce=g;self:SetBeamHighlight(g!=0)self:ShowOutput()elseif f=="Velocity"then self.Velocity=math.Clamp(g,-100000,100000)self:SetBeamHighlight(g!=0)self:ShowOutput()elseif f=="Length"then self:SetBeamLength(math.Round(g))self:ShowOutput()end end;local h=WireLib.clampForce;function ENT:Think()if self.Force==0&&self.OffsetForce==0&&self.Velocity==0 then return end;local i=self:GetUp()local j=self:GetPos()+i*self:OBBMaxs().z;local k=util.TraceLine{start=j,endpos=j+self:GetBeamLength()*i,filter=self}local l=k.Entity;if!IsValid(l)then return end;if l:GetMoveType()==MOVETYPE_PUSH then return end;local m=a:GetInt()if m==1 then if!IsValid(self:GetPlayer())||gamemode.Call("GravGunPunt",self:GetPlayer(),l)==false then return end elseif m==2 then if!IsValid(self:GetPlayer())||gamemode.Call("GravGunPickupAllowed",self:GetPlayer(),l)==false then return end end;if hook.Run("Wire_ForcerCanUse",self:GetPlayer(),l,self)==false then return end;if l:GetMoveType()==MOVETYPE_VPHYSICS then local n=l:GetPhysicsObject()if!IsValid(n)then return end;local o=h(i*self.Force*self.ForceMul)local p=h(i*self.OffsetForce*self.ForceMul)local q=h(i*self.Velocity)if self.Force!=0 then n:ApplyForceCenter(o)end;if self.OffsetForce!=0 then n:ApplyForceOffset(p,k.HitPos)end;if self.Velocity!=0 then n:SetVelocityInstantaneous(q)end else local q=h(i*self.Velocity)if self.Velocity!=0 then l:SetVelocity(q)end end;if self.Reaction&&IsValid(self:GetPhysicsObject())&&self.Force+self.OffsetForce!=0 then local r=h(i*-(self.Force+self.OffsetForce)*self.ForceMul)self:GetPhysicsObject():ApplyForceCenter(r)end;self:NextThink(CurTime())return true end;function ENT:ShowOutput()self:SetOverlayText("Center Force = "..math.Round(self.ForceMul*self.Force).."\nOffset Force = "..math.Round(self.ForceMul*self.OffsetForce).."\nVelocity = "..math.Round(self.Velocity).."\nLength = "..math.Round(self:GetBeamLength()))end;function ENT:BuildDupeInfo()local s=BaseClass.BuildDupeInfo(self)||{}s.ForceMul=self.ForceMul;s.Reaction=self.Reaction;return s end;function ENT:ApplyDupeInfo(t,l,s,u)self:Setup(s.ForceMul,s.Length,s.ShowBeam,s.Reaction)BaseClass.ApplyDupeInfo(self,t,l,s,u)end;WireLib.AddInputAlias("A","Force")duplicator.RegisterEntityClass("gmod_wire_forcer",WireLib.MakeWireEnt,"Data","Force","Length","ShowBeam","Reaction")
--addons/!lpakr_out/lua/entities/gmod_wire_gpulib_controller.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire GPULib Controller"ENT.WireDebugName="GPULib Controller"if CLIENT then return end;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)WireLib.CreateInputs(self,{"Target [ENTITY]"})WireLib.CreateOutputs(self,{"Screen [ENTITY]","Target [ENTITY]","LocalPosition [VECTOR]","LocalAngle [ANGLE]","Resolution"})end;function ENT:Setup()end;function ENT:SetScreen(a)self.screen=a;WireLib.TriggerOutput(self,"Screen",a)if IsValid(self.target)then GPULib.switchscreen(self.screen,self.target)end;self:UpdateTarget()end;function ENT:Think()self:UpdateTarget()end;function ENT:UpdateTarget()local b=self.screen&&self.screen.GPUEntity;if!IsValid(b)then b=self.screen end;if self.target!=b then self.target=b;if IsValid(b)then WireLib.TriggerOutput(self,"Target",b)local c,d,e=GPULib.GPU.GetInfo({Entity=b})WireLib.TriggerOutput(self,"LocalPosition",c.offset)WireLib.TriggerOutput(self,"LocalAngle",c.rot)WireLib.TriggerOutput(self,"Resolution",c.RS)else WireLib.TriggerOutput(self,"Target",NULL)WireLib.TriggerOutput(self,"LocalPosition",Vector(0,0,0))WireLib.TriggerOutput(self,"LocalAngle",Angle(0,0,0))WireLib.TriggerOutput(self,"Resolution",0)end end end;function ENT:TriggerInput(f,g)if f=="Target"&&self.screen&&self.screen:IsValid()then if!IsValid(g)then g=self.screen end;GPULib.switchscreen(self.screen,g)self:UpdateTarget()end end;duplicator.RegisterEntityClass("gmod_wire_gpulib_controller",WireLib.MakeWireEnt,"Data")function ENT:LinkEnt(a)if!IsValid(a)then return false,"Invalid entity"end;self:SetScreen(a)return true end;function ENT:UnlinkEnt()self:SetScreen(nil)return true end;function ENT:BuildDupeInfo()local h=BaseClass.BuildDupeInfo(self)||{}if IsValid(self.screen)then h.screen=self.screen:EntIndex()end;return h end;function ENT:ApplyDupeInfo(i,j,h,k)BaseClass.ApplyDupeInfo(self,i,j,h,k)self:SetScreen(k(h.screen))self:UpdateTarget()end
--addons/!lpakr_out/lua/entities/gmod_wire_hologrid.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Holo Grid"ENT.Author="Chad 'Jinto'"ENT.WireDebugName="Holo Grid"if CLIENT then return end;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self:SetUseType(SIMPLE_USE)self:Setup(false)self.Inputs=WireLib.CreateSpecialInputs(self,{"UseGPS","Reference"},{"NORMAL","ENTITY"})self.reference=self end;function ENT:Setup(a)if a then self.usesgps=true;self:SetNWEntity("reference",ents.GetByIndex(-1))self:SetOverlayText("(GPS)")else self.usesgps=false;self:SetNWEntity("reference",self.reference)self:SetOverlayText("(Local)")end end;function ENT:TriggerInput(b,c)if b=="UseGPS"then self:Setup(c!=0)elseif b=="Reference"then if IsValid(c)then self.reference=c else self.reference=self end;self:Setup(self.usesgps)end end;function ENT:Use(d,e)if e:IsPlayer()then self:Setup(!self.usesgps)end end;duplicator.RegisterEntityClass("gmod_wire_hologrid",WireLib.MakeWireEnt,"Data","usegps")function ENT:BuildDupeInfo()local f=BaseClass.BuildDupeInfo(self)||{}f.hologrid_usegps=self.usesgps&&1||0;if IsValid(self.reference)then f.reference=self.reference:EntIndex()else f.reference=nil end;return f end;function ENT:ApplyDupeInfo(g,h,f,i)BaseClass.ApplyDupeInfo(self,g,h,f,i)self.reference=i(f.reference,self)self:Setup(f.hologrid_usegps!=0)end
--addons/!lpakr_out/lua/entities/gmod_wire_hydraulic.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/gmod_wire_keyboard/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/gmod_wire_latch.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/gmod_wire_pod.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Pod Controller"ENT.WireDebugName="Pod Controller"if CLIENT then local a=0;local b=true;local c=true;local d=false;local e=nil;local f=nil;local function g()end;net.Receive("wire_pod_hud",function()a=net.ReadUInt(2)if a>0&&!d then local h=LocalPlayer()d=true;if b then h:ChatPrint("The owner of this vehicle has hidden your hud using a pod controller. If it gets stuck this way, use the console command 'wire_pod_hud_show' to forcibly enable it again.")b=false end;local i=h:GetWeapon("gmod_tool")if IsValid(i)then f=i.DrawHUD;i.DrawHUD=g end;local j=hook.GetTable()["HUDPaint"]e=table.Copy(j)for k in pairs(j)do if a>2||k!="EGP_HUDPaint"then hook.Add("HUDPaint",k,g)end end;hook.Add("DrawDeathNotice","wire_pod_drawdeathnotice",function()return false end)hook.Add("HUDDrawTargetID","wire_pod_huddrawtargetid",function()return false end)hook.Add("HUDShouldDraw","wire_pod_hudshoulddraw",function(l)local h=LocalPlayer()if a>0 then if h:InVehicle()then if l!="CHudCrosshair"&&l!="CHudGMod"&&(a>1&&l=="CHudChat"||l!="CHudChat")then return false end else a=0 end else local i=h:GetWeapon("gmod_tool")if IsValid(i)&&i.DrawHUD==g&&f!=nil then i.DrawHUD=f end;f=nil;local j=hook.GetTable()["HUDPaint"]for k,m in pairs(j)do if m==g&&e!=nil&&e[k]!=nil then hook.Add("HUDPaint",k,e[k])end end;e=nil;hook.Remove("HUDShouldDraw","wire_pod_hudshoulddraw")hook.Remove("DrawDeathNotice","wire_pod_drawdeathnotice")hook.Remove("HUDDrawTargetID","wire_pod_huddrawtargetid")d=false end end)end end)concommand.Add("wire_pod_hud_show",function(h,n,o)a=0 end)net.Receive("wire_pod_cursor",function()local p=net.ReadBool()local q=vgui.GetWorldPanel()q:SetWorldClicker(p)if p then RestoreCursorPosition()else RememberCursorPosition()end;gui.EnableScreenClicker(p)if p&&c then LocalPlayer():ChatPrint("The owner of this vehicle has enabled your cursor using a pod controller. If it gets stuck this way, use the console command 'wire_pod_cursor_disable' to forcibly disable it.")c=false end end)concommand.Add("wire_pod_cursor_disable",function(h,n,o)local q=vgui.GetWorldPanel()q:SetWorldClicker(false)gui.EnableScreenClicker(false)end)return end;util.AddNetworkString("wire_pod_hud")util.AddNetworkString("wire_pod_cursor")local r=ents.FindByClass("gmod_wire_pod")||{}local s=CreateConVar("wire_pod_allowlockinsidevehicle","0",FCVAR_ARCHIVE,"Allow or disallow people to be locked inside of vehicles")local t,u,v,w,x;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self:SetUseType(SIMPLE_USE)table.insert(r,self)if#r==1 then hook.Add("PlayerBindDown","gmod_wire_pod",t)hook.Add("PlayerBindUp","gmod_wire_pod",u)hook.Add("PlayerEnteredVehicle","Wire_Pod_EnterVehicle",v)hook.Add("PlayerLeaveVehicle","Wire_Pod_ExitVehicle",w)hook.Add("CanExitVehicle","Wire_Pod_CanExitVehicle",x)end;local y={"W","A","S","D","Mouse1","Mouse2","R","Space","Shift","Zoom","Alt","Duck","Noclip","TurnLeftKey (Not bound to a key by default. Bind a key to '+left' to use.\nOutside of a vehicle, makes the player's camera rotate left.)","TurnRightKey (Not bound to a key by default. Bind a key to '+right' to use.\nOutside of a vehicle, makes the player's camera rotate right.)","PrevWeapon (Usually bound to the mouse scroller, so will only be active for a single tick.)","NextWeapon (Usually bound to the mouse scroller, so will only be active for a single tick.)","Light","X","Y","Z","AimPos [VECTOR]","Distance","Bearing (If the 'Relative' input is non-zero, this will be relative to the vehicle.)","Elevation (If the 'Relative' input is non-zero, this will be relative to the vehicle.)","ThirdPerson","Team","Health","Armor","Active","Entity [ENTITY]","Driver [ENTITY]"}local z={"Lock","Terminate","Strip Weapons","Eject","Disable","Crosshairs","Brake","Allow Buttons","Relative (If this is non-zero, the 'Bearing' and 'Elevation' outputs will be relative to the vehicle.)","Damage Health (Damages the driver's health.)","Damage Armor (Damages the driver's armor.)","Hide Player","Hide HUD","Show Cursor","Vehicle [ENTITY]"}self.Inputs=WireLib.CreateInputs(self,z)self.Outputs=WireLib.CreateOutputs(self,y)self:SetLocked(false)self:SetHidePlayer(false)self:SetHideHUD(0)self:SetShowCursor(0)self.HidePlayerVal=false;self.Crosshairs=false;self.Disable=false;self.AllowButtons=false;self.Relative=false;self.MouseDown=false;self:SetActivated(false)self:ColorByLinkStatus(self.LINK_STATUS_UNLINKED)self:SetOverlayText("Pod Controller")end;function ENT:SetLocked(p)local A=self:GetPod()if!A||self.Locked==p then return end;self.Locked=p;A:Fire(p&&"Lock"||"Unlock","1",0)end;function ENT:SetActivated(p)if self.Activated==p then return end;self:ColorByLinkStatus(p&&self.LINK_STATUS_ACTIVE||self.LINK_STATUS_LINKED)self.Activated=p;WireLib.TriggerOutput(self,"Active",p&&1||0)end;function ENT:HidePlayer(p)local h=self:GetPly()if!h then return end;local B=h:GetColor()if p then self.OldPlyAlpha=B.a;B.a=0 else B.a=self.OldPlyAlpha||255;self.OldPlyAlpha=nil end;h:SetColor(B)h:SetRenderMode(B.a!=255&&RENDERMODE_TRANSALPHA||RENDERMODE_NORMAL)end;function ENT:SetHidePlayer(p)if self.HidePlayer==p then return end;self.HidePlayerVal=p;if self:GetPly()then self:HidePlayer(p)end end;function ENT:LinkEnt(A)A=WireLib.GetClosestRealVehicle(A,self:GetPos(),self:GetPlayer())if!IsValid(A)||!A:IsVehicle()then return false,"Must link to a vehicle"end;if!WireLib.CanTool(self:GetPlayer(),A,"wire_pod")then return false,"You do not have permission to access this vehicle"end;self:SetPod(A)WireLib.SendMarks(self,{A})return true end;function ENT:UnlinkEnt()if IsValid(self.Pod)then self.Pod:RemoveCallOnRemove("wire_pod_remove")end;self:SetShowCursor(0)self.Pod=nil;self:PlayerExited()WireLib.SendMarks(self,{})WireLib.TriggerOutput(self,"Entity",NULL)self:ColorByLinkStatus(self.LINK_STATUS_UNLINKED)return true end;function ENT:OnRemove()self:UnlinkEnt()table.RemoveByValue(r,self)if#r==0 then hook.Remove("PlayerBindDown","gmod_wire_pod")hook.Remove("PlayerBindUp","gmod_wire_pod")hook.Remove("PlayerEnteredVehicle","Wire_Pod_EnterVehicle")hook.Remove("PlayerLeaveVehicle","Wire_Pod_ExitVehicle")hook.Remove("CanExitVehicle","Wire_Pod_CanExitVehicle")end end;function ENT:GetPod()local A=self.Pod;if!IsValid(A)then return end;return A end;function ENT:SetPod(A)if A&&A:IsValid()&&!A:IsVehicle()then return false end;if self:GetPly()then self:PlayerExited()else self:ColorByLinkStatus(IsValid(A)&&self.LINK_STATUS_LINKED||self.LINK_STATUS_UNLINKED)end;self.Pod=A;WireLib.TriggerOutput(self,"Entity",A)if!IsValid(A)then return true end;A:CallOnRemove("wire_pod_remove",function()if self:IsValid()then self:UnlinkEnt(A)end end)if IsValid(A:GetDriver())then self:PlayerEntered(A:GetDriver())end;return true end;function ENT:GetPly()local h=self.Ply;if!IsValid(h)then return end;return h end;function ENT:SetPly(h)if IsValid(h)&&!h:IsPlayer()then return false end;self.Ply=h;WireLib.TriggerOutput(self,"Driver",h)return true end;function ENT:SetHideHUD(C)local h=self:GetPly()self.HideHUD=C;if h&&self:GetPod()then net.Start("wire_pod_hud")net.WriteUInt(self.HideHUD,2)net.Send(h)end end;function ENT:GetHideHUD()return self.HideHUD end;function ENT:NetShowCursor(C,h)h=h||self:GetPly()if!h then return end;net.Start("wire_pod_cursor")net.WriteBool(C||self.ShowCursor)net.Send(h)end;function ENT:SetShowCursor(C)local h=self:GetPly()self.ShowCursor=C;if h&&self:GetPod()then self:NetShowCursor(C,h)end end;function ENT:GetShowCursor()return self.ShowCursor end;local D={["forward"]="W",["moveleft"]="A",["back"]="S",["moveright"]="D",["left"]="TurnLeftKey",["right"]="TurnRightKey",["jump"]="Space",["noclip"]="Noclip",["speed"]="Shift",["zoom"]="Zoom",["walk"]="Alt",["duck"]="Duck",["attack"]="Mouse1",["attack2"]="Mouse2",["reload"]="R",["invprev"]="PrevWeapon",["invnext"]="NextWeapon",["impulse 100"]="Light"}function t(E,F)if!F then return end;local G=D[F]if!G then return end;for H,A in ipairs(r)do if A:GetPly()==E&&!A.Disable then WireLib.TriggerOutput(A,G,1)end end end;function u(E,F)if!F then return end;local G=D[F]if!G then return end;for H,A in ipairs(r)do if A:GetPly()==E&&!A.Disable then WireLib.TriggerOutput(A,G,0)end end end;function ENT:RCEject()self.RC:Off()end;function ENT:TriggerInput(l,I)if l=="Lock"then if self.RC then return end;if!self:GetPod()then return end;self:SetLocked(I!=0)elseif l=="Terminate"then local h=self:GetPly()if I==0||!h then return end;if self.RC then self:RCEject(h)end;h:Kill()elseif l=="Strip Weapons"then local h=self:GetPly()if I==0||!h then return end;if self.RC then h:ChatPrint("Your control has been terminated, and your weapons stripped!")self:RCEject(h)else h:ChatPrint("Your weapons have been stripped!")end;h:StripWeapons()elseif l=="Eject"then local h=self:GetPly()if I==0||!h then return end;if self.RC then self:RCEject(h)else h:ExitVehicle()end elseif l=="Disable"then self.Disable=I!=0;if self.Disable then for H,G in pairs(D)do WireLib.TriggerOutput(self,G,0)end end elseif l=="Crosshairs"then self.Crosshairs=I!=0;local h=self:GetPly()if!h then return end;if self.Crosshairs then h:CrosshairEnable()else h:CrosshairDisable()end elseif l=="Brake"then local A=self:GetPod()if!A then return end;if I!=0 then A:Fire("TurnOff","1",0)A:Fire("HandBrakeOn","1",0)else A:Fire("TurnOn","1",0)A:Fire("HandBrakeOff","1",0)end elseif l=="Damage Health"then local h=self:GetPly()if!h||I<=0 then return end;h:TakeDamage(math.min(I,100))elseif l=="Damage Armor"then local h=self:GetPly()if!h||I<=0 then return end;local J=math.max(h:Armor()-I,0)h:SetArmor(J)elseif l=="Allow Buttons"then self.AllowButtons=I!=0 elseif l=="Relative"then self.Relative=I!=0 elseif l=="Hide Player"then self:SetHidePlayer(I!=0)elseif l=="Hide HUD"then self:SetHideHUD(I)elseif l=="Show Cursor"then self:SetShowCursor(I)elseif l=="Vehicle"then if!IsValid(I)then return end;if I:IsPlayer()then return end;if I:IsNPC()then return end;self:LinkEnt(I)end end;local function K(L)if L>180 then L=L-360 end;if L<-180 then L=L+360 end;return L end;local function M(N,O,P,I)if O.Outputs[P].Value==I then return end;WireLib.TriggerOutput(N,P,I)end;local Q=FindMetaTable("Entity").GetTable;function ENT:Think()local O=Q(self)local h=O.Ply;if IsValid(h)&&O.Activated then local A=O.Pod;local R=h:GetShootPos()local S=h:GetAimVector()local T=util.TraceLine({start=R,endpos=R+S*9999999999,filter={h,A}})local U;local V=T.HitPos;if IsValid(A)then U=V:Distance(A:GetPos())else U=V:Distance(R)end;if T.Hit then M(self,O,"X",V.x)M(self,O,"Y",V.y)M(self,O,"Z",V.z)M(self,O,"AimPos",V)M(self,O,"Distance",U)O.VPos=V;local L=S:Angle()if O.Relative then local W;if O.RC then W=O.RC.InitialAngle elseif IsValid(A)then local X=A:LookupAttachment("vehicle_driver_eyes")if X>0 then W=A:GetAttachment(X).Ang else W=A:GetAngles()end end;M(self,O,"Bearing",K(L.y-W.y))M(self,O,"Elevation",K(L.p-W.p))else M(self,O,"Bearing",K(L.y))M(self,O,"Elevation",K(-L.p))end else M(self,O,"X",0)M(self,O,"Y",0)M(self,O,"Z",0)M(self,O,"AimPos",vector_origin)M(self,O,"Bearing",0)M(self,O,"Elevation",0)O.VPos=vector_origin end;if O.AllowButtons&&U<82 then local Y=T.Entity;local Z=h:KeyDown(IN_ATTACK)local _=O.MouseDown;if IsValid(Y)&&(Z&&!_)&&!Y:IsVehicle()&&Y.Use then O.MouseDown=true;if hook.Run("PlayerUse",h,Y)!=false then Y:Use(h,self,USE_ON,0)end elseif!Z&&_ then O.MouseDown=false end end;M(self,O,"Health",h:Health())M(self,O,"Armor",h:Armor())if IsValid(A)then M(self,O,"ThirdPerson",A:GetThirdPersonMode()&&1||0)end end;self:NextThink(CurTime())return true end;function ENT:PlayerEntered(h,a0)if self:GetPly()then return end;self:SetPly(h)self.RC=a0;if self.Crosshairs then h:CrosshairEnable()end;local A=self:GetPod()if self.HideHUD>0&&A then net.Start("wire_pod_hud")net.WriteUInt(self.HideHUD,2)net.Send(h)end;if self.ShowCursor>0&&A then self:NetShowCursor(self.ShowCursor,h)end;if self.HidePlayerVal then self:HidePlayer(true)end;WireLib.TriggerOutput(self,"Team",h:Team())self:SetActivated(true)end;function ENT:PlayerExited()local h=self:GetPly()if!h then return end;self:HidePlayer(false)self:NetShowCursor(0,h)h:CrosshairEnable()self:SetActivated(false)for H,G in pairs(D)do WireLib.TriggerOutput(self,G,0)end;WireLib.TriggerOutput(self,"X",0)WireLib.TriggerOutput(self,"Y",0)WireLib.TriggerOutput(self,"Z",0)WireLib.TriggerOutput(self,"AimPos",vector_origin)WireLib.TriggerOutput(self,"Distance",0)WireLib.TriggerOutput(self,"Bearing",0)WireLib.TriggerOutput(self,"Elevation",0)WireLib.TriggerOutput(self,"ThirdPerson",0)WireLib.TriggerOutput(self,"Team",0)WireLib.TriggerOutput(self,"Health",0)WireLib.TriggerOutput(self,"Armor",0)self:SetPly(nil)end;function v(h,a1)for H,m in ipairs(r)do local A=m:GetPod()if A==a1&&h:GetVehicle()==A then m:PlayerEntered(h)end end end;function w(h,a1)for H,m in ipairs(r)do local A=m:GetPod()if A&&A==a1 then m:PlayerExited()end end end;function x(a1,h)local a2=s:GetBool()for H,m in ipairs(r)do local A=m:GetPod()if A&&A==a1&&m.Locked&&a2 then return false end end end;function ENT:GetBeaconPos(a3)return self.VPos end;function ENT:GetBeaconVelocity(a3)local A=self:GetPod()return A&&A:GetVelocity()||self:GetVelocity()end;function ENT:BuildDupeInfo()local a4=BaseClass.BuildDupeInfo(self)||{}local A=self:GetPod()if A&&!self.RC then a4.pod=A:EntIndex()end;return a4 end;function ENT:ApplyDupeInfo(h,a5,a4,a6)BaseClass.ApplyDupeInfo(self,h,a5,a4,a6)local A=a6(a4.pod)if IsValid(A)then self:LinkEnt(A)end end;function ENT:Use(a7,a8)if a7!=self:GetPlayer()then return end;if!hook.Run("PlayerGiveSWEP",a7,"remotecontroller",weapons.Get("remotecontroller"))then return end;a7:PrintMessage(HUD_PRINTTALK,"Hold down your use key for 2 seconds to get and link a Remote Controller.")timer.Create("pod_use_"..self:EntIndex(),2,1,function()if!IsValid(a7)||!a7:IsPlayer()then return end;if!a7:KeyDown(IN_USE)then return end;if!a7:GetEyeTrace().Entity||a7:GetEyeTrace().Entity!=self then return end;if!IsValid(a7:GetWeapon("remotecontroller"))then if!hook.Run("PlayerGiveSWEP",a7,"remotecontroller",weapons.Get("remotecontroller"))then return end;a7:Give("remotecontroller")end;a7:GetWeapon("remotecontroller").Linked=self;a7:PrintMessage(HUD_PRINTTALK,"You are now linked!")a7:SelectWeapon("remotecontroller")end)end;duplicator.RegisterEntityClass("gmod_wire_pod",WireLib.MakeWireEnt,"Data")duplicator.RegisterEntityClass("gmod_wire_adv_pod",WireLib.MakeWireEnt,"Data")scripted_ents.Alias("gmod_wire_adv_pod","gmod_wire_pod")
--addons/!lpakr_out/lua/entities/gmod_wire_radio.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Radio"ENT.WireDebugName="Radio"if CLIENT then return end;local a=Model("models/props_lab/binderblue.mdl")local b={__index={register=function(self,c,d)local e=c.ChannelData;if e==self then return end;c.Channel=d;c.ChannelData=self;table.insert(self.subscribers,c)if e then e:unregister(c)self:updateChannel(e)else c:NotifyDataRecieved()end end,unregister=function(self,c)table.RemoveByValue(self.subscribers,c)end,isEmpty=function(self)return#self.subscribers==0 end,send=function(self,c,f,g)self.data[f]=g;for h,i in ipairs(self.subscribers)do if i!=c then i:NotifyDataRecieved(f)end end end,updateChannel=function(self,j)for k=1,32 do self.data[k]=j.data[k]end;for h,i in ipairs(self.subscribers)do i:NotifyDataRecieved()end end},__call=function(l)return setmetatable({data={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},subscribers={}},l)end}setmetatable(b,b)local m=setmetatable({},{__index=function(n,h)local o=b()n[h]=o;return o end})local p=setmetatable({},{__index=function(n,h)local o=setmetatable({},{__index=function(n,h)local o=b()n[h]=o;return o end})n[h]=o;return o end})function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)end;function ENT:Setup(d,q,r)self.Channel=tostring(tonumber(d)||"0")self.Secure=r==true;if tonumber(q)==nil then self.values=4;self.Old=true else self.values=math.Clamp(math.floor(q),1,32)self.Old=false end;local s={}local t={}if self.Old then s={"A","B","C","D"}t={"A","B","C","D","Channel"}else for k=1,self.values do s[k]=tostring(k)t[k]=s[k]end;t[#t+1]="Channel"end;self.inames=t;self.onames=s;self.Inputs=WireLib.CreateInputs(self,t)self.Outputs=WireLib.CreateOutputs(self,s)self.Steamid=self:GetPlayer():SteamID()self:Register(self.Channel)end;function ENT:TriggerInput(u,v)if u=="Channel"then self:Register(tostring(v))else if self.Old==true then if u=="A"then self.ChannelData:send(self,1,v)elseif u=="B"then self.ChannelData:send(self,2,v)elseif u=="C"then self.ChannelData:send(self,3,v)elseif u=="D"then self.ChannelData:send(self,4,v)end else self.ChannelData:send(self,tonumber(u),v)end;self:NextThink(CurTime())end end;function ENT:Register(d)if self.Secure then p[self.Steamid][d]:register(self,d)else m[d]:register(self,d)end end;function ENT:Unregister()if self.Secure then local w=p[self.Steamid][self.Channel]w:unregister(self)if w:isEmpty()then p[self.Steamid][self.Channel]=nil;if next(p[self.Steamid])==nil then p[self.Steamid]=nil end end else local w=m[self.Channel]w:unregister(self)if w:isEmpty()then m[self.Channel]=nil end end end;function ENT:NotifyDataRecieved(f)if f&&self.onames[f]then WireLib.TriggerOutput(self,self.onames[f],self.ChannelData.data[f])else for k=1,self.values do WireLib.TriggerOutput(self,self.onames[k],self.ChannelData.data[k])end end;self:NextThink(CurTime())end;function ENT:ReadCell(x)x=math.floor(x+1)if x>0&&x<=self.values then return self.ChannelData.data[x]else return nil end end;function ENT:WriteCell(x,v)x=math.floor(x+1)if x>0&&x<=self.values then self.ChannelData:send(self,x,v)self.Inputs[self.inames[x]].Value=v;self:NextThink(CurTime())return true else return false end end;function ENT:ShowOutput()local y={"(Channel "..self.Channel..")\nTransmit"}for k=1,self.values do y[#y+1]=" "..k..":"..math.Round(self.Inputs[self.inames[k]].Value*1000)/1000 end;y[#y+1]="\nReceive"for k=1,self.values do y[#y+1]=" "..k..":"..math.Round(self.Outputs[self.onames[k]].Value*1000)/1000 end;if self.Secure==true then y[#y+1]="\nSecured"end;self:SetOverlayText(table.concat(y))end;function ENT:OnRestore()self:Register(self.Channel)BaseClass.OnRestore(self)end;function ENT:OnRemove()self:Unregister()BaseClass.OnRemove(self)end;function ENT:Think()self:ShowOutput()self:NextThink(CurTime()+1e3)return true end;duplicator.RegisterEntityClass("gmod_wire_radio",WireLib.MakeWireEnt,"Data","Channel","values","Secure")
--addons/!lpakr_out/lua/entities/gmod_wire_screen.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/gmod_wire_sensor.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Beacon Sensor"ENT.WireDebugName="Beacon Sensor"if CLIENT then return end;local a=Model("models/props_lab/huladoll.mdl")function ENT:Initialize()self:SetModel(a)self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self.Inputs=Wire_CreateInputs(self,{"Target"})self.Outputs=Wire_CreateOutputs(self,{"Out"})end;function ENT:Setup(b,c,d,e,f,g,h,i)if!b&&!c&&!d&&!e&&!f&&!h then c=true end;self.xyz_mode=b;self.PrevOutput=nil;self.Value=0;self.outdist=c;self.outbrng=d;self.gpscord=e;self.direction_vector=f;self.direction_normalized=g;self.target_velocity=h;self.velocity_normalized=i;local j={}if c then table.insert(j,"Distance")end;if b then table.insert(j,"X")table.insert(j,"Y")table.insert(j,"Z")end;if d then table.insert(j,"Bearing")table.insert(j,"Elevation")end;if e then table.insert(j,"World_X")table.insert(j,"World_Y")table.insert(j,"World_Z")end;if f then table.insert(j,"Direction_X")table.insert(j,"Direction_Y")table.insert(j,"Direction_Z")end;if h then table.insert(j,"Velocity_X")table.insert(j,"Velocity_Y")table.insert(j,"Velocity_Z")end;Wire_AdjustOutputs(self,j)self:TriggerOutputs(0,Angle(0,0,0),Vector(0,0,0),Vector(0,0,0),Vector(0,0,0),Vector(0,0,0))self:ShowOutput()end;function ENT:Think()BaseClass.Think(self)if!IsValid(self.ToSense)||!self.ToSense.GetBeaconPos then return end;if self.Active then local k=0;local l=Vector(0,0,0)local m=Angle(0,0,0)local n=Vector(0,0,0)local o=Vector(0,0,0)local p=Vector(0,0,0)local q=self:GetPos()local r=self.ToSense:GetBeaconPos(self)||q;if self.outdist then k=(r-q):Length()end;if self.xyz_mode then local s=self:WorldToLocal(r)l=Vector(-s.y,s.x,s.z)end;if self.outbrng then local s=self:WorldToLocal(r)m=s:Angle()end;if self.gpscord then o=r end;if self.direction_vector then p=r-q;if self.direction_normalized then p:Normalize()end end;if self.target_velocity then n=self.ToSense:GetBeaconVelocity(self)if self.velocity_normalized then n:Normalize()end end;self:TriggerOutputs(k,m,l,o,p,n)self:ShowOutput()self:NextThink(CurTime()+0.04)return true end end;function ENT:ShowOutput()local t=""if self.outdist then t=string.format("%s\nDistance = %.3f",t,self.Outputs.Distance.Value)end;if self.xyz_mode then t=string.format("%s\nOffset = %.3f, %.3f, %.3f",t,self.Outputs.X.Value,self.Outputs.Y.Value,self.Outputs.Z.Value)end;if self.outbrng then t=string.format("%s\nBearing = %.3f, %.3f",t,self.Outputs.Bearing.Value,self.Outputs.Elevation.Value)end;if self.gpscord then t=string.format("%s\nWorldPos = %.3f, %.3f, %.3f",t,self.Outputs.World_X.Value,self.Outputs.World_Y.Value,self.Outputs.World_Z.Value)end;if self.direction_vector then t=string.format("%s\nDirectionVector = %.3f, %.3f, %.3f",t,self.Outputs.Direction_X.Value,self.Outputs.Direction_Y.Value,self.Outputs.Direction_Z.Value)end;if self.target_velocity then t=string.format("%s\nTargetVelocity = %.3f, %.3f, %.3f",t,self.Outputs.Velocity_X.Value,self.Outputs.Velocity_Y.Value,self.Outputs.Velocity_Z.Value)end;self:SetOverlayText(string.Right(t,#t-1))end;function ENT:TriggerOutputs(k,m,l,o,p,n)if self.outdist then Wire_TriggerOutput(self,"Distance",k)end;if self.xyz_mode then Wire_TriggerOutput(self,"X",l.x)Wire_TriggerOutput(self,"Y",l.y)Wire_TriggerOutput(self,"Z",l.z)end;if self.gpscord then Wire_TriggerOutput(self,"World_X",o.x)Wire_TriggerOutput(self,"World_Y",o.y)Wire_TriggerOutput(self,"World_Z",o.z)end;if self.outbrng then local u=m.p;local v=m.y;if u>180 then u=u-360 end;if v>180 then v=v-360 end;Wire_TriggerOutput(self,"Bearing",-v)Wire_TriggerOutput(self,"Elevation",-u)end;if self.direction_vector then Wire_TriggerOutput(self,"Direction_X",p.x)Wire_TriggerOutput(self,"Direction_Y",p.y)Wire_TriggerOutput(self,"Direction_Z",p.z)end;if self.target_velocity then Wire_TriggerOutput(self,"Velocity_X",n.x)Wire_TriggerOutput(self,"Velocity_Y",n.y)Wire_TriggerOutput(self,"Velocity_Z",n.z)end end;function ENT:TriggerInput(w,x)if w=="Target"&&self.ToSense!=self.Inputs.Target.Src then self:LinkEnt(self.Inputs.Target.Src)end end;function ENT:LinkEnt(y)if IsValid(y)&&y.GetBeaconPos then self.ToSense=y;self.Active=true;WireLib.SendMarks(self,{y})return true else self:UnlinkEnt()return false,"Must link to ent that outputs BeaconPos"end end;function ENT:UnlinkEnt(z)self.ToSense=nil;self.Active=false;WireLib.SendMarks(self,{})return true end;duplicator.RegisterEntityClass("gmod_wire_sensor",WireLib.MakeWireEnt,"Data","xyz_mode","outdist","outbrng","gpscord","direction_vector","direction_normalized","target_velocity","velocity_normalized")function ENT:BuildDupeInfo()local A=BaseClass.BuildDupeInfo(self)||{}if IsValid(self.ToSense)then A.to_sense=self.ToSense:EntIndex()end;return A end;function ENT:ApplyDupeInfo(B,z,A,C)BaseClass.ApplyDupeInfo(self,B,z,A,C)self:LinkEnt(C(A.to_sense))end
--addons/!lpakr_out/lua/entities/gmod_wire_simple_explosive.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Simple Explosive"ENT.WireDebugName="Simple Explosive"if CLIENT then return end;local a=CreateConVar("wire_explosive_delay",0.2,FCVAR_ARCHIVE)local b=CreateConVar("wire_explosive_range",512,FCVAR_ARCHIVE)function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)local c=self:GetPhysicsObject()if c:IsValid()then c:Wake()end;self.NormInfo=""self.DisabledByTimeUntil=CurTime()self.Inputs=Wire_CreateInputs(self,{"Detonate"})end;function ENT:Setup(d,e,f,g)self.key=d;self.damage=math.Min(e,1500)self.removeafter=f;self.radius=math.Clamp(g,1,b:GetFloat())self.Exploded=false;if self.damage>0 then self.NormInfo="Damage: "..math.floor(self.damage).."\nRadius: "..math.floor(self.radius)else self.NormInfo="Radius: "..math.floor(self.radius)end;self:ShowOutput()end;function ENT:OnTakeDamage(h)self:TakePhysicsDamage(h)end;function ENT:TriggerInput(i,j)if i=="Detonate"then if!self.Exploded&&math.abs(j)==self.key then self:Explode()elseif j==0 then self.Exploded=false end end end;function ENT:Explode()if!self:IsValid()then return end;if self.Exploded then return end;if self.DisabledByTimeUntil>CurTime()then return end;self.DisabledByTimeUntil=CurTime()+a:GetFloat()local k=self:GetPlayer()if!IsValid(k)then k=self end;if self.damage>0 then util.BlastDamage(self,k,self:GetPos(),self.radius,self.damage)end;local l=EffectData()l:SetOrigin(self:GetPos())util.Effect("Explosion",l,true,true)self.Exploded=true;self:ShowOutput()if self.removeafter then self:Remove()return end end;function ENT:ShowOutput()if self.Exploded then self:SetOverlayText("Exploded\n"..self.NormInfo)else self:SetOverlayText("Explosive\n"..self.NormInfo)end end;duplicator.RegisterEntityClass("gmod_wire_simple_explosive",WireLib.MakeWireEnt,"Data","key","damage","removeafter","radius")
--addons/!lpakr_out/lua/entities/gmod_wire_turret.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Turret"ENT.WireDebugName="Turret"if CLIENT then return end;local a=CreateConVar("wire_turret_numbullets_enabled",1,{FCVAR_NOTIFY,FCVAR_ARCHIVE},"Enable or Disable the numbullets function of wire turrets")local b=CreateConVar("wire_turret_tracer_enabled",1,{FCVAR_NOTIFY,FCVAR_ARCHIVE},"Enable or disable the tracer per x bullet function of wire turrets")local c=CreateConVar("wire_turret_delay_minimum",0.01,{FCVAR_NOTIFY,FCVAR_ARCHIVE},"Set the minimum allowed value for wire turrets")function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self:DrawShadow(false)self:SetCollisionGroup(COLLISION_GROUP_WEAPON)local d=self:GetPhysicsObject()if d:IsValid()then d:Wake()end;self.NextShot=0;self.Firing=false;self.spreadvector=Vector()self.effectdata=EffectData()self.attachmentPos=d:WorldToLocal(self:GetAttachment(1).Pos)self.Inputs=WireLib.CreateSpecialInputs(self,{"Fire","Force","Damage","NumBullets","Spread","Delay","Sound","Tracer"},{"NORMAL","NORMAL","NORMAL","NORMAL","NORMAL","NORMAL","STRING","STRING"})self.Outputs=WireLib.CreateSpecialOutputs(self,{"HitEntity"},{"ENTITY"})end;function ENT:FireShot()if self.NextShot>CurTime()then return end;self.NextShot=CurTime()+self.delay;if self.sound then self:EmitSound(self.sound)end;local e,f;local g=self:GetParent()if g:IsValid()then e=self:LocalToWorld(self.attachmentPos)f=self:GetAngles()else local d=self:GetPhysicsObject()e=d:LocalToWorld(self.attachmentPos)f=d:GetAngles()end;local h={}h.Num=self.numbullets;h.Src=e;h.Dir=f:Forward()h.Spread=self.spreadvector;h.Tracer=self.tracernum;h.TracerName=self.tracer;h.Force=self.force;h.Damage=self.damage;h.Attacker=self:GetPlayer()h.Callback=function(i,j,k)WireLib.TriggerOutput(self,"HitEntity",j.Entity)end;self:FireBullets(h)self.effectdata:SetOrigin(e)self.effectdata:SetAngles(f)self.effectdata:SetScale(1)util.Effect("MuzzleEffect",self.effectdata)end;function ENT:OnTakeDamage(l)self:TakePhysicsDamage(l)end;function ENT:Think()BaseClass.Think(self)if self.Firing then self:FireShot()end;self:NextThink(CurTime())return true end;local m={["Tracer"]=true,["AR2Tracer"]=true,["ToolTracer"]=true,["GaussTracer"]=true,["LaserTracer"]=true,["StriderTracer"]=true,["GunshipTracer"]=true,["HelicopterTracer"]=true,["AirboatGunTracer"]=true,["AirboatGunHeavyTracer"]=true,[""]=true}function ENT:SetSound(n)n=string.Trim(tostring(n||""))local o=string.find(n,"[\"?]")self.sound=o==nil&&n!=""&&n||nil end;function ENT:SetDelay(p)self.delay=math.Clamp(p,c:GetFloat(),2)end;function ENT:SetNumBullets(q)self.numbullets=a:GetBool()&&math.Clamp(math.floor(q),1,10)||1 end;function ENT:SetTracer(r)r=string.Trim(r)self.tracer=b:GetBool()&&m[r]&&r||""end;function ENT:SetSpread(s)self.spread=math.Clamp(s,0,1)self.spreadvector.x=self.spread;self.spreadvector.y=self.spread end;function ENT:SetDamage(t)self.damage=math.Clamp(t,0,100)end;function ENT:SetForce(u)self.force=math.Clamp(u,0,500)end;function ENT:SetTraceNum(v)self.tracernum=b:GetBool()&&math.Clamp(math.floor(v),0,15)||0 end;function ENT:TriggerInput(w,x)if w=="Fire"then self.Firing=x>0 elseif w=="Force"then self:SetForce(x)elseif w=="Damage"then self:SetDamage(x)elseif w=="NumBullets"then self:SetNumBullets(x)elseif w=="Spread"then self:SetSpread(x)elseif w=="Delay"then self:SetDelay(x)elseif w=="Sound"then self:SetSound(x)elseif w=="Tracer"then self:SetTracer(x)end end;function ENT:Setup(p,t,u,n,q,s,r,v)self:SetForce(u)self:SetDelay(p)self:SetSound(n)self:SetDamage(t)self:SetSpread(s)self:SetTracer(r)self:SetTraceNum(v)self:SetNumBullets(q)end;duplicator.RegisterEntityClass("gmod_wire_turret",WireLib.MakeWireEnt,"Data","delay","damage","force","sound","numbullets","spread","tracer","tracernum")
--addons/!lpakr_out/lua/entities/gmod_wire_wheel.lua:
AddCSLuaFile()DEFINE_BASECLASS("base_wire_entity")ENT.PrintName="Wire Wheel"ENT.WireDebugName="Wheel"if CLIENT then return end;local a=1000;function ENT:Initialize()self:PhysicsInit(SOLID_VPHYSICS)self:SetMoveType(MOVETYPE_VPHYSICS)self:SetSolid(SOLID_VPHYSICS)self:SetUseType(SIMPLE_USE)self.BaseTorque=1;self.Breaking=0;self.SpeedMod=0;self.Go=0;self.Inputs=Wire_CreateInputs(self,{"A: Go","B: Break","C: SpeedMod"})end;function ENT:Setup(b,c,d,e,f,g)self.fwd=b;self.bck=c;self.stop=d;if f then self:SetDirection(f)end;if e then self:SetTorque(math.max(1,e))end;if g then self.Axis=g end;self:UpdateOverlayText()end;function ENT:UpdateOverlayText(h)local i=self:GetMotor()local j=0;if i then j=i.friction end;self:SetOverlayText("Torque: "..math.floor(self.BaseTorque).."\nFriction: "..j.."\nSpeed: "..(h||0).."\nBreak: "..self.Breaking.."\nSpeedMod: "..math.floor(self.SpeedMod*100).."%")end;function ENT:SetAxis(k)self.Axis=self:GetPos()+k*512;self.Axis=self:NearestPoint(self.Axis)self.Axis=self:WorldToLocal(self.Axis)end;function ENT:OnTakeDamage(l)self:TakePhysicsDamage(l)end;function ENT:SetMotor(m)self.Motor=m;self:UpdateOverlayText()end;function ENT:GetMotor()if IsValid(self.Motor)then return self.Motor end;local i=constraint.FindConstraintEntity(self,"Motor")if IsValid(i)then self.Motor=i;return i end;return nil end;function ENT:SetDirection(n)self:SetNWInt(1,n)self.direction=n end;function ENT:UpdateMotor()if!self:IsValid()then return false end;local m=self:GetMotor()if!m then return false end;local o=self.Go;local p=self.direction;local q=p*o*self.BaseTorque/a*(1+self.SpeedMod)self:UpdateOverlayText(o!=0&&p*o*(1+self.SpeedMod)||0)m:Fire("Scale",q,0)m:Fire("Activate","",0)return true end;function ENT:TriggerInput(r,s)if r=="A: Go"then if s==self.fwd then self.Go=1 elseif s==self.bck then self.Go=-1 elseif s==self.stop then self.Go=0 end elseif r=="B: Break"then self.Breaking=s elseif r=="C: SpeedMod"then self.SpeedMod=s/100 end;self:UpdateMotor()end;function ENT:PhysicsUpdate(t)local u=t:GetVelocity()if self.Breaking>0 then if self.Breaking>=100 then u.x=0;u.y=0 else u.x=u.x*(100.0-self.Breaking)/100.0;u.y=u.y*(100.0-self.Breaking)/100.0 end else return end;t:SetVelocity(u)end;function ENT:SetTorque(e)self.BaseTorque=e;self:UpdateOverlayText()end;function ENT:DoDirectionEffect()local v=EffectData()v:SetOrigin(self.Axis)v:SetEntity(self)v:SetScale(self.direction)util.Effect("wheel_indicator",v,true,true)end;function ENT:Use(w,x,y,s)local m=self:GetMotor()local z=self:GetPlayer()if m&&(z==nil||z==w)then if self.direction==1 then self.direction=-1 else self.direction=1 end;self:SetDirection(self.direction)self:UpdateMotor()self:DoDirectionEffect()end end;duplicator.RegisterEntityClass("gmod_wire_wheel",WireLib.MakeWireEnt,"Data","fwd","bck","stop","BaseTorque","direction","Axis")function ENT:SetWheelBase(A)A:DeleteOnRemove(self)self.Base=A end;function ENT:BuildDupeInfo()local B=BaseClass.BuildDupeInfo(self)||{}if IsValid(self.Base)then B.Base=self.Base:EntIndex()end;return B end;function ENT:ApplyDupeInfo(C,D,B,E)BaseClass.ApplyDupeInfo(self,C,D,B,E)local A=E(B.Base)if IsValid(A)then self:SetWheelBase(A)end;self:UpdateOverlayText()end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/keypad/sh_init.lua:
ENT.Type="anim"ENT.Base="base_anim"ENT.PrintName="Keys On A Pad"ENT.Author="KingofBeast"ENT.Spawnable=false;ENT.AdminSpawnable=false;ENT.Status_None=0;ENT.Status_Granted=1;ENT.Status_Denied=2;ENT.Command_Enter=0;ENT.Command_Reset=1;ENT.Command_Accept=2;function ENT:SetupDataTables()self:NetworkVar("Int",0,"Status")self:NetworkVar("Int",1,"NumStars")end;function ENT:CanHack()return true end
--addons/!lpakr_out/lua/entities/ladder_small2/shared.lua:
ENT.Type="anim"ENT.Base="ladder_base"ENT.PrintName="Ladder (Small - Attached)"ENT.Category="Ladders"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.Model=Model("models/props_c17/metalladder002.mdl")ENT.RenderGroup=RENDERGROUP_BOTH
--addons/ssrp_lfs/lua/entities/lvs_base_repulsorlift/cl_init.lua:
include("shared.lua")

--addons/ssrp_lfs/lua/entities/lvs_base_starfighter/shared.lua:

ENT.Base = "lvs_base"

ENT.PrintName = "[LVS] Base Starfighter"
ENT.Author = "Luna"
ENT.Information = "Luna's Vehicle Script"
ENT.Category = "[LVS]"

ENT.Spawnable			= false
ENT.AdminSpawnable		= false

ENT.MaxVelocity = 3000
ENT.MaxThrust = 3000

ENT.ThrustVtol = 55
ENT.ThrustRateVtol = 3

ENT.ThrottleRateUp = 0.6
ENT.ThrottleRateDown = 0.6

ENT.TurnRatePitch = 1
ENT.TurnRateYaw = 1
ENT.TurnRateRoll = 1

ENT.ForceLinearMultiplier = 1

ENT.ForceAngleMultiplier = 1
ENT.ForceAngleDampingMultiplier = 1

function ENT:SetupDataTables()
	self:CreateBaseDT()

	self:AddDT( "Vector", "Steer" )
	self:AddDT( "Vector", "AIAimVector" )
	self:AddDT( "Vector", "NWVtolMove" )
	self:AddDT( "Float", "NWThrottle" )
	self:AddDT( "Float", "MaxThrottle" )

	if SERVER then
		self:SetMaxThrottle( 1 )
	end
end

function ENT:PlayerDirectInput( ply, cmd )
	local Pod = self:GetDriverSeat()

	local Delta = FrameTime()

	local KeyLeft = ply:lvsKeyDown( "-ROLL_SF" )
	local KeyRight = ply:lvsKeyDown( "+ROLL_SF" )
	local KeyPitchUp = ply:lvsKeyDown( "+PITCH_SF" )
	local KeyPitchDown = ply:lvsKeyDown( "-PITCH_SF" )
	local KeyRollRight = ply:lvsKeyDown( "+YAW_SF" )
	local KeyRollLeft = ply:lvsKeyDown( "-YAW_SF" )

	local MouseX = cmd:GetMouseX()
	local MouseY = cmd:GetMouseY()

	if ply:lvsKeyDown( "FREELOOK" ) and not Pod:GetThirdPersonMode() then
		MouseX = 0
		MouseY = 0
	else
		ply:SetEyeAngles( Angle(0,90,0) )
	end

	local SensX, SensY, ReturnDelta = ply:lvsMouseSensitivity()

	if KeyPitchDown then MouseY = (10 / SensY) * ReturnDelta end
	if KeyPitchUp then MouseY = -(10 / SensY) * ReturnDelta end
	if KeyRollRight or KeyRollLeft then
		local NewX = (KeyRollRight and 10 or 0) - (KeyRollLeft and 10 or 0)

		MouseX = (NewX / SensX) * ReturnDelta
	end

	local Input = Vector( MouseX * 0.4 * SensX, MouseY * SensY, 0 )

	local Cur = self:GetSteer()

	local Rate = Delta * 3 * ReturnDelta

	local New = Vector(Cur.x, Cur.y, 0) - Vector( math.Clamp(Cur.x * Delta * 5 * ReturnDelta,-Rate,Rate), math.Clamp(Cur.y * Delta * 5 * ReturnDelta,-Rate,Rate), 0)

	local Target = New + Input * Delta * 0.8

	local Fx = math.Clamp( Target.x, -1, 1 )
	local Fy = math.Clamp( Target.y, -1, 1 )

	local TargetFz = (KeyLeft and 1 or 0) - (KeyRight and 1 or 0)
	local Fz = Cur.z + math.Clamp(TargetFz - Cur.z,-Rate * 3,Rate * 3)

	local F = Cur + (Vector( Fx, Fy, Fz ) - Cur) * math.min(Delta * 100,1)

	self:SetSteer( F )
end

function ENT:PlayerMouseAim( ply, cmd )
	if CLIENT then return end

	local Pod = self:GetDriverSeat()

	local PitchUp = ply:lvsKeyDown( "+PITCH_SF" )
	local PitchDown = ply:lvsKeyDown( "-PITCH_SF" )
	local YawRight = ply:lvsKeyDown( "+YAW_SF" )
	local YawLeft = ply:lvsKeyDown( "-YAW_SF" )
	local RollRight = ply:lvsKeyDown( "+ROLL_SF" )
	local RollLeft = ply:lvsKeyDown( "-ROLL_SF" )

	local FreeLook = ply:lvsKeyDown( "FREELOOK" )

	local EyeAngles = Pod:WorldToLocalAngles( ply:EyeAngles() )

	if FreeLook then
		if isangle( self.StoredEyeAngles ) then
			EyeAngles = self.StoredEyeAngles
		end
	else
		self.StoredEyeAngles = EyeAngles
	end

	local OverridePitch = 0
	local OverrideYaw = 0
	local OverrideRoll = (RollRight and 1 or 0) - (RollLeft and 1 or 0)

	if PitchUp or PitchDown then
		EyeAngles = self:GetAngles()

		self.StoredEyeAngles = Angle(EyeAngles.p,EyeAngles.y,0)

		OverridePitch = (PitchUp and 1 or 0) - (PitchDown and 1 or 0)
	end

	if YawRight or YawLeft then
		EyeAngles = self:GetAngles()

		self.StoredEyeAngles = Angle(EyeAngles.p,EyeAngles.y,0)

		OverrideYaw = (YawRight and 1 or 0) - (YawLeft and 1 or 0)
	end

	self.LastEyeAngleTarget = EyeAngles
	self:ApproachTargetAngle( EyeAngles, OverridePitch, OverrideYaw, OverrideRoll, FreeLook )
end

function ENT:CalcThrottle( ply, cmd )
	if CLIENT then return end

	local Delta = FrameTime()

	local ThrottleUp =  ply:lvsKeyDown( "+THRUST_SF" ) and self.ThrottleRateUp or 0
	local ThrottleDown = ply:lvsKeyDown( "-THRUST_SF" ) and -self.ThrottleRateDown or 0

	local Throttle = (ThrottleUp + ThrottleDown) * Delta

	self:SetThrottle( self:GetThrottle() + Throttle )
end

function ENT:CalcVtolThrottle( ply, cmd )
	local Delta = FrameTime()

	local ThrottleZero = self:GetThrottle() <= 0

	local VtolX = ThrottleZero and (ply:lvsKeyDown( "-VTOL_X_SF" ) and -1 or 0) or 0
	local VtolY = ((ply:lvsKeyDown( "+VTOL_Y_SF" ) and 1 or 0) - (ply:lvsKeyDown( "-VTOL_Y_SF" ) and 1 or 0))
	local VtolZ = ((ply:lvsKeyDown( "+VTOL_Z_SF" ) and 1 or 0) - (ply:lvsKeyDown( "-VTOL_Z_SF" ) and 1 or 0))

	local DesiredVtol = Vector(VtolX,VtolY,VtolZ)
	local NewVtolMove = self:GetNWVtolMove() + (DesiredVtol - self:GetNWVtolMove()) * self.ThrustRateVtol * Delta

	if not ThrottleZero or self:WorldToLocal( self:GetPos() + self:GetVelocity() ).x > 100 then
		NewVtolMove.x = 0
	end

	self:SetVtolMove( NewVtolMove )
end

function ENT:SetVtolMove( NewMove )
	if self:GetEngineActive() then
		self:SetNWVtolMove( NewMove )
	else
		self:SetNWVtolMove( Vector(0,0,0) )
	end
end

function ENT:SetThrottle( NewThrottle )
	if self:GetEngineActive() then
		self:SetNWThrottle( math.Clamp(NewThrottle,0,self:GetMaxThrottle()) )
	else
		self:SetNWThrottle( 0 )
	end
end

function ENT:GetThrottle()
	if self:GetEngineActive() then
		return self:GetNWThrottle()
	else
		return 0
	end
end

function ENT:GetVtolMove()
	if self:GetEngineActive() and not self:GetAI() then
		return self:GetNWVtolMove() * self.ThrustVtol * (1 - math.min( self:GetThrottle(), 1 ))
	else
		return Vector(0,0,0)
	end
end

function ENT:StartCommand( ply, cmd )
	if self:GetDriver() ~= ply then return end

	if SERVER then
		local KeyJump = ply:lvsKeyDown( "VSPEC" )

		if self._lvsOldKeyJump ~= KeyJump then
			self._lvsOldKeyJump = KeyJump

			if KeyJump then
				self:ToggleVehicleSpecific()
			end
		end
	end

	if SERVER then
		if ply:lvsKeyDown( "VSPEC2" ) then
			self:ToggleVehicleSpecificSecondary()
		end
	end

	if not ply:lvsMouseAim() then
		self:PlayerDirectInput( ply, cmd )
	end

	self:CalcThrottle( ply, cmd )
	self:CalcVtolThrottle( ply, cmd )
end

function ENT:GetThrustStrenght()
	local ForwardVelocity = self:WorldToLocal( self:GetPos() + self:GetVelocity() ).x

	return (self.MaxVelocity * self:GetThrottle() - ForwardVelocity) / self.MaxVelocity
end

--addons/ssrp_lfs/lua/entities/lvs_base_starfighter/sh_camera_eyetrace.lua:

function ENT:GetEyeTrace( trace_forward )
	local startpos = self:LocalToWorld( self:OBBCenter() )

	local pod = self:GetDriverSeat()

	if IsValid( pod ) then
		startpos = pod:LocalToWorld( pod:OBBCenter() )
	end

	local AimVector = trace_forward and self:GetForward() or self:GetAimVector()

	local data = {
		start = startpos,
		endpos = (startpos + AimVector * 50000),
		filter = self:GetCrosshairFilterEnts(),
	}

	local trace = util.TraceLine( data )

	return trace
end

function ENT:GetAimVector()
	if self:GetAI() then
		return self:GetAIAimVector()
	end

	local Driver = self:GetDriver()

	if not IsValid( Driver ) then return self:GetForward() end

	if not Driver:lvsMouseAim() then
		if Driver:lvsKeyDown( "FREELOOK" ) then
			local pod = self:GetDriverSeat()

			if not IsValid( pod ) then return Driver:EyeAngles():Forward() end

			if pod:GetThirdPersonMode() then
				return -self:GetForward()
			else
				return Driver:GetAimVector()
			end
		else
			return self:GetForward()
		end
	end

	if SERVER then
		local pod = self:GetDriverSeat()

		if not IsValid( pod ) then return Driver:EyeAngles():Forward() end

		return pod:WorldToLocalAngles( Driver:EyeAngles() ):Forward()
	else
		return Driver:EyeAngles():Forward()
	end
end

--addons/ssrp_lfs/lua/entities/lvs_destruction.lua:
AddCSLuaFile()

ENT.Type            = "anim"

if SERVER then
	function ENT:Initialize()
		self:PhysicsInit( SOLID_VPHYSICS )
		self:SetMoveType( MOVETYPE_NONE )
		self:SetSolid( SOLID_NONE )
		self:DrawShadow( false ) 

		self.Vel = isvector( self.Vel ) and self.Vel or Vector(0,0,0)

		local fxPos = self:LocalToWorld( self:OBBCenter() )
	
		local effectdata = EffectData()
			effectdata:SetOrigin( fxPos )
		util.Effect( "lvs_explosion", effectdata )

		local gibs = {
			"models/XQM/wingpiece2.mdl",
			"models/XQM/wingpiece2.mdl",
			"models/XQM/jetwing2medium.mdl",
			"models/XQM/jetwing2medium.mdl",
			"models/props_phx/misc/propeller3x_small.mdl",
			"models/props_c17/TrapPropeller_Engine.mdl",
			"models/props_junk/Shoe001a.mdl",
			"models/XQM/jetbody2fuselage.mdl",
			"models/XQM/jettailpiece1medium.mdl",
			"models/XQM/pistontype1huge.mdl",
		}

		self.GibModels = istable( self.GibModels ) and self.GibModels or gibs

		self.Gibs = {}
		self.DieTime = CurTime() + 5

		local Speed = self.Vel:Length()

		for _, v in pairs( self.GibModels ) do
			local ent = ents.Create( "prop_physics" )

			if not IsValid( ent ) then continue end

			table.insert( self.Gibs, ent ) 

			ent:SetPos( self:GetPos() )
			ent:SetAngles( self:GetAngles() )
			ent:SetModel( v )
			ent:Spawn()
			ent:Activate()
			ent:SetRenderMode( RENDERMODE_TRANSALPHA )
			ent:SetCollisionGroup( COLLISION_GROUP_WORLD )

			local PhysObj = ent:GetPhysicsObject()
			if IsValid( PhysObj ) then
				if Speed <= 250 then
					local GibDir = Vector( math.Rand(-1,1), math.Rand(-1,1), 1.5 ):GetNormalized()
					PhysObj:SetVelocityInstantaneous( GibDir * math.random(800,1300)  )
				else
					PhysObj:SetVelocityInstantaneous( VectorRand() * math.max(300,self.Vel:Length() / 3) + self.Vel  )
				end

				PhysObj:AddAngleVelocity( VectorRand() * 500 ) 
				PhysObj:EnableDrag( false ) 

				local effectdata = EffectData()
					effectdata:SetOrigin( fxPos )
					effectdata:SetStart( PhysObj:GetMassCenter() )
					effectdata:SetEntity( ent )
					effectdata:SetScale( math.Rand(0.3,0.7) )
					effectdata:SetMagnitude( math.Rand(0.5,2.5) )
				util.Effect( "lvs_firetrail", effectdata )
			end

			timer.Simple( 4.5 + math.Rand(0,0.5), function()
				if not IsValid( ent ) then return end
				ent:SetRenderFX( kRenderFxFadeFast  ) 
			end)
		end
	end

	function ENT:Think()
		if self.DieTime < CurTime() then
			self:Remove()
		end

		self:NextThink( CurTime() + 1 )

		return true
	end

	function ENT:OnRemove()
		if istable( self.Gibs ) then
			for _, v in pairs( self.Gibs ) do
				if IsValid( v ) then
					v:Remove()
				end
			end
		end
	end
else
	function ENT:Draw()
	end
end
--addons/ssrp_lfs/lua/entities/lvs_fakehover_barc/cl_init.lua:
include("shared.lua")

function ENT:DamageFX()
	self.nextDFX = self.nextDFX or 0

	if self.nextDFX < CurTime() then
		self.nextDFX = CurTime() + 0.05

		local HP = self:GetHP()
		local MaxHP = self:GetMaxHP()

		if HP > MaxHP * 0.5 then return end

		local effectdata = EffectData()
		effectdata:SetOrigin( self:LocalToWorld( Vector(11,0,46) ) )
		effectdata:SetEntity( self )
		util.Effect( "lvs_engine_blacksmoke", effectdata )

		if HP <= MaxHP * 0.25 then
			local effectdata = EffectData()
				effectdata:SetOrigin( self:LocalToWorld( Vector(11,40,46) ) )
				effectdata:SetNormal( self:GetUp() )
				effectdata:SetMagnitude( math.Rand(0.5,1.5) )
				effectdata:SetEntity( self )
			util.Effect( "lvs_exhaust_fire", effectdata )

			local effectdata = EffectData()
				effectdata:SetOrigin( self:LocalToWorld( Vector(11,-40,46) ) )
				effectdata:SetNormal( self:GetUp() )
				effectdata:SetMagnitude( math.Rand(0.5,1.5) )
				effectdata:SetEntity( self )
			util.Effect( "lvs_exhaust_fire", effectdata )
		end
	end
end

function ENT:OnFrame()
	self:DamageFX()
end

--addons/ssrp_lfs/lua/entities/lvs_nushuttle/shared.lua:
ENT.Base = "lvs_base_starfighter"

ENT.PrintName = "NU-Class"
ENT.Author = "Xernes"
ENT.Information = "Heavy-Duty Starfighter of the Galactic Republic"
ENT.Category = "[LVS] - Star Wars"

ENT.Spawnable			= true
ENT.AdminSpawnable		= false

ENT.MDL = "models/swbf3/vehicles/nu_attackship.mdl"
ENT.GibModels = {
	"models/salza/arc170_gib1.mdl",
	"models/salza/arc170_gib2.mdl",
	"models/salza/arc170_gib3.mdl",
	"models/salza/arc170_gib4.mdl",
	"models/salza/arc170_gib5.mdl",
	"models/salza/arc170_gib6.mdl"
}

ENT.AITEAM = 1

ENT.MaxVelocity = 1500
ENT.MaxThrust = 500

ENT.ThrustVtol = 55
ENT.ThrustRateVtol = 3

ENT.TurnRatePitch = 1
ENT.TurnRateYaw = 1
ENT.TurnRateRoll = 1

ENT.ForceLinearMultiplier = 1

ENT.ForceAngleMultiplier = 1
ENT.ForceAngleDampingMultiplier = 1

ENT.MaxHealth = 1000
ENT.MaxShield = 300

ENT.UIPosition = Vector(-800, 0, 0)
ENT.UIAngle = Angle(25, 45, 0)

function ENT:OnSetupDataTables()
	self:AddDT( "Bool", "Hatch" )
	self:AddDT( "Bool", "Doors" )
	self:AddDT( "Bool", "Foils" )

	if SERVER then
		self:NetworkVarNotify( "Doors", self.OnDoorModeChanged )
		self:NetworkVarNotify( "Hatch", self.OnRearHatchChanged )
		self:NetworkVarNotify( "Foils", self.OnFoilsChanged )
	end
end

function ENT:InitWeapons()
	self.FirePositions = {
		Vector(220,223,140),
		Vector(220,-223,140),
		Vector(200,223,120),
		Vector(200,-223,120)
	}

	local weapon = {}
	weapon.Icon = Material("lvs/weapons/hmg.png")
	weapon.Ammo = 1000
	weapon.Delay = 0.15
	weapon.HeatRateUp = 0.5
	weapon.HeatRateDown = 1
	weapon.Attack = function( ent )
		ent.NumPrim = ent.NumPrim and ent.NumPrim + 1 or 1
		if ent.NumPrim > #ent.FirePositions then ent.NumPrim = 1 end

		ent:SetHeat( ent:GetHeat() + 0.5 )

		local pod = ent:GetDriverSeat()

		if not IsValid( pod ) then return end

		local startpos = pod:LocalToWorld( pod:OBBCenter() )
		local trace = util.TraceHull( {
			start = startpos,
			endpos = (startpos + ent:GetForward() * 50000),
			mins = Vector( -10, -10, -10 ),
			maxs = Vector( 10, 10, 10 ),
			filter = ent:GetCrosshairFilterEnts()
		} )

		local CurPos = ent.FirePositions[ent.NumPrim]

		local bullet = {}
		bullet.Src 	= ent:LocalToWorld( CurPos )
		bullet.Dir 	= (trace.HitPos - bullet.Src):GetNormalized()
		bullet.Spread 	= Vector( 0.025,  0.025, 0 )
		bullet.TracerName = "lvs_laser_green"
		bullet.Force	= 10
		bullet.HullSize 	= 30
		bullet.Damage	= 40
		bullet.SplashDamage = 60
		bullet.SplashDamageRadius = 250
		bullet.Velocity = 50000
		bullet.Attacker 	= ent:GetDriver()
		bullet.Callback = function(att, tr, dmginfo)
			local effectdata = EffectData()
			effectdata:SetStart( Vector(0,255,0) )
			effectdata:SetOrigin( tr.HitPos )
			util.Effect( "lvs_laser_explosion", effectdata )
		end
	
		ent:LVSFireBullet( bullet )

		local effectdata = EffectData()
		effectdata:SetStart( Vector(50,255,50) )
		effectdata:SetOrigin( bullet.Src )
		effectdata:SetNormal( ent:GetForward() )
		effectdata:SetEntity( ent )
		util.Effect( "lvs_muzzle_colorable", effectdata )

		ent:TakeAmmo()

		if CurPos.y > 0 then
			ent.SNDLeft:PlayOnce( 100 + math.cos( CurTime() + ent:EntIndex() * 1337 ) * 5 + math.Rand(-1,1), 1 )
		else
			ent.SNDRight:PlayOnce( 100 + math.cos( CurTime() + ent:EntIndex() * 1337 ) * 5 + math.Rand(-1,1), 1 )
		end
	end
	weapon.OnSelect = function( ent )
		ent:EmitSound("physics/metal/weapon_impact_soft3.wav")
		if ent.SetFoils then ent:SetFoils( true ) end
	end
	weapon.OnOverheat = function( ent ) ent:EmitSound("lvs/overheat.wav") end
	self:AddWeapon( weapon )
end

ENT.FlyByAdvance = 0.5
ENT.FlyBySound = "lvs/vehicles/arc170/flyby.wav"
ENT.DeathSound = "lvs/vehicles/generic_starfighter/crash.wav"

ENT.EngineSounds = {
	{
		sound = "vanilla/btlbywing/vanilla_nushuttle_hum.wav",
		Pitch = 80,
		PitchMin = 0,
		PitchMax = 255,
		PitchMul = 40,
		FadeIn = 0,
		FadeOut = 1,
		FadeSpeed = 1.5,
		UseDoppler = true,
	},
}
--addons/ssrp_lfs/lua/entities/lvs_repulsorlift_gunship/cl_init.lua:
include("shared.lua")
include( "sh_mainweapons.lua" )
include( "sh_ballturret_left.lua" )
include( "sh_ballturret_right.lua" )
include( "sh_wingturret.lua" )
include( "cl_drawing.lua" )
include( "cl_prediction.lua" )
include( "cl_lights.lua" )

function ENT:CalcViewOverride( ply, pos, angles, fov, pod )
	if pod == self:GetDriverSeat() then

		if pod:GetThirdPersonMode() then
			pos = pos + self:GetUp() * 100, angles, fov
		end

		return pos, angles, fov
	end

	if pod:GetThirdPersonMode() then
		pos = ply:GetShootPos() + pod:GetUp() * 40
	else
		pos = pos + pod:GetUp() * 40
	end

	return pos, angles, fov
end

function ENT:OnSpawn()
end

function ENT:OnFrame()
	self:AnimRearHatch()
	self:AnimLights()
	self:WingTurretProjector()
	self:BTLProjector()
	self:BTRProjector()
	self:PredictPoseParamaters()
end

function ENT:BTRProjector()
	local Fire = self:GetBTRFire()
	if Fire == self.OldFireBTR then return end

	self.OldFireBTR = Fire

	if Fire then
		local effectdata = EffectData()
		effectdata:SetEntity( self )
		util.Effect( "lvs_laat_right_projector", effectdata )
	end
end
	
function ENT:BTLProjector()
	local Fire = self:GetBTLFire()

	if Fire == self.OldFireBTL then return end

	self.OldFireBTL = Fire
	
	if Fire then
		local effectdata = EffectData()
		effectdata:SetEntity( self )
		util.Effect( "lvs_laat_left_projector", effectdata )
	end
end

function ENT:WingTurretProjector()
	local FireWingTurret = self:GetWingTurretFire()

	if FireWingTurret == self.OldWingTurretFire then return end

	self.OldWingTurretFire = FireWingTurret

	if FireWingTurret then
		local effectdata = EffectData()
		effectdata:SetEntity( self )
		util.Effect( "lvs_laat_wing_projector", effectdata )
	end
end

function ENT:AnimRearHatch()
	local Tval = self:GetRearHatch() and 32 or 0
	local Rate = 50 * RealFrameTime()
	
	self.smRH = self.smRH and self.smRH + math.Clamp(Tval - self.smRH,-Rate,Rate) or 0

	if not self.HatchID then
		self.HatchID = self:LookupBone( "hatch" ) 
	else
		self:ManipulateBoneAngles( self.HatchID, Angle(0,-self.smRH,0) )
	end
end

function ENT:OnStartBoost()
	self:EmitSound( "^lvs/vehicles/laat/boost_"..math.random(1,2)..".wav", 85 )
end

function ENT:OnStopBoost()
end

--addons/ssrp_lfs/lua/entities/lvs_starfighter_soundemitter.lua:
AddCSLuaFile()

ENT.Type            = "anim"

ENT.Spawnable       = false
ENT.AdminSpawnable  = false
ENT.DoNotDuplicate = true

ENT._LVS = true

function ENT:SetupDataTables()
	self:NetworkVar( "Entity",0, "Base" )
end

if SERVER then
	function ENT:Initialize()
		self:SetMoveType( MOVETYPE_NONE )
		self:SetSolid( SOLID_NONE )
		self:DrawShadow( false )
		debugoverlay.Cross( self:GetPos(), 40, 5, Color( 255, 255, 255 ) )
	end

	function ENT:Think()
		return false
	end

	function ENT:OnTakeDamage( dmginfo )
	end

	function ENT:UpdateTransmitState()
		return TRANSMIT_ALWAYS
	end

	return
end

ENT._oldEnActive = false
ENT._ActiveSounds = {}

function ENT:Initialize()
end

function ENT:StopSounds()
	for id, sound in pairs( self._ActiveSounds ) do
		if istable( sound ) then
			for _, snd in pairs( sound ) do
				if snd then
					snd:Stop()
				end
			end
		else
			sound:Stop()
		end
		self._ActiveSounds[ id ] = nil
	end
end

function ENT:HandleEngineSounds( vehicle )
	local ply = LocalPlayer()
	local pod = ply:GetVehicle()
	local Throttle = vehicle:GetThrottle() - vehicle:GetThrustStrenght() * vehicle:GetThrottle() * 0.5
	local Doppler = vehicle:CalcDoppler( ply )

	local DrivingMe = ply:lvsGetVehicle() == vehicle

	local FirstPerson = false
	if IsValid( pod ) then
		local ThirdPerson = pod:GetThirdPersonMode()

		if ThirdPerson ~= self._lvsoldTP then
			self._lvsoldTP = ThirdPerson
			VolumeSetNow = DrivingMe
		end

		FirstPerson = DrivingMe and not ThirdPerson
	end

	if DrivingMe ~= self._lvsoldDrivingMe then
		self._lvsoldDrivingMe = DrivingMe

		self:StopSounds()

		self._oldEnActive = nil

		return
	end

	local FT = RealFrameTime()

	self._smTHR = self._smTHR and self._smTHR + (Throttle - self._smTHR) * FT or 0

	for id, sound in pairs( self._ActiveSounds ) do
		if not sound then continue end

		local data = self.EngineSounds[ id ]

		local Pitch = math.Clamp( data.Pitch + self._smTHR * data.PitchMul, data.PitchMin, data.PitchMax )
		local PitchMul = data.UseDoppler and Doppler or 1

		local InActive = self._smTHR > data.FadeOut or self._smTHR < data.FadeIn
		if data.FadeOut >= 1 and self._smTHR > 1 then
			InActive = false
		end

		local engineVolume = LVS:GetVolume()
		local Volume = InActive and 0 or engineVolume

		if data.VolumeMin and data.VolumeMax and not InActive then
			Volume = math.max(self._smTHR - data.VolumeMin,0) / (1 - data.VolumeMin) * data.VolumeMax * engineVolume
		end

		if istable( sound ) then
			sound.ext:ChangePitch( math.Clamp( Pitch * PitchMul, 0, 255 ), 0.2 )
			if sound.int then sound.int:ChangePitch( math.Clamp( Pitch, 0, 255 ), 0.2 ) end

			local fadespeed = VolumeSetNow and 0 or data.FadeSpeed

			if FirstPerson then
				sound.ext:ChangeVolume( 0, 0 )

				if vehicle:HasActiveSoundEmitters() then
					Volume = Volume * 0.25
					fadespeed = fadespeed * 0.5
				end

				if sound.int then sound.int:ChangeVolume( Volume, fadespeed ) end
			else
				sound.ext:ChangeVolume( Volume, fadespeed )
				if sound.int then sound.int:ChangeVolume( 0, 0 ) end
			end
		else
			sound:ChangePitch( math.Clamp( Pitch * PitchMul, 0, 255 ), 0.2 )
			sound:ChangeVolume( Volume, data.FadeSpeed )
		end
	end
end

function ENT:OnEngineActiveChanged( Active )
	if not Active then self:StopSounds() end

	local ply = LocalPlayer()
	local DrivingMe = ply:lvsGetVehicle() == self:GetBase()

	for id, data in pairs( self.EngineSounds ) do
		if not isstring( data.sound ) then continue end

		self.EngineSounds[ id ].Pitch = data.Pitch or 80
		self.EngineSounds[ id ].PitchMin = data.PitchMin or 0
		self.EngineSounds[ id ].PitchMax = data.PitchMax or 255
		self.EngineSounds[ id ].PitchMul = data.PitchMul or 100
		self.EngineSounds[ id ].UseDoppler = data.UseDoppler ~= false
		self.EngineSounds[ id ].FadeIn = data.FadeIn or 0
		self.EngineSounds[ id ].FadeOut = data.FadeOut or 1
		self.EngineSounds[ id ].FadeSpeed = data.FadeSpeed or 1.5
		self.EngineSounds[ id ].SoundLevel = data.SoundLevel or 85

		if data.sound_int and data.sound_int ~= data.sound and DrivingMe then
			local sound = CreateSound( self, data.sound )
			sound:SetSoundLevel( data.SoundLevel )
			sound:PlayEx(0,100)

			if data.sound_int == "" then
				self._ActiveSounds[ id ] = {
					ext = sound,
					int = false,
				}
			else
				local sound_interior = CreateSound( self, data.sound_int )
				sound_interior:SetSoundLevel( data.SoundLevel )
				sound_interior:PlayEx(0,100)

				self._ActiveSounds[ id ] = {
					ext = sound,
					int = sound_interior,
				}
			end
		else
			local sound = CreateSound( self, data.sound )
			sound:SetSoundLevel( data.SoundLevel )
			sound:PlayEx(0,100)

			self._ActiveSounds[ id ] = sound
		end
	end
end

function ENT:Think()
	local vehicle = self:GetBase()

	if not IsValid( vehicle ) then return end

	if not self.EngineSounds then
		self.EngineSounds = vehicle.EngineSounds

		return
	end

	local EngineActive = vehicle:GetEngineActive()

	if self._oldEnActive ~= EngineActive then
		self._oldEnActive = EngineActive
		self:OnEngineActiveChanged( EngineActive )
	end

	if EngineActive then
		self:HandleEngineSounds( vehicle )
	else
		self._smTHR = 0
	end
end

function ENT:OnRemove()
	self:StopSounds()
end

function ENT:Draw()
end

function ENT:DrawTranslucent()
end

--addons/ssrp_lfs/lua/entities/lvs_starfighter_ywing/cl_init.lua:
include("shared.lua")

ENT.EngineGlow = Material( "sprites/light_glow02_add" )
ENT.EngineFXColor = Color( 255, 25, 25, 255)
ENT.EngineFxPos = {
	Vector(-530,205,50),
	Vector(-530,-205,50),
}

function ENT:CalcViewOverride( ply, pos, angles, fov, pod )
	if not pod:GetThirdPersonMode() then
		return pos, angles, fov
	end

	return self:LocalToWorld(Vector(-550, 0, 120)), angles, fov
end

function ENT:OnSpawn()
	for _, pos in ipairs(self.EngineFxPos) do
		self:RegisterTrail( pos, 2, 35, 2, 1000, 150 )
	end
end

function ENT:OnFrame()
	self:AnimAstromech()
end

function ENT:PostDraw()
end

function ENT:AnimAstromech()
	local T = CurTime()

	if (self.nextAstro or 0) < T then
		self.nextAstro = T + math.Rand(0.5,2)

		local HasShield = self:GetShield() > 0
		if self.OldShield == true and not HasShield then
			self:EmitSound( "lvs/vehicles/naboo_n1_starfighter/astromech/shieldsdown"..math.random(1,2)..".ogg",100 )
		else
			if math.random(0,4) == 3 then
				self:EmitSound( "lvs/vehicles/naboo_n1_starfighter/astromech/"..math.random(1,11)..".ogg", 70 )
			end
		end

		self.OldShield = HasShield
	end
end

function ENT:PostDrawTranslucent()
	if not self:GetEngineActive() then return end

	local Size = 200 + self:GetThrottle() * 55 + self:GetBoost() * 0.7

	render.SetMaterial( self.EngineGlow )

	for _, v in pairs( self.EngineFxPos ) do
		local pos = self:LocalToWorld( v )
		render.DrawSprite( pos, Size, Size, self.EngineFXColor )
	end
end

function ENT:OnStartBoost()
	self:EmitSound( "lvs/vehicles/vulturedroid/boost.wav", 85 )
end

function ENT:OnStopBoost()
	self:EmitSound( "lvs/vehicles/vulturedroid/brake.wav", 85 )
end

--addons/!lpakr_out/gamemodes/srp_base/entities/entities/media_base/cl_drawing.lua:
local a=col.red;local b=col.white;local c=col.black;local d=col.black;local e=col.white;local f=20;ENT.Interactive=true;ENT.InteractionName='Change Track'function ENT:DrawScreen(g,h,i,j)if IsValid(self.Media)&&cvar.GetValue('media_enable')then self.Media:draw(g,h,i,j)elseif cvar.GetValue('media_enable')==false then draw.Box(g,h,i,j,d)draw.SimpleText('Media players disabled.','DermaLarge',g+i*.5,h+j*.5,a,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)elseif self:IsPaused()then draw.Box(g,h,i,j,d)draw.SimpleText('Media paused.','DermaLarge',g+i*.5,h+j*.5,a,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)else draw.Box(g,h,i,j,d)self:DrawRules(g,h,i,j)end end;function ENT:DrawRules(g,h,i,j)draw.Box(g,h,i,j,d)draw.SimpleText('No Media','DermaLarge',g+i*.5,h+j*.30,b,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)draw.SimpleText('Follow the rules when playing media. Rule breaking will lead to serious punishment.','DermaLarge',g+i*.5,h+j*.35,b,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)draw.SimpleText('1. No sexual or sexually suggestive content','DermaLarge',g+i*.25,h+j*.45,b,TEXT_ALIGN_LEFT,TEXT_ALIGN_CENTER)draw.SimpleText('2. Must be related to game news, game media, the server, Star Wars or self made content.','DermaLarge',g+i*.25,h+j*.50,b,TEXT_ALIGN_LEFT,TEXT_ALIGN_CENTER)draw.SimpleText('3. Permission must be gained to play something that doesn\'t follow rule 2.','DermaLarge',g+i*.25,h+j*.55,b,TEXT_ALIGN_LEFT,TEXT_ALIGN_CENTER)draw.SimpleText('4. Staff can remove your media at any time if they feel you are not meeting these rules.','DermaLarge',g+i*.25,h+j*.60,b,TEXT_ALIGN_LEFT,TEXT_ALIGN_CENTER)end;function ENT:GetTickerText(k)local l=math.Remap(math.sin(CurTime()),-1,1,0,1)surface.SetFont('Trebuchet18')local m=surface.GetTextSize(k)local n=0;local o=m-160;local p=-o*l;if p<0 then k=k:sub(math.Round(math.abs(p)*0.20))end;local q=p+o;if q>0 then local r=string.len(k)-math.Round(math.abs(q)*0.2)n=n-surface.GetTextSize(k:sub(r))k=k:sub(1,r)end;return k,p+m+n,TEXT_ALIGN_RIGHT end;function ENT:Draw()self:DrawModel()local s=self:GetPos()local t=self:GetAngles()t:RotateAroundAxis(t:Up(),90)t:RotateAroundAxis(t:Forward(),90)s=s+t:Up()*8.56;s=s+t:Right()*-15.3;s=s+t:Forward()*-5.7;cam.Start3D2D(s,t,0.1)surface.SetDrawColor(0,0,0,255)surface.DrawRect(0,0,170,40)local u=self:GetTitle()if u&&u!=''then local v=self.TrackLength&&(CurTime()-self:GetStart())/self.TrackLength||0;draw.Box(0,30,math.Clamp(170*v,0,170),5,col.blue_light)draw.Outline(0,30,170,5,col.grey_light)local k,p,w=self:GetTickerText(u)draw.SimpleText(k,'Trebuchet18',15+p,8,b,w)end;cam.End3D2D()end;function ENT:DrawInteraction(x,y,z)surface.SetFont'ui_header.s'surface.SetDrawColor(255,255,255,255)surface.SetMaterial(x.OnPickup)surface.SetTextColor(255,255,255,255)local A=self.InteractionName;local B,C=surface.GetTextSize(A)B=B+f+4;local D,E=z.x,z.y;surface.DrawTexturedRect(D,E,f,f)surface.SetTextPos(D+f+2,E-2)surface.DrawText(A)end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/media_room.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/media_tv.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/media_tv.lua:
AddCSLuaFile()ENT.Base='media_base'ENT.PrintName='TV'ENT.Category='RP Media'ENT.Spawnable=info.Dev;ENT.MediaPlayer=true;ENT.Model='models/props/cs_office/TV_plasma.mdl'ENT.TimeLimit=25;local a=Vector(19,-85,108)local b=Angle(0,90,90)function ENT:CanUse(c)local d=srp.defcon.GetStatus(c:GetAllegianceID(),6)return d>=4||c:IsDA()end;function ENT:OnSpawnedByLoader(e)timer.Simple(2,function()if IsValid(self)then self:PhysicsInitBox(e.meta.physmin,e.meta.physmax)self:SetMoveType(MOVETYPE_NONE)end end)end;function ENT:Draw()self:DrawModel()cam.Start3D2D(self:LocalToWorld(a),self:LocalToWorldAngles(b),0.065)self:DrawScreen(0,0,2595,1540)cam.End3D2D()end
--addons/!lpakr_out/lua/entities/nbot_aquad_droid.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/nbot_sw_superbattle_cannon_droid_b2.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/nbot_sw_superbattle_droid_b2.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/npc_drg_acklay.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/npc_drg_adolescent_bull_rancor.lua:
if!DrGBase then return end;ENT.Base="npc_drg_rancor"ENT.CWRP=true;ENT.PrintName="Adolescent Bull Rancor"ENT.Category="[Valkyrie] Creature NPCs"ENT.Models={"models/swtor/npcs/rancor_a01.mdl"}ENT.Skins={7}ENT.ModelScale=1;ENT.CollisionBounds=Vector(100,100,100)ENT.BloodColor=BLOOD_COLOR_RED;ENT.RagdollOnDeath=false;ENT.SpawnHealth=1400;ENT.HealthRegen=5;ENT.MinPhysDamage=10;ENT.MinFallDamage=10;AddCSLuaFile()DrGBase.AddNextbot(ENT)
--addons/!lpakr_out/lua/entities/npc_drg_nexu.lua:
if!DrGBase then return end;ENT.Base="drgbase_nextbot"ENT.CWRP=true;ENT.PrintName="Nexu Cat"ENT.Category="[Valkyrie] Creature NPCs"ENT.Models={"models/swtor/npcs/nexu_a01.mdl"}ENT.Skins={0}ENT.ModelScale=1;ENT.CollisionBounds=Vector(32,32,43)ENT.BloodColor=BLOOD_COLOR_RED;ENT.RagdollOnDeath=false;ENT.SpawnHealth=500;ENT.HealthRegen=0;ENT.MinPhysDamage=20;ENT.MinFallDamage=5;ENT.AttackDamage=25;ENT.OnSpawnSounds={"fallenlogic/nexu/nexu_growl.mp3"}ENT.OnIdleSounds={}ENT.IdleSoundDelay=2;ENT.ClientIdleSounds=false;ENT.OnDamageSounds={}ENT.DamageSoundDelay=0.25;ENT.OnDeathSounds={"fallenlogic/nexu/nexu_death.mp3"}ENT.OnDownedSounds={}ENT.Footsteps={}ENT.Omniscient=false;ENT.SpotDuration=30;ENT.RangeAttackRange=65;ENT.MeleeAttackRange=65;ENT.ReachEnemyRange=65;ENT.AvoidEnemyRange=0;ENT.FollowPlayers=true;ENT.Factions={FACTION_ANTLIONS}ENT.Frightening=true;ENT.AllyDamageTolerance=0.33;ENT.AfraidDamageTolerance=0.33;ENT.NeutralDamageTolerance=0.33;ENT.Acceleration=800;ENT.Deceleration=800;ENT.JumpHeight=50;ENT.StepHeight=10;ENT.MaxYawRate=250;ENT.DeathDropHeight=200;ENT.WalkAnimation=ACT_WALK;ENT.WalkAnimRate=1;ENT.RunAnimation=ACT_RUN;ENT.RunAnimRate=1;ENT.IdleAnimation=ACT_IDLE;ENT.IdleAnimRate=1;ENT.JumpAnimation=ACT_JUMP;ENT.JumpAnimRate=1;ENT.UseWalkframes=false;ENT.WalkSpeed=35;ENT.RunSpeed=350;ENT.ClimbLedges=false;ENT.ClimbLedgesMaxHeight=math.huge;ENT.ClimbLedgesMinHeight=0;ENT.LedgeDetectionDistance=20;ENT.ClimbProps=false;ENT.ClimbLadders=false;ENT.ClimbLaddersUp=false;ENT.LaddersUpDistance=20;ENT.ClimbLaddersUpMaxHeight=math.huge;ENT.ClimbLaddersUpMinHeight=0;ENT.ClimbLaddersDown=false;ENT.LaddersDownDistance=20;ENT.ClimbLaddersDownMaxHeight=math.huge;ENT.ClimbLaddersDownMinHeight=0;ENT.ClimbSpeed=80;ENT.ClimbUpAnimation=ACT_CLIMB_UP;ENT.ClimbDownAnimation=ACT_CLIMB_DOWN;ENT.ClimbAnimRate=1;ENT.ClimbOffset=Vector(-12,0,0)ENT.EyeBone="Camera"ENT.EyeOffset=Vector(0,0,0)ENT.EyeAngle=Angle(0,0,0)ENT.SightFOV=150;ENT.SightRange=15000;ENT.MinLuminosity=0;ENT.MaxLuminosity=1;ENT.HearingCoefficient=1;ENT.UseWeapons=false;ENT.Weapons={}ENT.WeaponAccuracy=1;ENT.WeaponAttachment=""ENT.DropWeaponOnDeath=false;ENT.AcceptPlayerWeapons=false;ENT.PossessionEnabled=true;ENT.PossessionCrosshair=true;ENT.PossessionViews={{offset=Vector(-200,0,150),distance=0},{offset=Vector(45,0,0),distance=-325,eyepos=true}}ENT.PossessionBinds={[IN_ATTACK]={{coroutine=true,onkeydown=function(self)self:EmitSound("fallenlogic/nexu/nexu_screech.mp3")self:PlaySequenceAndMove("default_attack",1,self.PossessionFaceForward)local a=300*300;local b=self:GetPos()for c,d in ipairs(ents.FindByClass("*"))do local e=d:GetPos()if b:DistToSqr(e)<a then if IsValid(d)then d:TakeDamage(25,self,self)end end end;self:PlaySequenceAndMove("default_attack2",1,self.PossessionFaceForward)end}}}if SERVER then else function ENT:CustomInitialize()end;function ENT:CustomThink()end;function ENT:CustomDraw()end end;AddCSLuaFile()DrGBase.AddNextbot(ENT)
--addons/!lpakr_out/lua/entities/npc_drg_rancor_mount.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/npc_drg_rancor_mount.lua:
if!DrGBase then return end;ENT.Base="drgbase_nextbot"ENT.CWRP=true;ENT.PrintName="Rancor Mount"ENT.Category="[Valkyrie] Creature NPCs"ENT.Models={"models/swtor/npcs/rancor_a01.mdl"}ENT.Skins={0}ENT.ModelScale=1;ENT.CollisionBounds=Vector(100,100,100)ENT.BloodColor=BLOOD_COLOR_RED;ENT.RagdollOnDeath=false;ENT.SpawnHealth=1000;ENT.HealthRegen=5;ENT.MinPhysDamage=10;ENT.MinFallDamage=10;ENT.OnSpawnSounds={}ENT.OnIdleSounds={"fallenlogic/rancor/breath_loop.wav"}ENT.IdleSoundDelay=2;ENT.ClientIdleSounds=false;ENT.OnDamageSounds={}ENT.DamageSoundDelay=0.25;ENT.OnDeathSounds={"fallenlogic/rancor/death1.mp3"}ENT.OnDownedSounds={}ENT.Footsteps={}ENT.Omniscient=false;ENT.SpotDuration=30;ENT.RangeAttackRange=0;ENT.MeleeAttackRange=80;ENT.ReachEnemyRange=50;ENT.AvoidEnemyRange=0;ENT.Factions={FACTION_ANTLIONS}ENT.Frightening=true;ENT.AllyDamageTolerance=1.00;ENT.AfraidDamageTolerance=1.00;ENT.NeutralDamageTolerance=1.00;ENT.Acceleration=1000;ENT.Deceleration=1000;ENT.JumpHeight=50;ENT.StepHeight=20;ENT.MaxYawRate=250;ENT.DeathDropHeight=200;ENT.WalkAnimation=ACT_WALK;ENT.WalkAnimRate=1;ENT.RunAnimation=ACT_WALK;ENT.RunAnimRate=1;ENT.IdleAnimation=ACT_IDLE;ENT.IdleAnimRate=1;ENT.JumpAnimation=ACT_IDLE;ENT.JumpAnimRate=1;ENT.UseWalkframes=false;ENT.WalkSpeed=100;ENT.RunSpeed=200;ENT.ClimbLedges=false;ENT.ClimbLedgesMaxHeight=math.huge;ENT.ClimbLedgesMinHeight=0;ENT.LedgeDetectionDistance=20;ENT.ClimbProps=false;ENT.ClimbLadders=false;ENT.ClimbLaddersUp=false;ENT.LaddersUpDistance=20;ENT.ClimbLaddersUpMaxHeight=math.huge;ENT.ClimbLaddersUpMinHeight=0;ENT.ClimbLaddersDown=false;ENT.LaddersDownDistance=20;ENT.ClimbLaddersDownMaxHeight=math.huge;ENT.ClimbLaddersDownMinHeight=0;ENT.ClimbSpeed=60;ENT.ClimbUpAnimation=ACT_CLIMB_UP;ENT.ClimbDownAnimation=ACT_CLIMB_DOWN;ENT.ClimbAnimRate=1;ENT.ClimbOffset=Vector(0,0,0)ENT.EyeBone="R_Eyelid"ENT.EyeOffset=Vector(0,0,0)ENT.EyeAngle=Angle(0,0,0)ENT.SightFOV=150;ENT.SightRange=15000;ENT.MinLuminosity=0;ENT.MaxLuminosity=1;ENT.HearingCoefficient=1;ENT.UseWeapons=false;ENT.Weapons={}ENT.WeaponAccuracy=1;ENT.WeaponAttachment=""ENT.DropWeaponOnDeath=false;ENT.AcceptPlayerWeapons=false;ENT.PossessionEnabled=true;ENT.PossessionCrosshair=true;ENT.PossessionViews={{offset=Vector(-80,0,256),distance=40},{offset=Vector(45,0,0),distance=-325,eyepos=true}}ENT.PossessionBinds={[IN_ATTACK]={{coroutine=true,onkeydown=function(self)self:EmitSound("fallenlogic/rancor/slam.mp3")self:PlayActivityAndMove(ACT_MELEE_ATTACK1,1,self.PossessionFaceForward)local a=400*400;local b=self:GetPos()for c,d in ipairs(ents.FindByClass("*"))do local e=d:GetPos()if b:DistToSqr(e)<a then if IsValid(d)then d:TakeDamage(25,self,self)end end end end}}}if SERVER then else function ENT:CustomInitialize()end;function ENT:CustomThink()end;function ENT:CustomDraw()end end;AddCSLuaFile()DrGBase.AddNextbot(ENT)
--addons/!lpakr_out/lua/entities/npc_drg_tyrant_rancor.lua:
if!DrGBase then return end;ENT.Base="npc_drg_rancor"ENT.CWRP=true;ENT.PrintName="Tyrant Rancor"ENT.Category="[Valkyrie] Creature NPCs"ENT.Models={"models/swtor/npcs/rancor_a01.mdl"}ENT.Skins={8}ENT.ModelScale=1.2;ENT.CollisionBounds=Vector(120,120,120)ENT.BloodColor=BLOOD_COLOR_RED;ENT.RagdollOnDeath=false;ENT.SpawnHealth=1000;ENT.HealthRegen=5;ENT.MinPhysDamage=10;ENT.MinFallDamage=10;AddCSLuaFile()DrGBase.AddNextbot(ENT)
--addons/!lpakr_out/lua/entities/npc_drg_womprat.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/pfx1_02.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Molotov Fire 1"ENT.Category="PPE: Fire & Smoke"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[1]molotov_ground"
--addons/!lpakr_out/lua/entities/pfx1_03~.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/pfx1_05.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Large Ground Burst"ENT.Category="PPE: Fire & Smoke"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[1]groundflame"
--addons/!lpakr_out/lua/entities/pfx1_08__l.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Large Fire [Red]"ENT.Category="PPE: Fire & Smoke"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[1]_large_campfire_red"
--addons/!lpakr_out/lua/entities/pfx1_08_~a.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Fire [Purple]"ENT.Category="PPE: Fire & Smoke"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[1]_campfire_purple"
--addons/!lpakr_out/lua/entities/pfx1_08~.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Fire [Blue]"ENT.Category="PPE: Fire & Smoke"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[1]_campfire_blue"
--addons/!lpakr_out/lua/entities/pfx1_08~_l.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Large Fire [Blue]"ENT.Category="PPE: Fire & Smoke"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[1]_large_campfire_blue"
--addons/!lpakr_out/lua/entities/pfx1_09.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/pfx1_0a.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Cigarette/Pipe smoke"ENT.Category="PPE: Fire & Smoke"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[1]cig_smoke*"
--addons/!lpakr_out/lua/entities/pfx2_04.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Swirl 1"ENT.Category="PPE: Other"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[2]swirl_1"
--addons/!lpakr_out/lua/entities/pfx2_05.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="G-Man Starfield"ENT.Category="PPE: Other"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[2]gman_lines"
--addons/!lpakr_out/lua/entities/pfx2_06.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/pfx3_01.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/pfx4_00_s~.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Smaller Basic Jet [Smokeless]"ENT.Category="PPE: Tech"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[4]jet_f_s*"
--addons/!lpakr_out/lua/entities/pfx5_01.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/pfx5_03.lua:
AddCSLuaFile()ENT.Type="anim"ENT.Base="pfx_base"ENT.PrintName="Simple Galaxy Model"ENT.Category="PPE: Cosmic"ENT.Spawnable=true;ENT.AdminOnly=false;ENT.pfxname="[5]simple_galaxy"
--addons/!lpakr_out/lua/entities/pfx7_03.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/pfx7_04.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/pfx8_06.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/proj_drg_flashbang.lua:
if!DrGBase then return end;ENT.Base="proj_drg_grenade"ENT.PrintName="Flash Grenade"ENT.Category='GM Hostile Nextbots'ENT.Models={"models/weapons/w_eq_flashbang.mdl"}ENT.Spawnable=true;ENT.Bounce=1;ENT.OnBounceSounds={"weapons/flashbang/grenade_hit1.wav"}if SERVER then else net.Receive("DrGBaseFlashGrenade",function()local a=DynamicLight(net.ReadInt(8))a.pos=net.ReadVector()a.dieTime=CurTime()+0.5;a.decay=2000;a.size=net.ReadFloat()a.brightness=10;a.r=1;a.g=1;a.b=1 end)end
--addons/!lpakr_out/lua/entities/proj_drg_smoke_grenade.lua:
if!DrGBase then return end;ENT.Base="proj_drg_grenade"ENT.PrintName="Smoke Grenade"ENT.Category='GM Hostile Nextbots'ENT.Models={"models/weapons/w_eq_smokegrenade.mdl"}ENT.Spawnable=true;ENT.Bounce=1;ENT.OnBounceSounds={"weapons/flashbang/grenade_hit1.wav"}
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_ammobox.lua:
AddCSLuaFile()ENT.Type='anim'ENT.Base='base_anim'ENT.PrintName='Ammo Box'ENT.Category='SUP'ENT.Spawnable=true;ENT.DoNotDuplicate=true;ENT.Interactive=true;ENT.Model=Model('models/props/campcrate2.mdl')ENT.AmmoTable={{500,'ammo_blaster'},{50,'ROCKET'},{50,'ammo_gl'}}ENT.UIPosition=Vector(6,-2,3)ENT.UIAngle=Angle(-45,90,90)ENT.UIFont='ui_starwars.xxl'function ENT:Initialize()self:SetModel(self.Model)end;function ENT:Use(a)if self.NextUse&&self.NextUse>CurTime()then return end;if!a:IsEventCharacter()then return end;for b,c in pairs(self.AmmoTable)do a:GiveAmmo(c[1],c[2])end;a:EmitSound'items/ammocrate_close.wav'self.NextUse=CurTime()+4 end;function ENT:Draw(d)self:DrawModel(d)cam.Start3D2D(self:LocalToWorld(self.UIPosition),self:LocalToWorldAngles(self.UIAngle),.05)draw.SimpleText(self.PrintName,self.UIFont,0,0,col.blue,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)cam.End3D2D()end;local e='Collect Ammo'local f=20;function ENT:DrawInteraction(g,h,i)surface.SetFont('ui_header.s')surface.SetDrawColor(255,255,255,255)surface.SetMaterial(g.OnPickup)surface.SetTextColor(255,255,255,255)local j,k=surface.GetTextSize(e)j=j+f+4;local l,m=i.x,i.y;surface.DrawTexturedRect(l,m,f,f)surface.SetTextPos(l+f+2,m)surface.DrawText(e)end
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_armoury.lua:
AddCSLuaFile()local a=Color(0,0,0,200)ENT.Type='anim'ENT.Base='base_srp'ENT.Spawnable=info.Dev;ENT.Category='SUP'ENT.PrintName='Armoury Point'ENT.RenderGroup=RENDERGROUP_OPAQUE;ENT.Model=Model'models/props/supweaponlocker.mdl'ENT.Spawnable=true;ENT.Interactive=true;ENT.DoNotDuplicate=true;ENT.NetworkPlayerUse=true;ENT.UIPosition=Vector(8,0,102)ENT.UIAngle=Angle(0,90,90)ENT.UIScale=.15;function ENT:Initialize()self:SetModel(self.Model)end;function ENT:ClientPlayerUse()if!LocalPlayer():IsEventCharacter()then srp.loadouts.Open()end end;function ENT:Draw()self:DrawModel()cam.Start3D2D(self:LocalToWorld(self.UIPosition),self:LocalToWorldAngles(self.UIAngle),self.UIScale)draw.Box(-330,-24,660,100,a)draw.DrawText(self.PrintName,'ui_header.xl',0,-8,col.white,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)cam.End3D2D()end;local b='Open Armoury'local c=20;function ENT:DrawInteraction(d,e,f)surface.SetFont'ui_header.s'surface.SetDrawColor(255,255,255,255)surface.SetMaterial(d.OnPickup)surface.SetTextColor(255,255,255,255)local g,h=surface.GetTextSize(b)g=g+c+4;local i,j=f.x,f.y;surface.DrawTexturedRect(i,j,c,c)surface.SetTextPos(i+c+2,j-2)surface.DrawText(b)end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_artilleryshell_smoke.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_aura_armour.lua:
AddCSLuaFile()ENT.Base='rp_aura'ENT.PrintName='Armour Aura'ENT.Category='SUP'ENT.Spawnable=info.Dev;ENT.DoNotDuplicate=true;ENT.buffid='armor'function ENT:CanBuff(a)return a:IsPlayer()&&(!IsValid(a.buffedby)||a.buffedby:GetClass()!=self:GetClass())&&a!=self:GetParent()end;function ENT:Think()if!self.buffed then return end;for a,b in pairs(self.buffed)do if IsValid(a)&&a:GetAllegianceID()==self:GetParent():GetAllegianceID()&&(!a.NextArmourBuff||a.NextArmourBuff<CurTime())&&!a.InEvent then local c=a:GetMaxArmor()local d=a:Armor()if d>c then continue end;a:SetArmor(math.min(d+20,c))a.NextArmourBuff=CurTime()+29 end end;self:NextThink(CurTime()+30)return true end
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_aura_explosion.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_aura_health.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_aura_rc.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/rp_casinotable/shared.lua:
ENT.Type='anim'ENT.Spawnable=info.Dev;ENT.Author='Scott (STEAM_0:1:26675200)'ENT.PrintName='Blackjack Table'ENT.Description='We doing it doing it doing it doing it.'ENT.GameID='Blackjack'ENT.CasnoTable=true;ENT.DoNotDuplicate=true;ENT.Model=Model'models/mark2580/gtav/dcasino/games/d_casino_blackjack_pocker.mdl'ENT.SeatModel=Model'models/nova/chair_office01.mdl'ENT.HouseView={pos=Vector(-30,0,55),ang=Angle(0,90,90),scale=.1,card={pos=Vector(-9.252430,-5.144586,38.075195),dir=Vector(-0.009880,0.999951,0.000000)}}ENT.SeatTransforms={{pos=Vector(.0151383,-43.251945,0),ang=Angle(0,23,0),card={pos=Vector(-6.890213,-27.661484,38.075195),dir=Vector(0.911827,0.410575,0.000000)},cam={pos=Vector(),ang=Angle()},ui={pos=Vector(-4.299,-33.914,39.139),dir=Vector(-0.370,0.922,-0.110)}},{pos=Vector(23.938398,-17.661995,0),ang=Angle(0,68,0),card={pos=Vector(8.726961,-11.227220,38.075195),dir=Vector(0.329922,0.944008,0.000000)},cam={pos=Vector(),ang=Angle()},ui={pos=Vector(15.302,-14.003,39.085),dir=Vector(-0.9273,0.359,-0.102)}},{pos=Vector(23.938398,17.661995,0),ang=Angle(0,110,0),card={pos=Vector(8.895752,11.300444,38.075195),dir=Vector(-0.375824,0.926691,0.000000)},cam={pos=Vector(),ang=Angle()},ui={pos=Vector(14.752,13.631,39.187),dir=Vector(-0.917,-0.373,-0.122)}},{pos=Vector(.0151383,43.251945,0),ang=Angle(0,155,0),card={pos=Vector(-8.052871,27.667542,38.075195),dir=Vector(-0.937051,0.349192,0.000000)},cam={pos=Vector(),ang=Angle()},ui={pos=Vector(-4.214,33.9227,39.1413),dir=Vector(-0.409,-0.905,-0.115)}}}local a={[casino.STATUS_PLAYING]='OnRoundStarted',[casino.STATUS_ENDED]='OnRoundEnded',[casino.PLAYER_SYNC]='OnPlayerSync',[casino.PLAYER_DESYNC]='OnPlayerDesync',[casino.PLAYER_READY]='OnPlayerReady',[casino.PLAYER_UNREADY]='OnPlayerUnReady',[casino.PLAYER_WON]='OnPlayerWon',[casino.PLAYER_LOST]='OnPlayerLost',[casino.PLAYER_TURN]='OnPlayerTurn',[casino.PLAYER_CARDS]='OnCardsAdded',[casino.PLAYER_WAGER]='OnWagerUpdated'}function ENT:Call(b,c,...)local d=a[c]if!d then return end;local e=b[d]if e then e(b,...)end;if b.OnUpdateStatus then b:OnUpdateStatus(c,...)end end;function ENT:SetupDataTables()self:NetworkVar('String',0,'Status')self:NetworkVar('String',1,'Description')self:NetworkVar('Float',0,'Timeout')self:NetworkVar('Entity',0,'owning_ent')end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_container/cl_init.lua:
include'shared.lua'local a=Color(255,255,255)local b=Color(0,0,0,220)function ENT:DrawTranslucent()self:DrawModel()if LocalPlayer():GetPos():DistToSqr(self:GetPos())>125000 then return end;if!self.item then self.item=srp.items.data[self:GetItemID()]end;if!self.item then return end;local c=self:GetPos()+(self.item.gui_position||Vector(0,0,30))local d=(LocalPlayer():EyePos()-self:GetPos()):Angle()d.p=0;d.r=90;d.y=d.y+90;local e=self.item.gui_color||a;local f=self.item.gui_bordercolor||col.blue;local g=self.item.name&&self.item.name:upper()surface.SetFont'ui_header.r'local h,i=surface.GetTextSize(g)cam.Start3D2D(c,d,.1)draw.Box((-h-16)/2,0,h+16,i+16,b)draw.Box((-h-16)/2,i+16,h+16,8,f)surface.SetDrawColor(f)surface.DrawOutlinedRect((-h-16)/2,0,h+16,i+16)surface.SetTextColor(e)surface.SetTextPos(-h/2,8)surface.DrawText(g)cam.End3D2D()end;local j=20;function ENT:DrawInteraction(k)if!self.item||!self.item.interaction then return end;local l=-2;for m,n in pairs(self.item.interaction)do if k[m]then surface.SetFont('ui_label_inventory.itemheader')surface.SetDrawColor(255,255,255,255)surface.SetMaterial(k[m])surface.SetTextColor(255,255,255,255)local h,i=surface.GetTextSize(n.label)h=h+j+4;local o,p=(ScrW()-j)/2,(ScrH()-(j+20)*l)/2;surface.DrawTexturedRect(o,p,j,j)surface.SetTextPos(o+j+2,p)surface.DrawText(n.label)l=l+1 end end end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_crafting/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_eventplatform/shared.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_floatingcandycane/shared.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_floatingpumpkin/shared.lua:
ENT.PrintName='Ghost Orb'ENT.Author='Scott'ENT.Contact='STEAM_0:1:2665200'ENT.Purpose='Floating sad pumpkin ghosti'ENT.Instructions=''ENT.Type='anim'ENT.Base='base_anim'ENT.Category='SUP'ENT.Spawnable=info.Dev;ENT.RenderGroup=RENDERGROUP_BOTH;ENT.DoNotDuplicate=true;ENT.DontFreeze=true;ENT.Paths={{Speed=35,Height=5,Nodes={Vector(8450.558594,-2416.220947,560.031250),Vector(8445.937500,-783.378601,560.031250),Vector(7931.189453,-2421.164063,560.031250),Vector(7930.321777,-783.897461,560.031250),Vector(7438.770996,-2415.021240,560.031250),Vector(6930.454102,-2412.843018,560.031250),Vector(7417.473633,-790.885864,560.031250),Vector(6507.758789,-2417.607422,560.031250),Vector(6498.732422,-782.711853,560.031250),Vector(6884.222656,-785.270508,560.031250),Vector(7422.284668,-2423.225586,560.031250),Vector(7922.392090,-2415.583984,560.031250),Vector(7929.134277,-794.903870,560.031250),Vector(8439.054688,-783.946167,560.031250),Vector(8683.995117,-1594.725098,523.031189),Vector(8450.558594,-2416.220947,560.031250),Vector(8450.558594,-2416.220947,560.031250)}},{Speed=150,Height=80,Nodes={Vector(1817.040283,772.459595,1248.910400),Vector(1392.391602,787.754578,1222.696045),Vector(1020.586426,978.001709,1153.943237),Vector(855.013062,1437.153320,1026.359009),Vector(1095.949219,1755.124390,956.639160),Vector(1479.746216,1871.116211,946.713013),Vector(2007.195679,2121.226807,909.581909),Vector(2381.833008,2156.635254,920.044434),Vector(2437.633057,1604.123535,1066.053833),Vector(2016.640625,939.006104,1216.239258)}},{Speed=100,Height=80,Nodes={Vector(5765.641113,233.657959,-239.968765),Vector(5779.355469,331.744171,-239.968735),Vector(5741.265625,424.738251,-239.968750),Vector(5768.128906,537.850098,-239.968765),Vector(5869.309082,585.161499,-239.968750),Vector(5912.270996,478.148376,-239.968750),Vector(5869.711914,372.237640,-239.968765),Vector(5796.663086,291.580170,-239.968750),Vector(5745.035156,219.888489,-239.968750),Vector(5735.880859,129.374878,-239.968735),Vector(5736.792969,62.850082,-239.968750),Vector(5746.932129,9.124756,-239.968750),Vector(5752.681152,-69.886818,-239.968750),Vector(5762.522949,-176.292084,-239.968735),Vector(5782.792480,-286.425537,-239.968750),Vector(5825.440430,-460.139923,-239.968750),Vector(5950.866699,-548.338806,-239.968750),Vector(6022.085449,-543.760071,-239.968765),Vector(6201.611816,-418.860840,-239.968765),Vector(6230.558105,-284.842743,-239.968750),Vector(6127.749023,-213.268707,-239.968735),Vector(6040.683105,-195.840332,-239.968750),Vector(5989.080566,-132.216309,-239.968765),Vector(6061.856934,-68.474480,-239.968750),Vector(6145.262695,-46.194260,-239.968750),Vector(6146.920410,8.510185,-239.968750),Vector(6126.640137,115.045441,-239.968750),Vector(6126.312012,188.011047,-239.968750),Vector(6231.647461,239.562012,-239.968750),Vector(6335.907227,275.200562,-239.968750),Vector(6257.077637,309.110046,-239.968735),Vector(6131.862793,254.587097,-239.968750),Vector(6074.358887,173.310272,-239.968750),Vector(6020.907715,115.958466,-239.968735),Vector(6010.695801,171.260284,-239.968750),Vector(6062.359375,235.722412,-239.968750),Vector(6124.729492,321.842896,-239.968750),Vector(6174.680664,403.229004,-239.968750),Vector(6233.787109,516.062012,-239.968750),Vector(6242.430176,634.885986,-239.968750),Vector(6132.313477,534.724304,-239.968750),Vector(6067.402832,452.175415,-239.968750),Vector(6003.774902,401.785797,-239.968750),Vector(5946.209473,419.992676,-239.968750),Vector(5930.121582,487.587830,-239.968750),Vector(5896.385254,590.261536,-239.968750),Vector(5850.865234,732.083496,-239.968750),Vector(5827.703613,845.254761,-239.968750),Vector(5791.061035,848.327820,-239.968750),Vector(5768.807129,786.690674,-239.968750),Vector(5779.914063,692.198364,-239.968750),Vector(5805.616699,542.619690,-239.968750),Vector(5799.812012,445.297058,-239.968750),Vector(5787.814941,372.526489,-239.968750),Vector(5763.751953,283.762177,-239.968750)}},{Speed=100,Height=80,Nodes={Vector(5824.693848,-1213.831665,-239.968750),Vector(5762.332520,-1221.840210,-239.968750),Vector(5691.408691,-1216.211426,-239.968750),Vector(5688.255859,-1120.429443,-239.968750),Vector(5757.148438,-1067.707886,-239.968750),Vector(5800.181641,-986.945190,-239.968750),Vector(5764.321777,-903.758789,-239.968750),Vector(5716.482422,-847.221375,-239.968750),Vector(5724.338867,-752.401062,-239.968750),Vector(5792.104980,-723.240479,-239.968750),Vector(5860.714355,-700.582458,-239.968750),Vector(5889.728027,-628.300659,-239.968750),Vector(5861.961914,-566.176636,-239.968750),Vector(5887.681152,-436.363251,-239.968735),Vector(5982.045410,-368.336853,-239.968750),Vector(6089.233398,-366.288086,-239.968735),Vector(6086.483398,-429.771667,-239.968750),Vector(5961.298340,-590.237915,-239.968750),Vector(5856.982422,-709.617676,-239.968750),Vector(5805.736816,-805.985840,-239.968750),Vector(5810.214844,-894.526428,-239.968765),Vector(5806.812500,-977.597107,-239.968750),Vector(5759.238281,-1067.317871,-239.968750)}},{Speed=100,Height=80,Nodes={Vector(5363.772461,-143.807281,-239.968750),Vector(5504.593262,-141.678772,-239.968750),Vector(5608.290527,-112.035500,-239.968750),Vector(5560.526367,-16.953133,-226.565796),Vector(5414.479980,28.236263,-199.182190),Vector(5170.865234,-41.302158,-153.504669),Vector(4983.257813,30.630524,-118.328339),Vector(4732.279785,-23.811625,-95.968750),Vector(3989.325195,-26.340141,24.566853),Vector(3727.286377,-9.005908,32.031250),Vector(3591.498291,-105.192398,32.031250),Vector(3580.392578,-353.492004,32.031250),Vector(3562.814697,-756.089233,32.031250),Vector(3503.208008,-1169.064575,32.031250),Vector(3241.986816,-1478.629395,32.031250),Vector(2311.895752,-1107.227295,32.031250),Vector(1636.902344,-1193.313843,32.031250),Vector(940.763672,-1152.608032,32.031250),Vector(1192.942993,1246.655029,32.031219),Vector(2587.743164,1279.463867,32.031250),Vector(3142.521240,959.968689,74.893341),Vector(3585.924805,574.964600,32.031250),Vector(3610.100342,54.058998,32.031258),Vector(3969.250977,6.227271,28.581734),Vector(4311.828125,7.517088,-39.933731),Vector(4783.128418,7.773572,-95.968750),Vector(5311.534668,122.080750,-239.968750),Vector(5649.557617,100.436302,-239.968735),Vector(5716.021973,-33.232353,-239.968750)}},{Speed=100,Height=80,Nodes={Vector(-499.909576,-467.662872,32.031250),Vector(-672.933472,-649.308899,32.031250),Vector(-956.951172,-620.104126,32.031250),Vector(-1118.620361,-463.016052,32.031250),Vector(-1685.427246,-308.619263,32.031250),Vector(-1870.468506,-622.843079,32.031250),Vector(-2170.593262,-435.939972,32.031250),Vector(-2645.349854,-401.786560,32.031250),Vector(-2953.255127,-537.606873,36.031250),Vector(-3291.599609,-665.233582,32.031250),Vector(-3597.321289,-634.923340,32.031250),Vector(-4306.875488,-501.499756,32.031235),Vector(-4684.609863,-266.200623,32.031250),Vector(-4833.515625,44.682892,32.031235),Vector(-4663.383301,362.141693,32.031235),Vector(-4399.848145,641.062744,32.031250),Vector(-4056.129150,529.022583,36.031265),Vector(-3837.858887,290.612213,32.031250),Vector(-3586.329590,342.752899,32.031235),Vector(-3260.605225,400.713043,32.031265),Vector(-2914.509277,416.231964,32.031250),Vector(-2541.591309,392.019318,32.031250),Vector(-1918.604248,400.038422,32.031235),Vector(-1225.736328,357.758514,32.031235),Vector(-2008.752808,-94.644440,32.031265),Vector(-2891.796631,-157.818649,32.031250),Vector(-3267.783691,-20.226898,32.031250),Vector(-3606.907959,138.278595,32.031250),Vector(-3973.916992,166.893402,32.031250),Vector(-4232.481934,43.024719,32.031235),Vector(-4318.443359,-244.140579,32.031250),Vector(-4061.063721,-292.227051,32.031250),Vector(-3769.445068,-287.457581,32.031250),Vector(-3363.605469,-325.834991,32.031250),Vector(-2722.053711,-345.264252,32.031250),Vector(-1598.258545,-272.064545,32.031250),Vector(-819.018677,-143.035629,32.031250),Vector(-128.116699,-247.228409,32.031250),Vector(-80.680756,-841.367249,32.031250),Vector(-388.258118,-966.369568,32.031250)}},{Speed=100,Height=80,Nodes={Vector(-499.909576,-467.662872,32.031250),Vector(-672.933472,-649.308899,32.031250),Vector(-956.951172,-620.104126,32.031250),Vector(-1118.620361,-463.016052,32.031250),Vector(-1685.427246,-308.619263,32.031250),Vector(-1870.468506,-622.843079,32.031250),Vector(-2170.593262,-435.939972,32.031250),Vector(-2645.349854,-401.786560,32.031250),Vector(-2953.255127,-537.606873,36.031250),Vector(-3291.599609,-665.233582,32.031250),Vector(-3597.321289,-634.923340,32.031250),Vector(-4306.875488,-501.499756,32.031235),Vector(-4684.609863,-266.200623,32.031250),Vector(-4833.515625,44.682892,32.031235),Vector(-4663.383301,362.141693,32.031235),Vector(-4399.848145,641.062744,32.031250),Vector(-4056.129150,529.022583,36.031265),Vector(-3837.858887,290.612213,32.031250),Vector(-3586.329590,342.752899,32.031235),Vector(-3260.605225,400.713043,32.031265),Vector(-2914.509277,416.231964,32.031250),Vector(-2541.591309,392.019318,32.031250),Vector(-1918.604248,400.038422,32.031235),Vector(-1225.736328,357.758514,32.031235),Vector(-2008.752808,-94.644440,32.031265),Vector(-2891.796631,-157.818649,32.031250),Vector(-3267.783691,-20.226898,32.031250),Vector(-3606.907959,138.278595,32.031250),Vector(-3973.916992,166.893402,32.031250),Vector(-4232.481934,43.024719,32.031235),Vector(-4318.443359,-244.140579,32.031250),Vector(-4061.063721,-292.227051,32.031250),Vector(-3769.445068,-287.457581,32.031250),Vector(-3363.605469,-325.834991,32.031250),Vector(-2722.053711,-345.264252,32.031250),Vector(-1598.258545,-272.064545,32.031250),Vector(-819.018677,-143.035629,32.031250),Vector(-128.116699,-247.228409,32.031250),Vector(-80.680756,-841.367249,32.031250),Vector(-388.258118,-966.369568,32.031250),Vector(-7035.845703,653.832031,-175.968750),Vector(-7040.843750,394.390991,-201.912079),Vector(-7045.195313,197.683838,-230.013123),Vector(-7025.889160,-188.390808,-231.340729),Vector(-7017.495605,-703.968872,-175.502213),Vector(-7071.646484,-503.305359,-186.352600),Vector(-7076.683105,-142.458191,-237.902161),Vector(-7075.593262,230.169922,-225.372498),Vector(-7084.202148,400.286255,-201.070236),Vector(-7074.703613,525.813721,-183.137665),Vector(-7073.942871,628.062561,-175.968750)}},{Speed=100,Height=80,Nodes={Vector(-3744.623291,1425.587891,-303.968750),Vector(-3679.811523,1340.885864,-303.968750),Vector(-3616.791504,1290.564087,-303.968750),Vector(-3522.769775,1325.600830,-303.968750),Vector(-3385.554443,1402.270386,-303.968750),Vector(-3200.548096,1371.244751,-303.968750),Vector(-3037.108154,1302.130249,-303.968750),Vector(-2703.681641,1379.883423,-303.968750),Vector(-2458.058350,1350.537476,-303.968750),Vector(-2272.834961,1413.110718,-318.994415),Vector(-2192.274658,1366.201294,-331.714447),Vector(-2140.984863,1302.120239,-339.812836),Vector(-2033.629150,1289.202148,-356.763733),Vector(-1914.251343,1352.770874,-375.612854),Vector(-1755.874878,1406.139282,-400.619659),Vector(-1463.117676,1353.198975,-446.844482),Vector(-1178.889404,1363.086426,-491.722626),Vector(-1039.109863,1321.762939,-495.968750),Vector(-738.699829,1400.592896,-495.968750),Vector(-615.508240,1363.391479,-495.968750),Vector(-459.178589,1313.246582,-495.968750),Vector(-38.852905,1327.263794,-495.968750),Vector(-69.354477,1387.236450,-495.968750),Vector(-170.030441,1398.136108,-495.968750),Vector(-218.927246,1362.704224,-495.968750),Vector(-241.598190,1286.091431,-495.968750),Vector(-231.783051,1102.103149,-495.968750),Vector(-211.572205,634.311340,-495.968750),Vector(-217.816956,-138.523193,-495.968750),Vector(-192.042175,-702.393677,-495.968750),Vector(-250.290863,-1108.170776,-495.968750),Vector(-257.405731,-1359.186523,-495.968750),Vector(-10.296463,-1337.874268,-495.968750),Vector(215.970520,-1321.584717,-495.968750),Vector(406.032776,-1319.053833,-495.968750),Vector(756.966675,-1311.094849,-516.382568),Vector(1037.848877,-1328.850098,-539.789429),Vector(1458.928223,-1339.218750,-574.879333),Vector(1889.649170,-1345.538086,-610.772705),Vector(2307.746582,-1343.078247,-645.614197),Vector(2940.302246,-1336.310547,-698.327148),Vector(4027.499756,-1345.577271,-751.968750),Vector(4034.448730,-1182.524048,-751.968750),Vector(4039.172852,-445.751617,-751.968750),Vector(4025.090088,36.957535,-751.968750),Vector(4029.119385,747.685120,-751.968750),Vector(4036.122803,1338.295166,-751.968750),Vector(3872.964355,1334.090820,-751.968750),Vector(3453.152588,1325.926758,-741.064697),Vector(3159.828613,1321.688477,-716.621033),Vector(2693.353027,1324.756348,-677.748047),Vector(2325.438232,1305.952026,-647.088501),Vector(1549.538696,1341.946655,-582.430176),Vector(1029.183105,1344.541016,-539.067261),Vector(801.324219,1345.038330,-520.078979),Vector(502.063232,1346.512939,-495.968750),Vector(-12.103516,1335.958984,-495.968750),Vector(-242.268234,1340.781494,-495.968750)}},{Speed=100,Height=80,Nodes={Vector(6679.042480,635.890015,4192.031250),Vector(6660.869141,601.867798,4192.031250),Vector(6678.126953,570.885498,4192.031250),Vector(6703.949219,572.865845,4192.031250),Vector(6722.387695,603.268555,4192.031250),Vector(6711.096191,635.303833,4192.031250)}},{Speed=100,Height=80,Nodes={Vector(6048.307129,-263.810913,4448.031250),Vector(6227.460449,-297.828094,4448.031250),Vector(6384.967285,-285.960083,4464.031250),Vector(6586.364258,-264.634644,4488.031250),Vector(6930.896484,-250.674881,4488.031250),Vector(6915.629395,-484.326355,4488.031250),Vector(6526.069336,-555.680786,4488.031250),Vector(6348.859863,-465.104553,4464.031250),Vector(6182.185059,-426.794495,4448.031250),Vector(6036.534668,-403.391663,4448.031250)}},{Speed=100,Height=80,Nodes={Vector(6048.307129,-263.810913,4448.031250),Vector(6227.460449,-297.828094,4448.031250),Vector(6384.967285,-285.960083,4464.031250),Vector(6586.364258,-264.634644,4488.031250),Vector(6930.896484,-250.674881,4488.031250),Vector(6915.629395,-484.326355,4488.031250),Vector(6526.069336,-555.680786,4488.031250),Vector(6348.859863,-465.104553,4464.031250),Vector(6182.185059,-426.794495,4448.031250),Vector(6036.534668,-403.391663,4448.031250),Vector(2880.377197,-868.400452,1281.062744),Vector(2595.993164,-978.888489,1237.545898),Vector(2339.680420,-1088.394897,1195.754395),Vector(2043.616577,-1040.023438,1192.765869),Vector(2004.171387,-842.263000,1241.913086),Vector(2272.766846,-664.736450,1301.963623),Vector(2647.040527,-664.595581,1321.614258),Vector(2952.953125,-823.057983,1296.608643),Vector(2989.123779,-909.557861,1276.103271)}},{Speed=80,Height=80,Nodes={Vector(3386.437988,-903.968750,43.333008),Vector(3084.125488,-919.968750,-16.797714),Vector(2704.984131,-903.968750,42.963432),Vector(2527.241699,-919.968750,-11.566673),Vector(2307.180176,-919.968750,-26.304626),Vector(2201.747070,-903.968750,47.130569),Vector(1977.451050,-903.968750,40.480927),Vector(1683.658936,-919.968750,-45.177246),Vector(1559.549072,-903.968750,40.988434),Vector(1095.087280,-919.968750,-10.838913),Vector(858.925903,-903.968750,40.973083),Vector(616.031250,-570.648376,-24.175995),Vector(616.031250,-12.323303,-5.897064),Vector(616.031250,522.337769,-15.975861),Vector(592.031250,879.440796,35.905334),Vector(814.528809,919.968872,-53.942474),Vector(1200.003174,919.968750,-28.592926),Vector(1589.785889,919.968872,-83.584351),Vector(1854.206787,919.968750,-52.502167),Vector(2310.793457,919.968750,20.427155),Vector(2574.585449,919.968750,-60.630798),Vector(2970.873047,919.968872,-98.754822),Vector(3215.668945,919.968628,-16.799103),Vector(3479.968750,747.133789,-45.773010),Vector(3479.968750,462.353271,-190.524628),Vector(2668.557129,83.471802,-441.378540),Vector(1789.533447,77.836731,-373.575073),Vector(1145.964478,272.153564,-323.933472),Vector(857.832153,-206.170044,-301.708252),Vector(1081.712280,-643.995483,-318.977295),Vector(1489.620605,-666.835022,-350.441223),Vector(2036.423828,-480.949707,-392.618958),Vector(2401.464600,281.484863,-420.776428),Vector(3000.471191,427.838745,-466.980774),Vector(2996.851563,-81.387329,-466.701538),Vector(3479.968750,-294.942078,-414.504822),Vector(3479.968750,-518.356323,-289.775116),Vector(3479.968750,-733.810730,-19.108612)}}}PrecacheParticleSystem('combineball')
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_funcmodule/shared.lua:
ENT.Type='anim'ENT.Base='base_srp'ENT.Spawnable=info.Dev;ENT.Category='Functional Modules'ENT.PrintName='Ship Controller'ENT.DisplayName='Ship\nController'ENT.RenderGroup=RENDERGROUP_BOTH;ENT.MaxHealth=2000;ENT.Model=Model'models/props/console2.mdl'ENT.DoNotDuplicate=true;ENT.funcmodule=true;ENT.item_id='METAL_SCRAP'ENT.count=1;ENT.CanDisable=false;ENT.RequiresHacking=false;ENT.GameDifficulty={'easy','normal','hard','extreme'}function ENT:SetupDataTables()self:NetworkVar('Bool',0,'Activated')self:NetworkVar('String',0,'ItemID')self:NetworkVar('Int',1,'HP')end;sound.Add({name='funcmodule_default_engine_loop',channel=CHAN_STATIC,volume=1,level=55,pitch={95,110},sound='hl1/ambience/techamb2.wav'})sound.Add({name='funcmodule_default_alert',channel=CHAN_STATIC,volume=.7,level=70,pitch={15,25},sound='npc/turret_floor/alert.wav'})sound.Add({name='Module.Spindown',sound='npc/env_headcrabcanister/incoming.wav',pitch=100,channel=CHAN_AUTO,volume=1,level=100})sound.Add({name='Module.Activated',sound='hl1/fvox/activated.wav',pitch=100,channel=CHAN_ITEM,volume=1,level=75})function ENT:GetRepairInfo(a)local b=srp.items.Get(self.item_id)if!b then return end;local c=self:GetHP()/self.MaxHealth;local d=math.ceil(5*(1-c))return b.name,d,c,b.icon end
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_funcmodule_door.lua:
AddCSLuaFile()ENT.Base="rp_funcmodule"ENT.Type="anim"ENT.Spawnable=info.Dev;ENT.Category='SUP'ENT.PrintName="Door Monitor"ENT.DisplayName="Door\nMonitor"ENT.MaxHealth=3000;ENT.Model=Model'models/props/doorpanel1.mdl'ENT.Activated=true;ENT.UIPosition=Vector(14,0,7)ENT.UIAngle=Angle(0,90,90)ENT.UIScale=.05;ENT.CanDisable=false;function ENT:OnStartup()srp.events.TurnOn(self.trigger,false)end;function ENT:OnShutdown()srp.events.TurnOn(self.trigger,true)end;function ENT:OnSystemFailure()srp.events.TurnOn(self.trigger,true)end;function ENT:SetEventTrigger(a)self.trigger=a end
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_funcmodule_training.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/rp_grenade/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/rp_grenade_dioxis.lua:
AddCSLuaFile()ENT.Base="rp_grenade"ENT.PrintName="Dioxis Grenade"ENT.Spawnable=false;ENT.WorldModel="models/weapons/w_eq_flashbang.mdl"ENT.ExplosionTime=2;ENT.FreezeMotion=false;ENT.HitSound=Sound'Flashbang.Bounce'ENT.SmokeColor=Color(255,255,0)ENT.SmokeColor2=Color(255,255,0)ENT.TrailColor=Color(106,243,15)ENT.TrailGlowColor='greenglow1'ENT.Impact=false;ENT.Range=90000;ENT.Damage=75
--addons/!lpakr_out/lua/entities/rp_grenade_popper.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_hackable_lock/cl_init.lua:
include'shared.lua'ENT.UIPosition=Vector(0,0,0)ENT.UIAngle=Angle()local a=Color(200,50,50)local b=Color(15,50,15)local c=CreateMaterial('hackable_scanlines','UnlitGeneric',{['$basetexture']='dev/dev_scanline',['$translucent']=1,['$additive']=1,['$vertexcolor']='1',['$vertexalpha']='1',['Proxies']={['TextureScroll']={['texturescrollvar']='$baseTextureTransform',['texturescrollrate']=math.random(1,5)/10,['texturescrollangle']=math.random()>.5&&-90||math.random()>.5&&90||math.random()>.5&&0||180}}})function ENT:Draw()local d=self:GetLocked()a.a=75+math.cos(RealTime()/1)*190;render.SetColorMaterial()render.DrawBox(self:GetPos(),self:GetAngles(),self:OBBMins()-Vector(1,1,1),self:OBBMaxs()+Vector(1,1,1),col.black)render.SetMaterial(c)render.DrawBox(self:GetPos(),self:GetAngles(),self:OBBMins(),self:OBBMaxs(),d&&a||b)local e=self:LocalToWorld(self.UIPosition)local f=self:LocalToWorldAngles(self.UIAngle)local g=self:GetFuncName()||self.PrettyPrint;cam.Start3D2D(e,f,.15)draw.DrawText(g,'ui_header.r',0,-40,col.white,TEXT_ALIGN_CENTER)draw.DrawText(d&&'Insecure'||'Secure','ui_header.l',0,0,col.white,TEXT_ALIGN_CENTER)cam.End3D2D()end
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_hyperspace/shared.lua:
ENT.PrintName='Bridge Controls'ENT.PrettyPrint='Bridge Controls'ENT.Author='Scott'ENT.Contact='STEAM_0:1:2665200'ENT.Purpose=''ENT.Instructions=''ENT.Type='anim'ENT.Base='base_anim'ENT.Category='SUP Hackables'ENT.Spawnable=info.Dev;ENT.RenderGroup=RENDERGROUP_TRANSLUCENT;ENT.Model=Model'models/hunter/plates/plate2x3.mdl'
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_lava/shared.lua:
ENT.PrintName='Lava'ENT.Author='Scott'ENT.Contact='STEAM_0:1:2665200'ENT.Purpose=''ENT.Instructions=''ENT.Type='anim'ENT.Base='base_anim'ENT.Category='SUP Development'ENT.Spawnable=info.Dev;ENT.RenderGroup=RENDERGROUP_OPAQUE;ENT.Model=Model'models/hunter/plates/plate32x32.mdl'ENT.Material='models/props_combine/tprings_globe'ENT.DoNotDuplicate=true;ENT.IgnoreNoGrav=true
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_npc_ent/cl_init.lua:
include'shared.lua'ENT.Interactive=true;local a=20;local RealTime=RealTime;local Vector=Vector;local Angle=Angle;local b=math.cos;local c=math.abs;local d=Color(255,255,255)local e=Vector(0,0,100)local f=Vector(0,0,b(RealTime()*2)*2)function ENT:Initialize()self.Init=true;timer.Simple(2,function()if IsValid(self)then self:OnDataReceived(_,_,self:GetNPCID())end end)end;function ENT:Draw()self:DrawModel()if!self.Init then self:Initialize()end;local g=LocalPlayer():GetPos()local h=self:GetPos()local i=h:DistToSqr(g)if i>440000 then return end;local j=self:GetData()if!j then return end;local k;local l=c(255-i/440000*100/100*255)if j.GUIAngle then k=j.GUIAngle else k=(h-g):Angle()k.p=0;k.y=k.y+-90;k.r=k.r+90 end;local m=h+(j.GUIOffset||e)f.z=b(RealTime()*2)*2;m=m+f;local n=j.Color||d;n.a=l;cam.Start3D2D(m,k,j.GUIScale||0.125)if j.Icon then surface.SetMaterial(j.Icon)surface.SetDrawColor(n)surface.DrawTexturedRect(-64,-148,128,128)end;draw.SimpleText(j.Name||'Unknown',j.GUIFont||'ui_hud.npcname',0,0,d,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)cam.End3D2D()end;function ENT:DrawInteraction(o,p,q)if self:GetNoDraw()then return end;surface.SetFont'ui_header.s'surface.SetDrawColor(255,255,255,255)surface.SetMaterial(o.OnPickup)surface.SetTextColor(255,255,255,255)local r=self:GetData()&&self:GetData().Name||''local s,t=surface.GetTextSize(r)s=s+a+4;local u,v=q.x,q.y-100;surface.DrawTexturedRect(u,v,a,a)surface.SetTextPos(u+a+2,v-2)surface.DrawText(r)end
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_present.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_ragdoll/cl_init.lua:
include'shared.lua'local a=Color(245,207,135)local b=Material'galactic/supcraftingstation/hologram.vmt'local c=Material('materials/galactic/ui/health.png','smooth noclamp')local d=Material('materials/galactic/ui/health.png','smooth noclamp')local e=Material('materials/galactic/ui/warning.png','smooth noclamp')local f=Material'materials/galactic/clones/spooky/trooper'local g=Material'sprites/physbeam'local h=Material'sprites/physg_glow2'local i=Vector(0,0,60)local j=Vector(0,0,50)function ENT:SetupRagdoll(k,l)local m=l:GetPhysicsObjectNum(0)if!IsValid(m)then return end;local n=m:GetVelocity()m:SetVelocity(Vector()+n*.01)for o=1,l:GetPhysicsObjectCount()-1 do local p=l:GetPhysicsObjectNum(o)if IsValid(p)then p:SetVelocity(Vector()+n*.01)end end;srp.hud.RegisterMarker(self:EntIndex(),{icon=c,color=col.red:Copy(),pos=self:GetPos()})end;function ENT:Think()if IsValid(self:GetPlayer())&&IsValid(self:GetPlayer():GetRagdollEntity())then self:SetupRagdoll(self:GetPlayer(),self:GetPlayer():GetRagdollEntity())self.Think=function()end end end;function ENT:OnRemove()if IsValid(self.tomb)then self.tomb:Remove()end;srp.hud.RemoveMarker(self:EntIndex())end;function ENT:DrawStunned(k)local q=(self:GetPos()-LocalPlayer():GetPos()):Angle()cam.Start3D2D(self:GetPos()+i,Angle(0,q.y-90,90),0.1)if k:IsWanted()then local r=64+math.cos(RealTime()*5)*15;surface.SetDrawColor(a)surface.SetMaterial(e)surface.DrawTexturedRect(-r/2,-r,r,r)end;draw.DrawText('STUNNED','ui_3d2d.l',0,0,col.green,TEXT_ALIGN_CENTER)draw.DrawText(k:Nick(),'ui_3d2d.l',0,55,col.white,TEXT_ALIGN_CENTER)cam.End3D2D()end;local s=Vector(-8,-8,0)local t=Vector(8,8,8)local u=Vector(0,0,1)function ENT:DrawRevive(k)local v=self:GetPos()local q=(v-LocalPlayer():GetPos()):Angle()render.SetMaterial(g)render.DrawBeam(v,v+j,25,math.sin(CurTime())*.5,math.sin(CurTime())*.5,col.grey_light)render.SetMaterial(h)render.DrawSprite(v+u,24,24,col.grey_light)render.DrawSprite(v+j,24,24,col.grey_light)if!self.CoolDown||self.CoolDown<CurTime()then self.CoolDown=CurTime()+0.2;effects.Bubbles(v+s,v+t,5,i.z,1)end;cam.Start3D2D(v+i,Angle(0,q.y-90,90),0.1)surface.SetMaterial(c)surface.SetDrawColor(col.white)surface.DrawTexturedRect(-70,-70,140,140)surface.SetDrawColor(col.red_dark)surface.DrawTexturedRect(-64,-64,128,128)draw.DrawText(k:GetTag()..' '..k:Nick(),'ui_3d2d.l',0,-120,k:GetChatColor()||col.white,TEXT_ALIGN_CENTER)local w=self:GetHealer()if IsValid(w)then local x=self:GetEndTime()-CurTime()x=math.Round(x<0&&0||x)draw.DrawText(w:Nick()..' is reviving!','ui_3d2d.l',0,-210,col.red,TEXT_ALIGN_CENTER)draw.DrawText(x..' seconds left','ui_3d2d.l',0,-170,col.red,TEXT_ALIGN_CENTER)end;cam.End3D2D()end;function ENT:Draw()local k=self:GetPlayer()if!IsValid(k)then return end;if self:GetPos():Distance(LocalPlayer():GetPos())>800 then return end;i.z=60+math.cos(RealTime())*4;j.z=50+math.cos(RealTime())*4;if info.Dev||self:GetRevive()then self:DrawRevive(k)return end;if self:GetStunned()then self:DrawStunned(k)return end end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_routebeacon/cl_init.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/rp_satchel/cl_frequenceui.lua:
local a={}local b,c=450,120;local d=Color(0,0,0,148)local e=Color(255,255,255,5)local f=Color(50,200,50,5)local g=Color(200,50,50,5)a.Scale=0.035;local function h(i,b,c,j,k)surface.SetDrawColor(255,255,255,j||255)surface.DrawOutlinedRect(0,0,b,c)j=j||1;e.a=j*15;f.a=j*15;g.a=j*15;draw.Box(0,0,b,c,e)if i:IsHovered()then draw.Box(0,0,b,c,e)end;if k!=nil then draw.Box(0,0,b,c,k&&f||g)end end;function a:Init()self.Alpha=0;self:SetSize(b,c)self:AddPanel('srp_panel',function(l)l:Dock(FILL)l:SetBackgroundColor(col.transparent)l:AddPanel('srp_button_rounded',function(m)m:Dock(LEFT)m:SetWide(80)m:DockMargin(0,0,0,0)m:SetFont'SSRPForkAwesomeLarge'm:SetText(0xf100,true)m:LeftClick(function()net.Start'srp.satchel.DecreaseFrequency'net.WriteEntity(self.Satchel)net.WriteUInt(1,5)net.SendToServer()end)m.Paint=function(i,b,c)h(i,b,c,self.Alpha)end;self.Decrease=m end)l:AddPanel('srp_button_rounded',function(m)m:Dock(FILL)m:SetBackgroundColor(col.midnight_light)m:SetText'0 Mhz'm:SetFont'ui_header.l'm:SetTextInset(5,0)m:SetContentAlignment(5)m:DockMargin(2,0,2,0)m.Think=function(i)if!IsValid(self.Satchel)then return end;local n=self.Satchel:GetFrequency()if i.Freq!=n then i:SetText(n..' Mhz')i.Freq=n end end;m:LeftClick(function()net.Start'srp.satchel.Activate'net.WriteEntity(self.Satchel)net.SendToServer()end)m.Paint=function(i,b,c)if!IsValid(self.Satchel)then return end;h(i,b,c,self.Alpha,self.Satchel:GetActivated())end;m:AddPanel('srp_button_rounded',function(m)m:SetSize(55,25)m:SetPos(b-241,c-48)m:SetText'Copy'm:LeftClick(function(i)net.Start'srp.satchel.CopyFrequency'net.WriteEntity(self.Satchel)net.SendToServer()end)m.Paint=function(i,b,c)h(i,b,c,self.Alpha)h(i,b,c,self.Alpha)end end)m:AddPanel('srp_button_rounded',function(m)m:SetSize(55,25)m:SetPos(b-298,c-48)m:SetText'Sync All'm:LeftClick(function(i)net.Start'srp.satchel.SetAll'net.WriteEntity(self.Satchel)net.SendToServer()end)m.Paint=function(i,b,c)h(i,b,c,self.Alpha)h(i,b,c,self.Alpha)end end)end)l:AddPanel('srp_button_rounded',function(m)m:Dock(RIGHT)m:SetWide(80)m:DockMargin(0,0,0,0)m:SetFont'SSRPForkAwesomeLarge'm:SetText(0xf101,true)m:LeftClick(function()net.Start'srp.satchel.IncreaseFrequency'net.WriteEntity(self.Satchel)net.WriteUInt(1,5)net.SendToServer()end)m.Paint=function(i,b,c)h(i,b,c,self.Alpha)end;self.Increase=m end)end)end;function a:Populate(o)self.Satchel=o;if o.UIPosition then self.LocalCamPosition=o.UIPosition;self.LocalCamAngle=o.UIAngle;self.Position=Vector()self.Angle=Angle()self:Start3D(self.Scale)end end;function a:Start3D(p)self.IsThreeDimensional=true;hook.Add('PostDrawTranslucentRenderables',self,function()vgui.Start3D2D(self.Position,self.Angle,p)self:Paint3D2D()vgui.End3D2D()end)end;function a:UpdateTransform()if!IsValid(self.Satchel)then self:Remove()self.Think=function()end;return end;if!self.LocalCamPosition then return end;local q=self.Satchel:LocalToWorld(self.LocalCamPosition)local r=self.Satchel:LocalToWorldAngles(self.LocalCamAngle)q=q-r:Forward()*b/2*self.Scale;if thirdPerson then r:RotateAroundAxis(r:Forward(),-15)q.z=q.z+20 end;self.Position=q;self.Angle=r end;function a:Think()self:UpdateTransform()if self.Position then local j=1-math.min(self.Position:Distance2DSqr(LocalPlayer():GetPos())/9000,1)self.Alpha=j end end;function a:OnRemove()hook.Remove('PostDrawTranslucentRenderables',self)end;function a:Paint(b,c)local j=self.Alpha||1;surface.SetDrawColor(255,255,255,j*200)surface.DrawOutlinedRect(0,0,b,c,2)d.a=j;draw.Box(0,0,b,c,d)end;vgui.Register('srp_satchel_frequencies',a,'srp_panel_rounded')
--addons/!lpakr_out/gamemodes/starwarsrp/entities/entities/rp_shieldray.lua:
AddCSLuaFile()DEFINE_BASECLASS'base_anim'ENT.Type='anim'ENT.Category='SUP'ENT.PrintName='Shield Bubble'ENT.RenderGroup=RENDERGROUP_BOTH;ENT.Spawnable=true;ENT.DoNotDuplicate=true;ENT.ShieldModel=Model'models/props_phx/construct/metal_dome360.mdl'ENT.Model=Model'models/maxofs2d/thruster_projector.mdl'function ENT:SetupDataTables()self:NetworkVar('Entity',0,'Shield')end;function ENT:Initialize()self.start=CurTime()self.offset=20;self.duration=.2;self:SetModel(self.Model)end;function ENT:CreateShield()local a=ents.Create'rp_shielddome'a:SetPos(self:GetPos()-self:GetUp()*25)a:SetParent(self)a:Spawn()a:SetAngles(self:GetAngles())self:DeleteOnRemove(a)self:SetShield(a)end;function ENT:Use(b)if self:GetPropOwner()!=b then return end;srp.interaction.Start(b,'Pickup',col.blue_light,2,500,function(c,b,d)if d&&IsValid(self)then self:Remove()end end)end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_storage/cl_init.lua:
include'shared.lua'ENT.UIPosition=Vector(0,2,10)ENT.UIAngle=Angle(0,0,0)ENT.UIScale=.1;local a=20;function ENT:DrawInteraction(b,c,d)surface.SetFont'ui_header.s'surface.SetDrawColor(255,255,255,255)surface.SetMaterial(b.OnPickup)surface.SetTextColor(255,255,255,255)local e,f=surface.GetTextSize(self.InteractionName)e=e+a+4;local g,h=d.x,d.y;surface.DrawTexturedRect(g,h,a,a)surface.SetTextPos(g+a+2,h-2)surface.DrawText(self.InteractionName)end;function ENT:Draw()self:DrawModel()cam.Start3D2D(self:LocalToWorld(self.UIPosition),self:LocalToWorldAngles(self.UIAngle),self.UIScale)draw.DrawText(self.PrintName,'ui_header.l',0,0,col.white,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)cam.End3D2D()end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_timer/shared.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/rp_turret/cl_init.lua:
include'shared.lua'local a,b=ScrW(),ScrH()local c=150;local d=c/2;local e=Color(50,50,50,220)local f=CreateMaterial('turret_camscan4','UnlitGeneric',{['$basetexture']='dev/dev_scanline',['$translucent']=1,['$additive']=1,['$vertexcolor']='1',['$vertexalpha']='1',['Proxies']={['TextureScroll']={['texturescrollvar']='$baseTextureTransform',['texturescrollrate']=.1,['texturescrollangle']=-90}}})f:Recompute()local g=100;local h=8;local i=10;local j=Material'icon32/hand_point_180.png'local k=Vector()local l=Vector(0,0)local m=Color(255,255,255,255)local n=Color(100,25,25,255)local o=CurTime()local p=0;local q=0;function ENT:DrawHealth()local r=self.UIFromTurret&&self:GetGun()||self;if!IsValid(r)then return end;local l=r:LocalToWorld(self.UIPosition)local s=r:LocalToWorldAngles(self.UIAngle)local t=(self:GetHP()||0)/(self.MaxHealth||0)cam.Start3D2D(l,s,self.UIScale)draw.Box(-200,70,400,25,self.UIBarColor)draw.Box(-200,70,400*t,25,col.blue)surface.SetDrawColor(100,100,100,255)surface.DrawOutlinedRect(-201,69,402,27)draw.DrawText('HEALTH','ui_header.l',-190,30,self.UIDrawColor,TEXT_ALIGN_LEFT)cam.End3D2D()end;ENT.Draw=ENTITY.DrawModel;function ENT:DrawTranslucent()if!IsValid(self:GetModule())then return end;self:DrawHealth()local u=DynamicLight(self:EntIndex(),true)local v=self:GetModule():GetActivated()if u then u.pos=self:GetPos()+Vector(0,0,260)u.r=v&&0||255;u.g=v&&255||0;u.b=v&&255||0;u.brightness=2;u.Decay=1;u.Size=math.cos(RealTime()/.2)*550;u.DieTime=CurTime()+.1 end end;function ENT:DrawCrosshair()local a,b=ScrW(),ScrH()local w=k:Distance(l)local x=math.Clamp(w/g,0,1)m.a=255*x;local y,z=(a-i)*.5,(b-i)*.5;surface.SetDrawColor(m)draw.RoundedBox(24,y+l.x,z+l.y,i,i,m)end;function ENT:DrawHUD()if!self.UIOverlay then return end;local A=self:GetGun()if!IsValid(A)then return end;local a,b=ScrW(),ScrH()local B,C=a-c,b-c;self:DrawCrosshair()local D=self:GetHP()||0;local E=D/(self.MaxHealth||0)local F=400;local G,H=(a-F)*.5,(b+40)*.08;draw.Box(G-2,H-2,F+4,19,col.red_dark)draw.Box(G,H,F*E,15,col.red)if D==0 then if math.cos(RealTime()/.2)>0 then draw.DrawText('TURRET MALFUNCTION','ui_header.l',a/2,b*.54,n,TEXT_ALIGN_CENTER)end;if math.cos(RealTime()/.05)>0 then draw.DrawText('REQUIRES REPAIRS','ui_header.l',a/2,b*.57,n,TEXT_ALIGN_CENTER)end end;if self.CanOverheat then local I=self:GetOverheatPercent()local J=I/(self.MaxOverheatTime||0)draw.Box(G-2,H+28,F+4,19,col.blue_dark)draw.Box(G,H+30,F*J,15,col.blue)if I>=.8 then if math.cos(RealTime()/.05)>0 then draw.DrawText('OVERHEATING! SLOW DOWN!','ui_header.l',a/2,b*.6,n,TEXT_ALIGN_CENTER)end end end;local B,C=100,3;draw.Box((a-B)*.5,(b-C)*.5,B,C,col.white)draw.Box((a-C)*.5,(b-B)*.5,C,B,col.white)surface.SetDrawColor(200,200,255,5)surface.SetMaterial(f)surface.DrawTexturedRect(0,0,a,b)surface.SetDrawColor(e)surface.DrawRect(0,0,d,b)surface.DrawRect(a-d,0,d,b)surface.DrawRect(d,0,a-c,d)surface.DrawRect(d,b-d,a-c,d)surface.SetDrawColor(0,0,0,200)surface.DrawOutlinedRect((a-B)*.5,(b-C)*.5,B,C)DrawMaterialOverlay('models/props_c17/fisheyelens',.008)end;function ENT:DrawAmmo()local a,b=ScrW(),ScrH()local K,L=self:GetClip1(),self:GetClip2()if self.PrimaryAmmoCapacity>=1 then surface.SetDrawColor(self.UIAmmoBoxColor)surface.DrawRect(a/2-201,b-82,200,79)surface.SetDrawColor(col.grey_light)surface.DrawOutlinedRect(a/2-201,b-82,200,79)draw.DrawText('Primary Ammo','ui_header.r',a/2-102,b-72,col.white,TEXT_ALIGN_CENTER)draw.DrawText(K,'ui_header.l',a/2-110,b-50,col.white,TEXT_ALIGN_RIGHT)draw.DrawText('of '..self.PrimaryAmmoCapacity,'ui_header.r',a/2-105,b-40,col.white,TEXT_ALIGN_LEFT)end;if self.SecondaryAmmoCapacity>=1 then surface.SetDrawColor(self.UIAmmoBoxColor)surface.DrawRect(a/2+1,b-82,200,79)surface.SetDrawColor(col.grey_light)surface.DrawOutlinedRect(a/2+1,b-82,200,79)draw.DrawText('Secondary Ammo','ui_header.r',a/2+102,b-72,col.white,TEXT_ALIGN_CENTER)draw.DrawText(L,'ui_header.l',a/2+95,b-50,col.white,TEXT_ALIGN_RIGHT)draw.DrawText('of '..self.SecondaryAmmoCapacity,'ui_header.r',a/2+100,b-40,col.white,TEXT_ALIGN_LEFT)end;draw.RoundedBox(4,(a-6)/2,(b-6)/2,6,6,self.UIAmmoBoxColor)end;function ENT:CalcView(M,N,O,P,Q,R)local A=self:GetGun()if!IsValid(A)then return end;local l=A:LocalToWorld(self.ViewOffset)local s=A:LocalToWorldAngles(self.ViewAngleOffset)return{origin=l,angles=s,fov=100,drawviewer=self.ViewLocalPlayer}end;function ENT:CreateHooks()hook('CalcView',self,self.CalcView)hook('HUDPaint',self,self.DrawHUD)hook('PrePlayerDraw',self,function(self,M)if M==LocalPlayer()then return true end end)end;function ENT:RemoveHooks()hook.Remove('CalcView',self)hook.Remove('HUDPaint',self)hook.Remove('PrePlayerDraw',self)end;function ENT:OnRemove()self:RemoveHooks()end;net('srp.turret.Entered',function()local S=net.ReadEntity()S.gun=net.ReadEntity()local M=net.ReadPlayer()if IsValid(M)&&IsValid(S)then M:SetTurret(S)if M==LocalPlayer()then S:CreateHooks()end end end)net('srp.turret.Left',function()local S=net.ReadEntity()local M=net.ReadPlayer()if IsValid(M)&&IsValid(S)then M:SetTurret(nil)if M==LocalPlayer()then S:RemoveHooks()end end end)hook('AdjustMouseSensitivity','srp.turret.Sens',function()local S=LocalPlayer():GetTurret()if IsValid(S)&&S.IsTurret&&S.AnalogueMove then return.15 end end)
--addons/!lpakr_out/lua/entities/sent_firework/shared.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/sent_popcorn_thrown/cl_init.lua:
include("shared.lua")local a=ParticleEmitter(Vector(0,0,0))local function b(c,d)c:SetColor(255,255,255,255)c:SetVelocity(d||VectorRand():GetNormalized()*15)c:SetGravity(Vector(0,0,-200))c:SetLifeTime(0)c:SetDieTime(math.Rand(5,10))c:SetStartSize(2)c:SetEndSize(0)c:SetStartAlpha(255)c:SetEndAlpha(0)c:SetCollide(true)c:SetBounce(0.25)c:SetRoll(math.pi*math.Rand(0,1))c:SetRollDelta(math.pi*math.Rand(-10,10))end;function ENT:Initialize()a:SetPos(LocalPlayer():GetPos())if IsValid(self)then local e="kernel_timer"..self:EntIndex()timer.Create(e,0.01,0,function()if!a then a=ParticleEmitter(LocalPlayer():GetPos())return end;if!IsValid(self)then timer.Destroy(e)return end;if math.Rand(0,1)<0.33 then local c=a:Add("particle/popcorn-kernel",self:GetPos()+VectorRand():GetNormalized()*4)if c then b(c)end end end)timer.Create(e..'.remove',2,1,function()timer.Destroy(e)end)end;net.Receive("Popcorn_Explosion",function()if!self||!a then return end;local f=net.ReadVector()local g=net.ReadVector()local h=net.ReadVector()local i=net.ReadFloat()timer.Destroy("kernel_timer"..i)timer.Destroy("kernel_timer"..i..".remove")for j=1,150 do local c=a:Add("particle/popcorn-kernel",f)if c then local k=VectorRand():GetNormalized()b(c,(-g+k):GetNormalized()*math.Rand(0,200)+h*0.5)end end end)end
--addons/!lpakr_out/gamemodes/srp_base/entities/entities/sent_popcorn_thrown/shared.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/sup_usetrigger/shared.lua:
return lpakr()()
--addons/!lpakr_out/lua/entities/wos_kyber_slam/cl_init.lua:
include('shared.lua')function ENT:Initialize()end;function ENT:CreateBoom()end;function ENT:OnRemove()end;function ENT:Think()end;function ENT:Draw()end
--addons/!lpakr_out/lua/entities/wos_lightning_coil/shared.lua:
ENT.Type="anim"ENT.Base="base_anim"
--addons/!lpakr_out/lua/effects/anzati_swtor7/init.lua:
return lpakr()()
--addons/!lpakr_out/lua/effects/drg_blood_explosion.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/effects/effect_smokepuff.lua:
return lpakr()()
--addons/!lpakr_out/gamemodes/srp_base/entities/effects/effect_valentine.lua:
local a=Material('galactic/seasonal/valentines/heart.png')local b=Material('galactic/seasonal/valentines/giftbox.png')local c={a,b}function EFFECT:Init(d)local e=d:GetOrigin()local f=ParticleEmitter(e)if!f then return end;for g=1,math.random(5,15)do local h=f:Add(c[math.random(1,#c)],e+Vector(math.random(-16,16),math.random(-16,16),math.random(0,50)))if h then h:SetDieTime(8)h:SetGravity(Vector(0,0,0))h:SetVelocity(Vector(0,0,25))h:SetStartSize(math.random(0,4))h:SetEndSize(math.random(4,6))h:SetStartAlpha(0)h:SetEndAlpha(255)h:SetColor(255,255,255)h:SetBounce(5)h:SetRoll(math.random(-.5,.5))end end;f:Finish()end;function EFFECT:Think()return false end;function EFFECT:Render()end
--addons/!lpakr_out/lua/effects/firework_explosion/init.lua:
local a=CreateClientConVar('fireworks_brightness','1',true,false)local b=CreateClientConVar('fireworks_glow','1',true,false)local c=CreateClientConVar('fireworks_smokeexplosion','1',true,false)local d={}local function e(f,g)if!f||!g then return end;table.insert(d,{f,CurTime(),g})end;local function h()if#d<1 then return end;for i,j in pairs(d)do local k=j[1]local l=j[2]local g=j[3]local m=1;if CurTime()>l+2*m then table.remove(d,i)continue end;local n=k:ToScreen()local o=EyeAngles()local p=EyePos()local q=(CurTime()-l)/3*m;local r=-math.max(o:Forward():DotProduct((k-p):GetNormal())-q,0)+1;local s=(-r+1)*0.25;local t=math.Clamp(a:GetFloat(),0.1,1)DrawSunbeams(r,s*t,0.035*g,n.x/ScrW(),n.y/ScrH())end end;hook.Add('RenderScreenspaceEffects','Fireworks.RenderScreenspaceEffects',h)function EFFECT:Init(u)self.Origin=u:GetOrigin()self.FWScale=u:GetScale()self.StartTime=CurTime()local v=u:GetStart()local w,x,y=ColorToHSV(Color(v.r,v.g,v.b))v=HSVToColor(w,x/3,y)if render.SupportsPixelShaders_2_0()&&b:GetBool()then e(self.Origin,self.FWScale*.15)end;sound.Play('fireworks/firework_explosion_'..math.random(1,3)..'.wav',self.Origin,165,math.Rand(75,125))local z=2048;local A=8;local B=ParticleEmitter(self.Origin,false)for C=0,z do local D=VectorRand():GetNormal()*math.Rand(1000,1500)*self.FWScale;local E=B:Add('sprites/gmdm_pickups/light',self.Origin)if E then E:SetVelocity(D)E:SetLifeTime(0)E:SetDieTime(5)E:SetStartAlpha(255)E:SetEndAlpha(0)local F=math.Rand(50,75)E:SetStartSize(F*self.FWScale)E:SetEndSize(0)local G=math.Rand(130,150)E:SetAirResistance(G)local H=math.Rand(-100,-200)E:SetGravity(Vector(0,0,H))local I=math.Rand(0.2,1)E:SetColor(v.r*I,v.g*I,v.b*I)E:SetStartLength(F*5*self.FWScale)E:SetEndLength(0)E:SetCollide(false)E:SetBounce(1)end end;if self.FWScale>=0.75&&c:GetBool()then for C=0,A do local J=B:Add('particle/particle_noisesphere',self.Origin)local D=VectorRand():GetNormal()*math.Rand(1000,2000)*self.FWScale;if J then J:SetVelocity(D)J:SetLifeTime(0)J:SetDieTime(10)J:SetStartAlpha(15)J:SetEndAlpha(0)J:SetRoll(0,360)J:SetRollDelta(math.Rand(-0.4,0.4))local F=math.Rand(450,650)*self.FWScale;J:SetStartSize(F)J:SetEndSize(F*math.Rand(2,5))J:SetAirResistance(100)J:SetGravity(Vector(0,0,0))local K=math.Rand(0.25,1)J:SetColor(255*K,255*K,255*K)end end end;B:Finish()SafeRemoveEntityDelayed(self,15)end;function EFFECT:Think()return CurTime()<self.StartTime+0.5 end;function EFFECT:Render()end
--addons/!lpakr_out/lua/effects/fireworks_newyear.lua:
local a=Material'materials/galactic/ui/star.png'function EFFECT:Init(b)self.Origin=b:GetOrigin()self.StartTime=CurTime()local c=ParticleEmitter(self.Origin,false)for d=0,100 do local e=VectorRand():GetNormal()*math.Rand(1000,2500)local f=c:Add(a,self.Origin)if f then f:SetVelocity(e)f:SetLifeTime(0)f:SetDieTime(6)f:SetStartAlpha(math.random(220,255))f:SetEndAlpha(0)f:SetStartSize(math.random(5,10))f:SetEndSize(math.random(60,100))f:SetAirResistance(math.Rand(130,150))f:SetColor(255,255,255)f:SetCollide(false)f:SetBounce(1)end end;c:Finish()SafeRemoveEntityDelayed(self,15)end;function EFFECT:Think()return CurTime()<self.StartTime+0.5 end;function EFFECT:Render()end
--addons/!lpakr_out/lua/effects/jump_in.lua:
return lpakr()()
--addons/!lpakr_out/lua/effects/jump_in.lua:
EFFECT.Mat=Material("effects/select_ring")function EFFECT:Init(a)local b=a:GetEntity()if!b||!b:IsValid()then return end;local c,d=b:WorldSpaceAABB()local e=a:GetOrigin()local f=b:BoundingRadius()f=f*2;f=math.Clamp(f,10,500)local g=ParticleEmitter(e)for h=0,f do local i=Vector(math.Rand(c.x,d.x),math.Rand(c.y,d.y),math.Rand(c.z,d.z))local j=(i-e)*6;local k=g:Add("effects/spark",e)if k then k:SetVelocity(j)k:SetLifeTime(0)k:SetDieTime(math.Rand(0.1,0.4))k:SetStartAlpha(0)k:SetEndAlpha(math.Rand(200,255))k:SetStartSize(0)k:SetEndSize(20)k:SetRoll(math.Rand(0,360))k:SetRollDelta(0)end end;g:Finish()end;function EFFECT:Think()return false end;function EFFECT:Render()end
--addons/!lpakr_out/lua/effects/jump_out.lua:
EFFECT.Mat=Material("effects/select_ring")function EFFECT:Init(a)local b=a:GetEntity()if!b||!b:IsValid()then return end;local c=b:GetPos()local d,e=b:WorldSpaceAABB()local f=a:GetOrigin()local g=b:BoundingRadius()g=g*2;g=math.Clamp(g,10,500)local h=ParticleEmitter(c)for i=0,g do local j=Vector(math.Rand(d.x,e.x),math.Rand(d.y,e.y),math.Rand(d.z,e.z))local k=(f-j)*6;local l=h:Add("effects/spark",j)if l then l:SetVelocity(k)l:SetLifeTime(0)l:SetDieTime(math.Rand(0.1,0.3))l:SetStartAlpha(math.Rand(200,255))l:SetEndAlpha(0)l:SetStartSize(20)l:SetEndSize(0)l:SetRoll(math.Rand(0,360))l:SetRollDelta(0)end end;h:Finish()end;function EFFECT:Think()return false end;function EFFECT:Render()end
--addons/ssrp_lfs/lua/effects/lvs_laser_red_aat.lua:
local red = Color( 255, 0, 0, 255 )
local white = Color(255, 255, 255, 255)

EFFECT.MatBeam = Material( "effects/spark" )
EFFECT.MatSprite = Material( "sprites/light_glow02_add" )

function EFFECT:Init( data )
	local pos  = data:GetOrigin()
	local dir = data:GetNormal()

	self.ID = data:GetMaterialIndex()

	self:SetRenderBoundsWS( pos, pos + dir * 50000 )
end

function EFFECT:Think()
	if not LVS:GetBullet( self.ID ) then return false end

	return true
end

function EFFECT:Render()
	local bullet = LVS:GetBullet( self.ID )

	local endpos = bullet:GetPos()
	local dir = bullet:GetDir()

	local len = 100 * bullet:GetLength()

	render.SetMaterial( self.MatSprite )
	render.DrawBeam( endpos - dir * len * 8, endpos + dir * len * 8, 200, 1, 0, red)

	render.SetMaterial( self.MatBeam )
	render.DrawBeam( endpos - dir * len, endpos + dir * len, 60, 1, 0, red )
	render.DrawBeam( endpos - dir * len, endpos + dir * len, 30, 1, 0, white )
end

--addons/!lpakr_out/lua/effects/rb655_force_absorb.lua:
return lpakr()()
--addons/!lpakr_out/lua/effects/sup_laser_orange.lua:
EFFECT.Speed=20000;EFFECT.Length=35;EFFECT.UseModel=false;local a=Material'effects/sw_laser_blue_main'local b=Material'effects/sw_laser_blue_front'local c=Vector()function EFFECT:Init(d)self.StartPos=d:GetStart()self.EndPos=d:GetOrigin()self.Scale=d:GetScale()if self.Scale==0 then self.Scale=1 end;local e=d:GetEntity()if!self.StartPos||!self.EndPos||!IsValid(e)then self.DieTime=0;return end;local f=d:GetAttachment()if IsValid(e)then if e.Owner==LocalPlayer()&&LocalPlayer():GetViewModel()!=LocalPlayer()&&!LocalPlayer():ShouldDrawLocalPlayer()then local g=e.Sequence&&(e.Sequence:find('right')&&MuzzlePosition2||MuzzlePosition)||nil;g=g||e.Akimbo&&(e.AkimboLeftFire&&MuzzlePosition||MuzzlePosition2)||MuzzlePosition;self.StartPos=g||self.StartPos else local h=e.Akimbo&&(e.AkimboLeftFire&&f||f+1)||f;local f=e:GetAttachment(h)if f&&f.Pos then self.StartPos=f.Pos else self.DieTime=0;return end end end;if self.StartPos==c||self.EndPos==c then self.DieTime=0;return end;self.Dir=(self.EndPos-self.StartPos):GetNormalized()self:SetRenderBoundsWS(self.StartPos+self.Dir,self.EndPos)self.StartTime=CurTime()self.Distance=self.StartPos:Distance(self.EndPos)self.TracerTime=self.Distance/(self.Scale*self.Speed)self.DieTime=self.StartTime+self.TracerTime;local i=EffectData()i:SetOrigin(self.StartPos+self.Dir*10)i:SetNormal(self.Dir)i:SetMagnitude(0)i:SetScale(1)util.Effect('StriderMuzzleFlash',i)end;function EFFECT:Think()if CurTime()>self.DieTime then return false end;return true end;function EFFECT:Render()if CurTime()>=self.DieTime then return end;local j=self.Scale||1;local k=(CurTime()-self.StartTime)/self.TracerTime;if k<0 then return end;local l=self.StartPos+self.Dir*self.Distance*k;local m=l+self.Dir*self.Length*j;if a then render.SetMaterial(a)render.DrawBeam(l,m,j*18,0,1,col.orange)end;if b then render.SetMaterial(b)render.DrawSprite(m,j*18,j*18,col.orange)end;if srp.nvg.IsEnabled()then return end;self.dlight=DynamicLight(self:EntIndex())if self.dlight then self.dlight.pos=m;self.dlight.r=255;self.dlight.g=69;self.dlight.b=0;self.dlight.brightness=2;self.dlight.Decay=2000;self.dlight.Size=400;self.dlight.DieTime=CurTime()+.1 end end
--addons/!lpakr_out/lua/effects/thor_thunder/init.lua:
return lpakr()()
--addons/!lpakr_out/lua/effects/wos_corrupted_burn/init.lua:
function EFFECT:Init(a)local b=a:GetOrigin()local c=a:GetNormal()local d=a:GetRadius()local e=a:GetAngles()local f=ParticleEmitter(b)if!f then return end;for g=0,d do local h=b+c*(d-g)local i=f:Add("particle/bendibeam",h)if i then i:SetLifeTime(0)i:SetDieTime(0.5)i:SetGravity(Vector(0,0,math.random(32,128)))i:SetVelocity(Vector(math.random(-8,8),math.random(-8,8),math.random(-8,8)))i:SetStartSize(2)i:SetEndSize(0)i:SetStartAlpha(math.random(100,200))i:SetEndAlpha(0)i:SetColor(e.p,e.y,e.r)i:SetAngleVelocity(Angle(math.Rand(-180,180),math.Rand(-180,180),math.Rand(-180,180)))end end;f:Finish()end;function EFFECT:Think()return false end;function EFFECT:Render()end
--addons/!lpakr_out/lua/badmin/modules/chatbox/vgui/chatbox_cl.lua:
local a='ba.chat.Font'surface.CreateFont(a,{font="Roboto Lt",size=20,weight=600,antialias=true,outline=false})surface.CreateFont(a..'.Bold',{font="Roboto Lt",size=20,weight=800,antialias=true,outline=false})surface.CreateFont(a..'.Italic',{font="Roboto Lt",size=20,weight=600,antialias=true,outline=false,italic=true})surface.CreateFont(a..'.Underline',{font="Roboto Lt",size=20,weight=600,antialias=true,outline=false,underline=true})local b=surface.SetMaterial;local c=surface.DrawTexturedRect;local d=surface.DrawText;local e=surface.SetDrawColor;local f=surface.DrawRect;local g=surface.SetFont;local h=surface.GetTextSize;local i=surface.SetAlphaMultiplier;local j=surface.SetTextColor;local k=surface.SetTextPos;local l=draw.SimpleText;local m=draw.SimpleTextOutlined;local n=draw.BlurBox;function ba.LoadSingleEmote(o)if!istable(o)then return end;o.matloading=true;texture.Create('Chat_Emote_'..o.name):EnableProxy(true):SetSize(64,64):Download(o.loadUrl,function(self,p)o.mat=p;o.matloading=false end)end;local q=':'local function r(s,t,u)local v=#u;local w;for x=1,v do if u[x]==q then if w then local y=ba.chatEmotes[string.sub(u,w,x)]if y then if!y.mat&&!y.matloading then ba.LoadSingleEmote(y)end;t[s]=string.sub(u,1,w-1)s=s+1;table.insert(t,s,y)if x!=v then s=s+1;table.insert(t,s,string.sub(u,x+1,v))end;return s else w=x end else w=x end end end;return s+1 end;local function z(t)local s=1::A::local B=t[s]if B then if isstring(B)then s=r(s,t,B)else s=s+1 end;goto A end end;function ba.CreateChatBox()if!IsValid(LocalPlayer())then return end;local C=vgui.Create('ba_chatbox')hook.Call('BadminChatboxLoaded')return C end;local D={}function D:Init()self.scrollButton=vgui.Create('Panel',self)self.scrollButton.OnMousePressed=function(E,F)if F==MOUSE_LEFT&&self:ShouldDisplay()then local G,H=E:CursorPos()E.scrolling=true;E.mouseOffset=H end end;self.scrollButton.OnMouseReleased=function(E,F)if F==MOUSE_LEFT then E.scrolling=false;E.mouseOffset=nil end end;self.height=0 end;function D:SetChatbox(I)self.Chatbox=I end;function D:GetFrame()return self.Chatbox.activeMessageFrame end;function D:GetOffset()return self:GetFrame().OffsetCount||0 end;function D:GetMaxOffset()return self:GetFrame().MaxOffset||0 end;function D:ShouldDisplay()return self:GetMaxOffset()>0 end;function D:Think()if self.scrollButton.scrolling then if!input.IsMouseDown(MOUSE_LEFT)then self.scrollButton:OnMouseReleased(MOUSE_LEFT)return end;local G,H=self.scrollButton:CursorPos()local J=H-self.scrollButton.mouseOffset;local K=self:GetMaxOffset()local L=1-(self.scrollButton.y+J)/(self:GetTall()-self.height)self:GetFrame().OffsetCount=math.Clamp(math.floor(L*K),0,K)self.Chatbox.InvalidateVisibleMessages=true end end;function D:PerformLayout()local K=self:GetMaxOffset()self.heightRatio=self:GetFrame():GetTall()/(self:GetFrame():GetTall()+K*20)self.height=math.Clamp(math.ceil(self.heightRatio*self:GetFrame():GetTall()),20,math.huge)self.scrollButton:SetSize(self:GetWide()-4,self.height)self.scrollButton:SetPos((self:GetWide()-self.scrollButton:GetWide())*0.5,(1-math.Clamp(self:GetOffset()/self:GetMaxOffset(),0,1))*(self:GetTall()-self.height))end;function D:Paint(M,N)if!self:ShouldDisplay()then return end;derma.SkinHook('Paint','UIScrollBar',self,M,N)end;function D:OnMouseWheeled(O)self:GetParent():OnMouseWheeled(O)end;vgui.Register('ba_chatscrollbar',D,'Panel')local P={}function P:Init()self._Colors={}self._Emotes={}self._Text=''self._SelStart=0;self._SelEnd=0;self._SelText=''self._Bits={}self._Font=a;self.MessageID=-1;self.WrapID=-1;self:SetText('')end;function P:SetFont(Q)self._Font=Q end;function P:Reset()self._Text=''self._SelStart=0;self._SelEnd=0;self._SelText=''self._Font=a;table.Empty(self._Colors)table.Empty(self._Emotes)table.Empty(self._Bits)end;function P:SetMetaData(I,R,S)self.Chatbox=I;self.MessageID=R.ID;self.WrapID=S;self._Font=R.Font||a;self.Expire=R.Expire;self.Created=R.Created end;function P:SizeToContents(M)g(self._Font||a)local T,U=h('W')local V=math.max(math.pow(2,math.ceil(math.log(T)/math.log(2))),16)+4;local M,N=0,0;for W=1,#self._Text do if self._Emotes[W]then table.insert(self._Chars,{'',M,V})M=M+V else local X,Y=h(self._Text[W])if N<Y then N=Y end;if self._Text[W]=='&'then X=12 end;table.insert(self._Chars,{self._Text[W],M,X})M=M+X end end;self:SetSize(M,N)end;function P:SetText(Z)self._Text=Z;self._Bits={}self._Chars={}self:SizeToContents()end;function P:AddColor(_,a0)self._Colors[_]=a0;self._Bits={}end;function P:AddEmote(_,a1)self._Emotes[_]=a1;self._Bits={}end;function P:GetSelectedText()return self._SelText end;function P:Think()self._SelText=''local a2=nil;local a3=nil;if self._SelStart!=0||self._SelEnd!=0 then local a4;for a5,a6 in ipairs(self._Chars)do if self._SelStart<=a6[2]+a6[3]&&self._SelEnd>=a6[2]+a6[3]then self._SelText=self._SelText..a6[1]..(a5==#self._Chars&&'\n'||'')if!a2 then a2=a6[2]end else if a2&&!a3 then a3=a6[2]-a2 end end;a4=a6[2]+a6[3]end;if a2&&!a3 then a3=a4-a2 end end;self._HighX1=a2;self._HighX2=a3;if!self._Bits[1]then local a7=Color(0,0,0)local a8=1;local u=''for a5,a6 in ipairs(self._Chars)do if self._Colors[a5]then u=string.sub(self._Text,a8,a5-1)table.insert(self._Bits,{u,self._Chars[a8][2],a7})a8=a5;a7=self._Colors[a5]end;if self._Emotes[a5]then u=string.sub(self._Text,a8,a5-1)table.insert(self._Bits,{u,self._Chars[a8][2],a7})if self._Chars[a5-1]then table.insert(self._Bits,{'',self._Chars[a5-1][2]+self._Chars[a5-1][3],lastCol,Emote=self._Emotes[a5]})else table.insert(self._Bits,{'',0,lastCol,Emote=self._Emotes[a5]})end;a8=a5+1 end end;if self._Text[a8]&&self._Chars[a8]then u=string.sub(self._Text,a8)table.insert(self._Bits,{u,self._Chars[a8][2],a7})end end end;function P:GetSelText()return self._SelText||''end;local a9=Color(0,0,0)function P:Paint(M,N)if CHATBOX&&CHATBOX.ShouldDraw==false then return true end;if SysTime()>self.Expire&&(CHATBOX&&!CHATBOX._Open)then return true end;local aa=math.Clamp((SysTime()-(self.Expire-15))/.25,0,1)if!CHATBOX._Open&&aa==1 then local ab=1-math.Clamp(SysTime()-self.Expire+2,0,2)/2;i(ab)else i(aa)end;N=self:GetTall()if!string.IsNilOrEmpty(self.Chatbox.SelectedText)&&self._HighX1&&self._HighX2 then e(200,200,200,100)f(self._HighX1,0,self._HighX2,N)end;for a5,a6 in ipairs(self._Bits)do if a6.Emote then if a6.Emote.mat then e(255,255,255)b(a6.Emote.mat)c(a6[2],0,N,N)end else a6[3].a=math.Clamp((SysTime()-self.Created)*2,0,1)*255;m(a6[1],self._Font,a6[2]+1,self:GetTall()==16&&1||0,a6[3],0,0,0.5,a9)end end;return true end;derma.DefineControl('ba_chatlabel','Badmin Chatbox Label',P,'DLabel')local ac={}function ac:OnMouseReleased(ad)self.Selecting=nil end;function ac:GetSheet(ae,af)if self.Sheets[ae]then self.ChatResponseCommand=nil;return self.Sheets[ae].Frame else local ag,ah=self:CreateTab(ae,af)if self.ChatResponseCommand then ah.ResponseCommand=self.ChatResponseCommand;self.ChatResponseCommand=nil end;if self.ChatHistory[ae]then self.activeMessageTab=ah;for a5,a6 in ipairs(self.ChatHistory[ae])do self:AddMessage(unpack(a6))end;self.activeMessageTab=nil end;return ah end end;local ai=0;local aj=ui.col.Background:Copy()local ak=ui.col.SUP:Copy()ak.a=65;function ac:CreateTab(ae,af)ai=ai+1;local ah=vgui.Create('Panel',self)ah:SetSkin('SUP')ah.Name=ae;ah.LabelObjects={}ah.OnMouseWheeled=function(E,O)if E.MaxOffset==nil then return end;E.OffsetCount=math.Clamp((E.OffsetCount||0)+O,0,E.MaxOffset)self.InvalidateVisibleMessages=true end;local ag=self.propSheet:AddSheet(ae..(ae=='All'&&''||'    '),ah)ag.Tab.ID=ae;ag.Tab.IsSteamID=af;ag.Tab.LastTitleUpdatedTime=-1;ag.Tab:SetFont(a)ag.Tab:SetTextColor(Color(5,5,5))ag.Tab.OldOnMP=ag.Tab.OnMousePressed;ag.Tab.OnMousePressed=function(E,al)if al==MOUSE_MIDDLE&&ae!="All"then if self.activeMessageFrame&&ah==self.activeMessageFrame then self.propSheet:SetActiveTab(self.Sheets["All"].Tab)end;self.propSheet:CloseTab(E,true)self.Sheets[ae]=nil;return end;E:OldOnMP(al)end;ag.Tab.Paint=function(E,M,N,am,an)if ai==1||!am then return true end;local ao=false;if self.activeMessageFrame&&ah==self.activeMessageFrame then ao=true;ah.Attention=false else if ah.Attention then local J=SysTime()-ah.Attention;if J>=15 then if cvar.GetValue('DisablePersistentCallToAttention')==true then ah.Attention=false else ah.Attention=SysTime()end end;local ab;if self._OpenTime then ab=0;ah.Attention=SysTime()else ab=math.min(J,2)/2;if ab==1 then return end end;aj.r=255-255*ab;aj.g=150-150*ab;aj.b=0 end end;draw.RoundedBox(5,am,an+1,M-6,26,aj)if ao then draw.RoundedBox(5,am,an+1,M-6,26,ak)end;if E.IsSteamID&&CurTime()-E.LastTitleUpdatedTime>2.5 then E.LastTitleUpdatedTime=CurTime()local ap=player.GetBySteamID(E.ID)local aq;if!IsValid(ap)then if!E.Disconnected then aq=E.Title..' (DC)'E.Disconnected=true else aq=E.Title end else E.Disconnected=false;aq='[PM] '..ap:Name()end;if aq!=E.Title then E.Title=aq;E:SetText(aq..'    ')E:InvalidateLayout(true)E.btnClose:InvalidateLayout(true)self.propSheet.tabScroller:InvalidateLayout(true)end end;l(E.Title||E.ID,a,am+M*0.5-((E.Title||E.ID)=='All'&&2||12),an+4,ui.col.White,TEXT_ALIGN_CENTER,TEXT_ALIGN_TOP)aj.r=ui.col.Background.r;aj.g=ui.col.Background.g;aj.b=ui.col.Background.b;return true end;ah:SetSize(self.propSheet:GetWide())self.Sheets[ae]={Tab=ag.Tab,Frame=ah}ah.Tab=ag.Tab;if ae!='All'then ag.Tab.btnClose=ui.Create('ui_button',ag.Tab)ag.Tab.btnClose:SetText('')ag.Tab.btnClose.DoClick=function(ar)surface.PlaySound('sup/ui/beep.ogg')ag.Tab:OnMousePressed(MOUSE_MIDDLE)end;ag.Tab.btnClose.Paint=function(as,M,N)derma.SkinHook('Paint','TransparentWindowCloseButton',as,M,N)end;ag.Tab.btnClose.PerformLayout=function(E)E:SetPos(E:GetParent():GetWide()-30,1)E:SetSize(16,16)end end;ah.Name=ae;return ag,ah end;local at=ui.col.DarkGreen:Copy()at.a=200;function ac:Init()self:SetSize(chat.GetChatBoxSize(true))self:SetPos(chat.GetChatBoxPos())self.CreationTime=SysTime()self.AutoscrollCooldown=self.CreationTime+5;self.Sheets={}self.ShouldDraw=true;self._Open=false;self._Team=false;self.History={}self.ChatHistory={}self.AutoNames={}self.CurrentAutoName=0;self.btnResize=vgui.Create('Panel',self)self.btnResize:SetCursor('sizenesw')self.btnResize.OnMousePressed=function(E,F)if F==MOUSE_LEFT then self.Resizing=true;hook('PostDrawHUD','resizeChatbox',function()self:DrawResize()end)end end;self.propSheet=vgui.Create('DPropertySheet',self)self.propSheet:SetFadeTime(0)self.propSheet.Paint=function()end;self.propSheet.OnActiveTabChanged=function(E,au,av)self.activeMessageFrame=av:GetPanel()self.txtEntry:RequestFocus()self:InvalidateLayout()end;self.CachedMessageWraps={}self.MessageCount=0;self.txtEntry=ui.Create('DTextEntry',self)self.txtEntry:SetVisible(false)self.txtEntry._Paint=self.txtEntry.Paint;function self.txtEntry.Paint(E,M,N)self.txtEntry._Paint(E,M,N)if self._Team then draw.RoundedBox(5,0,0,M,N,at)end end;self.txtEntry.PaintOver=function(E,M,N)if CHATBOX&&CHATBOX.ShouldDraw==false then return true end;if!E.AutoFillText then return end;g(a)local am=h(E:GetValue())M,N=h(E.AutoFillText)e(E:GetHighlightColor()||ui.col.SUP)f(am+3,2,M,N+1)j(ui.col.White)k(am+3,2)d(E.AutoFillText)end;hook('OnPauseMenuShow',self,function()if self._Open then self:Close()return false end end)self.txtEntry.OnKeyCodeTyped=function(E,aw)if aw==KEY_TAB||aw==KEY_RIGHT&&E:GetCaretPos()==#E:GetValue()then self:DoAutoFill()E:OnTextChanged()E:SetCaretPos(#E:GetValue())elseif aw==KEY_UP then if#self.AutoNames>0 then local ax=self:GetAutoFill(1)E.AutoFillText=ax&&ax.CompleteString||nil else if self.History[E.historyPos+1]then E.historyPos=E.historyPos+1;self._Team=self.History[E.historyPos].Team;E:SetText(self.History[E.historyPos].Text)E:SetCaretPos(#E:GetValue())end end elseif aw==KEY_DOWN then if#self.AutoNames>0 then local ax=self:GetAutoFill(1)E.AutoFillText=ax&&ax.CompleteString||nil else if self.History[E.historyPos-1]||E.historyPos-1==0 then E.historyPos=E.historyPos-1;if self.History[E.historyPos]then E:SetText(self.History[E.historyPos].Text)self._Team=self.History[E.historyPos].Team else E:SetText('')self._Team=self._OpenedWithTeam end;E:SetCaretPos(#E:GetValue())end end elseif aw==KEY_ENTER then local ay=self.activeMessageFrame.ResponseCommand;local R=string.Trim(E:GetValue())if R!=""then if ay&&R[1]&&R[1]!='/'&&R[1]!='!'&&R[1]!='@'then chat.Say(ay.." "..R,false)else chat.Say(R,self._Team)end;table.insert(self.History,1,{Team=self._Team,Text=R})end;self:Close()elseif aw==KEY_BACKSPACE&&input.IsKeyDown(KEY_LCONTROL)then local az=0;local aA=E:GetText()for W=1,#aA do if aA[W]==' '&&W<#aA then az=W end end;local aB=az==0&&''||string.sub(aA,1,az)E:SetText(aB)E:SetCaretPos(#E:GetValue())end end;self.txtEntry.OnLoseFocus=function(E)if input.IsKeyDown(KEY_TAB)then E:RequestFocus()E:SetCaretPos(#E:GetText())end end;self.txtEntry.OnTextChanged=function(E)self:CalculateAutoFill()local ax=self:GetAutoFill()E.AutoFillText=ax&&ax.CompleteString||nil;if E:AllowInput()then local aC=hook.Run('PlayerGetChatLimit',LocalPlayer())||chat.DefaultLimit;E:SetValue(string.sub(E:GetValue(),1,aC))E:SetCaretPos(aC)end;gamemode.Call('ChatTextChanged',E:GetValue())end;self.txtEntry.AllowInput=function(E)local aC=hook.Run('PlayerGetChatLimit',LocalPlayer())||chat.DefaultLimit;if string.len(E:GetValue())>=aC then surface.PlaySound('Resource/warning.wav')return true end end;self.emotes=ui.Create('ui_button',self)self.emotes:SetText('')self.emotes:SetVisible(false)self.emotes.PaintOver=function(E,M,N)l('â˜º','ui.29',12,9,ui.col.White,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER)end;self.emotes.DoClick=function()if IsValid(self.emotesList)then self.emotesList:AddFavorites()self.emotesList:AddRecents()self.emotesList:SetVisible(!self.emotesList:IsVisible())else self.emotesList=ui.Create('ba_emotes_list',self)end end;self.OvermsgFrame=vgui.Create('Panel',self)self.Scrollbar=vgui.Create('ba_chatscrollbar',self.OvermsgFrame)self.Scrollbar:SetMouseInputEnabled(true)self.Scrollbar:Dock(RIGHT)self.Scrollbar:SetWidth(12)self.Scrollbar:SetChatbox(self)self.Scrollbar:SetSkin('SUP')local aD={}self.OvermsgFrame.Think=function(E)local G,H=self.activeMessageFrame:LocalCursorPos()aD[1]=G;aD[2]=H;local aE,aF,aG,aH;if self.Selecting then if self.MouseDown[2]>aD[2]then aE=aD[1]aF=aD[2]aG=self.MouseDown[1]aH=self.MouseDown[2]else aE=self.MouseDown[1]aF=self.MouseDown[2]aG=aD[1]aH=aD[2]end;self.SelectedText=''for a5,a6 in ipairs(self.activeMessageFrame.LabelObjects)do if a6:IsVisible()then if aF<=a6.y&&aH>a6.y+a6:GetTall()then a6._SelStart=0;a6._SelEnd=a6:GetWide()elseif aF>=a6.y&&aF<=a6.y+a6:GetTall()-1 then if aH>a6.y+a6:GetTall()then a6._SelStart=aE;a6._SelEnd=a6:GetWide()else if aE<aG then a6._SelStart=aE;a6._SelEnd=aG else a6._SelStart=aG;a6._SelEnd=aE end end elseif aH>=a6.y&&aH<=a6.y+a6:GetTall()then if aF<=a6.y+10 then a6._SelStart=0;a6._SelEnd=aG else if aE<aG then a6._SelStart=aE;a6._SelEnd=aG else a6._SelStart=aG;a6._SelEnd=aE end end else a6._SelStart=0;a6._SelEnd=0 end end;if a6._SelStart!=0||a6._SelEnd!=0 then self.SelectedText=a6:GetSelText()..self.SelectedText end end end end;self.OvermsgFrame.OnMouseWheeled=function(E,...)return self.activeMessageFrame:OnMouseWheeled(...)end;self.OvermsgFrame.OnMousePressed=function(E,ad)self.MouseDown={self.activeMessageFrame:LocalCursorPos()}self.Selecting=true end;self.OvermsgFrame.OnMouseReleased=function(E,ad)self.Selecting=false end;self:PerformLayout(self:GetWide(),self:GetTall())end;function ac:OnKeyCodePressed(a5)if a5==KEY_C&&input.IsKeyDown(KEY_LCONTROL)&&(self.SelectedText&&self.SelectedText!='')then SetClipboardText(self.SelectedText)elseif a5==KEY_ENTER then self.txtEntry:OnKeyCodeTyped(KEY_ENTER)end end;function ac:PerformLayout(M,N)self.txtEntry:SetFont(a)local aI=25;self.txtEntry:SetPos(5,N-aI-5)self.txtEntry:SetSize(M-aI-15,aI)self.emotes:SetSize(aI,aI)self.emotes:SetPos(M-aI-5,N-aI-5)if IsValid(self.emotesList)then self.emotesList:SetSize(185,N-aI-40)self.emotesList:SetPos(M-self.emotesList:GetWide()-5,N-self.emotesList:GetTall()-aI-10)end;self.btnResize:SetSize(10,10)self.btnResize:SetPos(M-10,28)self.propSheet:SetPos(5,5)self.propSheet:SetSize(M-10,self.txtEntry.y-10)if!self.activeMessageFrame then self.activeMessageFrame=self:GetSheet("All",false)self:AddMessage(nil,{Color(255,100,0),'| ',Color(255,255,255),'Welcome to ',Color(51,128,255),'SUP!'})end;for a5,a6 in pairs(self.Sheets)do a6.Frame:Dock(FILL)end;self.OvermsgFrame:SetPos(5+self.activeMessageFrame.x,5+self.activeMessageFrame.y)self.OvermsgFrame:SetSize(M-self.OvermsgFrame.x*2,self.txtEntry.y-self.OvermsgFrame.y-5)self.InvalidateVisibleMessages=true end;function ac:Think()if self._Open&&gui.IsGameUIVisible()then self:Close()return end;if self.InvalidateVisibleMessages&&string.IsNilOrEmpty(self.SelectedText)then self.InvalidateVisibleMessages=nil;self:PerformVisibleMessageLayout()end;if!self.Resizing then return end;if!input.IsMouseDown(MOUSE_LEFT)then self:DoResize()self.Resizing=false;hook.Remove('PostDrawHUD','resizeChatbox')end end;function ac:DrawResize()local aJ=math.Clamp(gui.MouseX()-chat.GetChatBoxLeftBound(),265,ScrW()-23)+3;local aK=math.Clamp(chat.GetChatBoxBottomBound()-gui.MouseY(),155,ScrH()-23)+3;local am,an=chat.GetChatBoxPos(aJ,aK)surface.SetDrawColor(ui.col.White)surface.DrawOutlinedRect(am,an,aJ,aK)end;function ac:DoResize()local M=math.Clamp(gui.MouseX()-chat.GetChatBoxLeftBound(),265,ScrW()-23)+3;local N=math.Clamp(chat.GetChatBoxBottomBound()-gui.MouseY(),155,ScrH()-23)+3+26;if M!=self:GetWide()||N!=self:GetTall()then self.CachedMessageWraps={}self:SetSize(M,N)self:SetPos(chat.GetChatBoxPos(M,N))self:InvalidateLayout(true)cvar.SetValue('ChatboxSize',{self:GetWide(),self:GetTall()})end end;local aL=ui.col.Background:Copy()function ac:Paint(M,N)self.ShouldDraw=hook.Call('HUDShouldDraw',GAMEMODE,'Chatbox')if!self.ShouldDraw then return true end;local ab=0;if self._OpenTime then ab=math.Clamp((SysTime()-self._OpenTime)/.25,0,1)elseif self._CloseTime then ab=1-math.Clamp((SysTime()-self._CloseTime)/.25,0,1)end;self:SetAlpha(ab*255)for a5,a6 in ipairs(self:GetChildren())do a6:SetAlpha(ab*255)end;for a5,a6 in ipairs(self.propSheet:GetChildren())do a6:SetAlpha(ab*255)end;for a5,a6 in pairs(self.Sheets)do a6.Tab:SetAlpha(ab*255)local aM,aN=a6.Tab:LocalToScreen(0,0)aM=aM-self.x-5;aN=aN-self.y-5;surface.SetAlphaMultiplier(a6.Frame.Attention&&1||ab)a6.Tab:Paint(a6.Tab:GetWide(),a6.Tab:GetTall(),aM,aN)surface.SetAlphaMultiplier(1)end;if ab==0 then return end;local aM,aN,aO,aP=self:GetBounds()local aQ=self.activeMessageFrame.y;N=N-aQ;n(aM,aN+aQ,aO,aP-aQ)aL.a=150*ab;draw.RoundedBox(5,0,aQ,M,N,aL)end;function ac:PrepareMessage(t)local aR=''local aS={}local aT={}local aU={}local Q=self.PendingFont||a;table.insert(aS,{Col=Color(200,200,200),Pos=1})if!cvar.GetValue('DisableEmotes')&&self.DoEmotes then z(t)end;self.DoEmotes=false;self.PendingFont=nil;if#t==0 then return end;for a5,a6 in ipairs(t)do if istable(a6)&&a6.mat!=nil then aR=aR..'*'aU[aT[table.insert(aT,{Emote=a6,Pos=#aR})].Pos]=true elseif isstring(a6)||isnumber(a6)then if a6[1]=='>'then table.insert(aS,{Col=Color(140,200,100),Pos=string.len(aR)})end;aR=aR..a6 elseif isplayer(a6)then if string.len(aR)==0 then table.remove(aS,1)end;table.insert(aS,{Col=IsValid(a6)&&a6:GetJobColor()||ui.col.Grey:Copy(),Pos=string.len(aR)+1})aR=aR..(IsValid(a6)&&a6:Name()||'Unknown')else if string.len(aR)==0 then table.remove(aS,1)end;table.insert(aS,{Col=a6:Copy(),Pos=string.len(aR)+1})end end;self.MessageCount=self.MessageCount+1;return{ID=self.MessageCount,Font=Q,Strings=aR,Colors=aS,Emotes=aT,EmotePositions=aU,Created=SysTime(),Expire=SysTime()+15}end;function ac:GetMessageWrapping(R)if self.CachedMessageWraps[R.ID]!=nil then return self.CachedMessageWraps[R.ID],true end;local aV=ba.ui.WordWrap(R.Font||a,R.Strings,self:GetWide()-25,R.EmotePositions)self.CachedMessageWraps[R.ID]=aV;return aV,false end;function ac:PerformVisibleMessageLayout()local ah=self.activeMessageFrame;if!IsValid(ah)then return end;local aW=self.ChatHistory[ah.Name]if ah.chatBuffer==nil then ah.chatBuffer=vgui.Create('Panel',ah)ah.chatBuffer:Dock(BOTTOM)ah.chatBuffer:SetTall(0)end;local aX=ah.chatBuffer;local aY=ah.OffsetCount||0;local aZ=ah.LabelObjects;local a_=1;local function b0()local b1;if#aZ>=a_ then b1=aZ[a_]b1:SetVisible(true)else b1=vgui.Create('ba_chatlabel',ah)b1:Dock(BOTTOM)b1:SetFont(a)b1:SetCursor("beam")aZ[a_]=b1 end;a_=a_+1;return b1 end;local b2={}local b3=0;for W=#aW-aY,1,-1 do local R=aW[W]if!R then break end;surface.SetFont(R.Font||a)local b4,Y=surface.GetTextSize(R.Strings)b3=b3+math.max(Y,20)if b3>ah:GetTall()then break end;local aV,b5=self:GetMessageWrapping(R)table.Empty(b2)for a5,a6 in ipairs(aV)do if a6==''then continue end;b2[a5]=b0()end;local b6=1;for a5,a6 in ipairs(aV)do if a6==''then continue end;local b1=b2[1+#aV-a5]if b5&&b1.MessageID==R.ID&&b1.WrapID==a5 then continue end;b1:Reset()b1:SetMetaData(self,R,a5)for W,b7 in ipairs(R.Colors)do if b7.Pos<=b6&&(!R.Colors[W+1]||R.Colors[W+1].Pos>b6)then b1:AddColor(1,b7.Col)elseif b7.Pos>=b6&&b7.Pos<b6+#a6 then b1:AddColor(b7.Pos-b6+1,b7.Col)end end;for W,b7 in ipairs(R.Emotes)do if b7.Pos>=b6&&b7.Pos<b6+#a6 then b1:AddEmote(b7.Pos-b6+1,b7.Emote)end end;b1:SetText(a6)b6=b6+#a6 end end;for W=a_,#aZ do aZ[W]:SetVisible(false)end;if aY==0&&b3<ah:GetTall()then aX:SetTall(ah:GetTall()-b3)ah.MaxOffset=nil else aX:SetTall(0)local K=#aW*20;ah.MaxOffset=math.floor((K-ah:GetTall())/20)if(ah.OffsetCount||0)>ah.MaxOffset then ah.OffsetCount=ah.MaxOffset;self:PerformVisibleMessageLayout()end end;self.Scrollbar:PerformLayout()end;function ac:AddMessage(b8,t)chat.PlaySound()local b9=false;if b8==nil then if self.PendingChatTab!=nil then b8=self.PendingChatTab elseif self.PendingChatTabSteamID!=nil then b8=self.PendingChatTabSteamID;b9=true else b8='All'end;self.PendingChatTab=nil;self.PendingChatTabSteamID=nil end;if t==nil then return end;local R=self:PrepareMessage(t)if b8=='All'||hook.Run('ShouldCreateChatTab',b8,b9)!=false then self:_AddMessage(b8,R,b9)end;if b8!='All'&&!self.SkipMessageInAll then self:_AddMessage('All',R,b9)self.SkipMessageInAll=false end end;function ac:_AddMessage(b8,R,b9)self.ChatHistory[b8]=self.ChatHistory[b8]||{}table.insert(self.ChatHistory[b8],R)if self.ChatHistory[b8][500]then local bb=table.remove(self.ChatHistory[b8],1)self.CachedMessageWraps[bb.ID]=nil end;local ah=self.activeMessageTab||self:GetSheet(b8,b9)if ah!=self.activeMessageFrame then ah.Attention=SysTime()return end;if(self.activeMessageFrame.OffsetCount||0)!=0 then self.activeMessageFrame.OffsetCount=math.min(self.activeMessageFrame.OffsetCount+1,self.activeMessageFrame.MaxOffset)end;self.InvalidateVisibleMessages=true end;function ac:CalculateAutoFill()local bc=self.AutoNames[self.CurrentAutoName]table.Empty(self.AutoNames)local bd=string.Explode(' ',self.txtEntry:GetValue())match=bd[#bd]if!match||match==''then self.CurrentAutoName=0;return end;local be=LocalPlayer():IsVIP()&&string.StartWith(match,':')if be then for a5,a6 in pairs(ba.chatEmotes)do if(string.find(a5:lower(),match:lower(),1,true)||-1)==1 then self.AutoNames[#self.AutoNames+1]={Name=a5,SteamID=a5,NameID=a5}end end else for U,a6 in player.Iterator()do if(string.find(a6:Name():lower(),match:lower(),1,true)||-1)==1 then if bc&&bc.SteamID==a6:SteamID()then self.CurrentAutoName=#self.AutoNames+1 end;self.AutoNames[#self.AutoNames+1]={Name=a6:Name(),SteamID=a6:SteamID(),NameID=a6:NameID()}end end end end;function ac:GetAutoFill(bf)bf=bf||0;local bd=string.Explode(' ',self.txtEntry:GetValue())match=bd[#bd]if!match||match==''then return end;self.CurrentAutoName=self.CurrentAutoName+bf;if!self.AutoNames[self.CurrentAutoName]then self.CurrentAutoName=self.CurrentAutoName<=0&&#self.AutoNames||1 end;local bg=self.AutoNames[self.CurrentAutoName]if bg then bg.CompleteString=string.sub(bg.Name,#match+1)end;return bg end;function ac:DoAutoFill()local ap=self:GetAutoFill()if!ap then return end;local bd=string.Explode(' ',self.txtEntry:GetValue())match=bd[#bd]if!match||match==''then return end;local bh=string.sub(self.txtEntry:GetValue(),1,1)local bi;local bj=string.sub(self.txtEntry:GetValue(),1,(string.find(self.txtEntry:GetValue(),' ')||#self.txtEntry:GetValue()+1)-1)if(bh=='/'||bh=='!')&&(bj!='//'&&bj!='/ooc'&&bj!='/ad'&&bj!='/advert')&&!ret then bi=ap.SteamID elseif bh=='@'then bi=ap.NameID else bi=ap.Name end;self.txtEntry:SetText(string.sub(self.txtEntry:GetValue(),1,-(#match+1))..bi..' ')end;function ac:Open(bk)if CHATBOX&&CHATBOX.ShouldDraw==false then return end;self._Open=true;self._OpenTime=SysTime()self._CloseTime=nil;self._Team=bk;self._OpenedWithTeam=bk;gamemode.Call('StartChat')self:MakePopup()self:MoveToFront()self.txtEntry:SetVisible(true)self.txtEntry:RequestFocus()self.txtEntry.historyPos=0;self.emotes:SetVisible(true)end;function ac:Close()if!self._Open then return end;self.Selecting=false;self.SelectedText=''if self.ForceOpen then gamemode.Call('FinishChat')gamemode.Call('ChatTextChanged','')self.txtEntry:SetText('')return end;self._Open=false;self._OpenTime=nil;self._CloseTime=SysTime()for a5,a6 in pairs(self.Sheets)do a6.Frame.OffsetCount=nil;a6.Frame.Attention=false;self.InvalidateVisibleMessages=true end;gamemode.Call('FinishChat')self:SetMouseInputEnabled(false)self:SetKeyboardInputEnabled(false)gamemode.Call('ChatTextChanged','')self.txtEntry:SetText('')self.txtEntry:OnTextChanged()if IsValid(self.emotesList)then self.emotesList:SetVisible(false)end;self:MoveToBack()end;derma.DefineControl('ba_chatbox','Badmin Chatbox',ac,'EditablePanel')if CHATBOX then CHATBOX:Remove()CHATBOX=ba.CreateChatBox()end
--addons/!lpakr_out/lua/badmin/modules/chatbox/init_sh.lua:
hook.Add('PlayerGetChatLimit','ba.chat.PlayerGetChatLimit',function(a)if IsValid(a)then if a:IsRoot()then return 16384 elseif a:IsAdmin()then return chat.DefaultLimit+100 elseif a:IsVIP()then return chat.DefaultLimit+50 end end end)if SERVER then else cvar.Register'enable_non_pm_chat_tabs':SetDefault(false,true):AddMetadata('Category','Chat'):AddMetadata('Menu','Create a chatbox tab for chats other than PMs')hook.Add('ShouldCreateChatTab','rp.chat.ShouldCreateChatTab',function(b,c)if!cvar.GetValue('enable_non_pm_chat_tabs')&&c==false then return false end end)end;term.Add('NoPMResponder','There\'s nobody to respond to!')nw.Register'IsTyping':Write(net.WriteBool):Read(net.ReadBool):SetPlayer():SetNoSync()local d=false;chat.Register'PM':Write(function(self,a,e,f)net.WritePlayer(a)net.WritePlayer(e)net.WriteString(f)end):Read(function()local a,e=net.ReadPlayer(),net.ReadPlayer()if!IsValid(a)||!IsValid(e)||a:IsBlocked()then return end;local g=e==LocalPlayer()local h=g&&a||e;if cvar.GetValue('PMNotify')&&g then surface.PlaySound('friends/message.wav')system.FlashWindow()end;chat.SetTabSteamID(h:SteamID())if!d&&a!=LocalPlayer()then chat.AddText(ui.col.White,'TIP: You may block future messages from '..a:Name()..' in the scoreboard.')d=true end;chat.SetTabSteamID(h:SteamID())chat.EnableEmotes(a:IsVIP())local i=h:GetChatTag()i=i==''&&i||i..' 'return ui.col.Yellow,'[PM '..(g&&'FROM'||'TO')..'] ',i,h:GetJobColor(),h:Name(),': ',ui.col.White,net.ReadString()end):Filter(function(a,e,f)return{e,a}end)function PLAYER:IsTyping()return self:GetNetVar('IsTyping')==true end;ba.AddCommand('pm',function(a,e,j)if a:IsChatMuted()then return end;chat.Send('PM',a,e,j)e.LastPM=a end):AddParam(cmd.PLAYER_ENTITY):AddParam(cmd.STRING):SetChatCommand():SetIgnoreImmunity(true)ba.AddCommand('re',function(a,j)if a:IsChatMuted()then return end;local e=a.LastPM;if IsValid(e)then chat.Send('PM',a,e,j)e.LastPM=a else return NOTIFY_ERROR,term.Get('NoPMResponder')end end):AddParam(cmd.STRING):SetChatCommand():SetIgnoreImmunity(true)ba.AddCommand('clearchat',function(a)net.Start'ba.chatbox.Clear'net.Broadcast()end):SetHelp('Clears the chatbox/console for everyone. Use with extreme caution!'):SetFlag'D'if SERVER then else net('ba.chatbox.Clear',function()CHATBOX:Remove()CHATBOX=ba.CreateChatBox()end)end
--addons/!lpakr_out/lua/badmin/modules/player_blocking/init_sh.lua:
return lpakr()()
--addons/!lpakr_out/lua/badmin/modules/voice_vis/init_cl.lua:
local a={}local b={}local c=Material'sup/hud/istalking'local d=Material'sup/hud/voice_muted.png'function a:Init()self.Avatar=ui.Create('ui_imagebutton',self)self.Name=ui.Create('DLabel',self)self.Name:SetFont('ui.15')self.Name:SetTextColor(ui.col.White)self.Info=ui.Create('DLabel',self)self.Info:SetFont('ui.12')self.Info:SetTextColor(ui.col.LightGrey)self:SetTall(40)self:DockPadding(4,4,4,4)self:DockMargin(2,2,2,2)self:Dock(BOTTOM)self:SetAlpha(0)hook('PlayerEndVoice',self,function(self,e)if e==self.Player&&!self.FadeOutAnim then self:FadeOut()end end)end;function a:PerformLayout(f,g)self.Avatar:SetPos(4,4)self.Avatar:SetSize(g-8,g-8)local h,i=self.Avatar:GetPos()h,i=g*0.5,i+self.Avatar:GetWide()+4;self.Name:SetPos(i,h-(self.Info:GetText()==""&&self.Name:GetTall()*0.5||self.Name:GetTall()-2))self.Info:SetPos(i,h)end;function a:Setup(e)local j=hook.Call('PlayerGetVoiceData',nil,e)||{}self.Avatar:SetPlayer(e)self.Name:SetText(j.Name||e:Name())self.Name:SizeToContents()self.Info:SetText(j.Info||e:GetOrg()||"")self.Info:SizeToContents()self.OutlineColor=j.OutlineColor||e:GetJobColor()self.Player=e;b[self.Player]=self;self:InvalidateLayout()end;function a:Paint(f,g)if!IsValid(self.Player)||hook.Call('HUDShouldDraw',nil,'VoiceBox')==false then return end;draw.RoundedBox(5,1,1,f-2,g-2,self.OutlineColor,3)draw.RoundedBox(5,3,3,f-6,g-6,ui.col.Black)local k=self.Player:IsVoiceMuted()if self.Player:IsVoiceMuted()then local l=28;surface.SetMaterial(k&&d||c)surface.SetDrawColor(255,255,255)surface.DrawTexturedRect(f-34,6,l,l)else local l=32;surface.SetMaterial(k&&d||c)surface.SetDrawColor(255,255,255)c:SetString('$alpha',self:GetAlpha()/255)surface.DrawTexturedRect(f-30,3,l,l)end end;function a:Think()if self.FadeInAnim then self.FadeInAnim:Run()end;if self.FadeOutAnim then self.FadeOutAnim:Run()end;if!IsValid(self.Player)&&!self.FadeOutAnim then self:FadeOut()end end;function a:FadeIn()self.FadeInAnim=Derma_Anim('Fade Panel',self,function(m,n,o,j)m:SetAlpha(o*255)if n.Finished then self.FadeInAnim=nil end end)if self.FadeInAnim then self.FadeInAnim:Start(0.2)end end;function a:FadeOut()self.FadeOutAnim=Derma_Anim('Fade Panel',self,function(m,n,o,j)m:SetAlpha(255-o*255)if n.Finished then self:Remove()b[self.Player]=nil end end)if self.FadeOutAnim then self.FadeOutAnim:Start(0.2)end end;derma.DefineControl('ba_VoiceNotify','',a,'DPanel')hook('PlayerStartVoice','ba.voicevis.PlayerStartVoice',function(e)if!IsValid(g_VoicePanelList)||!IsValid(e)then return end;local p=b[e]if IsValid(p)then if p.FadeOutAnim then p.FadeOutAnim:Stop()p.FadeOutAnim=nil;p:FadeIn()end else local p=g_VoicePanelList:Add('ba_VoiceNotify')p:Setup(e)p:FadeIn()end end)hook('InitPostEntity','ba.voicevis.InitPostEntity',function()timer.Simple(0,function()g_VoicePanelList:SetPos(ScrW()-225,10)g_VoicePanelList:SetSize(215,ScrH()-110)end)end)if IsValid(g_VoicePanelList)then g_VoicePanelList:Clear()end
--addons/!lpakr_out/lua/prone/config.lua:
prone.config.DefaultBindKey_Enabled=true;prone.config.DefaultBindKey=KEY_LCONTROL;prone.config.DefaultBindKey_DoubleTap=true;prone.config.DefaultJumpToGetUp=true;prone.config.DefaultJumpToGetUp_DoubleTap=false;prone.config.MoveSpeed=50;prone.config.TransitionSpeed=15;prone.config.MoveShoot_Restrict=true;prone.config.MoveShoot_Whitelist={weapon_physgun=true,weapon_physcannon=true,gmod_tool=true}prone.config.HullHeight=24;prone.config.View=Vector(0,0,24)prone.animations.gettingdown="pronedown_stand"prone.animations.gettingup="proneup_stand"prone.animations.passive="prone_walkpassive"prone.animations.gettingdown_crouch="pronedown_crouch"prone.animations.gettingup_crouch="proneup_crouch"prone.animations.WeaponAnims={moving={ar2="prone_walktwohand",camera="prone_walkonehand",crossbow="prone_walkcrossbow",duel="prone_walkcrossbow",fist="prone_walkpassive",grenade="prone_walkonehand",knife="prone_walkpassive",magic="prone_walkpassive",melee="prone_walkonehand",melee2="prone_walkonehand",normal="prone_walkpassive",passive="prone_walkpassive",pistol="prone_walkonehand",physgun="prone_walkphysgun",revolver="prone_walkonehand",rpg="prone_walkrpg",shotgun="prone_walktwohand",slam="prone_walkonehand",smg="prone_walktwohand"},idle={ar2="prone_ar2",camera="prone_camera",crossbow="prone_crossbow",duel="prone_crossbow",fist="prone_knife",grenade="prone_grenade",knife="prone_knife",magic="prone_knife",melee="prone_melee",melee2="prone_melee2",normal="prone_passive",passive="prone_passive",pistol="prone_pistol",physgun="prone_physgun",revolver="prone_revolver",rpg="prone_rpg",shotgun="prone_shotgun",slam="prone_slam",smg="prone_smg1"}}
--addons/!lpakr_out/lua/prone/sh_prone.lua:
return lpakr()()